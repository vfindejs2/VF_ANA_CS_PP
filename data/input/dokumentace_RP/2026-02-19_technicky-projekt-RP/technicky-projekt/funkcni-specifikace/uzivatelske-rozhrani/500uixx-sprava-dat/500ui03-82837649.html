<!DOCTYPE html>
<html lang="cs">
<head>
  <meta charset="utf-8">
  <title>500UI03: Formulář zákazníka</title>
</head>
<body>
<div class="wiki-content">
<p></p><h1>Stručný popis</h1><p>Formulář slouží k založení či editaci <a href="../../../datove-modely/datovy-78681044.html">Zákazníka</a>, který je jeho nepovinným vstupním parametrem.</p><h1>Uživatelské rozhraní</h1><p>Pro vyhodnocení, zda jsou aktuálně zobrazené informace o zákazníkovi načteny z rejstříku podnikatelských subjektů, je doplněna pomocná proměnná <strong>Načten z rejstříku</strong>. Její nastavení může probíhat ve dvou různých případech:</p><ul><li>Zobrazení formuláře – nastaveno dle na vstupu získané instance entity <a href="../../../datove-modely/datovy-78681044.html">Zákazník</a>:<br><ul><li>pokud není instance k dispozici: FALSE,</li><li>jinak: hodnota atributu Načten z rejstříku entity <a href="../../../datove-modely/datovy-78681044.html">Zákazník</a>.</li></ul></li><li>„Běh“ formuláře – nastaveno v rámci konkrétního UC, který formulář využívá.</li></ul><p>Po úspěšném uložení změn je u tohoto <a href="../../../datove-modely/datovy-78681044.html">Zákazníka</a> aktualizována i hodnota atributu Načten z rejstříku. Nastavení hodnoty se pak liší dle typu <a href="../../../datove-modely/datovy-78681044.html">Zákazníka</a> (atribut Typ zákazníka):</p><ul><li>Podnikatel: dle pomocné proměnné <strong>Načten z rejstříku.</strong></li><li>Nepodnikatel: FALSE.</li></ul><h2>Rozložení</h2><h3>Drátový diagram</h3><p><img src="500ui03-formular-zakaznika-82837649_images/image2020-7-28 14-21-1.png" data-attachment="true"></p><h3>Přehled UI komponent</h3><table><tbody><tr><th>Callout</th><th>Komponenta (podnikatel)</th><th colspan="1">Nadpis (podnikatel)</th><th colspan="1">Komponenta (nepodnikatel)</th><th colspan="1">Nadpis (nepodnikatel)</th><th>Typ komponenty</th><th>Příklad hodnoty</th><th colspan="1">Hodnota</th><th colspan="1">Výchozí hodnota</th><th colspan="1">Formát</th><th colspan="1">Zpřístupněná</th><th colspan="1">Viditelná</th><th>Chování</th><th colspan="1">Validace</th><th colspan="1">Poznámka</th></tr><tr><td colspan="1">1</td><td colspan="1">Typ zákazníka</td><td colspan="1">–</td><td colspan="1">Typ zákazníka</td><td colspan="1">–</td><td colspan="1">RadioButton</td><td colspan="1">Podnikatel</td><td colspan="1">Entita <a href="../../../datove-modely/datovy-78681044.html">Zákazník</a>.</td><td colspan="1">Podnikatel</td><td colspan="1"><Typ zákazníka></td><td colspan="1">Vždy</td><td colspan="1">Vždy</td><td colspan="1"><a href="500ui03-82837649.html">Změna typu zákazníka</a></td><td colspan="1">–</td><td colspan="1">–</td></tr><tr><td colspan="1">2</td><td colspan="1">Najít podnikatelský subjekt</td><td colspan="1">Najít subjekt</td><td colspan="1">–</td><td colspan="1">–</td><td colspan="1">AutoSuggestTextBox</td><td colspan="1">–</td><td colspan="1">–</td><td colspan="1">–</td><td colspan="1">–</td><td colspan="1">Vždy</td><td colspan="1">Pokud je Typ zákazníka nastaven na hodnotu Podnikatel.</td><td colspan="1"><p>Pokud uživatel vstoupí do ovládacího prvku, systém spustí <a href="#" data-page-title="500UC02: Najít zákazníka v rejstříku podnikatelských subjektů"></a>, na vstup UC pak nejsou předány žádné hodnoty.</p></td><td colspan="1">–</td><td colspan="1">–</td></tr><tr><td colspan="1">3</td><td colspan="1">Název</td><td colspan="1">Název*</td><td colspan="1">Jméno a příjmení</td><td colspan="1">Jméno a příjmení*</td><td colspan="1">TextBox</td><td colspan="1">Marius Pedersen, a.s.</td><td colspan="1">Entita <a href="../../../datove-modely/datovy-78681044.html">Zákazník</a>.</td><td colspan="1">–</td><td colspan="1"><Název></td><td colspan="1"><a href="500ui03-82837649.html">Dostupnost změny informací o zákazníkovi</a></td><td colspan="1">Vždy</td><td colspan="1">–</td><td colspan="1"><p>Povinný.</p><p>Maximálně 255 znaků.</p></td><td colspan="1">–</td></tr><tr><td colspan="1">4</td><td colspan="1">Adresa sídla</td><td colspan="1">Adresa sídla</td><td colspan="1">Adresa</td><td colspan="1">Adresa</td><td colspan="1">TextBox</td><td colspan="1">Opatovská 1735, 911 01 Trenčín</td><td colspan="1">Entita <a href="../../../datove-modely/datovy-78681044.html">Adresa</a> – atribut Adresa sídla entity <a href="../../../datove-modely/datovy-78681044.html">Zákazník</a>.</td><td colspan="1">–</td><td colspan="1"><p><Ulice> <Číslo popisné>/<Číslo orientační>, <PSČ> <Město></p><p>Pokud není dostupné Číslo orientační:</p><ul><li><Ulice> <Číslo popisné>, <PSČ> <Město></li></ul><p>Pokud není dostupné Číslo popisné:</p><ul><li><Ulice> <Číslo orientační>, <PSČ> <Město></li></ul></td><td colspan="1"><p>Pouze přes tlačítko editace.</p><p><a href="500ui03-82837649.html">Dostupnost změny informací o zákazníkovi</a></p></td><td colspan="1">Vždy</td><td colspan="1">–</td><td colspan="1">–</td><td colspan="1">Ovládací prvek obsahuje křížek pro zrušení hodnoty obdobně jako klasická textová pole.</td></tr><tr><td colspan="1">5</td><td colspan="1">Právní forma</td><td colspan="1">Právní forma</td><td colspan="1">–</td><td colspan="1">–</td><td colspan="1">AutoSuggestTextBox</td><td colspan="1">Akciová spoločnosť</td><td colspan="1">Entita <a href="../../../datove-modely/datovy-78681044.html">Právní forma</a> – atribut Právní forma entity <a href="../../../datove-modely/datovy-78681044.html">Zákazník</a>.</td><td colspan="1">–</td><td colspan="1"><Název></td><td colspan="1"><a href="500ui03-82837649.html">Dostupnost změny informací o zákazníkovi</a></td><td colspan="1">Pokud je Typ zákazníka nastaven na hodnotu Podnikatel.</td><td colspan="1">–</td><td colspan="1">–</td><td colspan="1"><p>Dostupné hodnoty vychází z číselníku s Právními formami.</p><p>Není možné zadat vlastní hodnotu.</p></td></tr><tr><td colspan="1">6</td><td colspan="1">IČO</td><td colspan="1">IČO</td><td colspan="1">Číslo OP</td><td colspan="1">Číslo OP</td><td colspan="1">TextBox</td><td colspan="1">34115901</td><td colspan="1">Entita <a href="../../../datove-modely/datovy-78681044.html">Zákazník</a>.</td><td colspan="1">–</td><td colspan="1"><IČO></td><td colspan="1"><a href="500ui03-82837649.html">Dostupnost změny informací o zákazníkovi</a></td><td colspan="1">Vždy</td><td colspan="1">–</td><td colspan="1"><p>Maximálně 20 znaků.</p></td><td colspan="1">–</td></tr><tr><td colspan="1">7</td><td colspan="1">DIČ</td><td colspan="1">DIČ</td><td colspan="1">–</td><td colspan="1">–</td><td colspan="1">TextBox</td><td colspan="1">2020386148</td><td colspan="1">Entita <a href="../../../datove-modely/datovy-78681044.html">Zákazník</a>.</td><td colspan="1">–</td><td colspan="1"><DIČ></td><td colspan="1"><a href="500ui03-82837649.html">Dostupnost změny informací o zákazníkovi</a></td><td colspan="1">Pokud je Typ zákazníka nastaven na hodnotu Podnikatel.</td><td colspan="1">–</td><td colspan="1">Maximálně 20 znaků.</td><td colspan="1">–</td></tr><tr><td colspan="1">8</td><td colspan="1">IČ DPH</td><td colspan="1">IČ DPH</td><td colspan="1">–</td><td colspan="1">–</td><td colspan="1">TextBox</td><td colspan="1">SK2020386148</td><td colspan="1">Entita <a href="../../../datove-modely/datovy-78681044.html">Zákazník</a>.</td><td colspan="1">–</td><td colspan="1"><IČ DPH></td><td colspan="1"><a href="500ui03-82837649.html">Dostupnost změny informací o zákazníkovi</a></td><td colspan="1">Pokud je Typ zákazníka nastaven na hodnotu Podnikatel.</td><td colspan="1">–</td><td colspan="1">Maximálně 20 znaků.</td><td colspan="1">–</td></tr><tr><td colspan="1">9</td><td colspan="1">Plátce DPH</td><td colspan="1">Plátce DPH</td><td colspan="1">–</td><td colspan="1">–</td><td colspan="1">CheckBox</td><td colspan="1">TRUE</td><td colspan="1">Entita <a href="../../../datove-modely/datovy-78681044.html">Zákazník</a>.</td><td colspan="1">FALSE</td><td colspan="1"><Plátce DPH></td><td colspan="1"><a href="500ui03-82837649.html">Dostupnost změny informací o zákazníkovi</a></td><td colspan="1">Pokud je Typ zákazníka nastaven na hodnotu Podnikatel.</td><td colspan="1">–</td><td colspan="1">Povinný.</td><td colspan="1">–</td></tr><tr><td colspan="1">10</td><td colspan="1">Osoby zákazníka</td><td colspan="1">Osoby zákazníka</td><td colspan="1">Osoby zákazníka</td><td colspan="1">Osoby zákazníka</td><td colspan="1">TextBox</td><td colspan="1">Simon Hovgaard Clausen</td><td colspan="1">Entita <a href="../../../datove-modely/datovy-78681044.html">Osoba zákazníka</a> – atribut Osoby entity <a href="../../../datove-modely/datovy-78681044.html">Zákazník</a>.</td><td colspan="1">–</td><td colspan="1"><Jméno> <Příjmení></td><td colspan="1">Vždy</td><td colspan="1">Vždy</td><td colspan="1"><a href="500ui03-82837649.html">Odebrání záznamu ze skupiny</a></td><td colspan="1">–</td><td colspan="1">Ve výchozím stavu je vložena jedna prázdná položka.</td></tr><tr><td colspan="1">11</td><td colspan="1">Přidat osobu zákazníka</td><td colspan="1">–</td><td colspan="1">Přidat osobu zákazníka</td><td colspan="1">–</td><td colspan="1">Button</td><td colspan="1">–</td><td colspan="1">+ přidat další</td><td colspan="1">–</td><td colspan="1">–</td><td colspan="1">Vždy</td><td colspan="1">Vždy</td><td colspan="1"><a href="500ui03-82837649.html">Přidání záznamu do skupiny</a></td><td colspan="1">–</td><td colspan="1">–</td></tr><tr><td colspan="1">12</td><td colspan="1">Bankovní spojení</td><td colspan="1">Bankovní spojení</td><td colspan="1">Bankovní spojení</td><td colspan="1">Bankovní spojení</td><td colspan="1">TextBox</td><td colspan="1">SK70 7500 0000 0000 2581 8343</td><td colspan="1">Entita <a href="../../../datove-modely/datovy-78681044.html">Bankovní spojení</a> – atribut Bankovní spojení entity <a href="../../../datove-modely/datovy-78681044.html">Zákazník</a>.</td><td colspan="1">–</td><td colspan="1"><IBAN></td><td colspan="1">Vždy</td><td colspan="1">Vždy</td><td colspan="1"><a href="500ui03-82837649.html">Odebrání záznamu ze skupiny</a></td><td colspan="1">–</td><td colspan="1">Ve výchozím stavu je vložena jedna prázdná položka.</td></tr><tr><td colspan="1">13</td><td colspan="1">Přidat bankovní spojení</td><td colspan="1">–</td><td colspan="1">Přidat bankovní spojení</td><td colspan="1">–</td><td colspan="1">Button</td><td colspan="1">–</td><td colspan="1">+ přidat další</td><td colspan="1">–</td><td colspan="1">–</td><td colspan="1">Vždy</td><td colspan="1">Vždy</td><td colspan="1"><a href="500ui03-82837649.html">Přidání záznamu do skupiny</a></td><td colspan="1">–</td><td colspan="1">–</td></tr><tr><td colspan="1">14</td><td colspan="1">Poznámka</td><td colspan="1">Poznámka</td><td colspan="1">Poznámka</td><td colspan="1">Poznámka</td><td colspan="1">MultilineTextBox</td><td colspan="1">Doplnit kontaktní osoby.</td><td colspan="1">Entita <a href="../../../datove-modely/datovy-78681044.html">Zákazník</a>.</td><td colspan="1">–</td><td colspan="1"><Poznámka></td><td colspan="1">Vždy</td><td colspan="1">Vždy</td><td colspan="1">–</td><td colspan="1">Maximálně 255 znaků.</td><td colspan="1">–</td></tr><tr><td colspan="1">15</td><td colspan="1">Místa realizace</td><td colspan="1">Místa realizace</td><td colspan="1">Místa realizace</td><td colspan="1">Místa realizace</td><td colspan="1">TextBox</td><td colspan="1">Marius Pedersen, a.s., Trenčín</td><td colspan="1">Entita <a href="../../../datove-modely/datovy-78681044.html">Místo realizace</a> – atribut Místa realizace entity <a href="../../../datove-modely/datovy-78681044.html">Zákazník</a>.</td><td colspan="1">–</td><td colspan="1"><Název></td><td colspan="1">Vždy</td><td colspan="1">Vždy</td><td colspan="1"><a href="500ui03-82837649.html">Odebrání záznamu ze skupiny</a></td><td colspan="1">–</td><td colspan="1">Ve výchozím stavu je vložena jedna prázdná položka.</td></tr><tr><td colspan="1">16</td><td colspan="1">Přidat místo realizace</td><td colspan="1">–</td><td colspan="1">Přidat místo realizace</td><td colspan="1">–</td><td colspan="1">Button</td><td colspan="1">–</td><td colspan="1">+ přidat další</td><td colspan="1">–</td><td colspan="1">–</td><td colspan="1">Vždy</td><td colspan="1">Vždy</td><td colspan="1"><a href="500ui03-82837649.html">Přidání záznamu do skupiny</a></td><td colspan="1">–</td><td colspan="1">–</td></tr><tr><td colspan="1">17</td><td colspan="1">Vymazání obsahu formuláře</td><td colspan="1">–</td><td colspan="1">Vymazání obsahu formuláře</td><td colspan="1">–</td><td colspan="1"><p>Button</p><ul><li>Ikona: ra-cross.</li></ul></td><td colspan="1">–</td><td colspan="1">–</td><td colspan="1">–</td><td colspan="1">–</td><td colspan="1">Vždy</td><td colspan="1">Vždy</td><td colspan="1"><p><a href="500ui03-82837649.html">Vymazání obsahu formuláře</a></p><p>Po najetí myší na ikonu je zobrazena bublinková nápověda s uvedeným textem: Vymazání obsahu formuláře.</p></td><td colspan="1">–</td><td colspan="1">–</td></tr></tbody></table><h3>Chování</h3><h4>Změna typu zákazníka</h4><ol><li>KDYŽ uživatel nastaví Typ zákazníka na Podnikatel.<br><ol><li>Systém zobrazí ovládací prvky dle sloupce Komponenta (podnikatel).</li></ol></li><li>KDYŽ uživatel nastaví Typ zákazníka na Nepodnikatel.<br><ol><li>Systém zobrazí ovládací prvky dle sloupce Komponenta (nepodnikatel).</li></ol></li></ol><p>Poznámka:</p><ul><li>Pokud uživatel již nastavil hodnoty v některých ovládacích prvcích před změnou Typu zákazníka, systém zobrazí hodnoty uvedené před změnou Typu zákazníka.</li><li>Pokud není hodnota ve sloupci Komponenta uvedena, ovládací prvek není zobrazen.</li></ul><h4>Přidání záznamu do skupiny</h4><p>Vztahuje se ke komponentám Osoby zákazníka, Bankovní spojení a Místa realizace.</p><p>Po stisknutí tlačítka pro přidání záznamu je přidána nová komponenta, která není vyplněna a je zařazena za poslední komponentu skupiny.</p><h4>Odebrání záznamu ze skupiny</h4><p>Vztahuje se ke komponentám Osoby zákazníka, Bankovní spojení a Místa realizace.</p><p>Po stisknutí tlačítka pro odebrání záznamu je odebrána odpovídající komponenta ze skupiny. Pokud by po odebrání nezůstala ve skupině žádná položka, je automaticky přidána jedna prázdná.</p><h4>Dostupnost změny informací o zákazníkovi</h4><p>Může nastat situace, kdy uživatel načte informace o <a href="../../../datove-modely/datovy-78681044.html">Zákazníkovi</a> pomocí rejstříku podnikatelských subjektů (viz <a href="#" data-page-title="500UC02: Najít zákazníka v rejstříku podnikatelských subjektů">500UC02: Najít zákazníka v rejstříku podnikatelských subjektů</a>). V takovém případě může dojít k omezení dostupnosti odpovídajících ovládacích prvků:</p><ul><li>Název (komponenta 3),</li><li>Adresa sídla (komponenta 4),</li><li>Právní forma (komponenta 5),</li><li>IČO (komponenta 6),</li><li>DIČ (komponenta 7),</li><li>IČ DPH (komponenta 8),</li><li>Plátce DPH (komponenta 9).</li></ul><p>Pokud jsou pak splněny všechny dále uvedené podmínky, uvedené ovládací prvky nejsou uživateli zpřístupněny:</p><ul><li>Uvedené chování je spuštěno na úrovni nasazení aplikace – odpovídající konfigurační hodnota je nastavena na FALSE (customerFormAllowBusinessRegisterInformationChange, viz <a href="#" data-page-title="Konfigurační hodnoty">Konfigurační hodnoty</a>).</li><li>V rámci formuláře je zobrazen <a href="../../../datove-modely/datovy-78681044.html">Zákazník</a> typu Podnikatel (komponenta 1).</li><li>V rámci formuláře je zobrazen <a href="../../../datove-modely/datovy-78681044.html">Zákazník</a>, u kterého byly základní informace načteny z rejstříku podnikatelských subjektů (hodnota pomocné proměnné formuláře Načten z rejstříku je nastavena na TRUE).</li></ul><p>Poznámka: Případy, kdy uživatel např. nemá oprávnění k editaci, je řešeno samostatně – mimo uvedené chování.</p><p><em>V závěru uvedeme požadavky, na základě kterých vznikl tento postup. Důvodem je snazší pochopení smyslu požadovaného chování (jedná se pak o informace přímo z odpovídajícího návrhu řešení, viz <a href="#" data-page-title="ID-005: Omezení při vytváření zákazníka dle existujícího podnikatelského subjektu">ID-005: Omezení při vytváření zákazníka dle existujícího podnikatelského subjektu</a>):</em></p><ul><li><em>Jakmile uživatel načte zákazníka z rejstříku podnikatelských subjektů, dojde ve formuláři k uzamčení dále uvedených polí (není umožněna jejich editace): Název, Adresa sídla, Právní forma, IČO, DIČ, IČ DPH, Plátce DPH.</em></li><li><em>Pokud uživatel změní typ zákazníka na hodnotu Nepodnikatel, je umožněna editace uvedených polí. Pokud však uživatel opětovně změní typ zákazníka na hodnotu Podnikatel (a zároveň je ve formuláře stále vyplněn podnikatelský subjekt z externího systému), uvedená pole jsou opět znepřístupněna.</em></li><li><em>V rámci formuláře bude doplněno tlačítko pro jeho „vyčištění“, které nastaví formulář do výchozího stavu (není vyplněno žádné z polí). V takovém případě dojde k případnému odemčení uvedených polí, bude tedy umožněna jejich editace.</em></li><li><em>Poznámka: K zákazníkovi bude přidán atribut <strong>Načten z externího systému</strong>. Ten zajistí znemožnění editace uvedených polí i v případě, kdy uživatel zákazníka uloží a opětovně spustí jeho editaci.</em></li></ul><h4>Vymazání obsahu formuláře</h4><p>Vymazání obsahu formuláře provede jeho nastavení do výchozího stavu, zajištěny však musí být i některé další kroky – je tedy uveden celý tok událostí:</p><ol><li>Uživatel stiskne tlačítko pro vymazání obsahu formuláře (komponenta 17).</li><li>Systém zobrazí modální okno s dotazem, zda má být formulář uveden do výchozího stavu (MSG_CONF_CANCEL_CLEAR_FORM, viz <a href="../../../systemove-78681299.html">Systémové hlášky</a>).</li><li>Pokud uživatel potvrdí zobrazené hlášení:<br><ol><li>Systém nastaví formulář do výchozího stavu (viz <a href="500ui03-82837649.html">Přehled UI komponent</a>, sloupec Výchozí hodnota).</li><li>Systém nastaví pomocnou proměnnou formuláře <strong>Načten z rejstříku</strong> na FALSE (může dojít ke změně dostupností některých komponent v rámci formuláře, viz <a href="500ui03-82837649.html">Dostupnost změny informací o zákazníkovi</a>).</li></ol></li><li>Jinak nejsou prováděny žádné akce.</li><li>Systém zavře modální okno.</li></ol><h1>Grafický návrh</h1><h1>Revize</h1><h3>28. 7. 2020: Tomáš Nadrchal</h3><table><tbody><tr><th>Odkaz</th><th>Stručný popis změny/doplnění</th></tr><tr><td colspan="1"><a href="500ui03-82837649.html">Uživatelské rozhraní</a></td><td colspan="1">Doplněn popis pomocné proměnné formuláře (naznačeno modře).</td></tr><tr><td colspan="1"><a href="500ui03-82837649.html">Přehled UI komponent</a></td><td colspan="1"><p>Doplněno označení ovládacích prvků, u kterých je vyhodnocována dostupnost editace (naznačeno modře).</p><p>Doplněno tlačítko pro vyčištění formuláře (naznačeno modře).</p></td></tr><tr><td colspan="1"><a href="500ui03-82837649.html">Dostupnost změny informací o zákazníkovi</a></td><td colspan="1">Doplněno chování pro vyhodnocení dostupnosti editace u jednotlivých ovládacích prvků (naznačeno modře).</td></tr><tr><td colspan="1"><a href="500ui03-82837649.html">Vymazání obsahu formuláře</a></td><td colspan="1">Doplněno chování pro vyčištění formuláře (naznačeno modře).</td></tr></tbody></table><h3>3. 3. 2020: Tomáš Nadrchal</h3><table><tbody><tr><th>Odkaz</th><th>Stručný popis změny/doplnění</th></tr><tr><td colspan="1"><a href="500ui03-82837649.html">Přehled UI komponent</a></td><td colspan="1">Doplněn odkaz na UC popisující chování pole pro nalezení podnikatelského subjektu (naznačeno modře). Nedošlo ke změně chování, chování je nyní uvedeno pouze na jednom místě.</td></tr></tbody></table><h3>3. 12. 2018: Tomáš Nadrchal</h3><table><tbody><tr><th>Odkaz</th><th>Stručný popis změny/doplnění</th></tr><tr><td colspan="1"><a href="500ui03-82837649.html">Přehled UI komponent</a></td><td colspan="1">Odebrání informace o validaci dle atributu IČO.</td></tr></tbody></table><h3>21. 11. 2018: Tomáš Nadrchal</h3><table><tbody><tr><th>Odkaz</th><th>Stručný popis změny/doplnění</th></tr><tr><td colspan="1"><a href="500ui03-82837649.html">Přehled UI komponent</a></td><td colspan="1">Doplnění informace o validaci dle atributu IČO.</td></tr></tbody></table>
</div>
</body>
</html>
