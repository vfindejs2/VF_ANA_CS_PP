<!DOCTYPE html>
<html lang="cs">
<head>
  <meta charset="utf-8">
  <title>500UI04: Formulář místa realizace</title>
</head>
<body>
<div class="wiki-content">
<p></p><h1>Stručný popis</h1><p>Formulář slouží k založení či editaci entity <a href="../../../datove-modely/datovy-78681044.html">Místo realizace</a>.</p><p>Na vstupu pak může být předána jedna z uvedených skupin entit – viz tabulka:</p><table><tbody><tr><th>Vstupní data</th><th>Poznámka</th><th>Pomocné proměnné</th></tr><tr><td><ul><li>Adresa: <a href="../../../datove-modely/datovy-78681044.html">Adresa</a>, která bude předvyplněna po otevření formuláře.</li></ul></td><td>Používá se především pro předvyplnění prázdného formuláře.</td><td><p>Adresa: předaná <a href="../../../datove-modely/datovy-78681044.html">Adresa</a>.</p><p>Úplná editace: TRUE.</p></td></tr><tr><td><ul><li>Místo realizace: <a href="../../../datove-modely/datovy-78681044.html">Místo realizace</a>, které má být editováno – nepovinné.</li><li>Úplná editace: Informace, zda je umožněna úplná editace (boolean).</li></ul></td><td>Jedná se o editaci již vytvořeného <a href="../../../datove-modely/datovy-78681044.html">Místa realizace</a>, kdy je specifikováno, v jakém rozsahu je editace povolena.</td><td><p>Adresa:</p><ul><li>Pokud je k dispozici <a href="../../../datove-modely/datovy-78681044.html">Místo realizace</a>: hodnota atributu Adresa předaného <a href="../../../datove-modely/datovy-78681044.html">Místa realizace</a>.</li><li>Jinak: NULL.</li></ul><p>Úplná editace: informace předaná na vstupu.</p></td></tr></tbody></table><p>Poznámka:</p><ul><li>Musí být předány hodnoty pro právě jednu z uvedených skupin.</li><li>Dle konkrétní skupiny jsou pak naplněny pomocné proměnné, na které je odkazováno dále.</li></ul><h1>Uživatelské rozhraní</h1><h2>Rozložení</h2><h3>Drátový diagram</h3><p><img src="500ui04-formular-mista-realizace-82837662_images/500UI04_rozlozeni_jednaAdresa_wf.png" data-attachment="true"></p><p><img src="500ui04-formular-mista-realizace-82837662_images/500UI04_rozlozeni_viceAdres_wf.png" data-attachment="true"></p><h3>Přehled UI komponent</h3><table><tbody><tr><th>Callout</th><th>Komponenta</th><th colspan="1">Nadpis</th><th>Typ komponenty</th><th>Příklad hodnoty</th><th colspan="1">Hodnota</th><th colspan="1">Výchozí hodnota</th><th colspan="1">Formát</th><th colspan="1">Zpřístupněná</th><th colspan="1">Viditelná</th><th>Chování</th><th colspan="1">Validace</th><th colspan="1">Poznámka</th></tr><tr><td colspan="1">1</td><td colspan="1">Ulice</td><td colspan="1">Ulice</td><td colspan="1">TextBox</td><td colspan="1">Opatovská</td><td colspan="1">Entita <a href="../../../datove-modely/datovy-78681044.html">Adresa</a> – viz pomocná proměnná Adresa.</td><td colspan="1">–</td><td colspan="1"><Ulice></td><td colspan="1">Pokud pomocná proměnná Úplná editace nabývá hodnoty TRUE.</td><td colspan="1">Vždy</td><td colspan="1">–</td><td colspan="1">Maximálně 80 znaků.</td><td colspan="1">–</td></tr><tr><td colspan="1">2</td><td colspan="1">Číslo popisné</td><td colspan="1">Číslo popisné</td><td colspan="1">TextBox</td><td colspan="1">1735</td><td colspan="1">Entita <a href="../../../datove-modely/datovy-78681044.html">Adresa</a> – viz pomocná proměnná Adresa.</td><td colspan="1">–</td><td colspan="1"><Číslo popisné></td><td colspan="1">Pokud pomocná proměnná Úplná editace nabývá hodnoty TRUE.</td><td colspan="1">Vždy</td><td colspan="1">–</td><td colspan="1">Maximálně 15 znaků.</td><td colspan="1">–</td></tr><tr><td colspan="1">3</td><td colspan="1">Číslo orientační</td><td colspan="1">Číslo orientační</td><td colspan="1">TextBox</td><td colspan="1">A</td><td colspan="1">Entita <a href="../../../datove-modely/datovy-78681044.html">Adresa</a> – viz pomocná proměnná Adresa.</td><td colspan="1">–</td><td colspan="1"><Číslo orientační></td><td colspan="1">Pokud pomocná proměnná Úplná editace nabývá hodnoty TRUE.</td><td colspan="1">Vždy</td><td colspan="1">–</td><td colspan="1">Maximálně 15 znaků.</td><td colspan="1">–</td></tr><tr><td colspan="1">4</td><td colspan="1">Obec</td><td colspan="1">Obec*</td><td colspan="1">TextBox</td><td colspan="1">Trenčín</td><td colspan="1">Entita <a href="../../../datove-modely/datovy-78681044.html">Adresa</a> – viz pomocná proměnná Adresa.</td><td colspan="1">–</td><td colspan="1"><Město></td><td colspan="1">Pokud pomocná proměnná Úplná editace nabývá hodnoty TRUE.</td><td colspan="1">Vždy</td><td colspan="1">–</td><td colspan="1"><p>Povinné.</p><p>Maximálně 80 znaků.</p></td><td colspan="1">–</td></tr><tr><td colspan="1">5</td><td colspan="1">PSČ</td><td colspan="1">PSČ*</td><td colspan="1">TextBox</td><td colspan="1">911 01</td><td colspan="1">Entita <a href="../../../datove-modely/datovy-78681044.html">Adresa</a> – viz pomocná proměnná Adresa.</td><td colspan="1">–</td><td colspan="1"><PSČ></td><td colspan="1">Pokud pomocná proměnná Úplná editace nabývá hodnoty TRUE.</td><td colspan="1">Vždy</td><td colspan="1">–</td><td colspan="1"><p>Povinné.</p><p> Maximálně 15 znaků.</p></td><td colspan="1">–</td></tr><tr><td colspan="1">6</td><td colspan="1">Nalezení adresy</td><td colspan="1">–</td><td colspan="1">Button</td><td colspan="1">–</td><td colspan="1">–</td><td colspan="1">–</td><td colspan="1">–</td><td colspan="1">Vždy</td><td colspan="1">Pokud pomocná proměnná Úplná editace nabývá hodnoty TRUE.</td><td colspan="1"><a href="500ui04-82837662.html">Dopředné geokódování</a></td><td colspan="1">–</td><td colspan="1">–</td></tr><tr><td colspan="1">7</td><td colspan="1">Název</td><td colspan="1">Název*</td><td colspan="1">TextBox</td><td colspan="1">Marius Pedersen a.s., Trenčín</td><td colspan="1">Entita <a href="../../../datove-modely/datovy-78681044.html">Místo realizace</a>.</td><td colspan="1">–</td><td colspan="1"><Název></td><td colspan="1">Vždy</td><td colspan="1">Vždy</td><td colspan="1">–</td><td colspan="1"><p>Povinné.</p><p>Maximálně 255 znaků.</p></td><td colspan="1">–</td></tr><tr><td colspan="1">8</td><td colspan="1">Zeměpisná šířka</td><td colspan="1">Souřadnice*</td><td colspan="1">TextBox</td><td colspan="1">48,8960514</td><td colspan="1">Entita <a href="../../../datove-modely/datovy-78681044.html">Místo realizace</a>.</td><td colspan="1">–</td><td colspan="1"><p><Souřadnice.X></p><p><a href="../../../pouzivane-81592337.html">Poloha</a></p></td><td colspan="1">Vždy</td><td colspan="1">Vždy</td><td colspan="1">–</td><td colspan="1"><p>Povinné.</p><p>Desetinné číslo.</p></td><td colspan="1">–</td></tr><tr><td colspan="1">9</td><td colspan="1">Zeměpisná délka</td><td colspan="1">–</td><td colspan="1">TextBox</td><td colspan="1">18,0672664</td><td colspan="1">Entita <a href="../../../datove-modely/datovy-78681044.html">Místo realizace</a>.</td><td colspan="1">–</td><td colspan="1"><p><Souřadnice.Y></p><p><a href="../../../pouzivane-81592337.html">Poloha</a></p></td><td colspan="1">Vždy</td><td colspan="1">Vždy</td><td colspan="1">–</td><td colspan="1"><p>Povinné.</p><p>Desetinné číslo.</p></td><td colspan="1">–</td></tr><tr><td colspan="1">10</td><td colspan="1">Kontakt</td><td colspan="1">Kontakt</td><td colspan="1">TextBox</td><td colspan="1">p. Vynosil, 0902 123 456</td><td colspan="1">Entita <a href="../../../datove-modely/datovy-78681044.html">Místo realizace</a>.</td><td colspan="1">–</td><td colspan="1"><Kontakt></td><td colspan="1">Pokud pomocná proměnná Úplná editace nabývá hodnoty TRUE.</td><td colspan="1">Vždy</td><td colspan="1">–</td><td colspan="1">Maximálně 255 znaků.</td><td colspan="1">–</td></tr><tr><td colspan="1">11</td><td colspan="1">Poznámka</td><td colspan="1">Poznámka</td><td colspan="1">TextBox</td><td colspan="1">V neděli zavřeno.</td><td colspan="1">Entita <a href="../../../datove-modely/datovy-78681044.html">Místo realizace</a>.</td><td colspan="1">–</td><td colspan="1"><Poznámka></td><td colspan="1">Pokud pomocná proměnná Úplná editace nabývá hodnoty TRUE.</td><td colspan="1">Vždy</td><td colspan="1">–</td><td colspan="1">Maximálně 255 znaků.</td><td colspan="1">–</td></tr><tr><td colspan="1">12</td><td colspan="1">Výchozí místo realizace</td><td colspan="1">Výchozí</td><td colspan="1">CheckBox</td><td colspan="1">TRUE</td><td colspan="1">Entita <a href="../../../datove-modely/datovy-78681044.html">Místo realizace</a>.</td><td colspan="1">TRUE</td><td colspan="1"><Výchozí></td><td colspan="1">Pokud pomocná proměnná Úplná editace nabývá hodnoty TRUE.</td><td colspan="1">Vždy</td><td colspan="1">–</td><td colspan="1">–</td><td colspan="1">–</td></tr><tr><td colspan="1">13</td><td colspan="1">Nalezené adresy</td><td colspan="1">–</td><td colspan="1">Grid</td><td colspan="1">–</td><td colspan="1">Entita <a href="../../../datove-modely/datovy-78681044.html">Adresa</a>.</td><td colspan="1">–</td><td colspan="1"><p><Ulice> <Číslo popisné>/<Číslo orientační>, <PSČ> <Město></p><p>Pokud není dostupné Číslo orientační:</p><ul><li><Ulice> <Číslo popisné>, <PSČ> <Město></li></ul><p>Pokud není dostupné Číslo popisné:</p><ul><li><Ulice> <Číslo orientační>, <PSČ> <Město></li></ul></td><td colspan="1">Vždy</td><td colspan="1"><p>Pokud pomocná proměnná Úplná editace nabývá hodnoty TRUE.</p><p>Pokud je při dopředném geokódování nalezena více než jedna adresa.</p></td><td colspan="1">–</td><td colspan="1">–</td><td colspan="1"><p>Tabulka obsahuje pouze jeden sloupec s formátovaným výpisem nalezené adresy. Hlavička tabulky není zobrazena.</p><p>Řádek obsahuje tlačítko pro výběr požadované adresy (ikona: ra-location).</p></td></tr><tr><td colspan="1">14</td><td colspan="1">Mapa</td><td colspan="1">–</td><td colspan="1">Map</td><td colspan="1">–</td><td colspan="1">–</td><td colspan="1">–</td><td colspan="1">–</td><td colspan="1">Vždy</td><td colspan="1">Vždy</td><td colspan="1"><a href="500ui04-82837662.html">Změna souřadnic</a></td><td colspan="1">–</td><td colspan="1">–</td></tr><tr><td colspan="1">15</td><td colspan="1">Hledání adresy</td><td colspan="1">–</td><td colspan="1">AutoSuggestTextBox</td><td colspan="1">–</td><td colspan="1">–</td><td colspan="1">–</td><td colspan="1">–</td><td colspan="1">Vždy</td><td colspan="1">Pokud pomocná proměnná Úplná editace nabývá hodnoty FALSE.</td><td colspan="1"><a href="500ui04-82837662.html">Hledání adresy</a></td><td colspan="1">–</td><td colspan="1">Pole je dostupné pouze v případě, kdy není možné použit <a href="500ui04-82837662.html">Dopředné geokódování</a>. Uživatel tak může v mapě zobrazit požadovanou adresu pomocí tohoto prvku formuláře.</td></tr></tbody></table><h3>Chování</h3><p>Poznámka: Ve vytvořené instanci je automaticky doplněna hodnota atributu Stát – Slovenská republika.</p><h4>Dopředné geokódování</h4><p>Chování vychází z <a href="500ui09-83263989.html">Dopředné geokódování</a>.</p><p>Pokud je nalezena pouze jedna adresa, případně pokud je nalezeno adres více a uživatel jednu z nich vybere, dojde navíc k nastavení těchto polí:</p><ul><li>Název – vygeneruje se název v následujícím tvaru: <strong><Město>, <Ulice> (<strong><Název zákazníka></strong>)</strong>.<ul><li>Pokud není název Zákazníka zatím k dispozici, je formát následující: <strong><Město>, <Ulice></strong>.</li><li>Pokud není k dispozici ulice, je formát následující: <strong><Město> (<strong><Název zákazníka></strong>)</strong>.</li></ul></li><li>Souřadnice – do polí pro zadání souřadnic se vyplní zeměpisná šířka a délka zvoleného bodu. </li></ul><h4>Změna souřadnic</h4><p>Pokud je v mapě zobrazen pouze jeden bod, je možné pomocí změny jeho polohy upravit hodnotu polí pro zadání souřadnic. Uživatel na zobrazený bod v mapě najede myší a stiskne její levé tlačítko. S pohybem myši se mění i poloha zobrazeného bodu. Jakmile uživatel uvolní levé tlačítko myši, Systém umístí bod na novou pozici a aktualizuje hodnoty v polích pro zadání souřadnic.</p><p>V případech, kdy není dostupné <a href="500ui04-82837662.html">dopředné geokódování</a>, nemusí být v mapě k dispozici žádný bod. Tato situace pak může nastat i v případech, kdy pomocí <a href="500ui04-82837662.html">dopředného geokódování</a> není nalezena žádná skutečná adresa. V takovém případě pak není v mapě zobrazen žádný bod – pokud v tuto chvíli uživatel klikne do mapy, dojde k vytvoření tohoto bodu a následnému vyplnění polí pro souřadnice (komponenty 8 a 9). Adresa však pomocí zpětného geokódování není získávána! V tuto chvíli máme k dispozici jeden bod, který můžeme ručně přesouvat, jak bylo uvedeno dříve.</p><h4>Hledání adresy</h4><p>Pokud není možné vyhledat adresu pomocí tlačítka pro <a href="500ui04-82837662.html">Dopředné geokódování</a> (komponenta 6), může uživatel v mapě zobrazit požadovanou oblast pomocí pole pro vyhledání adresy – chování je následující:</p><ol><li>Systém čeká na zadání textu uživatelem.</li><li>Uživatel postupně zadává požadovaný text.</li><li>Pokud jsou obsaženy alespoň 3 znaky (poznámka: prováděno při každé změně obsaženého textu):<br><ol><li>Systém odešle požadavek na vyhledání adresy a souřadnic dle zadaného textu (dopředné geokódování).</li><li>Služba vrátí nalezené výsledky, kdy je načteno prvních 5 hodnot.</li><li>Pokud není nalezena žádná hodnota:<br><ol><li><strong>Skok na krok 1</strong>.</li></ol></li><li>Jinak:<br><ol><li>Systém zobrazí nabídku nalezených výsledků (formát výpisu je uveden dále).</li><li>Uživatel zvolí jednu z nabízených položek.</li><li>Systém skryje zobrazenou nabídku.</li><li>Systém vyčistí pole pro vyhledání adresy (komponenta 15).</li><li>Systém provede přiblížení mapy a vycentruje požadovanou oblast.</li><li>Systém zobrazí požadované místo v mapě.</li><li>Systém nastaví souřadnice požadovaného místa do polí pro zadání souřadnic (komponenty 8 a 9, může se však lišit dle formuláře, který se na toto chováni odvolává).</li></ol></li></ol></li></ol><p>V tabulce jsou pak zobrazovány nalezené <a href="../../../datove-modely/datovy-78681044.html">Adresy</a> – formát je následující:</p><ul><li><Ulice> <Číslo popisné>/<Číslo orientační>, <PSČ> <Město></li><li>Pokud není dostupné Číslo orientační:<br><ul><li><Ulice> <Číslo popisné>, <PSČ> <Město></li></ul></li><li>Pokud není dostupné Číslo popisné:<ul><li><Ulice> <Číslo orientační>, <PSČ> <Město></li></ul></li></ul><p>Ovládací prvek se pak může vyskytovat v několika stavech, které jsou naznačeny v tabulce.</p><p>V ovládacím prvku je dále zobrazena ikona, která naznačuje, že se jedná o pole pro vyhledávání. </p><ul><li>Ikona: ra-search.</li><li>Zarovnání: vpravo.</li></ul><table><tbody><tr><th>Drátový diagram</th><th>Popis</th><th>Poznámka</th></tr><tr><td><img src="500ui04-formular-mista-realizace-82837662_images/500UI04_hledaniAdresy_zadnyText.png" data-attachment="true"></td><td>Není zadán žádný text.</td><td><p>Na pozadí ovládacího prvku je zobrazen text představující informaci, podle čeho bude vyhledáváno. Text je zobrazen pouze v případě, kdy není v rámci ovládacího prvku zobrazena žádná hodnota.</p><ul><li>Zobrazený text: „Adresa“.</li></ul></td></tr><tr><td><img src="500ui04-formular-mista-realizace-82837662_images/500UI04_hledaniAdresy_kratkyText.png" data-attachment="true"></td><td>Není zadán dostatečně dlouhý text, není tedy spuštěno vyhledávání.</td><td><p>Pokud je vložen nějaký text, zobrazí se tlačítko, které umožní tento text odebrat:</p><ul><li>Ikona: ra-cross.</li><li>Zarovnání: vpravo.</li></ul></td></tr><tr><td><img src="500ui04-formular-mista-realizace-82837662_images/500UI04_hledaniAdresy_nalezeneHodnoty.png" data-attachment="true"></td><td>Je zadán dostatečně dlouhý text, uživateli je tedy nabídnuto prvních 5 nalezených adres.</td><td><p>Pokud je vložen nějaký text, zobrazí se tlačítko, které umožní tento text odebrat:</p><ul><li>Ikona: ra-cross.</li><li>Zarovnání: vpravo.</li></ul></td></tr></tbody></table><h4>Získání hodnoty pro stát</h4><p>Může nastat situace, kdy není po zadání <a href="../../../datove-modely/datovy-78681044.html">Adresy</a> uživatelem dostupná hodnota pro atribut <strong>Stát</strong>. V takovém případě je pro nastavení použita konfigurační hodnota <strong>countryIsoCode</strong> (viz <a href="#" data-page-title="Konfigurační hodnoty">Konfigurační hodnoty</a>).</p><p>Poznámka: Typickým případem je situace, kdy uživatel zadá adresu ručně – nepoužije např. dostupné geokódování.</p><h1>Grafický návrh</h1><h1>Revize</h1><h3>30. 11. 2024: Tomáš Nadrchal</h3><table><tbody><tr><th>Odkaz</div></th><th>Stručný popis změny/doplnění</div></th></tr><tr><td colspan="1"><a href="500ui04-82837662.html">Získání hodnoty pro stát</a></td><td colspan="1">Doplněn popis chování pro případ, že při zadání adresy není získán stát (naznačeno modře).</td></tr></tbody></table><h3>15. 5. 2019: Tomáš Nadrchal</h3><table><tbody><tr><th>Odkaz</div></th><th>Stručný popis změny/doplnění</div></th></tr><tr><td colspan="1"><a href="500ui04-82837662.html">Stručný popis</a></td><td colspan="1">Doplněn popis struktury vstupních dat.</td></tr><tr><td colspan="1"><p><a href="500ui04-82837662.html">Rozložení</a></p></td><td colspan="1"><p>Aktualizováno chování formuláře dle dat předaných na vstupu.</p><p>Přidáno pole s možností hledat adresu v mapě pro případy, kdy nejsou přístupná pole pro zadání adresy.</p></td></tr><tr><td colspan="1"><a href="500ui04-82837662.html">Změna souřadnic</a></td><td colspan="1">Doplněno chování pro případy, kdy není v mapě k dispozici žádný bod.</td></tr><tr><td colspan="1"><a href="500ui04-82837662.html">Hledání adresy</a></td><td colspan="1">Doplněno chování pro doplněné pole pro hledání v mapě.</td></tr></tbody></table><h3>4. 12. 2018: Tomáš Nadrchal</h3><table><tbody><tr><th>Odkaz</div></th><th>Stručný popis změny/doplnění</div></th></tr><tr><td colspan="1"><a href="500ui04-82837662.html">Dopředné geokódování</a></td><td colspan="1"><p>Změna formátu – generování názvu Místa realizace.</p></td></tr></tbody></table>
</div>
</body>
</html>
