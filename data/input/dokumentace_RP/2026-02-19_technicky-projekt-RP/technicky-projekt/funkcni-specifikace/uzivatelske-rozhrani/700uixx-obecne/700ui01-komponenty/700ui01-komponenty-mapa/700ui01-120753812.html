<!DOCTYPE html>
<html lang="cs">
<head>
  <meta charset="utf-8">
  <title>700UI01: Komponenty – mapa (kopie)</title>
</head>
<body>
<div class="wiki-content">
<p></p><h1>Stručný popis</h1><p>Obecný popis mapy – společný pro všechna použití (vychází z FLWW2). Konkrétní specifikace jsou uvedeny u konkrétních případů užití.</p><h1>Uživatelské rozhraní</h1><p>Je uveden pouze stručný popis, protože ovládací prvek vychází z mapy ve FLWW2, a přebírá tedy i její základní chování.</p><h2>Rozložení</h2><h3>Drátový diagram</h3><p><img src="700ui01-komponenty-mapa-kopie-120753812_images/image2025-2-5 9-35-47.png" data-attachment="true"></p><h3>Přehled UI komponent</h3><table><tbody><tr><th>Callout</th><th>Skupina</th></tr><tr><td>1</td><td><a href="https://confluence.radium.cz/display/mpgskdispecer/700UI01%3A+Mapa#id-700UI01:Mapa-Mapov%C3%A1podklad">Mapový podklad</a></td></tr><tr><td colspan="1">2</td><td colspan="1"><a href="https://confluence.radium.cz/display/mpgskdispecer/700UI01%3A+Mapa#id-700UI01:Mapa-N%C3%A1strojov%C3%A1li%C5%A1ta">Nástrojová lišta</a></td></tr><tr><td colspan="1">3</td><td colspan="1"><a href="https://confluence.radium.cz/display/mpgskdispecer/700UI01%3A+Mapa#id-700UI01:Mapa-P%C5%99ibl%C3%AD%C5%BEen%C3%AD,odd%C3%A1len%C3%AD">Přiblížení, oddálení</a></td></tr><tr><td colspan="1">4</td><td colspan="1"><a href="https://confluence.radium.cz/display/mpgskdispecer/700UI01%3A+Mapa#id-700UI01:Mapa-M%C4%9B%C5%99%C3%ADtko">Měřítko</a></td></tr><tr><td colspan="1">5</td><td colspan="1"><a href="../700ui01-83266189.html">Přepínače chování mapy</a></td></tr><tr><td colspan="1">6</td><td colspan="1"><a href="700ui01-120753812.html">Copyright</a></td></tr></tbody></table><h2>Mapový podklad</h2><p>Mapový podklad je možné měnit ve skupině <a href="https://confluence.radium.cz/display/mpgskdispecer/700UI01%3A+Mapa#id-700UI01:Mapa-Mapov%C3%A9podklady">Mapové podklady</a> nástrojové lišty. Zde je možné měnit i barevnost mapového podkladu – barevný/černobílý.</p><p>Zobrazené vrstvy se pak liší dle konkrétního případu užití. Zobrazení těchto vrstev je pak možné nastavit ve skupině <a href="https://confluence.radium.cz/display/mpgskdispecer/700UI01%3A+Mapa#id-700UI01:Mapa-Vrstvy">Vrstvy</a> nástrojové lišty.</p><h4>Výchozí zobrazení mapy bez dat</h4><p>Pokud je potřebné vykreslit mapu, na které zatím nemají být zobrazena žádná data (např. mapky v detailu před tím, než proběhne geokóding adresy), je mapa vycentrována na <a href="../../../../../konfiguracni-81592468.html">initialMapCoordinates</a> v měřítku <a href="../../../../../konfiguracni-81592468.html">initialMapZoomLevel</a>. (Hodnoty nastavené pro MPG SK odpovídají přibližně středu Slovenska v měřítku "100 km".)</p><h2>Nástrojová lišta</h2><h3>Drátový diagram</h3><p></p><h3>Přehled UI komponent</h3><table><tbody><tr><th>Callout</th><th>Skupina</th><th colspan="1">Poznámka</th></tr><tr><td>1</td><td>Nadpis</td><td colspan="1"><p>Obsahuje tlačítko pro skrytí panelu nástrojové lišty.</p><ul><li>Ikona: ra-arrow-right.</li></ul></td></tr><tr><td colspan="1">2</td><td colspan="1">Obsah skupiny</td><td colspan="1">Obsah se liší dle konkrétní skupiny. Vyplňuje celou výšku mapy.</td></tr><tr><td colspan="1">3</td><td colspan="1">Tlačítka nástrojové lišty</td><td colspan="1"><p>Jako první je vloženo tlačítko (Button) pro nastavení viditelnosti nástrojové lišty, viz <a href="../700ui01-83266189.html">Viditelnost nástrojové lišty</a>.</p><p>Dále jsou vložena tlačítka (ToggleButton) pro zobrazení jednotlivých skupin nástrojové lišty. Pokud není uvedeno jinak, jsou vždy obsaženy dvě základní skupiny:</p><ul><li><a href="https://confluence.radium.cz/display/mpgskdispecer/700UI01%3A+Mapa#id-700UI01:Mapa-Mapov%C3%A9podklady">Mapové podklady</a>,</li><li><a href="https://confluence.radium.cz/display/mpgskdispecer/700UI01%3A+Mapa#id-700UI01:Mapa-Vrstvy">Vrstvy</a>.</li></ul><p>Pokud je tlačítko stisknuto, je zobrazena odpovídající skupina. Pokud uživatel stiskne tlačítko znovu, dojde ke skrytí skupiny. Pokud uživatel stiskne jiné tlačítko skupiny, je zobrazena odpovídající skupina – zároveň může být stisknuto maximálně jedno tlačítko.</p><p>Nástrojová lišta se pak může lišit dle konkrétního použití.</p></td></tr></tbody></table><h3>Chování</h3><h4>Viditelnost nástrojové lišty</h4><p>Nástrojová lišta může být zobrazena ve dvou základních stavech (viz obrázek):</p><ol><li>Skrytá – je zobrazeno pouze tlačítko pro nastavení viditelnosti nástrojové lišty.</li><li>Zobrazená – je zobrazena nástrojová lišta, a to přes celou výšku mapy.</li></ol><p></p><p>Poznámka: Po zobrazení lišty dojde k posunutí uvedených prvků mapy, jak bylo nazanačeno na obrázku:</p><ul><li><a href="https://confluence.radium.cz/display/mpgskdispecer/700UI01%3A+Mapa#id-700UI01:Mapa-P%C5%99ibl%C3%AD%C5%BEen%C3%AD,odd%C3%A1len%C3%AD">Přiblížení, oddálení</a>,</li><li><a href="https://confluence.radium.cz/display/mpgskdispecer/700UI01%3A+Mapa#id-700UI01:Mapa-M%C4%9B%C5%99%C3%ADtko">Měřítko</a>.</li></ul><p>Tlačítko je pak doplněno o ikonu, která se liší právě podle stavu zobrazení:</p><ul><li>Skrytá: ra-arrow-left.</li><li>Zobrazená: ra-arrow-right.</li></ul><p>Pokud je zobrazena některá ze skupin a uživatel stiskne tlačítko pro skrytí nástrojové lišty, je nejprve skryta skupina, teprve následně pak nástrojová lišta.</p><h4>Mapové podklady</h4><p>Skupina umožňují nastavení mapového podkladu a jeho barvy.</p><ul><li>Nadpis skupiny: Mapové podklady.</li><li>Ikona tlačítka: ra-map.</li></ul><h5>Drátový diagram</h5><p></p><h5>Přehled UI komponent</h5><table><tbody><tr><th>Callout</th><th>Skupina</th></tr><tr><td>1</td><td>Tlačítko pro výběr mapového podkladu.</td></tr><tr><td colspan="1">2</td><td colspan="1">Tlačítko pro nastavení barevného/černobílého podkladu</td></tr></tbody></table><h4>Vrstvy</h4><p>Skupina umožňující zobrazit/skrýt jednotlivé vrstvy vložené na mapový podklad.</p><ul><li>Nadpis skupiny: Vrstvy.</li><li>Ikona tlačítka: ra-layers.</li></ul><p>Poznámka: Skupina je zobrazena pouze v případě, kdy obsahuje alespoň jednu položku.</p><p>Dostupné jsou pak dva typy položek – viz tabulka.</p><table><tbody><tr><th>Typ položky</th><th>Popis</th><th>Poznámka</th></tr><tr><td>Základní</td><td>Možnost skrýt/zobrazit celou vrstvu.</td><td>–</td></tr><tr><td>Rozšířená</td><td>Možnost skrýt/zobrazit část vrstvy, případně celou vrstvu.</td><td>Specifikace podrobnějšího nastavení vrstvy je uvedena vždy u konkrétního případu užití.</td></tr></tbody></table><p> </p><h5>Drátový diagram</h5><p></p><h5>Přehled UI komponent</h5><table><tbody><tr><th>Callout</th><th colspan="1">Typ položky</th><th>Zobrazený stav</th></tr><tr><td>1</td><td colspan="1">Základní</td><td><p>Zobrazená.</p></td></tr><tr><td colspan="1">2</td><td colspan="1">Rozšířená</td><td colspan="1"><p>Skrytá, zabalená.</p></td></tr><tr><td colspan="1">3</td><td colspan="1">Rozšířená</td><td colspan="1"><p>Zobrazená, rozbalená.</p></td></tr></tbody></table><p>Ikony tlačítek:</p><ul><li>Zobrazená vrstva: ra-eye.</li><li>Skrytá vrstva: ra-eye-crossed.</li><li>Rozbalené nastavení vrstvy: ra-arrow-down.</li><li>Zabalené nastavení vrstvy: ra-arrow-up.</li></ul><h2>Přiblížení, oddálení</h2><p>Přiblížení či oddálení mapy je umožněno 2 způsoby:</p><ul><li>pootočením kolečka myši,</li><li>použitím k tomu určených tlačítek (viz dále).</li></ul><p>Přibližování/oddalování je pak prováděno po jednotlivých krocích, které jsou dány nastavením mapy použitým v rámci FLWW2 (rozsah 2 m až 500 km). Pro zobrazení detailního zobrazení mapy je pak použit možnost nastavení parametru maxNativeZoom knihovny Leaflet.</p><p>Tlačítka pro přiblížení a oddálení mapového podkladu:</p><ul><li>ikona Přiblížit: ra-plus,</li><li>ikona Oddálit: ra-minus.</li></ul><p>Jednotlivá tlačítka jsou pak dostupná pouze v případě, kdy je možné přejít na další úroveň přiblížení či oddálení – dle konkrétního tlačítka.</p><h2>Měřítko</h2><p>Měřítko pro porovnání skutečné vzdálenosti vzhledem k nastavenému přiblížení.</p><h2>Copyright</h2><p>Zobrazení zdroje pro jednotlivé mapové podklady v pravém dolním rohu mapy.</p><p>Jednotlivé zobrazení licenčních podmínek pro konkrétní mapové podklady:</p><ul><li>Pro mapové podklady CEDA pro Česko a Slovensko je zobrazen text "Mapová data: © CEDA, ČUZK".</li><li>Pro mapové podklady OSM je zobrazen text "OpenStreetMap", který slouží jako odkaz na adresu <a href="http://openstreetmap.org/copyright">openstreetmap.org/copyright</a>.</li></ul><p>Poznámka: Samotné hodnoty, které mají být zobrazeny jsou získávány v rámci konfigurace mapových podkladů z FleetwareWebAPI/configuration/maps v atributu copyright.</p><h2>Přepínače chování mapy</h2><p>Jedná se o ovládací prvky, pomocí kterých uživatel nastavuje požadované chování mapy.</p><p>Jednotlivé návrhy UI využívající mapu, pak konkretizují:</p><ul><li>jaké přepínače chování mapy budou pro konkrétní použití mapy k dispozici,</li><li>jaké bude výchozí chování mapy (v případě, kdy např. nejsou dostupné žádné <a href="../700ui01-83266189.html">ovládací prvky</a>).</li></ul><h3>Drátový diagram</h3><p></p><h3>Přehled UI komponent</h3><table><tbody><tr><th>Callout</th><th>Komponenta</th><th colspan="1">Nadpis</th><th>Typ komponenty</th><th>Příklad hodnoty</th><th colspan="1">Hodnota</th><th colspan="1">Výchozí hodnota</th><th colspan="1">Formát</th><th colspan="1">Zpřístupněná</th><th colspan="1">Viditelná</th><th>Chování</th><th colspan="1">Validace</th><th colspan="1">Poznámka</th></tr><tr><td colspan="1">1</td><td colspan="1">Neposouvat mapu</td><td colspan="1">–</td><td colspan="1"><p>ToggleButton</p><ul><li>Ikona: ra-void.</li></ul></td><td colspan="1">–</td><td colspan="1">–</td><td colspan="1">Vypnuto</td><td colspan="1">–</td><td colspan="1">Vždy</td><td colspan="1">Vždy</td><td colspan="1"><p>Pokud je zapnuto, pak nedochází ke změně měřítka mapy a jejímu posouvání v reakci na výběr podporované položky uživatelem.</p><p>Je tedy deaktivována funkčnost <a href="../700ui01-83266189.html">Centrování</a>.</p></td><td colspan="1">–</td><td colspan="1">–</td></tr></tbody></table><h3>Chování mapy</h3><h4>Centrování</h4><p>Probíhá následovně:</p><ol><li>Uživatel označí jednu nebo více položek v podporované komponentě (např. v tabulkovém přehledu).</li><li>Systém nastaví zobrazení mapy tak, aby byla zobrazena všechna data právě vybrané položky/položek (např. lokality denního výkonu včetně trajektorií vypočítaných trasy):<br><ul><li>Data jsou v mapě vycentrována.</li><li>Je zvoleno co největší měřítko mapy; maximálně však do úrovně <a href="../../../../../konfiguracni-81592468.html">maxAutoMapZoomLevel</a>.</li><li>V konkrétní specifikaci UI musí být řečeno, na jaká data centrovat.</li></ul></li></ol><h1>Persistence nastavení</h1><p>Mapa si pamatuje všechna nastavení provedená v rámci jednotlivých panelů dostupných z <a href="https://confluence.radium.cz/display/mpgskdispecer/700UI01%3A+Mapa#id-700UI01:Mapa-N%C3%A1strojov%C3%A1li%C5%A1ta">Nástrojové lišty</a> a <a href="../700ui01-83266189.html">Přepínačů chování mapy</a> (např. zvolený mapový podklad, jeho barevnost, zobrazené vrstvy…). Dále si pamatuje, zda je nástrojová lišta viditelná či ne, viz <a href="../700ui01-83266189.html">Viditelnost nástrojové lišty</a>.</p><h1>Grafický návrh</h1><p></p><p></p><p> </p><h1>Revize</h1><h3>8. 10. 2019: Tomáš Nadrchal</h3><p>Provedeny drobné změny v chování nástrojové lišty (naznačeno modře).</p><h3>27. 7. 2019: Miroslav Slivoně</h3><table><tbody><tr><th>Odkaz</div></div></th><th>Stručný popis změny/doplnění</div></div></th></tr><tr><td colspan="1"><p><a href="../700ui01-83266189.html">Přepínače chování mapy</a></p></td><td colspan="1">Nová skupina ovládacích prvků, toho času obsahuje jen tlačítko pro vypnutí centrování mapy.</td></tr><tr><td colspan="1"><a href="../700ui01-83266189.html">Výchozí zobrazení mapy bez dat</a></td><td colspan="1">Popis výchozího zobrazení mapy bez dat ("Zobrazení mapy Slovenska").</td></tr><tr><td colspan="1"><a href="../700ui01-83266189.html">Persistence nastavení</a></td><td colspan="1">Přidány přepínače nastavení mapy.</td></tr></tbody></table><h3>25. 6. 2019: Tomáš Nadrchal</h3><table><tbody><tr><th>Odkaz</div></div></th><th>Stručný popis změny/doplnění</div></div></th></tr><tr><td colspan="1"><p><a href="../700ui01-83266189.html">Přiblížení, oddálení</a></p></td><td colspan="1">Doplněn bližší popis chování přiblížení/oddálení mapy dle FLWW2 (naznačeno modře).</td></tr></tbody></table><h3>9. 1. 2019: Tomáš Nadrchal</h3><table><tbody><tr><th>Odkaz</div></div></th><th>Stručný popis změny/doplnění</div></div></th></tr><tr><td colspan="1"><a href="https://confluence.radium.cz/display/mpgskdispecer/700UI01%3A+Mapa#id-700UI01:Mapa-Persistencenastaven%C3%AD">Persistence nastavení</a></td><td colspan="1">Doplněna persistence nastavení mapy.</td></tr></tbody></table>
</div>
</body>
</html>
