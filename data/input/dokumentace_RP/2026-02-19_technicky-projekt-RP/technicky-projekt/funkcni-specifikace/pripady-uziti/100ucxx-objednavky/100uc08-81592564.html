<!DOCTYPE html>
<html lang="cs">
<head>
  <meta charset="utf-8">
  <title>100UC08: Odeslat notifikace k upřesnění dispečerem</title>
</head>
<body>
<div class="wiki-content">
<p></p><h1>Stručný popis, cíl UC</h1><p>UC slouží k odeslání e-mailových notifikací, které (a) upozorňují Dispečera na potřebu doplnit informace do Objednávky a (b) upozorňují Příjem objednávek na Dispečerem již doplněné informace. Odesílání je realizováno předáním vygenerovaných e-mailů na rozhraní Exchange serveru.</p><p>Úspěšné doručení notifikací není podmínkou k přepnutí Objednávky do stavu "K upřesnění", ani k vrácení do jiného stavu.</p><h1>Seznam aktérů</h1><table><tbody><tr><th>Aktér</th><th>Popis</th><th colspan="1">Typická role</th></tr><tr><td colspan="1">Uživatel</td><td colspan="1"><p>Uživatel systému RoadPlan, který má na základě přidělených rolí oprávnění spouštět jednotlivé funkčnosti. Uživatel může tento UC spustit pouze nepřímo z jiných UC.</p></td><td colspan="1"><p>Příjem objednávek, Dispečer</p></td></tr><tr><td>Mailový server</td><td><p>Rozhraní, které je využíváno pro odesílání e-mailových notifikací.</p></td><td colspan="1"><p>-</p></td></tr></tbody></table><h1>Spuštění případu užití</h1><p>UC lze spustit nepřímo (vazba „includes“) z následujících UC:</p><ul><li><a href="100uc01-78681388.html">100UC01: Založit objednávku</a></li><li><a href="100uc03-79429791.html">100UC03: Upravit objednávku</a></li></ul><p>UC je spuštěn v případě, kdy Uživatel v rámci založení nebo úpravy Objednávky:</p><ul><li>přepne stav dosud neuložené Objednávky na nový stav "K upřesnění",</li><li>přepne stav Objednávky z uloženého stavu "Rozpracováno" na nový stav "K upřesnění",</li><li>přepne stav Objednávky z uloženého stavu "K upřesnění" na nový stav "Rozpracováno".</li></ul><h1>Vstupní podmínky</h1><p>Z volajícího UC jsou na vstupu předána tato data:</p><ul><li>Identifikace Objednávky.</li><li>Hodnota nově nastavovaného stavu Objednávky.</li><li>Přihlášený uživatel.</li></ul><h1>Základní tok událostí: </h1><ol><li>Systém zobrazí ovládací prvek pro nastavení notifikace.</li><li>Uživatel zadá požadavek k nastavení notifikace.</li><li>Systém zobrazí formulář nastavení notifikace. (<a href="#" data-page-title="100UI04: Formulář pro nastavení notifikace"></a>).<br><ol><li>Pokud systém na vstupu získal hodnotu nově nastavovaného stavu Objednávky = "Rozpracováno": Jako příjemce je předvyplněn Uživatel, který Objednávku vytvořil.</li></ol></li><li>Uživatel formulář vyplní a potvrdí (<a href="100uc08-81592564.html">EF01: Uživatel stiskl storno</a>, <a href="100uc08-81592564.html">Kontrola vstupních dat</a>).</li><li>Systém zavře formulář nastavení notifikace.</li><li>Uživatel uloží formulář Objednávky - v rámci UC spuštění, tj. <a href="#" data-page-title="100UC01: Založit objednávku"></a> , resp.<a href="100uc03-79429791.html">100UC03: Upravit objednávku</a> (<a href="100uc08-81592564.html">EF03: Uživatel nastavil stav Objednávky nevyžadující odeslání notifikace</a>). </li><li>Systém zkontroluje, zda je nastavena validní notifikace (<a href="100uc08-81592564.html">EF02: Notifikace není nastavena</a>).</li><li>Systém vygeneruje e-mail:<br><ol><li>Pokud systém na vstupu získal hodnotu nově nastavovaného stavu Objednávky = "K upřesnění": <a href="100uc08-81592564.html">ALG01: Žádost o upřesnění</a></li><li>Pokud systém na vstupu získal hodnotu nově nastavovaného stavu Objednávky = "Rozpracováno": <a href="100uc08-81592564.html">ALG02: Upřesnění provedeno</a></li></ol></li><li>Systém předá e-mail mailovému serveru.</li><li>Konec UC.</li></ol><p><em>Poznámka: Uživatel má možnost před uložením formuláře Objednávky (krok 6.) nastavenou notifikaci upravit (opakovat kroky 2. až 5.).</em></p><h1>Alternativní toky událostí</h1><p>Nejsou.</p><h1>Výjimkové toky událostí</h1><h3>EF01: Uživatel stiskl storno</h3><ol><li>Systém zavře formulář nastavení notifikace.</li></ol><h3>EF02: Notifikace není nastavena</h3><ol><li>Systém zobrazí chybovou hlášku, která uživateli sdělí, že není nastavena notifikace (kód hlášky MSG_NOTIFICATION_NOT_SET, viz <a href="../../../systemove-78681299.html">Systémové hlášky</a>).</li></ol><h3>EF03: Uživatel nastavil stav Objednávky nevyžadující odeslání notifikace</h3><ol><li>Systém skryje ovládací prvek pro nastavení notifikace.<br></li><li>Konec UC.</li></ol><p><em>Poznámka: Tento EF pokrývá situaci, kdy Uživatel nejprve notifikaci nastaví, ale pak dodatečně změní stav Objednávky. </em></p><h1>Výstupní podmínky</h1><p>Příslušná e-mailová notifikace je předaná na rozhraní s mailovým serverem.</p><h1>Validace</h1><h3>Kontrola vstupních dat</h3><ul><li>Musí být zadaný alespoň 1 příjemce notifikace. </li><li>Text notifikace nesmí být prázdný.</li></ul><h1>Algoritmy</h1><h3>ALG01: Vygenerování e-mailu - žádost o upřesnění</h3><table><tbody><tr><th>Příjemce</th><th><Příjemci nastavení v notifikaci></th></tr><tr><td colspan="1"><strong>Odesílatel</strong></td><td colspan="1">Fleetware RoadPlan</td></tr><tr><td><strong>Předmět</strong></td><td>Žádost o upřesnění objednávky <číslo objednávky></td></tr><tr><td><strong>Tělo</strong></td><td><p><Jméno přihlášeného uživatele> žádá o upřesnění objednávky <číslo objednávky>:</p><p><Text notifikace></p><p><URL odkaz směřující na <a href="100uc03-79429791.html">100UC03: Upravit objednávku</a> (na vstupu předáno ID příslušné objednávky)></p></td></tr></tbody></table><h3>ALG02: Vygenerování e-mailu - upřesnění provedeno</h3><table><tbody><tr><th>Příjemce</th><th><Příjemci nastavení v notifikaci></th></tr><tr><td colspan="1"><strong>Odesílatel</strong></td><td colspan="1">Fleetware RoadPlan</td></tr><tr><td><strong>Předmět</strong></td><td>Provedeno upřesnění objednávky <číslo objednávky></td></tr><tr><td><strong>Tělo</strong></td><td><p><Jméno přihlášeného uživatele> upřesnil objednávku <číslo objednávky>:</p><p><Text notifikace></p><p><URL odkaz směřující na <a href="100uc03-79429791.html">100UC03: Upravit objednávku</a> (na vstupu předáno ID příslušné objednávky)></p></td></tr></tbody></table><h1>Uživatelské rozhraní</h1><p><a href="#" data-page-title="100UI04: Formulář pro nastavení notifikace"></a></p>
</div>
</body>
</html>
