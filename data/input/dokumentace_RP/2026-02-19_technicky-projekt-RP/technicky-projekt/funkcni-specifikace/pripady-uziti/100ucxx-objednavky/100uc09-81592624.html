<!DOCTYPE html>
<html lang="cs">
<head>
  <meta charset="utf-8">
  <title>100UC09: Zrušit objednávku</title>
</head>
<body>
<div class="wiki-content">
<p></p><h1>Stručný popis, cíl UC</h1><p>UC umožňuje Uživateli zrušit vybranou Objednávku. Možnost zrušení Objednávky je omezena stavem, ve kterém se Objednávka nachází. Zrušit lze Objednávky ve stavu {Rozpracovaná, K realizaci}.</p><h1>Seznam aktérů</h1><table><tbody><tr><th>Aktér</th><th>Popis</th><th colspan="1">Typická role</th></tr><tr><td>Uživatel</td><td><p>Jedná se o uživatele aplikace RoadPlan, který musí mít oprávnění spouštět tento UC.</p></td><td colspan="1"><p>Příjem objednávek</p></td></tr></tbody></table><h1>Spuštění případu užití</h1><p>Bodem spuštění je <a href="#" data-page-title="100UC05: Zobrazit přehled objednávek"></a>. Zde Uživatel vybere Objednávku a zadá požadavek k jejímu zrušení.</p><h1>Vstupní podmínky</h1><ul><li>Uživatel je přihlášený a má oprávněný modifikovat Objednávky UC (viz <a href="../../../uzivatelska-78681297.html">Práva a role</a>).</li><li>Na vstupu je předána identifikace vybrané Objednávky.</li><li>Vybraná Objednávka je v některém ze <a href="../../../high-level-concept/stavove-78680652.html">stavů</a>, který umožňuje její zrušení, tj.: Rozpracovaná, K realizaci. </li></ul><p><em>Poznámka: Při nesplnění vstupních podmínek systém nenabízí v nástrojové liště tlačítko pro zrušení. Tato kompetence náleží nadřazenému UC.</em></p><h1>Základní tok událostí</h1><ol><li>Systém zobrazí potvrzovací dialog s dotazem na zrušení Objednávky (kód hlášky MSG_CONF_CANCEL_ORDER, viz <a href="../../../systemove-78681299.html">Systémové hlášky</a>). </li><li>Uživatel svůj požadavek potvrdí (<a href="100uc09-81592624.html">EF01: Uživatel stiskne Storno</a>).<br></li><li>Systém provede zrušení Objednávky (<a href="100uc09-81592624.html">EF02: Stav Objednávky neumožňuje její zrušení</a>):<br><ol><li>Pokud je stav Objednávky = "K realizaci" a k Objednávce již existují Objednané služby, systém tyto Objednané služby smaže.<ol><li>Systém získá všechny takové <a href="../../../datove-modely/datovy-78681044.html">Objednané služby</a>, které vznikly z této <a href="../../../datove-modely/datovy-78681044.html">Objednávky</a>.</li><li>Systém získá všechny takové <a href="../../../datove-modely/datovy-78681044.html">Lokace objednaných služeb</a>, které jsou obsaženy v rámci těchto <a href="../../../datove-modely/datovy-78681044.html">Objednaných služeb</a> (viz krok <strong>3.a.i</strong>).</li><li>Systém zruší nastavení hodnoty atributu <strong>Identifikátor lokace objednané služby</strong> takových <a href="../../../datove-modely/datovy-78681044.html">FOB informace o realizaci lokace objednané služby</a>, které odkazují na získané <a href="../../../datove-modely/datovy-78681044.html">Lokace objednaných služeb</a> (viz krok <strong>3.a.ii</strong>).</li><li>Systém smaže získané <a href="../../../datove-modely/datovy-78681044.html">Objednané služby</a> (viz krok <strong>3.a.i</strong>).</li></ol></li><li>Systém Objednávku přepne do stavu "Zrušená".</li></ol></li><li>Systém Ukončí UC.</li></ol><h1>Alternativní toky událostí</h1><p>Nejsou.</p><h1>Výjimkové toky událostí</h1><h3>EF01: Uživatel stiskne Storno</h3><ol><li>Systém ukončí UC.</li></ol><h3>EF02: Stav Objednávky neumožňuje její zrušení</h3><ol><li>Systém zobrazí uživateli informaci o stavu Objednávky, který neumožňuje její zrušení (kód hlášky MSG_ERR_UNABLE_CANCEL_ORDER, viz <a href="../../../systemove-78681299.html">Systémové hlášky</a>).</li><li>Systém ukončí UC.</li></ol><p><em>Poznámka: Tento EF může nastat v případě, kdy front-end systému umožnil spuštění UC, ale mezitím došlo (akcí jiného Uživatele - naplánováním Objednané služby do trasy) ke změně stavu Objednávky tak, že její zrušení už možné není.</em></p><h1>Výstupní podmínky</h1><p>Objednávka předaná na vstupu je přepnuta do stavu "Zrušená".</p><h1>Validace</h1><p>Nejsou.</p><h1>Algoritmy</h1><p>Nejsou.</p><h1>Uživatelské rozhraní</h1><p>Standardní potvrzovací dialog. Text hlášky, tlačítka a titulek dialogu specifikovány v přehledu <a href="#" data-page-title="Systémové hlášky">Systémové hlášky</a>, na který se odkazují jednotlivé toky událostí tohoto UC.</p><h1>Revize</h1><h3>15. 1. 2025: Tomáš Nadrchal</h3><table><tbody><tr><th>Odkaz</div></div></th><th>Stručný popis změny/doplnění</div></div></th></tr><tr><td colspan="1"><a href="100uc09-81592624.html">Základní tok událostí</a></td><td colspan="1">Doplněno zrušení referenci na odebírané lokace z FOB zpráv (naznačeno modře).</td></tr></tbody></table>
</div>
</body>
</html>
