<!DOCTYPE html>
<html lang="cs">
<head>
  <meta charset="utf-8">
  <title>200UC18: Odebrat místo dočasného uložení</title>
</head>
<body>
<div class="wiki-content">
<p><strong>Nahrazeno, viz <a href="#" data-page-title="200UC55: Sloučit objednanou službu"></a>!</strong></p><p></p><h1>Stručný popis, cíl UC</h1><p>Cílem UC je odebrání místa dočasného uložení (MDU).</p><h1>Seznam aktérů</h1><table><tbody><tr><th>Aktér</th><th>Popis</th><th colspan="1">Typická role</th></tr><tr><td>Uživatel</td><td><p>Jedná se o uživatele aplikace RoadPlan, který musí mít oprávnění spouštět tento UC.</p></td><td colspan="1"><p> </p></td></tr></tbody></table><h1>Spuštění případu užití</h1><p>Uživatel zadá požadavek na odebrání meziskladu jedním z těchto způsobů:</p><ul><li>Odebrání místa dočasného uložení v tabulce s Položkami denního výkonu ve formuláři Denního výkonu (<a href="../../uzivatelske-rozhrani/200uixx/200ui02/200ui02-84214534.html">200UI02: Tabulka pro editaci denního výkonu</a>).</li><li>Odebrání místa dočasného uložení v tabulce s Objednanými službami na obrazovce pro plánování Denních výkonů z kontextové nabídky (<a href="#" data-page-title="200UI01: Přehled objednaných služeb"></a>).</li></ul><h1>Vstupní podmínky</h1><p>Aby bylo možné odebrat MDU, musí být splněna celá řada podmínek. První skupina neumožní UC vůbec spustit, ošetření pak probíhá přímo na úrovni UI (není dostupné odpovídající tlačítko):</p><ul><li><a href="../../../datove-modely/datovy-78681044.html">Objednaná služba</a> představuje přímo MDU: atribut Určení objednané služby nabývá hodnoty Místo dočasného uložení.</li><li><a href="../../../datove-modely/datovy-78681044.html">Objednaná služba</a> obsahuje odkaz na MDU: hodnota atribut Místo dočasného uložení není NULL.</li></ul><p>Druhá skupina těchto podmínek pak vyžaduje zobrazení chybové hlášky uživateli. Tyto podmínky nezamezují ve spuštění UC a jsou ošetřeny v rámci jeho toků událostí (musí tedy být splněny podmínky obsažené v první skupině):</p><ul><li>Obě <a href="../../../datove-modely/datovy-78681044.html">Objednané služby</a> (výchozí i MDU) musí být naplánovány na stejný <a href="../../../datove-modely/datovy-78681044.html">Denní výkon</a>, a to ten, ze kterého byl volán tento UC. Tento <a href="../../../datove-modely/datovy-78681044.html">Denní výkon</a> musí být v jednom u zvedených stavů: Plánovaný, Schválený, Plněný.</li><li>Jedna z <a href="../../../datove-modely/datovy-78681044.html">Objednaných služeb</a> musí být naplánována na <a href="../../../datove-modely/datovy-78681044.html">Denní výkon</a>, ze kterého byl volán tento UC, a druhá nesmí být naplánována na žádný <a href="../../../datove-modely/datovy-78681044.html">Denní výkon</a>. První <a href="../../../datove-modely/datovy-78681044.html">Denní výkon</a> musí být v jednom u zvedených stavů: Plánovaný, Schválený, Plněný.</li><li>Obě <a href="../../../datove-modely/datovy-78681044.html">Objednané služby</a> (výchozí i MDU) nesmí být naplánovány na žádný <a href="../../../datove-modely/datovy-78681044.html">Denní výkon</a>.</li></ul><p>Uživatel má následující <a href="../../../uzivatelska-78681297.html">oprávnění na moduly a UC</a>:</p><ul><li>Plánování denních výkonů.</li></ul><p>Uživatel má následující <a href="../../../uzivatelska-78681297.html">oprávnění na typ entit</a>:</p><ul><li>Denní výkony - zobrazení a modifikace,</li><li>Objednané služby - zobrazení.</li></ul><h3>Vstupní data</h3><ul><li>Entita <a href="../../../datove-modely/datovy-78681044.html">Objednaná služba</a>.</li></ul><h1>Základní tok událostí</h1><ol><li>Systém určí <a href="../../../datove-modely/datovy-78681044.html">Denní výkon</a>, ze kterého vznikl požadavek na odebrání MDU:<br><ol><li>Pokud je <a href="../../../datove-modely/datovy-78681044.html">Objednaná služba</a> získaná na vstupu UC naplánována na <a href="../../../datove-modely/datovy-78681044.html">Denní výkon</a>: atribut Položka denního výkonu je různý od NULL:<br><ol><li>Získaný <a href="../../../datove-modely/datovy-78681044.html">Denní výkon</a>: atribut Denní výkon entity <a href="../../../datove-modely/datovy-78681044.html">Položka denního výkonu</a> – atribut Položka denního výkonu entity <a href="../../../datove-modely/datovy-78681044.html">Objednaná služba</a>, která byla získána na vstupu UC.<br></li></ol></li><li>Jinak:<br><ol><li>Získaný <a href="../../../datove-modely/datovy-78681044.html">Denní výkon</a>: NULL.</li></ol></li></ol></li><li>Pokud je získaný <a href="../../../datove-modely/datovy-78681044.html">Denní výkon</a> k dispozici a zároveň není v jednom z uvedených stavů (atribut Stav): Plánovaný, Schválený, Plněný.<br><ol><li>Není možné odebrat MDU – viz <a href="200uc18-83266949.html">EF02: Není možné odebrat místo dočasného uložení</a>.<br></li></ol></li><li>Systém určí výchozí <a href="../../../datove-modely/datovy-78681044.html">Objednanou službu</a> a MDU.<br><ol><li>Pokud je na vstupu UC předána <a href="../../../datove-modely/datovy-78681044.html">Objednaná služba</a> představující MDU: atribut Určení objednané služby nabývá hodnoty Místo dočasného uložení:<br><ol><li>Výchozí <a href="../../../datove-modely/datovy-78681044.html">Objednaná služba</a>: hodnota atributu Výchozí objednaná služba.</li><li>MDU: <a href="../../../datove-modely/datovy-78681044.html">Objednaná služba</a> předaná na vstupu UC.</li></ol></li><li>Jinak (pro ostatní případy není UC spuštěn):<br><ol><li>Výchozí <a href="../../../datove-modely/datovy-78681044.html">Objednaná služba</a>: <a href="../../../datove-modely/datovy-78681044.html">Objednaná služba</a> předaná na vstupu UC.</li><li>MDU: hodnota atributu Místo dočasného uložení.<br></li></ol></li></ol></li><li>Pokud je jedna z <a href="../../../datove-modely/datovy-78681044.html">Objednaných služeb</a> (výchozí i MDU) naplánována na jiný než získaný <a href="../../../datove-modely/datovy-78681044.html">Denní výkon</a>.<br><ol><li>Není možné odebrat MDU – viz <a href="200uc18-83266949.html">EF02: Není možné odebrat místo dočasného uložení</a>.</li></ol></li><li>Systém zobrazí modální okno s dotazem pro potvrzení požadavku na odebrání MDU (MSG_CONF_CANCEL_WAREHOUSE_REMOVE, viz <a href="../../../systemove-78681299.html">Systémové hlášky</a>).</li><li>Uživatel potvrdí požadavek na sloučení – stiskne tlačítko Ano.<br></li><li>Systém odebere <a href="../../../datove-modely/datovy-78681044.html">Objednanou službu</a> představující MDU.</li><li>Systém nastaví výchozí <a href="../../../datove-modely/datovy-78681044.html">Objednanou službu</a> do původního stavu – nastaví následující atributy:<br><ol><li>Navazující objednaná služba: NULL.</li><li>Lokace objednané služby: je odebrána <a href="../../../datove-modely/datovy-78681044.html">Lokace objednané služby</a> typu Místo dočasného uložení (atribut Typ lokace).<br><ul><li>Poznámka: Taková <a href="../../../datove-modely/datovy-78681044.html">Lokace objednané služby</a> může být v rámci uvedené kolekce obsažena maximálně jednou.</li></ul></li></ol></li><li>Systém aktualizuje trasu.<br><ol><li>Pokud je výchozí <a href="../../../datove-modely/datovy-78681044.html">Objednaná služba</a> naplánována na <a href="../../../datove-modely/datovy-78681044.html">Denní výkon</a>: atribut Položka denního výkonu je různý od NULL:<br><ol><li>Je spuštěn <a href="#" data-page-title="200UC29: Získat trasu denního výkonu">200UC29: Získat trasu denního výkonu</a>, na vstup je předán odpovídající <a href="../../../datove-modely/datovy-78681044.html">Denní výkon</a>: entita <a href="../../../datove-modely/datovy-78681044.html">Denní výkon</a> – atribut Denní výkon entity <a href="../../../datove-modely/datovy-78681044.html">Položka denního výkonu</a> – atribut Položka denního výkonu entity <a href="../../../datove-modely/datovy-78681044.html">Objednaná služba</a>, která byla získána na vstupu UC.</li></ol></li><li>Jinak:<br><ol><li>Je aktualizována trasa <a href="../../../datove-modely/datovy-78681044.html">Objednané služby</a> získané na vstupu UC – viz <a href="../101ucxx-objednane-sluzby/101uc01-82116734.html">Získání trasy</a>.</li></ol></li></ol></li></ol><p>Poznámka: V rámci kroku 4, kdy je vyhodnocováno, zda je <a href="../../../datove-modely/datovy-78681044.html">Objednaná služba</a> naplánována na <a href="../../../datove-modely/datovy-78681044.html">Denní výkon</a> (a případně na který), musí být porovnání provedeno následovně – pokud je hodnota atributu Položka denního výkonu <a href="../../../datove-modely/datovy-78681044.html">Objednané služby</a> rovna NULL, není naplánována na žádný denní <a href="../../../datove-modely/datovy-78681044.html">Denní výkon</a>. Při porovnání s konkrétním <a href="../../../datove-modely/datovy-78681044.html">Denním výkon</a> pak není <a href="../../../datove-modely/datovy-78681044.html">Denním výkon</a> odpovídající <a href="../../../datove-modely/datovy-78681044.html">Objednané služby</a> dostupný (při pokusu o porovnání by došlo k vyvolání systémové výjimky) a je nutné nepřímo říct, že i <a href="../../../datove-modely/datovy-78681044.html">Denní výkon</a> takové <a href="../../../datove-modely/datovy-78681044.html">Objednané služby</a> je roven NULL. Pokud nastane situace, kdy má být porovnána nenaplánována <a href="../../../datove-modely/datovy-78681044.html">Objednaná služba</a> s <a href="../../../datove-modely/datovy-78681044.html">Denním výkonem</a>, který nebyl získán (je NULL), je výsledkem porovnání TRUE.</p><h1>Alternativní toky událostí</h1><p>Nejsou.</p><h1>Výjimkové toky událostí</h1><h3>EF01: Storno</h3><h4>Tok událostí</h4><ol><li>Výjimkový tok událostí začíná krokem 6 základního toku událostí.</li><li>KDYŽ uživatel stiskne tlačítko Ne.<br><ol><li>Systém zavře modální okno. <strong>Konec toku událostí</strong>.</li></ol></li><li>KDYŽ uživatel stiskne tlačítko křížku pro zavření modálního okna.<br><ol><li>Systém zavře modální okno. <strong>Konec toku událostí</strong>.</li></ol></li></ol><h4>Výstupní podmínky</h4><ul><li>Nebylo odebráno MDU.</li></ul><h3>EF02: Není možné odebrat místo dočasného uložení</h3><h4>Vstupní podmínky</h4><ul><li>Není možné odebrat MDU.</li></ul><h4>Tok událostí</h4><ol><li>Výjimkový tok událostí začíná krokem 2.a nebo 4.a základního toku událostí.</li><li>Systém zobrazí modální okno s informací, že není možné odebrat MDU (MSG_ERR_WAREHOUSE_REMOVE_NOT_POSSIBLE, viz <a href="../../../systemove-78681299.html">Systémové hlášky</a>).</li><li>Uživatel stisknutím tlačítka potvrdí zobrazené hlášení.</li><li>Systém zavře modální okno se zobrazenou informací. <strong>Konec toku událost</strong>.</li></ol><h4>Výstupní podmínky</h4><ul><li>Nebylo odebráno MDU.</li></ul><h1>Výstupní podmínky</h1><ul><li>Bylo odebráno MDU.</li></ul><h1>Validace</h1><p>Nejsou.</p><h1>Algoritmy</h1><p>Nejsou.</p><h1>Uživatelské rozhraní</h1><p>Rozložení dialogového okna je uvedeno v samostatném dokumentu – viz <a href="../../uzivatelske-rozhrani/700uixx-obecne/700ui06-79430049.html">700UI06: Systémové hlášky</a>.</p><h1>Revize</h1><h3>23. 3. 2020: Tomáš Nadrchal</h3><table><tbody><tr><th>Odkaz</div></th><th>Stručný popis změny/doplnění</div></th></tr><tr><td colspan="1"><a href="200uc18-83266949.html">Vstupní podmínky</a></td><td colspan="1">Aktualizovány stavy denního výkonu, ve kterých je umožněno odebrat MDU (naznačneo modře).</td></tr><tr><td colspan="1"><a href="200uc18-83266949.html">Základní tok událostí</a></td><td colspan="1">Aktualizovány stavy denního výkonu, ve kterých je umožněno odebrat MDU (naznačneo modře).</td></tr></tbody></table><p><br></p>
</div>
</body>
</html>
