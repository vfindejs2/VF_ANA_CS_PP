<!DOCTYPE html>
<html lang="cs">
<head>
  <meta charset="utf-8">
  <title>200UC56: Přeplánovat denní výkon</title>
</head>
<body>
<div class="wiki-content">
<p></p><h1>Stručný popis, cíl</h1><p>Cílem případu užití je hromadné přeplánování položek z výchozího denního výkonu na cílový. </p><h1>Seznam aktérů</h1><table><tbody><tr><th>Aktér</th><th colspan="1">Poznámka</th></tr><tr><td colspan="1">Uživatel</td><td colspan="1">–</td></tr></tbody></table><p>Poznámka: Úplný přehled aktérů je zobrazen samostatně, viz <a href="../../../high-level-concept/akteri-78680673.html">Aktéři</a>.</p><h1>Spuštění případu užití</h1><p>Uživatel zadá požadavek na přeplánování denního výkonu, a to jedním z uvedených způsobů:</p><ul><li>Uživatel zadá požadavek na přeplánování denního výkonu v panelu s přehledem denních výkonů na obrazovce plánování (viz <a href="#" data-page-title="206UC04: Zobrazit panel přehledu denních výkonů"></a>).</li></ul><h2>Vstupní podmínky</h2><p>Uživatel má následující <a href="../../../uzivatelska-78681297.html">oprávnění na moduly a UC</a>:</p><ul><li>Plánování denních výkonů.</li></ul><p>Uživatel má následující <a href="../../../uzivatelska-78681297.html">oprávnění na typ entit</a>:</p><ul><li>Denní výkony - zobrazení a modifikace.</li></ul><p>Musí být umožněna editace na vstupu získaných <a href="../../../datove-modely/datovy-78681044.html">Denních výkonů</a> (vstupní parametry <strong>Výchozí denní výkon</strong>, <strong>Cílový denní výkon</strong>):</p><ul><li>Atribut <strong>Stav</strong> nabývá jedné z uvedených hodnot: <strong>Plánovaný</strong>, <strong>Schválený</strong>, <strong>Plněný</strong> (viz <a href="../../../datove-modely/datovy-78681044.html">Stav denního výkonu</a>).</li><li>Atribut <strong>Datum realizace</strong> je větší nebo roven dnešnímu datu (nejedná se o datum v minulosti).</li></ul><p>Současně musí v rámci výchozího <a href="../../../datove-modely/datovy-78681044.html">Denního výkonu</a> (vstupní parametry <strong>Výchozí denní výkon</strong>) obsažena alespoň jedna <a href="../../../datove-modely/datovy-78681044.html">Položka denního výkonu</a> mimo start a cíl. Musí tedy splňovat všechny dále uvedené podmínky zároveň:</p><ul><li>Hodnota atribut <strong>Denní výkon</strong> odkazuje na výchozí <a href="../../../datove-modely/datovy-78681044.html">Denní výkon</a> získaný na vstupu (vstupní parametry <strong>Výchozí denní výkon</strong>).</li><li>Nejedná se o <a href="../../../datove-modely/datovy-78681044.html">Položka denního výkonu</a> odkazovanou v rámci atributu <strong>Počáteční položka denního výkonu</strong> výchozího <a href="../../../datove-modely/datovy-78681044.html">Denního výkonu</a> (vstupní parametry <strong>Výchozí denní výkon</strong>).</li><li>Nejedná se o <a href="../../../datove-modely/datovy-78681044.html">Položka denního výkonu</a> odkazovanou v rámci atributu <strong>Koncová položka denního výkonu</strong> výchozího <a href="../../../datove-modely/datovy-78681044.html">Denního výkonu</a> (vstupní parametry <strong>Výchozí denní výkon</strong>).<br></li></ul><h2>Vstupní data</h2><table><tbody><tr><th>Vstupní parametr</div></th><th>Datový typ</div></th><th colspan="1">Povinnost</div></th><th>Popis</div></th><th colspan="1">Poznámka</div></th></tr><tr><td colspan="1">Výchozí denní výkon</td><td colspan="1"><a href="../../../datove-modely/datovy-78681044.html">Denní výkon</a></td><td colspan="1">Ano</td><td colspan="1">Denní výkon, který má být přeplánován.</td><td colspan="1">–</td></tr><tr><td colspan="1">Cílový denní výkon</td><td colspan="1"><a href="../../../datove-modely/datovy-78681044.html">Denní výkon</a></td><td colspan="1">Ne</td><td colspan="1">Denní výkon, na který má být přeplánování uskutečněno.</td><td colspan="1">Pokud není hodnota předána, je založen nový denní výkon.</td></tr></tbody></table><h1>Základní tok událostí</h1><ol><li>Pokud není k dispozici cílový <a href="../../../datove-modely/datovy-78681044.html">Denní výkon</a> (vstupní parametr <strong>Cílový denní výkon</strong>):<br><ol><li>Systém založí nový <a href="../../../datove-modely/datovy-78681044.html">Denní výkon</a> – spustí <a href="#" data-page-title="200UC01: Přidat denní výkon"></a>, na vstup jsou předány následující informace:<br><ul><li><strong>Provozovna</strong>: hodnota atributu <strong>Provozovna</strong> výchozího <a href="../../../datove-modely/datovy-78681044.html">Denního výkonu</a> (vstupní parametry <strong>Výchozí denní výkon</strong>).</li><li><strong>Datum realizace</strong>: hodnota atributu <strong>Datum realizace</strong> výchozího <a href="../../../datove-modely/datovy-78681044.html">Denního výkonu</a> (vstupní parametry <strong>Výchozí denní výkon</strong>).</li><li><p><strong>Typ dopravy</strong>: hodnota atributu <strong>Typ dopravy</strong> výchozího <a href="../../../datove-modely/datovy-78681044.html">Denního výkonu</a> (vstupní parametry <strong>Výchozí denní výkon</strong>).</p></li><li><p><strong>Vozidlo</strong>: není předána žádná hodnota (NULL).</p></li><li><p><strong>Vytvořen uživatelem</strong>: předána hodnota <strong>TRUE</strong>.</p></li></ul></li><li>Systém s vytvořeným <a href="../../../datove-modely/datovy-78681044.html">Denním výkonem</a> v rámci tohoto UC pracuje tak, jako kdyby byl získán na vstupu (vstupní parametr <strong>Cílový denní výkon</strong>).<br></li></ol></li><li>Pokud je v rámci výchozího <a href="../../../datove-modely/datovy-78681044.html">Denního výkonu</a> k dispozici <a href="../../../datove-modely/datovy-78681044.html">Položka denního výkonu</a> mimo start a cíl (viz <a href="200uc56-115213863.html">ALG01: Získej první položku výchozího denního výkonu</a>):<ol><li>Systém zpracuje právě zkoumanou <a href="../../../datove-modely/datovy-78681044.html">Položku denního výkonu</a> dle jejího typu (atribut <strong>Typ položky</strong>, viz <a href="../../../datove-modely/datovy-78681044.html">Typ položky denního výkonu</a>):<br><ul><li><strong>Objednaná služba</strong>: viz <a href="200uc56-115213863.html">AF01: Zpracovat položku typu objednaná služba</a>.</li><li><strong>Lokace objednané služby</strong>: viz <a href="200uc56-115213863.html">AF02: Zpracovat položku typu lokace objednané služby</a>.</li><li><strong>Časový interval</strong>: viz <a href="200uc56-115213863.html">AF03: Zpracovat položku typu časový interval</a>.</li><li><strong>Rozdělení</strong>: viz <a href="200uc56-115213863.html">AF04: Zpracovat položku typu rozdělení</a>.</li></ul></li></ol></li></ol><p>Poznámka: V rámci volaných UC dochází k provedení dalších akcí (přepočet trasy, zpracování informací o realizaci, aktualizace podkladů pro FOB…), ty je vhodné provést až po dokončení přesunu všech položek výchozího denního výkonu.</p><p><em>Interní poznámka: Skutečná implementace se může lišit, musí však být dodrženo požadované chování.</em></p><p>Stručný popis: Dochází k postupnému procházení položek výchozího denního výkonu (ve vzestupném pořadí). Každá nalezená položka je pak vyhodnocena, odebrána z výchozího denního výkonu a vložena na denní výkon cílový. Zmíněné vyhodnocení dílčích poboček probíhá následovně:</p><ul><li>Pokud se jedná o položku představující objednanou službu, dojde k jejímu odebrání z výchozího denního výkonu a vložení na denní výkon cílový.</li><li>Pokud se jedná o položku jiného typu, dojde k vytvoření její kopie v rámci cílového denního výkonu, následně může být odebrána z výchozího denního výkonu.</li><li>Jsou přenášeny pouze položky denního výkonu, provozní doba ani alokace na servis se nepřenáší (informace související přímo s vozidlem, nikoliv jeho plánovanou trasou).</li><li>Uvedený postup byl zvolen především kvůli navazujícím akcím, které je potřeba provést (přepočet trasy, zpracování informací o realizaci, stažení trasy pro FOB…).<br><ul><li>Poznámka: Tyto akce mohou být proveden společně v závěru algoritmu, asi není nutné (ani žádoucí) je provádět pro každou položku denního výkonu.</li></ul></li></ul><h1>Alternativní toky událostí</h1><h2>AF01: Zpracovat položku typu objednaná služba</h2><h3>Vstupní podmínky</h3><ul><li>Je získán požadavek na zpracování <a href="../../../datove-modely/datovy-78681044.html">Položku denního výkonu</a> typu <strong>Objednaná služba</strong> (viz <a href="../../../datove-modely/datovy-78681044.html">Typ položky denního výkonu</a>).</li></ul><h3>Tok událostí</h3><ol><li>Systém získá odpovídající <a href="../../../datove-modely/datovy-78681044.html">Objednanou službu</a> (hodnota atributu <strong>Objednaná služba</strong> právě zkoumané <a href="../../../datove-modely/datovy-78681044.html">Položky denního výkonu</a>).</li><li>Sytém odebere odpovídající <a href="../../../datove-modely/datovy-78681044.html">Položku denního výkonu</a> z výchozího <a href="../../../datove-modely/datovy-78681044.html">Denního výkonu</a> – spustí <a href="#" data-page-title="200UC26: Odebrat položky z denního výkonu"></a>, na vstup jsou předány následující informace:<br><ul><li><strong>Položky denního výkonu</strong>: právě zkoumaná <a href="../../../datove-modely/datovy-78681044.html">Položka denního výkonu</a>.<br></li></ul></li><li>Systém vloží odpovídající <a href="../../../datove-modely/datovy-78681044.html">Položku denního výkonu</a> na cílový <a href="../../../datove-modely/datovy-78681044.html">Denní výkon</a> – spustí <a href="#" data-page-title="200UC07: Vložit objednanou službu do denního výkonu"></a>, na vstup jsou předány následující informace:<ul><li><strong>Objednaná služba</strong>: odpovídající <a href="../../../datove-modely/datovy-78681044.html">Objednaná služba</a> (viz krok 1).</li><li><strong>Denní výkon</strong>: na vstupu získaný cílový <a href="../../../datove-modely/datovy-78681044.html">Denní výkon</a> (vstupní parametr <strong>Cílový denní výkon</strong>).</li></ul></li></ol><p>Poznámka: Pokud je součástí této <a href="../../../datove-modely/datovy-78681044.html">Položky denního výkonu</a> přestávka, je v rámci zpracování <a href="../../../datove-modely/datovy-78681044.html">Objednané služby</a> přenesena i ta (jedná se o „vnořené“ přestávky).</p><h3>Výstupní podmínky</h3><ul><li>Byla zpracována <a href="../../../datove-modely/datovy-78681044.html">Položka denního výkonu</a>, došlo k jejímu odebrání z výchozího a vložení na cílový <a href="../../../datove-modely/datovy-78681044.html">Denní výkon</a>.</li></ul><h2>AF02: Zpracovat položku typu lokace objednané služby</h2><h3>Vstupní podmínky</h3><ul><li>Je získán požadavek na zpracování <a href="../../../datove-modely/datovy-78681044.html">Položku denního výkonu</a> typu <strong>Lokace objednané služby</strong> (viz <a href="../../../datove-modely/datovy-78681044.html">Typ položky denního výkonu</a>).</li></ul><h3>Tok událostí</h3><ol><li>Systém získá odpovídající <a href="../../../datove-modely/datovy-78681044.html">Lokaci objednané služby</a> (hodnota atributu <strong>Lokace objednané služby</strong> právě zkoumané <a href="../../../datove-modely/datovy-78681044.html">Položky denního výkonu</a>).</li><li>Systém vyhodnotí získanou <a href="../../../datove-modely/datovy-78681044.html">Lokaci objednané služby</a> (viz krok 1) a dle jejího typu (atribut <strong>Typ lokace</strong>, viz <a href="../../../datove-modely/datovy-78681044.html">Typ lokace objednané služby</a>) provede její vložení na cílový <a href="../../../datove-modely/datovy-78681044.html">Denní výkon</a>:<br><ul><li><em><strong>Místo realizace</strong>: nemůže nastat (uvedené <a href="../../../datove-modely/datovy-78681044.html">Lokace objednaných služeb</a> se vyskytují pouze v rámci <a href="../../../datove-modely/datovy-78681044.html">Objednané služby</a>).</em></li><li><strong>Likvidační místo</strong>: Systém vloží odpovídající <a href="../../../datove-modely/datovy-78681044.html">Položku denního výkonu</a> na cílový <a href="../../../datove-modely/datovy-78681044.html">Denní výkon</a> – spustí <a href="#" data-page-title="200UC11: Vložit likvidační místa do denního výkonu"></a>, na vstup jsou předány následující informace:<ul><li><strong>Denní výkon</strong>: na vstupu získaný cílový <a href="../../../datove-modely/datovy-78681044.html">Denní výkon</a> (vstupní parametr <strong>Cílový denní výkon</strong>).</li><li><strong>Likvidační místo</strong>: hodnota atributu <strong>Likvidační místo</strong> odpovídající <a href="../../../datove-modely/datovy-78681044.html">Lokace objednané služby</a> (viz krok 1).</li><li><strong>Kód nakládání</strong>: hodnota atributu <strong>Kód nakládání</strong> odpovídající <a href="../../../datove-modely/datovy-78681044.html">Lokace objednané služby</a> (viz krok 1).<br></li></ul></li><li><strong>Provozovna</strong>: Systém vloží odpovídající <a href="../../../datove-modely/datovy-78681044.html">Položku denního výkonu</a> na cílový <a href="../../../datove-modely/datovy-78681044.html">Denní výkon</a> – spustí <a href="#" data-page-title="200UC15: Vložit provozovnu do denního výkonu"></a>, na vstup jsou předány následující informace:<ul><li><strong>Denní výkon</strong>: na vstupu získaný cílový <a href="../../../datove-modely/datovy-78681044.html">Denní výkon</a> (vstupní parametr <strong>Cílový denní výkon</strong>).</li><li><strong>Provozovna</strong>: hodnota atributu <strong>Provozovna</strong> odpovídající <a href="../../../datove-modely/datovy-78681044.html">Lokace objednané služby</a> (viz krok 1).<br></li></ul></li><li><strong>Jiné</strong>: Systém vloží odpovídající <a href="../../../datove-modely/datovy-78681044.html">Položku denního výkonu</a> na cílový <a href="../../../datove-modely/datovy-78681044.html">Denní výkon</a> – spustí <a href="#" data-page-title="200UC19: Vložit bod průjezdu do denního výkonu"></a>, na vstup jsou předány následující informace:<ul><li><strong>Denní výkon</strong>: na vstupu získaný cílový <a href="../../../datove-modely/datovy-78681044.html">Denní výkon</a> (vstupní parametr <strong>Cílový denní výkon</strong>).<br></li><li><strong>Adresa</strong>: hodnota atributu <strong>Adresa</strong> odpovídající <a href="../../../datove-modely/datovy-78681044.html">Lokace objednané služby</a> (viz krok 1).<br></li><li><strong>Souřadnice</strong>: hodnota atributu <strong>Souřadnice</strong> odpovídající <a href="../../../datove-modely/datovy-78681044.html">Lokace objednané služby</a> (viz krok 1).<br></li></ul></li><li><em><strong>Přestávka</strong>: řešeno v rámci <a href="200uc56-115213863.html">AF03: Zpracovat položku typu časový interval</a>.</em></li><li><em><strong>Rozdělení</strong>: řešeno v rámci <a href="200uc56-115213863.html">AF04: Zpracovat položku typu rozdělení</a>.</em></li><li><em><strong>Místo dočasného uložení</strong>: nemůže nastat (uvedené <a href="../../../datove-modely/datovy-78681044.html">Lokace objednaných služeb</a> se vyskytují pouze v rámci <a href="../../../datove-modely/datovy-78681044.html">Objednané služby</a>).</em></li><li><em><strong>Časový interval</strong>: řešeno v rámci <a href="200uc56-115213863.html">AF01: Zpracovat položku typu objednaná služba</a> (jedná se o <a href="../../../datove-modely/datovy-78681044.html">Objednané služby</a> dané dobou trvání).</em></li></ul></li><li>Systém odebere odpovídající <a href="../../../datove-modely/datovy-78681044.html">Položku denního výkonu</a> z výchozího <a href="../../../datove-modely/datovy-78681044.html">Denního výkonu</a> – spustí <a href="#" data-page-title="200UC26: Odebrat položky z denního výkonu"></a>, na vstup jsou předány následující informace:<br><ul><li><strong>Položky denního výkonu</strong>: právě zkoumaná <a href="../../../datove-modely/datovy-78681044.html">Položka denního výkonu</a>.<br></li></ul></li></ol><h3>Výstupní podmínky</h3><ul><li>Byla zpracována <a href="../../../datove-modely/datovy-78681044.html">Položka denního výkonu</a>, došlo k jejímu odebrání z výchozího a vložení na cílový <a href="../../../datove-modely/datovy-78681044.html">Denní výkon</a>.</li></ul><h2>AF03: Zpracovat položku typu časový interval</h2><h3>Vstupní podmínky</h3><ul><li>Je získán požadavek na zpracování <a href="../../../datove-modely/datovy-78681044.html">Položku denního výkonu</a> typu <strong>Časový interval</strong> (viz <a href="../../../datove-modely/datovy-78681044.html">Typ položky denního výkonu</a>).</li></ul><h3>Tok událostí</h3><ol><li>Systém vloží odpovídající <a href="../../../datove-modely/datovy-78681044.html">Položku denního výkonu</a> na cílový <a href="../../../datove-modely/datovy-78681044.html">Denní výkon</a> – spustí <a href="#" data-page-title="200UC09: Vložit přestávku do denního výkonu"></a>, na vstup jsou předány následující informace:<br><ul><li><strong>Denní výkony</strong>: na vstupu získaný cílový <a href="../../../datove-modely/datovy-78681044.html">Denní výkon</a> (vstupní parametr <strong>Cílový denní výkon</strong>).</li><li><strong>Délka přestávky</strong>: hodnota atributu <strong>Doba trvání</strong> odpovídající <a href="../../../datove-modely/datovy-78681044.html">Lokace objednané služby</a> (atribut <strong>Lokace objednané služby</strong> právě zkoumané <a href="../../../datove-modely/datovy-78681044.html">Položky denního výkonu</a>).</li></ul></li><li>Sytém odebere odpovídající <a href="../../../datove-modely/datovy-78681044.html">Položku denního výkonu</a> z výchozího <a href="../../../datove-modely/datovy-78681044.html">Denního výkonu</a> – spustí <a href="#" data-page-title="200UC26: Odebrat položky z denního výkonu"></a>, na vstup jsou předány následující informace:<br><ul><li><strong>Položky denního výkonu</strong>: právě zkoumaná <a href="../../../datove-modely/datovy-78681044.html">Položka denního výkonu</a>.</li></ul></li></ol><h3>Výstupní podmínky</h3><ul><li>Byla zpracována <a href="../../../datove-modely/datovy-78681044.html">Položka denního výkonu</a>, došlo k jejímu odebrání z výchozího a vložení na cílový <a href="../../../datove-modely/datovy-78681044.html">Denní výkon</a>.</li></ul><h2>AF04: Zpracovat položku typu rozdělení</h2><h3>Vstupní podmínky</h3><ul><li>Je získán požadavek na zpracování <a href="../../../datove-modely/datovy-78681044.html">Položku denního výkonu</a> typu <strong>Rozdělení</strong> (viz <a href="../../../datove-modely/datovy-78681044.html">Typ položky denního výkonu</a>).</li></ul><h3>Tok událostí</h3><ol><li>Sytém odebere odpovídající <a href="../../../datove-modely/datovy-78681044.html">Položku denního výkonu</a> z výchozího <a href="../../../datove-modely/datovy-78681044.html">Denního výkonu</a> – spustí <a href="#" data-page-title="200UC26: Odebrat položky z denního výkonu"></a>, na vstup jsou předány následující informace:<br><ul><li><strong>Položky denního výkonu</strong>: právě zkoumaná <a href="../../../datove-modely/datovy-78681044.html">Položka denního výkonu</a>.<br></li></ul></li><li>Systém vloží odpovídající <a href="../../../datove-modely/datovy-78681044.html">Položku denního výkonu</a> na cílový <a href="../../../datove-modely/datovy-78681044.html">Denní výkon</a> – spustí <a href="#" data-page-title="200UC21: Vložit rozdělení směny do denního výkonu"></a>, na vstup jsou předány následující informace:<br><ul><li><strong>Denní výkony</strong>: na vstupu získaný cílový <a href="../../../datove-modely/datovy-78681044.html">Denní výkon</a> (vstupní parametr <strong>Cílový denní výkon</strong>).</li></ul></li></ol><h3>Výstupní podmínky</h3><ul><li>Byla zpracována <a href="../../../datove-modely/datovy-78681044.html">Položka denního výkonu</a>, došlo k jejímu odebrání z výchozího a vložení na cílový <a href="../../../datove-modely/datovy-78681044.html">Denní výkon</a>.</li></ul><h1>Výjimkové toky událostí</h1><p>–</p><h1>Ukončení případu užití</h1><h2>Výstupní podmínky</h2><p>Došlo k přeplánování položek výchozího <a href="../../../datove-modely/datovy-78681044.html">Denního výkonu</a> na cílový (případně byl cílový <a href="../../../datove-modely/datovy-78681044.html">Denní výkon</a> založen).</p><h2>Výstupní data</h2><p>–</p><h1>Algoritmy</h1><h3>ALG01: Získej první položku výchozího denního výkonu</h3><p>Algoritmus slouží k nalezení v pořadí první <a href="../../../datove-modely/datovy-78681044.html">Položky denního výkonu</a> mimo start a cíl, hledá pak v rámci výchozího <a href="../../../datove-modely/datovy-78681044.html">Denního výkonu</a> (vstupní parametr <strong>Výchozí denní výkon</strong>). Pokud taková <a href="../../../datove-modely/datovy-78681044.html">Položka denního výkonu</a> neexistuje, není na výstupu algoritmu předána žádný hodnota.</p><ol><li>Systém nalezne takovou <a href="../../../datove-modely/datovy-78681044.html">Položku denního výkonu</a>, která splňuje všechny dále uvedené podmínky zároveň:<br><ul><li>Hodnota atribut <strong>Denní výkon</strong> odkazuje na výchozí <a href="../../../datove-modely/datovy-78681044.html">Denní výkon</a> získaný na vstupu (vstupní parametry <strong>Výchozí denní výkon</strong>).</li><li>Nejedná se o <a href="../../../datove-modely/datovy-78681044.html">Položka denního výkonu</a> odkazovanou v rámci atributu <strong>Počáteční položka denního výkonu</strong> výchozího <a href="../../../datove-modely/datovy-78681044.html">Denního výkonu</a> (vstupní parametry <strong>Výchozí denní výkon</strong>).</li><li>Nejedná se o <a href="../../../datove-modely/datovy-78681044.html">Položka denního výkonu</a> odkazovanou v rámci atributu <strong>Koncová položka denního výkonu</strong> výchozího <a href="../../../datove-modely/datovy-78681044.html">Denního výkonu</a> (vstupní parametry <strong>Výchozí denní výkon</strong>).</li><li>Hodnota atributu <strong>Pořadí</strong> je minimální (hledáme tedy právě jeden záznam).</li></ul></li><li>Pokud je nalezena <a href="../../../datove-modely/datovy-78681044.html">Položka denního výkonu</a> (viz krok 1), je předána na výstupu algoritmu.</li><li>Jinak <a href="../../../datove-modely/datovy-78681044.html">Položka denního výkonu</a> nalezena není, na výstupu algoritmu není předána žádná hodnota (NULL). </li></ol><h1>Validace</h1><p>–</p><h1>Uživatelské rozhraní</h1><p>–</p><h1>Grafický návrh</h1><p>–</p><h1>Revize</h1><p>–</p>
</div>
</body>
</html>
