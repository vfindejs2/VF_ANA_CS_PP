<!DOCTYPE html>
<html lang="cs">
<head>
  <meta charset="utf-8">
  <title>200UC47: Vložit položky do denního výkonu</title>
</head>
<body>
<div class="wiki-content">
<p></p><h1>Stručný popis, cíl UC</h1><p>Cílem UC je hromadné vložení <a href="../../../datove-modely/datovy-78681044.html">Položek denního výkonu</a> na <a href="../../../datove-modely/datovy-78681044.html">Denní výkon</a>.</p><h1>Seznam aktérů</h1><table><tbody><tr><th>Aktér</th><th>Popis</th><th colspan="1">Typická role</th></tr><tr><td>Uživatel</td><td><p>Jedná se o uživatele aplikace RoadPlan, který musí mít oprávnění spouštět tento UC.</p></td><td colspan="1"><p>Dispečer</p></td></tr></tbody></table><h1>Spuštění případu užití</h1><p>Uživatel zadá požadavek na hromadné vložení <a href="../../../datove-modely/datovy-78681044.html">Položek denního výkonu</a> na <a href="../../../datove-modely/datovy-78681044.html">Denní výkon</a> jedním z těchto způsobů:</p><ul><li>Hromadné vložení <a href="../../../datove-modely/datovy-78681044.html">Objednaných služeb</a> na <a href="../../../datove-modely/datovy-78681044.html">Denní výkon</a> na obrazovce pro plánování <a href="../../../datove-modely/datovy-78681044.html">Denních výkonů</a> (viz <a href="#" data-page-title="200UI01: Obrazovka pro plánování denních výkonů"></a>).</li></ul><h1>Vstupní podmínky</h1><ul><li>Uživatel má následující <a href="../../../uzivatelska-78681297.html">oprávnění na moduly a UC</a>:<br><ul><li>Plánování denních výkonů.</li></ul></li><li>Uživatel má následující <a href="../../../uzivatelska-78681297.html">oprávnění na typ entit</a>:<br><ul><li>Objednané služby - zobrazení,</li><li>Denní výkony - zobrazení a modifikace.</li></ul></li><li>Uživatel má následující <a href="../../../uzivatelska-78681297.html">oprávnění na instance entity</a>:<ul><li>Uživatel může mít právo na omezenou množinu <a href="../../../datove-modely/datovy-78681044.html">Provozoven</a> (minimálně pak alespoň na 1).</li></ul></li></ul><h3>Vstupní data</h3><p>Vstupní data mohou být předá různými způsoby – podle toho, jakým způsobem byl UC spuštěn, viz tabulka.</p><table><tbody><tr><th>Vstupní data</th><th>Poznámka</th></tr><tr><td><ul><li>Prvky – entita odpovídající případu užití, který spustí tento případ užití (kolekce).</li><li><a href="../../../datove-modely/datovy-78681044.html">Denní výkon</a>.</li></ul></td><td><a href="../../../datove-modely/datovy-78681044.html">Položky denního výkonu</a> jsou vkládány na existující <a href="../../../datove-modely/datovy-78681044.html">Denní výkon</a>.</td></tr><tr><td colspan="1"><ul><li>Prvky – entita odpovídající případu užití, který spustí tento případ užití (kolekce).</li><li><a href="../../../datove-modely/datovy-78681044.html">Provozovna</a>.</li><li>Datum realizace.</li><li><a href="../../../datove-modely/datovy-78681044.html">Typ dopravy</a>.</li></ul></td><td colspan="1"><a href="../../../datove-modely/datovy-78681044.html">Položky denního výkonu</a> jsou vkládány na <a href="../../../datove-modely/datovy-78681044.html">Denní výkon</a>, který bude vytvářen v rámci UC.</td></tr></tbody></table><h1>Základní tok událostí</h1><ol><li>Pokud není na vstupu předán <a href="../../../datove-modely/datovy-78681044.html">Denní výkon</a>:<br><ol><li>Systém vytvoří nový <a href="../../../datove-modely/datovy-78681044.html">Denní výkon</a>, do kterého budou <a href="../../../datove-modely/datovy-78681044.html">Položky denního výkonu</a> vloženy – viz <a href="200uc01-83266874.html">200UC01: Přidat denní výkon</a>, na vstup UC jsou pak předány následující hodnoty:<br><ul><li>Provozovna: <a href="../../../datove-modely/datovy-78681044.html">Provozovna</a> získaná na vstupu UC.</li><li>Datum realizace: Datum realizace získané na vstupu UC.</li><li>Typ dopravy: <a href="../../../datove-modely/datovy-78681044.html">Typ dopravy</a>získaný na vstupu UC.</li><li>Vozidlo: NULL.</li></ul></li></ol></li><li>Systém připraví prázdnou kolekci pro <a href="../../../datove-modely/datovy-78681044.html">Položky denního výkonu</a>.</li><li>Pro všechny prvky kolekce získané na vstupu UC:<br><ol><li>Pokud se jedná o entitu <a href="../../../datove-modely/datovy-78681044.html">Objednaná služba</a>: <a href="200uc47-88017148.html">AF01: Prvek typu objednaná služba</a>.</li></ol></li><li>Pro všechny vytvořené <a href="../../../datove-modely/datovy-78681044.html">Položky denního výkonu</a> vložené do pomocné kolekce:<br><ol><li>Systém vloží vytvořenou <a href="../../../datove-modely/datovy-78681044.html">Položku denního výkonu</a> do kolekce s <a href="../../../datove-modely/datovy-78681044.html">Položkami denního výkonu</a>, a to na konec této kolekce – atribut Položky denního výkonu entity <a href="../../../datove-modely/datovy-78681044.html">Denní výkon</a>.</li></ol></li><li>Systém spustí <a href="200uc29-83267154.html">200UC29: Získat trasu denního výkonu</a> pro aktualizaci trasy <a href="../../../datove-modely/datovy-78681044.html">Denního výkonu</a>.</li></ol><h1>Alternativní toky událostí</h1><p>Do budoucna pak mohou být alternativní toky doplňovány – podobně tomu je u algoritmů v rámci <a href="#" data-page-title="200UC25: Vložit položku do denního výkonu"></a>. Jedná se vlastně o zobecněný popis chování z uvedeném dokumentu.</p><p>Poznámka: <a href="../../../datove-modely/datovy-78681044.html">Denní výkon</a>, na který je v rámci alternativních toků odkazováno, je získán na vstupu UC, případně je vytvořen v rámci základního toku událostí (pokud není uvedeno jinak).</p><h3>AF01: Prvek typu objednaná služba</h3><h4>Vstupní podmínky</h4><ul><li>Zkoumaný prvek je instancí entity <a href="../../../datove-modely/datovy-78681044.html">Objednaná služba</a>.</li></ul><h4>Tok událostí</h4><ol><li>Alternativní tok událostí začíná krokem 2.a základního toku událostí.</li><li>Systém vytvoří <a href="../../../datove-modely/datovy-78681044.html">Položku denního výkonu</a> pro právě zkoumanou <a href="../../../datove-modely/datovy-78681044.html">Objednanou službu</a>, jednotlivé atributy jsou nastaveny následovně:<br><ul><li>Pořadí: Nastaveno po vložení <a href="../../../datove-modely/datovy-78681044.html">Položky denního výkonu</a> na <a href="../../../datove-modely/datovy-78681044.html">Denní výkon</a>.</li><li>Typ položky: Objednaná služba.</li><li>Denní výkon: <a href="../../../datove-modely/datovy-78681044.html">Denní výkon</a>.</li><li>Přívěs: Hodnota atributu Použití přívěsu entity <a href="../../../datove-modely/datovy-78681044.html">Denní výkon</a>.</li><li>Objednaná služba: Právě zkoumaná <a href="../../../datove-modely/datovy-78681044.html">Objednaná služba</a>.</li><li>Lokace objednané služby: NULL (může být dále přepsáno).</li></ul></li><li>Pokud nejsou splněny všechny dále uvedené podmínky zároveň (nejedná se tedy o „klasickou“ <a href="../../../datove-modely/datovy-78681044.html">Objednanou službu</a>): <strong>Skok na krok 5 toku událostí</strong>.<br><ul><li><a href="../../../datove-modely/datovy-78681044.html">Typ dopravy</a> nabývá hodnoty Valník (atribut Typ dopravy entity <a href="../../../datove-modely/datovy-78681044.html">Typ nádoby</a> – atribut Typ nádoby entity <a href="../../../datove-modely/datovy-78681044.html">Objednaná nádoba</a> – atribut Objednaná nádoba entity <a href="../../../datove-modely/datovy-78681044.html">Objednaný úkon</a> – atribut Objednaný úkony entity <a href="../../../datove-modely/datovy-78681044.html">Objednaná služba</a>),</li><li>Typ úkonu nabývá hodnoty Rozvoz (atribut Typ úkonu entity <a href="../../../datove-modely/datovy-78681044.html">Objednaný úkon</a> – atribut Objednaný úkony entity <a href="../../../datove-modely/datovy-78681044.html">Objednaná služba</a>).</li></ul></li><li>Systém vytvoří <a href="../../../datove-modely/datovy-78681044.html">Lokaci objednané služby</a> pro právě zkoumanou <a href="../../../datove-modely/datovy-78681044.html">Objednanou službu</a>, která je dána dobou trvání (nikoliv <a href="../../../datove-modely/datovy-78681044.html">Lokacemi objednané služby</a>), a vloží ji do vytvořené <a href="../../../datove-modely/datovy-78681044.html">Položku denního výkonu</a> (atribut Lokace objednané služby). Jednotlivé atributy jsou nastaveny následovně:<br><ul><li>Pořadí: 1.</li><li>Akce: Navštívit.</li><li>Typ lokace: Časový interval.</li><li>Adresa: NULL (nastaveno v rámci algoritmu pro získání trasy).</li><li>Souřadnice: NULL (nastaveno v rámci algoritmu pro získání trasy).</li><li>Manuální posun souřadnic: FALSE.</li><li>Místo realizace: NULL.</li><li>Likvidační místo: NULL.</li><li>Provozovna: NULL.</li><li>Doba manipulace: 0.</li><li>Doba trvání: defaultServiceDuration, viz <a href="#" data-page-title="Konfigurační hodnoty"></a> (poznámka: pokud jsou hromadně vkládány <a href="../../../datove-modely/datovy-78681044.html">Objednané služby</a>, je nastavena výchozí délka doby trvání).</li><li>Platná: TRUE.</li><li>Provést: TRUE.</li><li>Začátek časového okna: 0:00.</li><li>Konec časového okna: 23:59.</li><li>Splněno časové okno: TRUE.</li><li>Vzdálenost do další lokace: NULL.<br></li><li>Doba jízdy do další lokace: NULL.</li><li>Trasa do další lokace: NULL.</li><li>Poznámka: NULL.</li><li>Monitoring realizace: FALSE.</li><li>Obsluha lokace objednané služby: NULL.</li><li>Fakturace: NULL.</li><li>Druhy odpadu: NULL.</li></ul></li><li>Systém aktualizuje právě zkoumanou <a href="../../../datove-modely/datovy-78681044.html">Objednanou službu</a>, jednotlivé atributy jsou nastaveny následovně:<br><ul><li>Stav: Naplánovaná.</li><li>Položka denního výkonu: <a href="../../../datove-modely/datovy-78681044.html">Položku denního výkonu</a> vytvořená v rámci kroku 2.<br></li></ul></li><li>Pokud <a href="../../../datove-modely/datovy-78681044.html">Typ dopravy</a> této <a href="../../../datove-modely/datovy-78681044.html">Objednané služby</a> odpovídá možnosti Lisovací vozidlo (atribut Název entity <a href="../../../datove-modely/datovy-78681044.html">Typ dopravy</a> – atribut Typ dopravy entity <a href="../../../datove-modely/datovy-78681044.html">Typ nádoby</a> – Atribut Typ nádoby entity <a href="../../../datove-modely/datovy-78681044.html">Objednaná nádoba</a> – atribut Objednaná nádoba entity <a href="../../../datove-modely/datovy-78681044.html">Objednaný úkon</a> – atribut Objednaný úkony entity <a href="../../../datove-modely/datovy-78681044.html">Objednaná služba</a>):<br><ol><li>Systém nalezne všechny <a href="../../../datove-modely/datovy-78681044.html">Lokace objednané služby</a> typu Likvidační místo, které jsou obsaženy v této <a href="../../../datove-modely/datovy-78681044.html">Objednané službě</a> (atribut Typ lokace entity <a href="../../../datove-modely/datovy-78681044.html">Lokace objednané služby</a> – atribut Lokace objednané služby entity <a href="../../../datove-modely/datovy-78681044.html">Objednaná služba</a>).</li><li>Systém všem nalezeným <a href="../../../datove-modely/datovy-78681044.html">Lokacím objednané služby</a> nastaví hodnotu atributu Provést na FALSE.</li></ol></li><li>Systém vloží vytvořenou <a href="../../../datove-modely/datovy-78681044.html">Položku denního výkonu</a> do pomocné kolekce.</li><li><strong>Návrat na krok 2 základního toku událostí</strong>.</li></ol><h3>AF02: Provést aktualizaci trasy</h3><p>Pokud je na <a href="../../../datove-modely/datovy-78681044.html">Denní výkon</a> přihlášeno zařízení (FOB), musí dojít k aktualizaci trasy a odeslání notifikace o této skutečnosti na přihlášené zařízení.</p><h4>Vstupní podmínky</h4><ul><li>Jsou splněny vstupní podmínky v rámci <a href="#" data-page-title="205UC08: Provést aktualizaci trasy denního výkonu">205UC08: Provést aktualizaci trasy denního výkonu</a> (pro odpovídající <a href="../../../datove-modely/datovy-78681044.html">Denní výkon</a>). </li></ul><h4>Tok událostí</h4><ol><li>Alternativní tok začíná krokem 5 základního toku událostí.</li><li>Systém provede aktualizaci odpovídající trasy – spustí <a href="#" data-page-title="205UC08: Provést aktualizaci trasy denního výkonu">205UC08: Provést aktualizaci trasy denního výkonu</a>, na vstupu UC jsou předány následující hodnoty:<ul><li>Denní výkon: na vstupu získaný (případně vytvořený) <a href="../../../datove-modely/datovy-78681044.html">Denní výkon</a>.</li></ul></li></ol><p>Poznámka: Pokud akce nad <a href="../../../datove-modely/datovy-78681044.html">Denním výkonem</a> proběhne v rámci obrazovky editace (viz <a href="#" data-page-title="200UC02: Upravit denní výkon">200UC02: Upravit denní výkon</a>), není provedena aktualizace trasy. K té dochází až po uložení provedených změn, tedy po dokončení odkazovaného UC.</p><h4>Výstupní podmínky</h4><ul><li>Došlo k aktualizaci trasy odpovídajícího <a href="../../../datove-modely/datovy-78681044.html">Denního výkonu</a> a odeslání notifikace na přihlášené zařízení (pokud jsou splněny další podmínky).</li></ul><h1>Výjimkové toky událostí</h1><p>Nejsou.</p><h1>Výstupní podmínky</h1><ul><li><a href="../../../datove-modely/datovy-78681044.html">Položky denního výkonu</a> byly vloženy na <a href="../../../datove-modely/datovy-78681044.html">Denní výkon</a>.</li></ul><h1>Validace</h1><p>Nejsou.</p><h1>Algoritmy</h1><p>Nejsou.</p><h1>Uživatelské rozhraní</h1><p>Není.</p><h1>Revize</h1><h3>23. 10. 2021: Tomáš Nadrchal</h3><table><tbody><tr><th>Odkaz</div></th><th>Stručný popis změny/doplnění</div></th></tr><tr><td colspan="1"><a href="200uc47-88017148.html">AF02: Provést aktualizaci trasy</a></td><td colspan="1">Doplnění aktualizace trasy odpovídajícího denního výkonu (naznačeno růžově).</td></tr></tbody></table><h3>28. 3. 2021: Tomáš Nadrchal</h3><p>Provedeny změny v rámci celého dokumentu (naznačeno modře). Viz <a href="../../../rp-sprava-pozadavku/id-89065686.html">ID-040: Násobné rozdělení objednané služby</a>.</p>
</div>
</body>
</html>
