<!DOCTYPE html>
<html lang="cs">
<head>
  <meta charset="utf-8">
  <title>200UC33: Upravit provozní dobu denního výkonu</title>
</head>
<body>
<div class="wiki-content">
<p></p><h1>Stručný popis, cíl UC</h1><p>Cílem případu užití je editace provozní doby denního výkonu (resp. jejich množiny).</p><h1>Seznam aktérů</h1><table><tbody><tr><th>Aktér</th><th>Popis</th><th colspan="1">Typická role</th></tr><tr><td>Uživatel</td><td><p>Jedná se o uživatele aplikace RoadPlan, který musí mít oprávnění spouštět tento UC.</p></td><td colspan="1"><p> </p></td></tr></tbody></table><h1>Spuštění případu užití</h1><p>Uživatel zadá požadavek na editaci provozní doby Denního výkonu jedním z těchto způsobů:</p><ul><li>Editace provozní doby Denního výkonu v přehledu s Denními výkony na obrazovce pro plánování Denních výkonů (viz <a href="#" data-page-title="206UC04: Zobrazit panel přehledu denních výkonů"></a>).</li><li>Editace provozní doby Denního výkonu v tabulce s Položkami denního výkonu ve formuláři Denního výkonu (viz <a href="../../uzivatelske-rozhrani/200uixx/200ui02/200ui02-84214534.html">200UI02: Tabulka pro editaci denního výkonu</a>).</li><li>Editace provozní doby Denního výkonu po aktualizaci provozní doby v rámci Provozovny (viz <a href="#" data-page-title="500UC38: Upravit provozovnu">500UC38: Upravit provozovnu</a>).</li><li>Editace provozní doby Denního výkonu př kontrole jeho aktuálnosti (viz <a href="#" data-page-title="202UC07: Generovat denní výkony pro plánované období">202UC07: Generovat denní výkony pro plánované období</a>).</li><li>Editace provozní doby Denního výkonu při přiřazení vozidla k dennímu výkonu (viz <a href="#" data-page-title="200UC04: Přiřadit vozidlo dennímu výkonu">200UC04: Přiřadit vozidlo dennímu výkonu</a>).</li><li>Editace provozní doby Denního výkonu při odebrání vozidla z denního výkonu (viz <a href="#" data-page-title="200UC06: Odebrat vozidlo denního výkonu">200UC06: Odebrat vozidlo denního výkonu</a>).</li></ul><h1>Vstupní podmínky</h1><p>Uživatel má následující <a href="../../../uzivatelska-78681297.html">oprávnění na moduly a UC</a>:</p><ul><li>Plánování denních výkonů.</li></ul><p>Uživatel má následující <a href="../../../uzivatelska-78681297.html">oprávnění na typ entit</a>:</p><ul><li>Denní výkony - zobrazení a modifikace.</li></ul><h3>Vstupní data</h3><table><tbody><tr><th>Vstupní parametr</div></div></th><th>Datový typ</div></div></th><th colspan="1">Povinnost</div></div></th><th>Popis</div></div></th><th colspan="1">Poznámka</div></div></th></tr><tr><td colspan="1">Denní výkony</td><td colspan="1"><a href="../../../datove-modely/datovy-78681044.html">Denní výkon</a> (kolekce)</td><td colspan="1">Ano</td><td colspan="1">Denní výkony, u kterých má být aktualizována provozní doba.</td><td colspan="1">–</td></tr><tr><td colspan="1">Intervaly omezení denního výkonu</td><td colspan="1"><a href="../../../datove-modely/datovy-78681044.html">Interval omezení denního výkonu</a> (kolekce)</td><td colspan="1">Ne</td><td colspan="1">Intervaly omezení představující požadovanou provozní dobu (typ Mimo provozní dobu).</td><td colspan="1"><p>Pokud jsou na vstupu získány <a href="../../../datove-modely/datovy-78681044.html">Intervaly omezení denního výkonu</a>, musí se vždy jednat o právě 2 instance splňují dále uvedené podmínky:</p><ul><li>První <a href="../../../datove-modely/datovy-78681044.html">Interval omezení denního výkonu</a> musí být v v rozmezí <strong>0:00</strong>-<strong>Začátek provozní doby</strong>.</li><li>Druhý <a href="../../../datove-modely/datovy-78681044.html">Interval omezení denního výkonu</a> musí být v rozmezí <strong>Konec provozní doby</strong>-<strong>23:59</strong>.</li><li>Pro uvedené hodnoty musí platit, že <strong>Začátek provozní doby</strong> je menší než <strong>Konec provozní doby</strong>.</li></ul></td></tr></tbody></table><h1>Základní tok událostí</h1><ol><li>Pokud nejsou na vstupu získány <a href="../../../datove-modely/datovy-78681044.html">Intervaly omezení denního výkonu</a> (vstupní parametr <strong>Intervaly omezení denního výkonu</strong>):<br><ol><li>Systém zobrazí formulář pro nastavení provozní doby a provede jeho výchozí nastavení – spustí <a href="../../uzivatelske-rozhrani/700uixx-obecne/702uixx-kalendare-a-periodicita/702ui02-82117361.html">702UI02: Formulář pro nastavení termínu</a>, formulář je pak zobrazen následovně:<br><ul><li><strong>Nadpis okna</strong>: Provozní doba.</li><li><strong>Nastavení data</strong>: Není k dispozici (komponenty Datum od, Datum do).</li><li><strong>Nastavení času</strong>: Je k dispozici (komponenty Čas od, Čas do).<br><ul><li><strong>Nadpis</strong>: Provozní doba*.</li><li><strong>Povinnost</strong>: Zadání je povinné.</li></ul></li><li><strong>Nadpis tlačítka pro potvrzení formuláře</strong>: Upravit.</li><li><strong>Vstupní data</strong>:<br><ul><li><strong>Datum od</strong>: není předána žádná hodnota (NULL).</li><li><strong>Datum do</strong>: není předána žádná hodnota (NULL).</li><li><strong>Čas od</strong>: Nastaveno dle na vstupu získaných <a href="../../../datove-modely/datovy-78681044.html">Denních výkonů</a> (vstupní parametr <strong>Denní výkony</strong>)…<br><ul><li>Pokud je získán právě <strong>jeden záznam</strong> – hodnota atributu <strong>Čas omezení do</strong> v rámci prvního <a href="../../../datove-modely/datovy-78681044.html">Intervalu omezení denního výkonu</a> (začátek provozní doby).</li><li>Jinak je získáno <strong>více záznamů</strong> – není předána žádná hodnota (NULL).</li></ul></li><li><strong>Čas do</strong>: Nastaveno dle na vstupu získaných <a href="../../../datove-modely/datovy-78681044.html">Denních výkonů</a> (vstupní parametr <strong>Denní výkony</strong>)…<br><ul><li>Pokud je získán právě <strong>jeden záznam</strong> – hodnota atributu <strong>Čas omezení od</strong> v rámci druhého <a href="../../../datove-modely/datovy-78681044.html">Intervalu omezení denního výkonu</a> (konec provozní doby).</li><li>Jinak je získáno <strong>více záznamů</strong> – není předána žádná hodnota (NULL).<br></li></ul></li></ul></li></ul></li><li>Uživatel vyplní formulář.</li><li>Uživatel stiskne tlačítko pro potvrzení provozní doby.</li><li>Systém provede validaci vstupních údajů.</li></ol></li><li>Pro všechny na vstupu získané <a href="../../../datove-modely/datovy-78681044.html">Denní výkony</a> (vstupní parametr <strong>Denní výkony</strong>):<br><ol><li>Systém odebere zprávě zkoumaného <a href="../../../datove-modely/datovy-78681044.html">Denního výkonu</a> všechny <a href="../../../datove-modely/datovy-78681044.html">Intervaly omezení denního výkonu</a> typu <strong>Mimo pracovní dobu</strong>(atribut <strong>Intervaly omezení</strong>).</li><li>Systém vloží do právě zkoumaného  <a href="../../../datove-modely/datovy-78681044.html">Denního výkonu</a> nové <a href="../../../datove-modely/datovy-78681044.html">Intervaly omezení denního výkonu</a> (atribut <strong>Intervaly omezení</strong>) dle hodnot získaných ve formuláři (případně na vstupu UC, vstupní parametr <strong>Intervaly omezení denního výkonu</strong>):<br><ul><li>První interval omezení:<br><ul><li><strong>Typ omezení</strong>: hodnota <strong>Mimo pracovní dobu</strong>.</li><li><strong>Čas omezení od</strong>: hodnota <strong>0:00</strong>.</li><li><strong>Čas omezení do</strong>: ve formuláři nastavený <strong>Čas od</strong>.</li></ul></li><li>Druhý interval omezení:<br><ul><li><strong>Typ omezení</strong>: hodnota <strong>Mimo pracovní dobu</strong>.</li><li><strong>Čas omezení od</strong>: ve formuláři nastavený <strong>Čas do</strong>.</li><li><strong>Čas omezení do</strong>: hodnota <strong>23:59</strong>.</li></ul></li></ul></li><li>Systém nastaví hodnotu atributu <strong>Začátek provozní doby</strong> u právě zkoumaného <a href="../../../datove-modely/datovy-78681044.html">Denního výkonu</a>: ve formuláři nastavený <strong>Čas od</strong>.</li><li>Systém spustí <a href="#" data-page-title="200UC29: Získat trasu denního výkonu">200UC29: Získat trasu denního výkonu</a> pro aktualizaci právě zkoumaného <a href="../../../datove-modely/datovy-78681044.html">Denního výkonu</a>.</li></ol></li></ol><p>Stručný popis: Pokud je na vstupu získán právě jeden denní výkon, je formulář předvyplněn dle jeho provozní doby. Jinak nejsou ve formuláři pole pro zadání času vyplněna. Zadaná provozní doba je pak nastaveny u všech na vstupu získaných denních výkonů.</p><h1>Alternativní toky událostí</h1><h3>AF01: Údaje ve formuláři nejsou validní</h3><h4>Vstupní podmínky</h4><ul><li>Údaje ve formuláři nejsou validní – viz <a href="200uc33-84215181.html">Validace</a>.</li></ul><h4>Tok události</h4><ol><li>Alternativní tok událostí začíná krokem 1.d základního toku událostí.</li><li>Systém zvýrazní ovládací prvky, které neobsahují validní hodnotu.</li><li>Systém zobrazí uživateli informaci, že některé ze zadaných údajů nejsou validní (TODO: kód hlášky, viz <a href="../../../systemove-78681299.html">Systémové hlášky</a>).<strong>Návrat na krok 1.b základního toku událostí</strong>.</li></ol><h3>AF02: Provést aktualizaci trasy</h3><p>Pokud je na <a href="../../../datove-modely/datovy-78681044.html">Denní výkon</a> přihlášeno zařízení (FOB), musí dojít k aktualizaci trasy a odeslání notifikace o této skutečnosti na přihlášené zařízení.</p><h4>Vstupní podmínky</h4><ul><li>Jsou splněny vstupní podmínky v rámci <a href="#" data-page-title="205UC08: Provést aktualizaci trasy denního výkonu">205UC08: Provést aktualizaci trasy denního výkonu</a> (pro odpovídající <a href="../../../datove-modely/datovy-78681044.html">Denní výkon</a>). </li></ul><h4>Tok událostí</h4><ol><li>Alternativní tok začíná krokem 5 základního toku událostí.</li><li>Systém provede aktualizaci odpovídající trasy – spustí <a href="#" data-page-title="205UC08: Provést aktualizaci trasy denního výkonu">205UC08: Provést aktualizaci trasy denního výkonu</a>, na vstupu UC jsou předány následující hodnoty:<ul><li>Denní výkon: na vstupu získaný <a href="../../../datove-modely/datovy-78681044.html">Denní výkon</a>.</li></ul></li></ol><p>Poznámka: Pokud akce nad <a href="../../../datove-modely/datovy-78681044.html">Denním výkonem</a> proběhne v rámci obrazovky editace (viz <a href="#" data-page-title="200UC02: Upravit denní výkon">200UC02: Upravit denní výkon</a>), není provedena aktualizace trasy. K té dochází až po uložení provedených změn, tedy po dokončení odkazovaného UC.</p><h4>Výstupní podmínky</h4><ul><li>Došlo k aktualizaci trasy odpovídajícího <a href="../../../datove-modely/datovy-78681044.html">Denního výkonu</a> a odeslání notifikace na přihlášené zařízení (pokud jsou splněny další podmínky).</li></ul><h1>Výjimkové toky událostí</h1><h3>EF01: Storno</h3><h4>Tok událostí</h4><ol><li>Výjimkový tok událostí může začít kdykoliv.</li><li>KDYŽ uživatel stiskne tlačítko Storno.<br><ol><li>Systém se vrátí zpět do části aplikace, kde došlo k požadavku na vložení alokace na servisu do <a href="../../../datove-modely/datovy-78681044.html">Denního výkonu</a>. <strong>Konec toku událostí</strong>.</li></ol></li><li>KDYŽ uživatel opustí formulář pro nastavení časového rozmezí alokace na servis.<br><ol><li><strong>Konec toku událostí</strong>.</li></ol></li></ol><h4>Výstupní podmínky</h4><ul><li>Byla změněna provozní doba <a href="../../../datove-modely/datovy-78681044.html">Denního výkonu</a>.</li></ul><h1>Výstupní podmínky</h1><ul><li>Nebyla změněna provozní doba <a href="../../../datove-modely/datovy-78681044.html">Denního výkonu</a>.</li></ul><h1>Validace</h1><p>Validace je prováděna průběžně, pokud uživatel vstoupí do pole s možností zadání hodnoty, zadá hodnotu a pole opustí ve stavu, kdy hodnota není validní, je na to upozorněn. Ovládací prvek je graficky zvýrazněn a je doplněno chybové hlášení. Konkrétní validace jednotlivých polí jsou uvedeny v <a href="../../uzivatelske-rozhrani/700uixx-obecne/702uixx-kalendare-a-periodicita/702ui02-82117361.html">702UI02: Formulář pro nastavení termínu</a>. Hlídána jsou jak konkrétní validační kritéria každé položky, tak i to, zda je položka povinná.</p><p>Jakmile uživatel stiskne tlačítko Uložit, je provedena validace všech polí.</p><h1>Algoritmy</h1><p>Nejsou.</p><h1>Uživatelské rozhraní</h1><p>Rozložení formuláře pro specifikaci alokace na servis je uvedeno v samostatném dokumentu – viz <a href="../../uzivatelske-rozhrani/700uixx-obecne/702uixx-kalendare-a-periodicita/702ui02-82117361.html">702UI02: Formulář pro nastavení termínu</a>.</p><h1>Revize</h1><h3>14. 9. 2025: Tomáš Nadrchal</h3><table><tbody><tr><th>Odkaz</div></th><th>Stručný popis změny/doplnění</div></th></tr><tr><td colspan="1"><a href="200uc33-84215181.html">Spuštění případu užití</a></td><td colspan="1">Doplnění případů užití, které spouští tento UC (naznačeno modře)</td></tr></tbody></table><h3>16. 6. 2023: Tomáš Nadrchal</h3><p>Doplněna možnost hromadného provedení akce (naznačeno modře).</p><h3>23. 10. 2021: Tomáš Nadrchal</h3><table><tbody><tr><th>Odkaz</div></th><th>Stručný popis změny/doplnění</div></th></tr><tr><td colspan="1"><a href="200uc33-84215181.html">AF02: Provést aktualizaci trasy</a></td><td colspan="1">Doplnění aktualizace trasy odpovídajícího denního výkonu (naznačeno růžově).</td></tr></tbody></table><p><br></p>
</div>
</body>
</html>
