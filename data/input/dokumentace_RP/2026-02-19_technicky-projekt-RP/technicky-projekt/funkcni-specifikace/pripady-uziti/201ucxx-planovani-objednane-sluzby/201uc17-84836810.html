<!DOCTYPE html>
<html lang="cs">
<head>
  <meta charset="utf-8">
  <title>201UC17: Změnit adresu u lokace objednané služby</title>
</head>
<body>
<div class="wiki-content">
<p></p><h1>Stručný popis, cíl UC</h1><p>Cílem UC je změna adresy spolu se souřadnicemi u <a href="../../../datove-modely/datovy-78681044.html">Lokace objednané služby</a>.</p><p>Poznámka: Možnost změny adresy a způsob jejího nastavení se liší dle typu konkrétní <a href="../../../datove-modely/datovy-78681044.html">Lokace objednané služby</a>.</p><h1>Seznam aktérů</h1><table><tbody><tr><th>Aktér</th><th>Popis</th><th colspan="1">Typická role</th></tr><tr><td>Uživatel</td><td><p>Jedná se o uživatele aplikace RoadPlan, který musí mít oprávnění spouštět tento UC.</p></td><td colspan="1"><p> </p></td></tr></tbody></table><h1>Spuštění případu užití</h1><p>Uživatel zadá požadavek na změnu adresy u Lokace objednané služby jedním z těchto způsobů:</p><ul><li>Změna adresy u Lokace objednané služby ve formuláři Lokací objednané služby typu pro lokace typu Místo realizace či MDU (<a href="#" data-page-title="200UI05: Formulář lokací objednané služby"></a>).</li><li>Změna adresy u Lokace objednané služby v tabulce s Položkami denního výkonu ve formuláři Denního výkonu (<a href="#" data-page-title="200UI02: Tabulka pro editaci denního výkonu">200UI02: Tabulka pro editaci denního výkonu</a>).</li></ul><h1>Vstupní podmínky</h1><p>Uživatel má následující <a href="../../../uzivatelska-78681297.html">oprávnění na moduly a UC</a>:</p><ul><li>Plánování denních výkonů.</li></ul><p>Uživatel má následující <a href="../../../uzivatelska-78681297.html">oprávnění na typ entit</a>:</p><ul><li>Objednané služby - zobrazení a modifikace .</li></ul><p>Poznámka:</p><ul><li>Změnit adresu u <a href="../../../datove-modely/datovy-78681044.html">Lokace objednané služby</a> je možné pouze u <a href="../../../datove-modely/datovy-78681044.html">Objednané služby</a>, která se nachází v jednom z uvedených stavů: K naplánování, Naplánovaná.</li><li>Změnit adresu u <a href="../../../datove-modely/datovy-78681044.html">Lokace objednané služby</a> je možné pouze v případě, pokud je typu Místo realizace, Likvidační místo či Jiné.</li></ul><h3>Vstupní data</h3><ul><li>Entita <a href="../../../datove-modely/datovy-78681044.html">Denní výkon</a> (nepovinná).</li><li>Entita <a href="../../../datove-modely/datovy-78681044.html">Objednaná služba</a> (povinná, pokud atribut Typ lokace předané <a href="../../../datove-modely/datovy-78681044.html">Lokace objednané služby</a> nabývá hodnoty Místo dočasného uložení).</li><li>Entita <a href="../../../datove-modely/datovy-78681044.html">Lokace objednané služby</a>.</li></ul><p>Poznámka: Vždy by měla být dostupná alespoň jedna z uvedených vstupních hodnot <a href="../../../datove-modely/datovy-78681044.html">Denní výkon</a> a <a href="../../../datove-modely/datovy-78681044.html">Objednaná služba</a>. Konkrétní <a href="../../../datove-modely/datovy-78681044.html">Lokace objednané služby</a> pak musí být předána vždy.</p><h1>Základní tok událostí</h1><ol><li>POKUD je <a href="../../../datove-modely/datovy-78681044.html">Lokace objednané služby</a> typu Místo dočasného uložení.<br><ol><li>Systém získá druhou <a href="../../../datove-modely/datovy-78681044.html">Objednanou službu</a> obsahující odpovídající místo dočasného uložení (MDU).<br><ol><li>Pokud je tato <a href="../../../datove-modely/datovy-78681044.html">Lokace objednané služby</a> v pořadí <strong>první</strong><a href="../../../datove-modely/datovy-78681044.html">Lokací objednané služby</a> tohoto typu v rámci <a href="../../../datove-modely/datovy-78681044.html">Objednané služby</a> (atribut Lokace objednané služby) získané na vstupu UC:<br><ul><li>hodnota atributu Předchozí objednaná služba na vstupu získané <a href="../../../datove-modely/datovy-78681044.html">Objednané služby</a> (poznámka: atribut Způsob rozdělení předchozí objednané služby by měl být nastaven na hodnotu Místo dočasného uložení).</li></ul></li><li>Jinak je tato <a href="../../../datove-modely/datovy-78681044.html">Lokace objednané služby</a> v pořadí <strong>poslední</strong><a href="../../../datove-modely/datovy-78681044.html">Lokací objednané služby</a> tohoto typu v rámci <a href="../../../datove-modely/datovy-78681044.html">Objednané služby</a> (atribut Lokace objednané služby) získané na vstupu UC:<br><ul><li>hodnota atributu Následující objednaná služba na vstupu získané <a href="../../../datove-modely/datovy-78681044.html">Objednané služby</a>  (poznámka: atribut Způsob rozdělení následující objednané služby by měl být nastaven na hodnotu Místo dočasného uložení).</li></ul></li></ol></li><li>Pokud je druhá <a href="../../../datove-modely/datovy-78681044.html">Objednaná služba</a> naplánována na <a href="../../../datove-modely/datovy-78681044.html">Denní výkon</a> (hodnota atributu Položka denního výkonu je různá od NULL).<br><ol><li>Pokud je druhá <a href="../../../datove-modely/datovy-78681044.html">Objednaná služba</a> naplánována na jiný <a href="../../../datove-modely/datovy-78681044.html">Denní výkon</a> (hodnota atributu Denní výkon – entita <a href="../../../datove-modely/datovy-78681044.html">Položka denního výkonu</a>  – atribut Položka denního výkonu entity <a href="../../../datove-modely/datovy-78681044.html">Objednaná služba</a>) než je získán na vstupu UC.<br><ol><li>Pokud je druhá <a href="../../../datove-modely/datovy-78681044.html">Objednaná služba</a> naplánována na <a href="../../../datove-modely/datovy-78681044.html">Denní výkon</a>, který <strong>není</strong> v jednom z uvedených stavů (atribut Stav): Plánovaný.<br><ol><li><strong>Skok na <a href="201uc17-84836810.html">EF02: Není možné změnit adresu odpovídajícího MDU</a></strong>.</li></ol></li><li>Jinak Systém zjistí, zda si uživatel přeje pokračovat ve změně <a href="../../../datove-modely/datovy-78681044.html">Lokace objednané služby</a>.<br><ol><li>Systém zobrazí modální okno s dotazem, zda si uživatel přeje pokračovat ve změně <a href="../../../datove-modely/datovy-78681044.html">Lokace objednané služby</a> (MSG_CANCEL_EDIT_WAREHOUSE, viz <a href="../../../systemove-78681299.html">Systémové hlášky</a>).</li><li>Uživatel potvrdí požadavek na změnu – stiskne tlačítko Ano.</li><li>Systém zavře modální okno.</li></ol></li></ol></li></ol></li><li>Systém zobrazí formulář pro nastavení <a href="../../../datove-modely/datovy-78681044.html">Adresy</a> spolu se souřadnicemi dle <a href="#" data-page-title="200UI06: Formulář adresy se souřadnicemi"></a>, na vstup jsou předány následující hodnoty:<br><ul><li>Adresa: atribut Adresa entity <a href="../../../datove-modely/datovy-78681044.html">Lokace objednané služby</a> získané na vstupu UC.</li><li>Souřadnice: atribut Souřadnice entity <a href="../../../datove-modely/datovy-78681044.html">Lokace objednané služby</a> získané na vstupu UC.</li></ul></li><li>Uživatel provede požadované změny ve formuláři.</li><li>Uživatel stiskne tlačítko pro uložení provedených změn.</li><li>Systém provede validaci vstupních údajů.</li><li>Systém aktualizuje <a href="../../../datove-modely/datovy-78681044.html">Adresu</a> se souřadnicemi u <a href="../../../datove-modely/datovy-78681044.html">Lokace objednané služby</a>, která byla získána na vstupu UC (atributy Adresa a Souřadnice entity <a href="../../../datove-modely/datovy-78681044.html">Lokace objednané služby</a>).</li><li>Systém nastaví příznak o změně souřadnic u <a href="../../../datove-modely/datovy-78681044.html">Lokace objednané služby</a>, která byla získána na vstupu UC, na TRUE (atribut Manuální posun souřadnic entity <a href="../../../datove-modely/datovy-78681044.html">Lokace objednané služby</a>).</li><li>Systém aktualizuje <a href="../../../datove-modely/datovy-78681044.html">Adresu</a> se souřadnicemi u <a href="../../../datove-modely/datovy-78681044.html">Lokace objednané služby</a>, která je obsažena v druhé <a href="../../../datove-modely/datovy-78681044.html">Objednané službě</a> (atributy Adresa a Souřadnice entity <a href="../../../datove-modely/datovy-78681044.html">Lokace objednané služby</a> typu Místo dočasného uložení, která je obsažena v druhé <a href="../../../datove-modely/datovy-78681044.html">Objednané službě</a> – viz krok 1.a).</li><li>Systém nastaví příznak o změně souřadnic u <a href="../../../datove-modely/datovy-78681044.html">Lokace objednané služby</a>, která je obsažena v druhé <a href="../../../datove-modely/datovy-78681044.html">Objednané službě</a>, na TRUE (atribut Manuální posun souřadnic entity <a href="../../../datove-modely/datovy-78681044.html">Lokace objednané služby</a>).</li><li>Systém aktualizuje trasu druhé <a href="../../../datove-modely/datovy-78681044.html">Objednané služby</a>.<br><ol><li>Pokud je druhá <a href="../../../datove-modely/datovy-78681044.html">Objednaná služba</a> naplánována na <a href="../../../datove-modely/datovy-78681044.html">Denní výkon</a> (hodnota atributu Položka denního výkonu je různá od NULL).<br><ol><li>Pokud je druhá <a href="../../../datove-modely/datovy-78681044.html">Objednaná služba</a> naplánována na jiný <a href="../../../datove-modely/datovy-78681044.html">Denní výkon</a> (hodnota atributu Denní výkon – entita <a href="../../../datove-modely/datovy-78681044.html">Položka denního výkonu</a>  – atribut Položka denního výkonu entity <a href="../../../datove-modely/datovy-78681044.html">Objednaná služba</a>) než je získán na vstupu UC (jinak by byla trasa <a href="../../../datove-modely/datovy-78681044.html">Denního výkon</a> aktualizována dvakrát).<br><ol><li>Systém aktualizuje trasu tohoto <a href="../../../datove-modely/datovy-78681044.html">Denního výkonu</a> – spustí <a href="#" data-page-title="200UC29: Získat trasu denního výkonu">200UC29: Získat trasu denního výkonu</a>, na vstup jsou předány následující hodnoty:<br><ul><li>Denní výkon: <a href="../../../datove-modely/datovy-78681044.html">Denní výkon</a>, na který je naplánována druhá <a href="../../../datove-modely/datovy-78681044.html">Objednaná služba</a> (hodnota atributu Denní výkon – entita <a href="../../../datove-modely/datovy-78681044.html">Položka denního výkonu</a> – atribut Položka denního výkonu entity <a href="../../../datove-modely/datovy-78681044.html">Objednaná služba</a>).</li></ul></li></ol></li></ol></li><li>Jinak Systém aktualizuje trasu druhé <a href="../../../datove-modely/datovy-78681044.html">Objednané služby</a> – viz <a href="../101ucxx-objednane-sluzby/101uc01-82116734.html">Získání trasy</a>, na vstup jsou předány následující hodnoty:<br><ul><li>Objednaná služba: druhá <a href="../../../datove-modely/datovy-78681044.html">Objednaná služba</a>.</li></ul></li></ol></li><li><strong>Skok na krok 6 základního toku událostí</strong>.</li></ol></li><li>POKUD je <a href="../../../datove-modely/datovy-78681044.html">Lokace objednané služby</a> typu <strong>Místo realizace</strong>:<br><ol><li>Systém zobrazí formulář pro nastavení <a href="../../../datove-modely/datovy-78681044.html">Adresy</a> spolu se souřadnicemi dle <a href="#" data-page-title="200UI06: Formulář adresy se souřadnicemi"></a>, na vstup jsou předány následující hodnoty:<br><ul><li>Adresa: atribut Adresa entity <a href="../../../datove-modely/datovy-78681044.html">Lokace objednané služby</a> získané na vstupu UC.</li><li>Souřadnice: atribut Souřadnice entity <a href="../../../datove-modely/datovy-78681044.html">Lokace objednané služby</a> získané na vstupu UC.</li></ul></li><li>Uživatel provede požadované změny ve formuláři.</li><li>Uživatel stiskne tlačítko pro uložení provedených změn.</li><li>Systém provede validaci vstupních údajů.</li><li>Systém aktualizuje <a href="../../../datove-modely/datovy-78681044.html">Adresu</a> se souřadnicemi u <a href="../../../datove-modely/datovy-78681044.html">Lokace objednané služby</a>, která byla získána na vstupu UC (atributy Adresa a Souřadnice entity <a href="../../../datove-modely/datovy-78681044.html">Lokace objednané služby</a>).</li><li>Systém nastaví příznak o změně souřadnic u <a href="../../../datove-modely/datovy-78681044.html">Lokace objednané služby</a>, která byla získána na vstupu UC, na TRUE (atribut Manuální posun souřadnic entity <a href="../../../datove-modely/datovy-78681044.html">Lokace objednané služby</a>).<br></li><li><strong>Skok na krok 6 základního toku událostí</strong>.</li></ol></li><li>POKUD je <a href="../../../datove-modely/datovy-78681044.html">Lokace objednané služby</a> typu <strong>Jiné</strong>:<br><ol><li>Systém zobrazí formulář pro nastavení <a href="../../../datove-modely/datovy-78681044.html">Adresy</a> spolu se souřadnicemi dle <a href="#" data-page-title="200UI06: Formulář adresy se souřadnicemi"></a>, na vstup jsou předány následující hodnoty:<br><ul><li>Adresa: atribut Adresa entity <a href="../../../datove-modely/datovy-78681044.html">Lokace objednané služby</a> získané na vstupu UC.</li><li>Souřadnice: atribut Souřadnice entity <a href="../../../datove-modely/datovy-78681044.html">Lokace objednané služby</a> získané na vstupu UC.<br></li></ul></li><li>Uživatel provede požadované změny ve formuláři.</li><li>Uživatel stiskne tlačítko pro uložení provedených změn.</li><li>Systém provede validaci vstupních údajů.</li><li>Systém aktualizuje <a href="../../../datove-modely/datovy-78681044.html">Adresu</a> se souřadnicemi u <a href="../../../datove-modely/datovy-78681044.html">Lokace objednané služby</a>, která byla získána na vstupu UC (atributy Adresa a Souřadnice entity <a href="../../../datove-modely/datovy-78681044.html">Lokace objednané služby</a>).</li><li>Systém nastaví příznak o změně souřadnic u <a href="../../../datove-modely/datovy-78681044.html">Lokace objednané služby</a>, která byla získána na vstupu UC, na TRUE (atribut Manuální posun souřadnic entity <a href="../../../datove-modely/datovy-78681044.html">Lokace objednané služby</a>).</li><li><strong>Skok na krok 6 základního toku událostí</strong>.<br></li></ol></li><li>POKUD je <a href="../../../datove-modely/datovy-78681044.html">Lokace objednané služby</a> typu <strong>Likvidační místo</strong>:<br><ol><li>Systém zobrazí formulář pro výběr <a href="../../../datove-modely/datovy-78681044.html">Druhu odpadu likvidačního místa</a> dle <a href="#" data-page-title="700UI05: Výběrové dialogy"></a>, dostupné jsou pak takové <a href="../../../datove-modely/datovy-78681044.html">Druhy odpadu likvidačního místa</a>, které splňují všechny uvedené podmínky zároveň:<br><ul><li>Jedná se o aktivní záznam.</li><li>Hodnota atributu Druh odpadu je rovna alespoň jednomu z <a href="../../../datove-modely/datovy-78681044.html">Druhů odpadu</a>, který se vyskytuje v rámci odpovídající <a href="../../../datove-modely/datovy-78681044.html">Lokace objednané služby</a> (viz <a href="201uc17-84836810.html">ALG01: Získání druhů odpadů lokace objednané služby</a>).</li><li>Hodnota atributu Druh odpadu je rovna alespoň jednomu z <a href="../../../datove-modely/datovy-78681044.html">Druhů odpadu</a>, který se vyskytuje v rámci odpovídajícího <a href="../../../datove-modely/datovy-78681044.html">Denního výkonu</a>, viz <a href="../200ucxx-planovani-denni-vykony/200uc11-83266974.html">Druhy odpadu v denním výkonu</a>.</li><li>Odpovídající <a href="../../../datove-modely/datovy-78681044.html">Likvidační místo</a> spadá pod stejnou <a href="../../../datove-modely/datovy-78681044.html">Provozovnu</a> (atribut Provozovna entity <a href="../../../datove-modely/datovy-78681044.html">Likvidační místo</a> – atribut Likvidační místo entity <a href="../../../datove-modely/datovy-78681044.html">Druh odpadu likvidačního místa</a>) jako právě přihlášený uživatel (viz <a href="../../../uzivatelska-78681297.html">Uživateli dostupné instance entit: Likvidační místa</a>).</li><li>Odpovídající <a href="../../../datove-modely/datovy-78681044.html">Likvidační místo</a> spadá pod stejnou <a href="../../../datove-modely/datovy-78681044.html">Provozovnu</a> (atribut Provozovna entity <a href="../../../datove-modely/datovy-78681044.html">Likvidační místo</a> – atribut Likvidační místo entity <a href="../../../datove-modely/datovy-78681044.html">Druh odpadu likvidačního místa</a>) jako odpovídající <a href="../../../datove-modely/datovy-78681044.html">Objednaná služba</a> (atribut Provozovna entity <a href="../../../datove-modely/datovy-78681044.html">Objednávka</a> – atribut Objednávka entity <a href="../../../datove-modely/datovy-78681044.html">Položka objednávky</a> – atribut Položka objednávky entity <a href="../../../datove-modely/datovy-78681044.html">Objednaná nádoba</a> – atribut Objednaná nádoba entity <a href="../../../datove-modely/datovy-78681044.html">Objednaný úkon</a> – atribut Objednaná nádoba entity <a href="../../../datove-modely/datovy-78681044.html">Objednaný úkony</a> – atribut Objednaný úkon entity <a href="../../../datove-modely/datovy-78681044.html">Objednaná služba</a>).</li><li>Odpovídající <a href="../../../datove-modely/datovy-78681044.html">Likvidační místo</a> má nastaveny souřadnice (atribut Souřadnice entity <a href="../../../datove-modely/datovy-78681044.html">Likvidační místo</a> – atribut Likvidační místo entity <a href="../../../datove-modely/datovy-78681044.html">Druh odpadu likvidačního místa</a>).<br></li><li>Poznámka: Získané záznamy jsou navíc agregovány dle dvojice atributů <strong>Likvidační místo</strong> a <strong>Kód nakládání</strong>.<br><ul><li>V rámci editované <a href="../../../datove-modely/datovy-78681044.html">Lokace objednané služby</a> typu Likvidační místo nastavujeme pouze atributy související s <a href="../../../datove-modely/datovy-78681044.html">Likvidačním místem</a> a kódem nakládání (viz krok <strong>4.d</strong>).</li><li>Zobrazení všech dostupných <a href="../../../datove-modely/datovy-78681044.html">Druhů odpadu likvidačního místa</a> tedy není potřeba (z pohledu uživatele se jedná o duplicity). Uvedený problém byl řešen v rámci úkolu <a href="https://jira.radium.cz/browse/RP-640">RP-640</a>.</li></ul></li></ul></li><li>Uživatel vybere právě jeden požadovaný <a href="../../../datove-modely/datovy-78681044.html">Druh odpadu likvidačního místa</a>.</li><li>Uživatel stiskne tlačítko pro potvrzení výběru.</li><li>Systém aktualizuje hodnoty uvedených atributů u na vstupu získané <a href="../../../datove-modely/datovy-78681044.html">Lokace objednané služby</a>:<br><ul><li>Likvidační místo: hodnota atributu Likvidační místo zvoleného <a href="../../../datove-modely/datovy-78681044.html">Druhu odpadu likvidačního místa</a>.</li><li>Kód nakládání: hodnota atributu Kód nakládání zvoleného <a href="../../../datove-modely/datovy-78681044.html">Druhu odpadu likvidačního místa</a>.</li><li>Adresa: Hodnota atributu Adresa entity <a href="../../../datove-modely/datovy-78681044.html">Likvidační místo</a> – atribut Likvidační místo zvoleného <a href="../../../datove-modely/datovy-78681044.html">Druhu odpadu likvidačního místa</a>.</li><li>Souřadnice: Hodnota atributu Souřadnice entity <a href="../../../datove-modely/datovy-78681044.html">Likvidační místo</a>  – atribut Likvidační místo zvoleného <a href="../../../datove-modely/datovy-78681044.html">Druhu odpadu likvidačního místa</a>.</li><li>Manuální posun souřadnic: TRUE.</li></ul></li><li><strong>Skok na krok 6 základního toku událostí</strong>.</li></ol></li><li>POKUD je <a href="../../../datove-modely/datovy-78681044.html">Lokace objednané služby</a> typu <strong>Výchozí l</strong><strong>ikvidační místo</strong>:<br><ol><li>Systém zobrazí formulář pro výběr <a href="../../../datove-modely/datovy-78681044.html">Likvidačního místa</a> dle <a href="#" data-page-title="700UI05: Výběrové dialogy"></a>, dostupné jsou pak taková <a href="../../../datove-modely/datovy-78681044.html">Likvidační místa</a>, která splňují všechny uvedené podmínky zároveň:<br><ul><li>Hodnota atributu <strong>Je aktivní</strong> je nastavena na <strong>TRUE</strong>.</li><li>Hodnota atributu <strong>Zeměpisná šířka</strong> je k dispozici (různá od NULL).</li><li>Hodnota atributu <strong>Zeměpisná délka</strong> je k dispozici (různá od NULL).</li><li>Hodnota atributu <strong>Provozovna</strong> odpovídá <a href="../../../datove-modely/datovy-78681044.html">Provozovně</a>, která je dostupná právě přihlášenému uživateli (viz <a href="../../../uzivatelska-78681297.html">Uživateli dostupné instance entit: Likvidační místa</a>).</li><li>Hodnota atributu <strong>Provozovna</strong> odpovídá <a href="../../../datove-modely/datovy-78681044.html">Provozovně</a>, pod kterou spadá odpovídající <a href="../../../datove-modely/datovy-78681044.html">Objednaná služba</a> (atribut <strong>Provozovna</strong> entity <a href="../../../datove-modely/datovy-78681044.html">Objednávka</a> – atribut <strong>Objednávka</strong> entity <a href="../../../datove-modely/datovy-78681044.html">Položka objednávky</a> – atribut <strong>Položka objednávky</strong> entity <a href="../../../datove-modely/datovy-78681044.html">Objednaná nádoba</a> – atribut <strong>Objednaná nádoba</strong> entity <a href="../../../datove-modely/datovy-78681044.html">Objednaný úkon</a> – atribut <strong>Objednaná nádoba</strong> entity <a href="../../../datove-modely/datovy-78681044.html">Objednaný úkony</a> – atribut <strong>Objednaný úkon</strong> entity <a href="../../../datove-modely/datovy-78681044.html">Objednaná služba</a>).</li></ul></li><li>Uživatel vybere právě jedno požadované <a href="../../../datove-modely/datovy-78681044.html">Likvidační místa</a>.</li><li>Uživatel stiskne tlačítko pro potvrzení výběru.</li><li>Systém aktualizuje hodnoty uvedených atributů u na vstupu získané <a href="../../../datove-modely/datovy-78681044.html">Lokace objednané služby</a>:<br><ul><li><strong>Likvidační místo</strong>: zvolené <a href="../../../datove-modely/datovy-78681044.html">Likvidační místo</a> (viz krok <strong>5.b</strong>).</li><li><strong>Adresa</strong>: hodnota atributu <strong>Adresa</strong> zvoleného <a href="../../../datove-modely/datovy-78681044.html">Likvidačního místa</a> (viz krok <strong>5.b</strong>).</li><li><strong>Zeměpisná šířka</strong>: hodnota atributu <strong>Zeměpisná šířka</strong> zvoleného <a href="../../../datove-modely/datovy-78681044.html">Likvidačního místa</a> (viz krok <strong>5.b</strong>).</li><li><strong>Zeměpisná délka</strong>: hodnota atributu <strong>Zeměpisná délka</strong> zvoleného <a href="../../../datove-modely/datovy-78681044.html">Likvidačního místa</a> (viz krok <strong>5.b</strong>).</li><li><strong>Manuální posun souřadnic</strong>: předána hodnota <strong>TRUE</strong>.<br></li></ul></li><li><strong>Skok na krok 6 základního toku událostí</strong>.</li></ol></li><li>Pokud je na vstupu UC k dispozici <a href="../../../datove-modely/datovy-78681044.html">Denní výkon</a>.<br><ol><li>Systém aktualizuje trasu <a href="../../../datove-modely/datovy-78681044.html">Denního výkonu</a> – spustí <a href="../200ucxx-planovani-denni-vykony/200uc29-83267154.html">200UC29: Získat trasu denního výkonu</a>, na vstup UC jsou předány následující hodnoty:<br><ul><li>Denní výkon: <a href="../../../datove-modely/datovy-78681044.html">Denní výkon</a> získaný na vstupu UC.</li></ul></li><li><strong>Konec toku událostí</strong>.</li></ol></li><li>Pokud je na vstupu UC k dispozici <a href="../../../datove-modely/datovy-78681044.html">Objednaná služba</a>.<br><ol><li>Systém aktualizuje trasu <a href="../../../datove-modely/datovy-78681044.html">Objednané služby</a> – viz <a href="../101ucxx-objednane-sluzby/101uc01-82116734.html">Získání trasy</a>, na vstup jsou předány následující hodnoty:<br><ul><li>Objednaná služba: <a href="../../../datove-modely/datovy-78681044.html">Objednaná služba</a> získaná na vstupu UC.</li></ul></li></ol></li></ol><p>Poznámka:</p><ul><li>Pokud se jedná o <a href="../../../datove-modely/datovy-78681044.html">Lokaci objednané služby</a> typu <strong>Místo dočasného uložení</strong>, je nejprve vyhodnoceno, zda odpovídající druhá <a href="../../../datove-modely/datovy-78681044.html">Lokace objednané služby</a> typu Místo dočasného uložení v odpovídající <a href="../../../datove-modely/datovy-78681044.html">Objednané službě</a> může být změněna. Pokud je tato druhá <a href="../../../datove-modely/datovy-78681044.html">Objednaná služba</a> naplánována na <a href="../../../datove-modely/datovy-78681044.html">Denní výkon</a>, je potřeba zjistit, zda je možné tento <a href="../../../datove-modely/datovy-78681044.html">Denní výkon</a> editovat. Pokud <a href="../../../datove-modely/datovy-78681044.html">Denní výkon</a> editovat možné není, je vyvolán výjimkový tok událostí, protože změna <a href="../../../datove-modely/datovy-78681044.html">Lokace objednané služby</a> není umožněna. Pokud <a href="../../../datove-modely/datovy-78681044.html">Denní výkon</a> editovat můžeme, je uživatel dotázán, zda si přeje opravdu změnit adresu a souřadnice <a href="../../../datove-modely/datovy-78681044.html">Lokace objednané služby</a> – změna vyvolá přepočet tohoto <a href="../../../datove-modely/datovy-78681044.html">Denního výkonu</a>. Pokud <a href="../../../datove-modely/datovy-78681044.html">Objednaná služba</a> na žádný <a href="../../../datove-modely/datovy-78681044.html">Denní výkon</a> naplánována není, je možné měnit druhou <a href="../../../datove-modely/datovy-78681044.html">Lokaci objednané služby</a>.</li><li>Pokud je na vstupu UC k dispozici <a href="../../../datove-modely/datovy-78681044.html">Denní výkon</a> i <a href="../../../datove-modely/datovy-78681044.html">Objednaná služba</a>, není pro <a href="../../../datove-modely/datovy-78681044.html">Objednanou službu</a> přepočítána trasa – <a href="../../../datove-modely/datovy-78681044.html">Objednaná služba</a> je totiž naplánována na uvedeném <a href="../../../datove-modely/datovy-78681044.html">Denním výkonu</a>.<br></li><li>Pokud se jedná o <a href="../../../datove-modely/datovy-78681044.html">Lokaci objednané služby</a> typu <strong>Likvidační místo</strong>, pracujeme na pozadí s <a href="../../../datove-modely/datovy-78681044.html">Druhy odpadu likvidačního místa</a> (obsahují totiž informaci o <a href="../../../datove-modely/datovy-78681044.html">Kódu nakládání</a>). Z pohledu uživatele se však jedná přímo o <a href="../../../datove-modely/datovy-78681044.html">Likvidační místa</a>, ta jsou pak při výběru načítána duplicitně, a to pro každý podporovaný Kód nakládání (kód nakládání nakonec není evidován jako číselník).<br></li><li>Pokud se jedná o <a href="../../../datove-modely/datovy-78681044.html">Lokaci objednané služby</a> typu <strong>Výchozí likvidační místo</strong>, nepracujeme na pozadí s <a href="../../../datove-modely/datovy-78681044.html">Druhy odpadu likvidačního místa</a>… V rámci výchozího <a href="../../../datove-modely/datovy-78681044.html">Likvidační místo</a> jsou pouze naloženy nádoby, věci související s legislativou zde tedy nejsou řešeny.</li></ul><h1>Alternativní toky událostí</h1><h3>AF01: Údaje ve formuláři nejsou validní</h3><h4>Vstupní podmínky</h4><ul><li>Údaje ve formuláři nejsou validní – viz <a href="201uc17-84836810.html">Validace</a>.</li></ul><h4>Tok události</h4><ol><li>Alternativní tok událostí začíná krokem 1.f a 2.d základního toku událostí.</li><li>Systém zvýrazní ovládací prvky, které neobsahují validní hodnotu.</li><li>Systém zobrazí uživateli informaci, že některé ze zadaných údajů nejsou validní (MSG_ERR_FORM_NOT_VALID, viz <a href="../../../systemove-78681299.html">Systémové hlášky</a>).</li><li>Uživatel potvrdí hlášení.</li><li>Systém zavře modální okno.<strong> <strong>Návrat do základního toku událostí na místo, ve kterém byl spuštěn tento alternativní tok událostí</strong>.</strong><br></li></ol><h3>AF02: Provést aktualizaci trasy</h3><p>Pokud je na <a href="../../../datove-modely/datovy-78681044.html">Denní výkon</a> přihlášeno zařízení (FOB), musí dojít k aktualizaci trasy a odeslání notifikace o této skutečnosti na přihlášené zařízení.</p><h4>Vstupní podmínky</h4><ul><li>Jsou splněny vstupní podmínky v rámci <a href="#" data-page-title="205UC08: Provést aktualizaci trasy denního výkonu">205UC08: Provést aktualizaci trasy denního výkonu</a> (pro odpovídající <a href="../../../datove-modely/datovy-78681044.html">Denní výkon</a>). </li></ul><h4>Tok událostí</h4><ol><li>Alternativní tok začíná krokem 5.a základního toku událostí.</li><li>Systém provede aktualizaci odpovídající trasy – spustí <a href="#" data-page-title="205UC08: Provést aktualizaci trasy denního výkonu">205UC08: Provést aktualizaci trasy denního výkonu</a>, na vstupu UC jsou předány následující hodnoty:<ul><li>Denní výkon: na vstupu získaný <a href="../../../datove-modely/datovy-78681044.html">Denní výkon</a>.</li></ul></li></ol><p>Poznámka: Pokud akce nad <a href="../../../datove-modely/datovy-78681044.html">Denním výkonem</a> proběhne v rámci obrazovky editace (viz <a href="#" data-page-title="200UC02: Upravit denní výkon">200UC02: Upravit denní výkon</a>), není provedena aktualizace trasy. K té dochází až po uložení provedených změn, tedy po dokončení odkazovaného UC.</p><h4>Výstupní podmínky</h4><ul><li>Došlo k aktualizaci trasy odpovídajícího <a href="../../../datove-modely/datovy-78681044.html">Denního výkonu</a> a odeslání notifikace na přihlášené zařízení (pokud jsou splněny další podmínky).</li></ul><h1>Výjimkové toky událostí</h1><h3>EF01: Storno</h3><h4>Tok událostí</h4><ol><li>Výjimkový tok událostí může začít v rámci kroků 1.b.i.2.b, 1.d, 1.e, 2.b, 2.c, 3.b a 3.c.</li><li>KDYŽ uživatel nepotvrdí změnu <a href="../../../datove-modely/datovy-78681044.html">Lokace objednané služby</a> – stiskne tlačítko Ne/Storno.<br><ol><li>Systém se vrátí zpět do části aplikace, kde došlo k požadavku na změnu <a href="../../../datove-modely/datovy-78681044.html">Adresy</a> u <a href="../../../datove-modely/datovy-78681044.html">Lokace objednané služby</a>. <strong>Konec toku událostí</strong>.</li></ol></li><li>KDYŽ uživatel opustí zobrazený formulář.<br><ol><li><strong>Konec toku událostí</strong>.</li></ol></li></ol><h4>Výstupní podmínky</h4><ul><li>Nebyla změněna <a href="../../../datove-modely/datovy-78681044.html">Adresa</a> u <a href="../../../datove-modely/datovy-78681044.html">Lokace objednané služby</a>.</li></ul><h3>EF02: Není možné změnit adresu odpovídajícího MDU</h3><h4>Vstupní podmínky</h4><ul><li>Jedná se o <a href="../../../datove-modely/datovy-78681044.html">Lokaci objednané služby</a> typu Místo dočasného uložení.</li><li>Druhá <a href="../../../datove-modely/datovy-78681044.html">Objednaná služba</a>, pokud existuje, je naplánována na <a href="../../../datove-modely/datovy-78681044.html">Denní výkon</a>, který není v požadovaném stavu, viz <a href="201uc17-84836810.html">Základní tok událostí</a>.</li></ul><h4>Tok událostí</h4><ol><li>Výjimkový tok událostí může začít v rámci kroku 1.b.i.1.</li><li>Systém zobrazí modální okno s informací, že <a href="../../../datove-modely/datovy-78681044.html">Adresu</a> u požadované <a href="../../../datove-modely/datovy-78681044.html">Lokace objednané služby</a> není možné změnit (MSG_INFO_SERVICE_ORDER_UPDATE_NOT_ALLOWED, viz <a href="../../../systemove-78681299.html">Systémové hlášky</a>).</li><li>Uživatel potvrdí hlášení.</li><li>Systém zavře modální okno.<strong> Konec toku událostí</strong>.</li></ol><h4>Výstupní podmínky</h4><ul><li>Nebyla změněna <a href="../../../datove-modely/datovy-78681044.html">Adresa</a> u <a href="../../../datove-modely/datovy-78681044.html">Lokace objednané služby</a>.</li></ul><h1>Výstupní podmínky</h1><ul><li>Byla změněna <a href="../../../datove-modely/datovy-78681044.html">Adresa</a> u <a href="../../../datove-modely/datovy-78681044.html">Lokace objednané služby</a>.</li></ul><h1>Validace</h1><p>Validace je prováděna průběžně, pokud uživatel vstoupí do pole s možností zadání hodnoty, zadá hodnotu a pole opustí ve stavu, kdy hodnota není validní, je na to upozorněn. Ovládací prvek je graficky zvýrazněn a je doplněno chybové hlášení. Konkrétní validace jednotlivých polí jsou uvedeny v <a href="#" data-page-title="200UI06: Formulář adresy se souřadnicemi"></a>. Hlídána jsou jak konkrétní validační kritéria každé položky, tak i to, zda je položka povinná.</p><p>Jakmile uživatel stiskne tlačítko Uložit, je provedena validace všech polí.</p><p>Poznámka:</p><ul><li>V případě, kdy je konkrétní <a href="../../../datove-modely/datovy-78681044.html">Lokace objednané služby</a> typu Likvidační místo, není validace potřeba – jedná se pouze o výběr z kolekce <a href="../../../datove-modely/datovy-78681044.html">Likvidačních míst</a>, která mohou být do konkrétního <a href="../../../datove-modely/datovy-78681044.html">Denního výkonu</a> vložena.</li><li>V případě, kdy je konkrétní <a href="../../../datove-modely/datovy-78681044.html">Lokace objednané služby</a> typu Provozovna či Časový interval, není možné změnit <a href="../../../datove-modely/datovy-78681044.html">Adresu</a> vůbec. </li></ul><h1>Algoritmy</h1><h2>ALG01: Získání druhů odpadů lokace objednané služby</h2><p>Při změně lokace typu <strong>Likvidační místo</strong> pracujeme pouze s <a href="../../../datove-modely/datovy-78681044.html">Likvidačními místy</a>, která odebírají řešené <a href="../../../datove-modely/datovy-78681044.html">Druhy odpadu</a>. Ty jsou získány z odpovídající <a href="../../../datove-modely/datovy-78681044.html">Položky objednávky</a>, pod kterou daná <a href="../../../datove-modely/datovy-78681044.html">Lokace objednané služby</a> vznikla.</p><ul><li>Získáme odpovídající <a href="../../../datove-modely/datovy-78681044.html">Objednanou službu</a> – atribut <strong>Objednaná služba</strong> na vstupu získané <a href="../../../datove-modely/datovy-78681044.html">Lokace objednané služby</a> (vstupní parametr <strong>Lokace objednané služby</strong>).</li><li>Získáme odpovídající <a href="../../../datove-modely/datovy-78681044.html">Objednaný úkon</a> – atribut <strong>Objednaný úkon</strong> získané <a href="../../../datove-modely/datovy-78681044.html">Objednané služby</a>.</li><li>Získáme odpovídající <a href="../../../datove-modely/datovy-78681044.html">Objednanou nádobu</a> – atribut <strong>Objednaná nádoba</strong> získaného <a href="../../../datove-modely/datovy-78681044.html">Objednaného úkonu</a>.</li><li>Získáme takové <a href="../../../datove-modely/datovy-78681044.html">Vývozy na likvidační místa</a>, které dokazují na získanou <a href="../../../datove-modely/datovy-78681044.html">Objednanou nádobu</a> (atribut <strong>Objednaná nádoba</strong>).</li></ul><p>Na výstupu jsou pak předány takové <a href="../../../datove-modely/datovy-78681044.html">Druhy odpadu</a>, které jsou odkazovány v rámci získaných <a href="../../../datove-modely/datovy-78681044.html">Vývozů na likvidační místa</a> (atribut <strong>Druh odpadu</strong>). Každý <a href="../../../datove-modely/datovy-78681044.html">Druh odpadu</a> je předán maximálně jednou (dochází k jejich agregaci).</p><h1>Uživatelské rozhraní</h1><p>Rozložení formuláře pro specifikaci adresy je uvedeno v samostatném dokumentu, liší se pak dle typu konkrétní <a href="../../../datove-modely/datovy-78681044.html">Lokace objednané služby</a>:</p><ul><li>Místo realizace, Jiné – viz <a href="#" data-page-title="200UI06: Formulář adresy se souřadnicemi"></a>,</li><li>Likvidační místo – viz <a href="../../uzivatelske-rozhrani/700uixx-obecne/700ui05-79430047.html">700UI05: Výběrové dialogy</a>.</li><li>Provozovna, Časový interval – není.</li></ul><h1>Revize</h1><h3>12. 12. 2024: Tomáš Nadrchal</h3><table><tbody><tr><th>Odkaz</div></th><th>Stručný popis změny/doplnění</div></th></tr><tr><td colspan="1"><a href="201uc17-84836810.html">Základní tok událostí</a></td><td colspan="1">Revize dostupných záznamů při změně adresy lokace typu Likvidační místo (naznačeno modře).</td></tr><tr><td colspan="1"><a href="201uc17-84836810.html">ALG01: Získání druhů odpadů lokace objednané služby</a></td><td colspan="1">Doplněn algoritmus pro získání druhů dopadů konkrétní lokace objednané služby (naznačeno modře).</td></tr></tbody></table><h3>17. 2. 2024: Tomáš Nadrchal</h3><table><tbody><tr><th>Odkaz</div></th><th>Stručný popis změny/doplnění</div></th></tr><tr><td colspan="1"><a href="201uc17-84836810.html">Základní tok událostí</a></td><td colspan="1">Doplněno chování pro nový typ lokace objednané služby (naznačeno modře).</td></tr></tbody></table><h3>7. 11. 2022: Tomáš Nadrchal</h3><table><tbody><tr><th>Odkaz</div></th><th>Stručný popis změny/doplnění</div></th></tr><tr><td colspan="1"><a href="201uc17-84836810.html">Základní tok událostí</a></td><td colspan="1">Revize způsobu zobrazení kódu nakládání (naznačeno růžově).</td></tr></tbody></table><h3>15. 6. 2022: Tomáš Nadrchal</h3><table><tbody><tr><th>Odkaz</div></th><th>Stručný popis změny/doplnění</div></th></tr><tr><td colspan="1"><a href="201uc17-84836810.html">Základní tok událostí</a></td><td colspan="1">Revize chování při změně adresy lokace objednané služby typu likvidační místo (naznačeno modře).</td></tr></tbody></table><h3>23. 10. 2021: Tomáš Nadrchal</h3><table><tbody><tr><th>Odkaz</div></th><th>Stručný popis změny/doplnění</div></th></tr><tr><td colspan="1"><a href="201uc17-84836810.html">AF02: Provést aktualizaci trasy</a></td><td colspan="1">Doplnění aktualizace trasy odpovídajícího denního výkonu (naznačeno růžově).</td></tr></tbody></table><h3>28. 3. 2021: Tomáš Nadrchal</h3><p>Provedeny změny v rámci celého dokumentu (naznačeno modře). Viz <a href="../../../rp-sprava-pozadavku/id-89065686.html">ID-040: Násobné rozdělení objednané služby</a>.</p><h3>8. 9. 2020: Tomáš Nadrchal</h3><table><tbody><tr><th>Odkaz</div></div></th><th>Stručný popis změny/doplnění</div></div></th></tr><tr><td colspan="1"><a href="201uc17-84836810.html">Základní tok událostí</a></td><td colspan="1">Doplněna specifikace likvidačních míst, která mají být v rámci přehledu načtena (naznačeno modře).</td></tr></tbody></table><h3>18. 2. 2020: Tomáš Nadrchal</h3><table><tbody><tr><th>Odkaz</div></div></th><th>Stručný popis změny/doplnění</div></div></th></tr><tr><td colspan="1"><a href="201uc17-84836810.html">Základní tok událostí</a></td><td colspan="1">Aktualizovány stavy, ve kterých je umožněna editace MDU (naznačeno modře).</td></tr><tr><td colspan="1"><a href="201uc17-84836810.html">AF01: Údaje ve formuláři nejsou validní</a></td><td colspan="1">Doplněno chybějící chybové hlášení.</td></tr><tr><td colspan="1"><a href="201uc17-84836810.html">EF02: Není možné změnit adresu odpovídajícího MDU</a></td><td colspan="1">Doplněn chybějící popis volaného výjimkového toku událostí.</td></tr></tbody></table><h3>21. 5. 2019: Tomáš Nadrchal</h3><table><tbody><tr><th>Odkaz</div></div></th><th>Stručný popis změny/doplnění</div></div></th></tr><tr><td colspan="1"><a href="201uc17-84836810.html">Základní tok událostí</a></td><td colspan="1">Provedena revize nastavení hodnot atributů <a href="../../../datove-modely/datovy-78681044.html">Lokace objednané služby</a> při změně adresy se souřadnicemi (naznačeno modře).</td></tr></tbody></table><h3>15. 5. 2019: Tomáš Nadrchal</h3><table><tbody><tr><th>Odkaz</div></div></th><th>Stručný popis změny/doplnění</div></div></th></tr><tr><td colspan="1"><a href="201uc17-84836810.html">Základní tok událostí</a></td><td colspan="1"><p>Rozdělen popis chování pro <a href="../../../datove-modely/datovy-78681044.html">Lokace objednané služby</a> typu Místo realizace a Jiné na 2 samostatné větve toku událostí.</p><p>Popis chování pro <a href="../../../datove-modely/datovy-78681044.html">Lokace objednané služby</a> typu Místo realizace doplněn o zrušení reference na konkrétní <a href="../../../datove-modely/datovy-78681044.html">Místo realizace</a>.</p></td></tr></tbody></table><h3>9. 4. 2019: Tomáš Nadrchal</h3><table><tbody><tr><th>Odkaz</div></div></th><th>Stručný popis změny/doplnění</div></div></th></tr><tr><td colspan="1"><a href="201uc17-84836810.html">Vstupní data</a></td><td colspan="1"><p>Aktualizace vstupních dat:</p><ul><li>přidána nepovinná <a href="../../../datove-modely/datovy-78681044.html">Objednaná služba</a>,</li><li><a href="../../../datove-modely/datovy-78681044.html">Denní výkon</a> již není povinný.</li></ul></td></tr><tr><td colspan="1"><a href="201uc17-84836810.html">Základní tok událostí</a></td><td colspan="1"><p>Doplněno chování pro <a href="../../../datove-modely/datovy-78681044.html">Lokace objednané služby</a> typu Místo dočasného uložení.</p><p>Doplněno chování pro přepočet trasy dle toho, zda <a href="../../../datove-modely/datovy-78681044.html">Lokace objednané služby</a> obsažena v <a href="../../../datove-modely/datovy-78681044.html">Denním výkonu</a>.</p></td></tr></tbody></table><div><br></div>
</div>
</body>
</html>
