<!DOCTYPE html>
<html lang="cs">
<head>
  <meta charset="utf-8">
  <title>400UC11: Přeplánovat objednanou službu</title>
</head>
<body>
<div class="wiki-content">
<p></p><h1>Stručný popis, cíl UC</h1><p>Případ užití umožňuje Objednanou službu, kterou se nepodařilo zrealizovat, znovu zaplánovat do Denního výkonu. Vzniká nová instance Objednané služby ve stavu K naplánování, původní instance je nastavena do stavu Nezrealizovaná.</p><h1>Seznam aktérů</h1><table><tbody><tr><th>Aktér</th><th>Popis</th><th colspan="1">Typická role</th></tr><tr><td>Uživatel</td><td><p>Jedná se o uživatele aplikace RoadPlan, který musí mít oprávnění spouštět tento UC.</p></td><td colspan="1"><p>Dispečer</p></td></tr></tbody></table><h1>Spuštění případu užití</h1><ul><li>Funkčnost uživatel vyvolá z <a href="400uc02-86835400.html">400UC02: Zobrazit přehled s objednanými službami ke kontrole realizace</a>.<ul><li>Uživatel vybere ze seznamu Objednaných služeb jednu položku a klikne na tlačítko pro přeplánování.</li></ul></li></ul><h1>Vstupní podmínky</h1><ul><li>Uživatel je přihlášený a má oprávněný ke spuštění tohoto UC (viz <a href="../../../uzivatelska-78681297.html">Uživatelská oprávnění a role</a>, submodul Kontrola realizace výkonů a oprávnění EDIT_RP_ROUTES_CONFIRMATION).</li><li>Na vstupu předaná Objednaná služba patří do Denního výkonu, který odpovídá na vstupu předané Realizaci denního výkonu (lze kontrolovat takto: Objednaná služba.Položka denního výkonu → Položka denního výkonu.Denní výkon).</li><li>Na vstupu předaná Objednaná služba není přeplánovaná, rozdělená, nebylo vytvořeno místo dočasného úložiště (MDU) a realizace služby nebyla zastavena. Tj. atribut Způsob přeplánování entity <a href="../../../datove-modely/datovy-78681044.html">Objednaná služba</a> se musí rovnat NULL.</li><li>Na vstupu předaná Objednaná služba je označená jako Nezrealizovaná.</li><li>Denní výkon, který odpovídá na vstupu předané Realizaci denního výkonu, je ve stavu Ke kontrole.</li></ul><h3>Vstupní data</h3><ul><li>Identifikace kontrolované Realizace denního výkonu.</li><li>Identifikace Objednané služby.</li></ul><h1>Základní tok událostí</h1><ol><li>Systém zobrazí formulář pro nastavení časového rozmezí pro přeplánovanou Objednanou službu a provede jeho výchozí nastavení dle <a href="../../uzivatelske-rozhrani/700uixx-obecne/702uixx-kalendare-a-periodicita/702ui02-82117361.html">702UI02: Formulář pro nastavení termínu</a>. Formulář se pak liší v následujících ohledech:<br><ul><li>Nadpis okna: Přeplánovat objednanou službu.</li><li>Položky pro nastavení času (Čas od, Čas do) nejsou zobrazeny.</li><li>Nadpis tlačítka pro potvrzení formuláře: Potvrdit.</li><li>Vstupní data:<br><ul><li>Datum od: dnešní datum.</li><li>Datum do: dnešní datum.</li></ul></li></ul></li><li>Uživatel vyplní požadovaná data.</li><li>Uživatel stiskne tlačítko pro potvrzení přeplánování Objednané služby.</li><li>Systém provede validaci vstupních údajů.</li><li>Systém vytvoří kopii Objednané služby předané na vstupu (vytvořená kopie Objednané služby představuje přeplánovanou instanci).</li><li>Systém provede potřebná nastavení původní a vytvořené Objednané služby – viz <a href="400uc11-86835662.html">Nastavení objednaných služeb</a>.<br><ol><li>Potřebné informace o rozdělení jsou získány z formuláře nastavení časového rozmezí pro přeplánovanou Objednanou službu.</li></ol></li><li>Systém pro na vstupu předanou Objednanou službu:<br><ol><li>Zobrazuje příznak realizace "Nezrealizovaná" (následně nelze uživatelsky přepnout v rámci <a href="400uc06-86835644.html">400UC06: Nastavit příznak realizace objednané služby</a> ).</li><li>Zobrazí symbol označující, že se jedná o přeplánovanou Objednanou službu.</li></ol></li></ol><p>Poznámka: K uložení změn do DB dochází až v rámci zavolání <a href="400uc13-86835791.html">400UC18: Uložit kontrolu realizace denního výkonu</a> nebo <a href="#" data-page-title="400UC14: Potvrdit realizaci denního výkonu">400UC14: Potvrdit realizaci denního výkonu</a>.</p><p>Poznámka 2: Nově vytvořená instance Objednané služby není zobrazována <a href="400uc02-86835400.html">v seznamu objednaných služeb</a>.</p><h1>Alternativní toky událostí</h1><h3>AF01: Údaje ve formuláři nejsou validní</h3><h4>Vstupní podmínky</h4><ul><li>Údaje ve formuláři nejsou validní – viz <a href="400uc11-86835662.html">Validace</a>.</li></ul><h4>Tok události</h4><ol><li>Alternativní tok událostí začíná krokem 4 základního toku událostí.</li><li>Systém zvýrazní ovládací prvky, které neobsahují validní hodnotu.</li><li><strong>Návrat na krok 2 základního toku událostí</strong>.</li></ol><h1>Výjimkové toky událostí</h1><h3>EF01: Storno</h3><h4>Tok událostí</h4><ol><li>Výjimkový tok událostí může začít kdykoliv v rámci kroků 1 až 3 základního toku událostí.</li><li>KDYŽ uživatel stiskne tlačítko Storno.<br><ol><li>Systém se vrátí zpět do části aplikace, kde došlo k požadavku na přeplánování Objednané služby. <strong>Konec toku událostí</strong>.</li></ol></li><li>KDYŽ uživatel opustí formulář pro nastavení časového rozmezí pro přeplánovanou Objednanou službu.<br><ol><li><strong>Konec toku událostí</strong>.</li></ol></li></ol><h1>Výstupní podmínky</h1><ul><li>Došlo k aktualizaci zobrazení na vstupu předané Objednané služby - její parametry jsou nastaveny dle pořadavků uvedených v základním toku událostí.</li><li>Došlo ke vytvoření nové instance Objednané služby odpovídající provedenému přeplánování.</li><li>Odpovídající data jsou připravena k uložení do DB v rámci navazujících případů užití.</li></ul><h1>Validace</h1><p>Validace je prováděna průběžně, pokud uživatel vstoupí do pole s možností zadání hodnoty, zadá hodnotu a pole opustí ve stavu, kdy hodnota není validní, je na to upozorněn. Ovládací prvek je graficky zvýrazněn a je doplněno chybové hlášení. Konkrétní validace jednotlivých polí jsou uvedeny v <a href="../../uzivatelske-rozhrani/700uixx-obecne/702uixx-kalendare-a-periodicita/702ui02-82117361.html">702UI02: Formulář pro nastavení termínu</a>. Hlídána jsou jak konkrétní validační kritéria každé položky, tak i to, zda je položka povinná.</p><p>Jakmile uživatel stiskne tlačítko Uložit, je provedena validace všech polí.</p><h1>Algoritmy</h1><h3>Nastavení objednaných služeb</h3><p>Pro přeplánování <a href="../../../datove-modely/datovy-78681044.html">Objednané služby</a> bylo nutné vytvořit kopii obsažené <a href="../../../datove-modely/datovy-78681044.html">Objednané služby</a> – je tedy potřeba provést určitá nastavení v obou <a href="../../../datove-modely/datovy-78681044.html">Objednaných službách</a>.</p><p>Poznámka: U atributů, které nejsou uvedeny, případně u kterých není přímo uvedena nová hodnota, nedochází k žádné změně. </p><table><tbody><tr><th>Atribut</div></div></th><th>Výchozí objednaná služba</div></div></th><th>Nová objednaná služba</div></div></th><th>Poznámka</div></div></th></tr><tr><td>Stav</td><td>–</td><td>K naplánování</td><td><p>–</p></td></tr><tr><td colspan="1">Objednaný úkon</td><td colspan="1">–</td><td colspan="1">–</td><td colspan="1">–</td></tr><tr><td colspan="1">Konkrétní objednaná nádoba</td><td colspan="1">–</td><td colspan="1">–</td><td colspan="1">–</td></tr><tr><td colspan="1">Datum realizace od</td><td colspan="1">–</td><td colspan="1">Získáno v rámci <a href="../../uzivatelske-rozhrani/700uixx-obecne/702uixx-kalendare-a-periodicita/702ui02-82117361.html">702UI02: Formulář pro nastavení termínu</a>.</td><td colspan="1">–</td></tr><tr><td colspan="1">Datum realizace do</td><td colspan="1">–</td><td colspan="1">Získáno v rámci <a href="../../uzivatelske-rozhrani/700uixx-obecne/702uixx-kalendare-a-periodicita/702ui02-82117361.html">702UI02: Formulář pro nastavení termínu</a>.</td><td colspan="1">–</td></tr><tr><td colspan="1">Čas realizace od</td><td colspan="1">–</td><td colspan="1">–</td><td colspan="1">–</td></tr><tr><td colspan="1">Čas realizace do</td><td colspan="1">–</td><td colspan="1">–</td><td colspan="1">–</td></tr><tr><td colspan="1">Poznámka</td><td colspan="1">–</td><td colspan="1">–</td><td colspan="1">–</td></tr><tr><td colspan="1">Datum vytvoření</td><td colspan="1">–</td><td colspan="1">Datum a čas vytvoření nové <a href="../../../datove-modely/datovy-78681044.html">Objednané služby</a>.</td><td colspan="1">–</td></tr><tr><td colspan="1">Vytvořil</td><td colspan="1">–</td><td colspan="1"><a href="https://confluence.radium.cz/pages/viewpage.action?pageId=88033012#Datov%C3%BDslovn%C3%ADk-U%C5%BEivatel">Uživatele</a>, který spustil tento UC.</td><td colspan="1">–</td></tr><tr><td colspan="1">Vytvořeno uživatelem</td><td colspan="1">–</td><td colspan="1">TRUE</td><td colspan="1">–</td></tr><tr><td colspan="1"><p>Vytvořeno na výzvu</p></td><td colspan="1">–</td><td colspan="1">–</td><td colspan="1">Zůstává zachována informace z prvotního vygenerování <a href="../../../datove-modely/datovy-78681044.html">Objednané služby</a>.</td></tr><tr><td colspan="1">Pořadí v rámci objednávky</td><td colspan="1">–</td><td colspan="1">–</td><td colspan="1">Zůstává zachována informace z prvotního vygenerování <a href="../../../datove-modely/datovy-78681044.html">Objednané služby</a>.</td></tr><tr><td colspan="1"><p>Identifikátor jízdy</p></td><td colspan="1">–</td><td colspan="1">–</td><td colspan="1">Zůstává zachována informace z prvotního vygenerování <a href="../../../datove-modely/datovy-78681044.html">Objednané služby</a>.</td></tr><tr><td colspan="1">Evidenční číslo výchozího vozidla</td><td colspan="1">–</td><td colspan="1">–</td><td colspan="1">Zůstává zachována informace z prvotního vygenerování <a href="../../../datove-modely/datovy-78681044.html">Objednané služby</a>.</td></tr><tr><td colspan="1">Výchozí datum realizace</td><td colspan="1">–</td><td colspan="1">–</td><td colspan="1">Zůstává zachována informace z prvotního vygenerování <a href="../../../datove-modely/datovy-78681044.html">Objednané služby</a>.</td></tr><tr><td colspan="1">Položka denního výkonu</td><td colspan="1">–</td><td colspan="1">NULL</td><td colspan="1">–</td></tr><tr><td colspan="1">Lokace objednané služby</td><td colspan="1">–</td><td colspan="1">Viz <a href="400uc11-86835662.html">Nastavení lokací objednané služby</a>.</td><td colspan="1">–</td></tr><tr><td colspan="1">Pořadí v rámci objednané služby</td><td colspan="1">–</td><td colspan="1">1</td><td colspan="1">Vzniká nová <a href="../../../datove-modely/datovy-78681044.html">Objednaná služba</a>, na kterou již nemají vliv jednotlivé části výchozí <a href="../../../datove-modely/datovy-78681044.html">Objednané služby</a>.</td></tr><tr><td colspan="1">Následující objednaná služba</td><td colspan="1">–</td><td colspan="1">NULL</td><td colspan="1">–</td></tr><tr><td colspan="1">Způsob rozdělení následující objednané služby</td><td colspan="1">–</td><td colspan="1">NULL</td><td colspan="1">–</td></tr><tr><td colspan="1">Předchozí objednaná služba</td><td colspan="1">–</td><td colspan="1">NULL</td><td colspan="1">–</td></tr><tr><td colspan="1">Způsob rozdělení předchozí objednané služby</td><td colspan="1">–</td><td colspan="1">NULL</td><td colspan="1">–</td></tr><tr><td colspan="1">Realizace denního výkonu</td><td colspan="1">–</td><td colspan="1">NULL</td><td colspan="1">–</td></tr><tr><td colspan="1">Pořadí v realizaci denního výkonu</td><td colspan="1">–</td><td colspan="1">NULL</td><td colspan="1">–</td></tr><tr><td colspan="1">Realizována</td><td colspan="1">FALSE</td><td colspan="1">NULL</td><td colspan="1">–</td></tr><tr><td colspan="1">Způsob přeplánování</td><td colspan="1">Přeplánováno (viz <a href="../../../datove-modely/datovy-78681044.html">Způsob přeplánování objednané služby</a>).</td><td colspan="1">–</td><td colspan="1">–</td></tr><tr><td colspan="1">Přeplánováno do objednané služby</td><td colspan="1">Nově vytvořená <a href="../../../datove-modely/datovy-78681044.html">Objednaná služba</a>.</td><td colspan="1">–</td><td colspan="1">–</td></tr><tr><td colspan="1">Přeplánováno z objednané služby</td><td colspan="1">–</td><td colspan="1">Výchozí <a href="../../../datove-modely/datovy-78681044.html">Objednaná služba</a>.</td><td colspan="1">–</td></tr></tbody></table><h3>Nastavení lokací objednané služby</h3><p>Při přeplánování <a href="../../../datove-modely/datovy-78681044.html">Objednané služby</a> dochází ke vzniku nové <a href="../../../datove-modely/datovy-78681044.html">Objednané služby</a> (kopie výchozí <a href="../../../datove-modely/datovy-78681044.html">Objednané služby</a>) – je tedy vytvořena i kopie obsažených <a href="../../../datove-modely/datovy-78681044.html">Lokací objednané služby</a>. V nové <a href="../../../datove-modely/datovy-78681044.html">Objednané službě</a> je pak nutné provést určité akce i nad obsaženými <a href="../../../datove-modely/datovy-78681044.html">Lokacemi objednané služby</a>. </p><ol><li>V rámci nově vytvořené <a href="../../../datove-modely/datovy-78681044.html">Objednané služby</a> jsou nad obsaženými <a href="../../../datove-modely/datovy-78681044.html">Lokacemi objednané služby</a> (atribut Lokace objednané služby) provedeny následující akce:<br><ol><li>Systém smaže všechny takové <a href="../../../datove-modely/datovy-78681044.html">Lokace objednané služby</a>, u kterých <strong>není</strong> atribut Typ lokace nataven na hodnotu <strong>Místo realizace</strong>, <strong>Likvidační místo</strong>, <strong>Výchozí likvidační místo</strong>, <strong>Provozovna</strong> nebo <strong>Místo dočasného uložení</strong> (viz <a href="../../../datove-modely/datovy-78681044.html">Typ lokace objednané služby</a>).</li><li>Systém nastaví u všech obsažených <a href="../../../datove-modely/datovy-78681044.html">Lokací objednané služby</a> hodnotu atributu Provést na TRUE.</li><li>Systém nastaví u všech obsažených <a href="../../../datove-modely/datovy-78681044.html">Lokací objednané služby</a> hodnotu atributu Obsluha lokace objednané služby na NULL.</li></ol></li><li>Systém přepočítá trasu této <a href="../../../datove-modely/datovy-78681044.html">Objednané služby</a> – spustí algoritmus <a href="../101ucxx-objednane-sluzby/101uc01-82116734.html">Získání trasy</a> (viz <a href="../101ucxx-objednane-sluzby/101uc01-82116734.html">101UC01: Vygenerovat objednané služby</a>).</li></ol><p>Poznámka: Vazby mezi samotnými <a href="../../../datove-modely/datovy-78681044.html">Lokacemi objednané služby</a> jsou řešeny v rámci přepočtu trasy.</p><h1>Uživatelské rozhraní</h1><p><a href="#" data-page-title="400UI01: Přehled objednaných služeb realizace denního výkonu"></a></p><h1>Revize</h1><h3>16. 2. 2024: Tomáš Nadrchal</h3><table><tbody><tr><th>Odkaz</th><th>Stručný popis změny/doplnění</th></tr><tr><td colspan="1"><a href="400uc11-86835662.html">Nastavení objednaných služeb</a></td><td colspan="1">Doplněno nastavení nově přidaných atributů Objednané služby (naznačeno modře).</td></tr><tr><td colspan="1"><a href="400uc11-86835662.html">Nastavení lokací objednané služby</a></td><td colspan="1">Doplněno chování pro nový typ lokace objednané služby (naznačeno modře).</td></tr></tbody></table><h3>15. 3. 2022: Tomáš Nadrchal</h3><table><tbody><tr><th>Odkaz</th><th>Stručný popis změny/doplnění</th></tr><tr><td colspan="1"><a href="400uc11-86835662.html">Nastavení objednaných služeb</a></td><td colspan="1">Doplněno nastavení nově přidaných atributů Objednané služby (naznačeno růžově). <em><strong>ID-053</strong></em></td></tr></tbody></table><h3>10. 3. 2022: Tomáš Nadrchal</h3><table><tbody><tr><th>Odkaz</th><th>Stručný popis změny/doplnění</th></tr><tr><td colspan="1"><a href="400uc11-86835662.html">Nastavení objednaných služeb</a></td><td colspan="1">Doplněno nastavení nově přidaných atributů Objednané služby (naznačeno modře). <em><strong>ID-054</strong></em></td></tr></tbody></table><h3>29. 3. 2021: Tomáš Nadrchal</h3><p>Provedeny změny v rámci celého dokumentu (naznačeno modře). Viz <a href="../../../rp-sprava-pozadavku/id-89065686.html">ID-040: Násobné rozdělení objednané služby</a>.</p><h3>9. 1. 2020: Tomáš Nadrchal</h3><table><tbody><tr><th>Odkaz</th><th>Stručný popis změny/doplnění</th></tr><tr><td colspan="1"><a href="400uc11-86835662.html">Nastavení objednaných služeb</a></td><td colspan="1">Aktualizován výčet pro nastavení výchozích hodnot atributů vytvářené <a href="../../../datove-modely/datovy-78681044.html">Objednané služby</a> (naznačeno modře).</td></tr></tbody></table><h3>1.7.2019: M.Slivoně</h3><table><tbody><tr><th>Odkaz</div></div></th><th>Stručný popis změny/doplnění</div></div></th></tr><tr><td colspan="1">Algoritmy</td><td colspan="1">Upřesnění pro nastavení služeb</td></tr></tbody></table><h3>17.6.2019: M.Slivoně</h3><table><tbody><tr><th>Odkaz</div></div></th><th>Stručný popis změny/doplnění</div></div></th></tr><tr><td colspan="1">Vstupní podmínky</td><td colspan="1">Doplnění podpory pro <a href="400uc18-86837054.html">400UC18: Zastavit realizaci objednané služby</a></td></tr></tbody></table>
</div>
</body>
</html>
