<!DOCTYPE html>
<html lang="cs">
<head>
  <meta charset="utf-8">
  <title>400UC16: Odebrat objednanou službu realizovanou mimo plán</title>
</head>
<body>
<div class="wiki-content">
<p></p><h1>Stručný popis, cíl UC</h1><p>V kompetenci UC je odebrání Objednané služby, která byla přidána v důsledku zavolání <a href="#" data-page-title="400UC07: Přidat objednanou službu do realizace denního výkonu"></a>.</p><p>Pokud byla daná objednaná služba rozdělena (<a href="#" data-page-title="400UC08: Přeplánovat s rozdělením objednané služby"></a>), nebo pro ní vytvořeno MDU (<a href="#" data-page-title="400UC09: Přeplánovat se zadáním místa dočasného uložení"></a>), pak je potřebné nejprve provedené úpravy zrušit pomocí <a href="#" data-page-title="400UC15: Zrušit přeplánování objednané služby"></a></p><h1>Seznam aktérů</h1><table><tbody><tr><th>Aktér</th><th>Popis</th><th colspan="1">Typická role</th></tr><tr><td>Uživatel</td><td><p>Jedná se o uživatele aplikace RoadPlan, který musí mít oprávnění spouštět tento UC.</p></td><td colspan="1"><p>Dispečer</p></td></tr></tbody></table><h1>Spuštění případu užití</h1><ul><li>Funkčnost uživatel vyvolá z <a href="400uc02-86835400.html">400UC02: Zobrazit přehled s objednanými službami ke kontrole realizace</a>:<ul><li>Uživatel vybere ze seznamu Objednaných služeb položku, pro kterou je daná akce povolena, a klikne na tlačítko její odebrání.</li></ul></li></ul><h1>Vstupní podmínky</h1><ul><li>Uživatel je přihlášený a má oprávněný ke spuštění tohoto UC (viz <a href="../../../uzivatelska-78681297.html">Uživatelská oprávnění a role</a>, submodul Kontrola realizace výkonů a oprávnění EDIT_RP_ROUTES_CONFIRMATION).</li><li>Denní výkon, který odpovídá na vstupu předané Realizaci denního výkonu, je ve stavu Ke kontrole.</li><li>Na vstupu předaná Objednaná služba <strong>ne</strong>patří do Denního výkonu, který odpovídá na vstupu předané Realizaci denního výkonu (lze kontrolovat takto: Objednaná služba.Položka denního výkonu → Položka denního výkonu.Denní výkon).<br><ul><li>Poznámka: Tj. byla přidána pomocí <a href="#" data-page-title="400UC07: Přidat objednanou službu do realizace denního výkonu"></a> nebo při kontrole jiné Realizace denního výkonu pomocí <a href="#" data-page-title="400UC10: Přesunout objednanou službu pod jinou realizaci denního výkonu"></a>.</li></ul></li><li>Na vstupu předaná Objednaná služba není rozdělená, ani pro ní nebylo vytvořeno místo dočasného úložiště (MDU). Tj. atribut Způsob přeplánování entity <a href="../../../datove-modely/datovy-78681044.html">Objednaná služba</a> se musí rovnat NULL.<br><ul><li>Poznámka: Přeplánovaná být nemůže, protože dodatečně přidané služby není dovoleno přeplánovat.</li></ul></li></ul><h3>Vstupní data</h3><ul><li>Identifikace kontrolované Realizace denního výkonu.</li><li>Identifikace Objednané služby.</li></ul><h1>Základní tok událostí</h1><ol><li>Systém zobrazí potvrzovací dialog s dotazem na odebrání Objednané služby (kód hlášky MSG_CONF_CANCEL_REMOVE_ITEM, viz <a href="../../../systemove-78681299.html">Systémové hlášky</a>).</li><li>Uživatel svůj požadavek potvrdí (<a href="400uc16-86836355.html">EF01 - Uživatel stiskne Storno</a>).</li><li>Systém vyhodnotí, kam odebíranou Objednanou službu zařadí - viz <a href="400uc16-86836355.html">Zařazení odebírané objednané služby</a>.</li><li>Pokud má být Objednaná služba vrácena do původního Denního výkonu, systém ověří, že tento Denní výkon není ve stavu Uzavřený (<a href="400uc16-86836355.html">EF02 - Stav původního denního výkonu neumoňuje odebrání služby</a>). </li><li>Systém provede <a href="400uc16-86836355.html">Nastavení objednané služby</a>.</li><li>Systém přestane danou Objednanou službu zobrazovat v <a href="400uc02-86835400.html">seznamu objednaných služeb</a> a aktualizuje pořadí zbývajících Objednaných služeb.</li></ol><p>Poznámka: K uložení změn do DB dochází až v rámci zavolání <a href="400uc13-86835791.html">400UC18: Uložit kontrolu realizace denního výkonu</a> nebo <a href="#" data-page-title="400UC14: Potvrdit realizaci denního výkonu">400UC14: Potvrdit realizaci denního výkonu</a>.</p><h1>Alternativní toky událostí</h1><p>Nejsou.</p><h1>Výjimkové toky událostí</h1><h3>EF01: Uživatel stiskne Storno</h3><ol><li>Systém ukončí UC.</li></ol><h3>EF02: Stav původního denního výkonu neumoňuje odebrání služby</h3><ol><li>Systém zobrazí uživateli informaci o tom, že stav původního Denního výkonu neumožňuje odebrání Objedanané služby (kód hlášky MSG_CONF_CANCEL_SUBSEQUENT_SERVICE, viz <a href="../../../systemove-78681299.html">Systémové hlášky</a>).</li><li>Uživatel hlášku potvrdí.</li><li>Systém ukončí UC.</li></ol><h1>Výstupní podmínky</h1><ul><li>Ze seznamu služeb zmizela odebraná Objednaná služba, její parametry jsou nastaveny dle pořadavků uvedených v základním toku událostí.</li><li>Pořadí zbývajících objednaných služeb bylo aktualizováno.</li><li>Odpovídající data jsou připravena k uložení do DB v rámci navazujících případů užití.</li></ul><h1>Validace</h1><p>Uvedeny v základním toku.</p><h1>Algoritmy</h1><h3>Zařazení odebírané objednané služby</h3><p>Pokud má příslušná Objednaná služba atribut Položka denního výkonu = NULL, jedná se o Objednanou službu, která má být <strong>vrácena do stavu K naplánování</strong>.</p><p>Pokud má příslušná Objednaná služba  atribut Položka denního výkonu = platná reference na <a href="../../../datove-modely/datovy-78681044.html">Položka denního výkonu</a>, pak se jedná o Objednanou službu, která má být <strong>vrácena pod původní <a href="../../../datove-modely/datovy-78681044.html">Realizaci denního výkonu</a></strong>. Ta lze dohledat prostřednictvím atributu Denní výkon příslušné <a href="../../../datove-modely/datovy-78681044.html">Položky denního výkonu</a>.</p><h3>Nastavení objednané služby</h3><table><tbody><tr><th>Objednaná služba</th><th>Atribut</th><th>Hodnota</th><th>Poznámka</th></tr><tr><td rowspan="2"><p>Předaná na vstupu</p></td><td>Stav</td><td><p>K naplánování - jen pokud má být vrácena do stavu K naplánování.</p></td><td>Pro Objednané služby, které mají být vráceny pod původní Realizaci denního výkonu, není stav měněn.</td></tr><tr><td>Realizace denního výkonu</td><td><p>NULL - pokud má být vrácena do stavu K naplánování.</p><p><a href="../../../datove-modely/datovy-78681044.html">Realizace denního výkonu</a>, která odpovídá původnímu Dennímu výkonu - pokud má být vrácena pod původní Realizaci denního výkonu</p></td><td>–</td></tr></tbody></table><p>Poznámka: U atributů, které nejsou uvedeny, zůstává hodnota nezměněna.</p><h1>Uživatelské rozhraní</h1><p><a href="#" data-page-title="400UI01: Přehled objednaných služeb realizace denního výkonu"></a></p><h1>Revize</h1><h3>datum: autor</h3><table><tbody><tr><th>Odkaz</div></div></th><th>Stručný popis změny/doplnění</div></div></th></tr><tr><td colspan="1"> </td><td colspan="1"> </td></tr></tbody></table>
</div>
</body>
</html>
