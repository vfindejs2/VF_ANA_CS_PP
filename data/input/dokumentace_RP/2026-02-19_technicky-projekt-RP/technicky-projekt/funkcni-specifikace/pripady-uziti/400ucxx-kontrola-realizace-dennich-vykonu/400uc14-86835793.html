<!DOCTYPE html>
<html lang="cs">
<head>
  <meta charset="utf-8">
  <title>400UC14: Potvrdit realizaci denního výkonu</title>
</head>
<body>
<div class="wiki-content">
<p></p><h1>Stručný popis, cíl UC</h1><p>V kompetenci UC je změna stavu Denního výkonu na "Uzavřený". V rámci této akce dojde k uložení dat o Realizaci denního výkonu, přepnutí příslušných Objednaných služeb do finálního stavu a uzamčení odpovídající Realizace denního výkonu pro další změny. </p><p>Případ užití upozorní uživatele, že pod Realizací denního výkonu zůstaly objednané služby, které nebyly realizovány a současně nejsou přeplánovány.</p><h1>Seznam aktérů</h1><table><tbody><tr><th>Aktér</th><th>Popis</th><th colspan="1">Typická role</th></tr><tr><td>Uživatel</td><td><p>Jedná se o uživatele aplikace RoadPlan, který musí mít oprávnění spouštět tento UC.</p></td><td colspan="1"><p>Dispečer</p></td></tr></tbody></table><h1>Spuštění případu užití</h1><ul><li>Funkčnost uživatel vyvolá z <a href="../../uzivatelske-rozhrani/400uixx/400ui01-86836009.html">400UI01: Obrazovka pro kontrolu realizace denních výkonů</a>:<ul><li>Uživatel vybere klikne na tlačítko Uložit a potvrdit.<br></li></ul></li></ul><h1>Vstupní podmínky</h1><ul><li>Uživatel je přihlášený a má oprávněný ke spuštění tohoto UC (viz <a href="../../../uzivatelska-78681297.html">Uživatelská oprávnění a role</a>, submodul Kontrola realizace výkonů a oprávnění EDIT_RP_ROUTES_CONFIRMATION).</li><li>Denní výkon, který odpovídá na vstupu předané Realizaci denního výkonu, je ve stavu Ke kontrole.</li></ul><h3>Vstupní data</h3><ul><li>Identifikace kontrolované Realizace denního výkonu</li></ul><h1>Základní tok událostí</h1><ol><li>Systém ověří, že pro všechny Objednané služby zařazené pod na vstupu předanou Realizaci denního výkonu platí: (<a href="400uc14-86835793.html">AF01: Existují nezrealizované objednané služby bez přeplánování</a>)<br><ul><li>BUĎ atribut Realizována = True (tj. služba byla realizována);</li><li>NEBO atribut Realizována = False A SOUČASNĚ atribut Způsob přeplánování nabývá jedná z hodnot {Přeplánováno, Rozděleno, Místo dočasného uložení, Zastaveno} (tj. služba byla přeplánována nebo byla zastavena další realizace).</li></ul></li><li>Systém zavolá <a href="#" data-page-title="400UC13: Uložit kontrolu realizace denního výkonu"></a> a na vstupu mu předá vyžadovaná data. (<a href="400uc14-86835793.html">EF01: Chyba při uložení Realizace denního výkonu</a>)</li><li>Systém změní stav Objednaných služeb, které jsou zařazené pod na vstupu předanou Realizaci denního výkonu, dle <a href="400uc14-86835793.html">ALG01: Nastavit stav Objednaných služeb</a>.</li><li>Systém změní stav Denního výkonu, který odpovídá na vstupu předané Realizaci denního výkonu, na "Uzavřený".</li><li>Systém nastaví hodnoty dále uvedených atributů u na vstupu získané <a href="../../../datove-modely/datovy-78681044.html">Realizace denního výkonu</a> následovně:<br><ul><li>Datum a čas potvrzení realizace: aktuální datum a čas.</li><li>Potvrdil realizaci: <a href="../../../datove-modely/datovy-78681044.html">Uživatel</a>, který spustil UC.</li></ul></li><li>Systém vrátí uživatele zpět do části aplikace, ze které došlo ke spuštění <a href="400uc01-86835403.html">400UC01: Zobrazit obrazovku kontroly realizace denního výkonu</a> .</li></ol><h1>Alternativní toky událostí</h1><h3>AF01: Existují nezrealizované objednané služby bez přeplánování</h3><ol><li>Systém zobrazí potvrzovací dialog s upozorněním (kód hlášky MSG_CONF_UNPROCESSED_SERVICES, viz <a href="../../../systemove-78681299.html">Systémové hlášky</a>). </li><li>V závislosti na volbě uživatele:<br><ol><li>Pokud se uživatel rozhodne zastavit realizaci služeb (volba Ano), pak pokračovat krokem 3 tohoto alternativního toku. </li><li>Pokud se uživatel rozhodne pro další zpracování služba (volba Ne), pak Konec toku událostí.</li></ol></li><li>Systém nastaví pro všechny nalezené nezrealizované Objednané služby bez přeplánování atribut Způsob přeplánování na hodnotu "Zastaveno".</li><li>Návrat do základního toku na krok 2.</li></ol><h1>Výjimkové toky událostí</h1><h3>EF01: Chyba při uložení realizace denního výkonu</h3><ol><li>Systém zobrazí příslušnou validační chybu z volaného UC pro uložení dat.</li><li>Konec toku událostí.</li></ol><h3>EF02: Existují nezpracované objednané služby</h3><ol><li>Systém zobrazí uživateli informaci o odebrání některých Objednaných služeb (kód hlášky MSG_ERROR_UNPROCESSED_SERVICES, viz <a href="../../../systemove-78681299.html">Systémové hlášky</a>).</li></ol><h1>Výstupní podmínky</h1><ul><li>Proběhlo uložení dat Realizace denního výkonu.</li><li>Odpovídající Denní výkon je ve stavu Uzavřený.</li><li>Stavy Objednaných služeb jsou nastaveny dle <a href="400uc14-86835793.html">ALG01: Nastavit stav Objednaných služeb</a>.</li></ul><h1>Validace</h1><p>Nejsou.</p><h1>Algoritmy</h1><h3>ALG01: Nastavit stav Objednaných služeb</h3><p>Stavy <a href="../../../datove-modely/datovy-78681044.html">Objednaných služeb</a>, jejichž atribut Realizace denního výkonu odkazuje na <a href="../../../datove-modely/datovy-78681044.html">Realizaci denního výkonu</a> předanou na vstupu, budou přepnuty takto:</p><table><tbody><tr><th>Hodnota atributu</th><th colspan="1">Výsledný stav</th></tr><tr><td>Realizováno = True</td><td colspan="1">Realizovaná</td></tr><tr><td>Realizováno = False</td><td colspan="1">Nezrealizovaná</td></tr></tbody></table><h1>Uživatelské rozhraní</h1><p><a href="../../uzivatelske-rozhrani/400uixx/400ui01-86836009.html">400UI01: Obrazovka pro kontrolu realizace denních výkonů</a></p><h1>Revize</h1><h3>30. 3. 2021: Tomáš Nadrchal</h3><p>Provedeny změny v rámci celého dokumentu (naznačeno modře). Viz <a href="../../../rp-sprava-pozadavku/id-89065686.html">ID-040: Násobné rozdělení objednané služby</a>.</p>
</div>
</body>
</html>
