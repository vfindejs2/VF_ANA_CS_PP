<!DOCTYPE html>
<html lang="cs">
<head>
  <meta charset="utf-8">
  <title>602UC12: Přijmout požadavek na získání konkrétních částí souhrnného itineráře trasy z FOB</title>
</head>
<body>
<div class="wiki-content">
<p></p><h1>Stručný popis, cíl</h1><p>Cílem případu užití je přijetí zprávy z rozhraní aplikace FOB, která požaduje poskytnutí konkrétních částí souhrnného itineráře trasy.</p><h1>Seznam aktérů</h1><table><tbody><tr><th>Aktér</th><th colspan="1">Poznámka</th></tr><tr><td colspan="1">FOB</td><td colspan="1">–</td></tr></tbody></table><p>Poznámka: Úplný přehled aktérů je zobrazen samostatně, viz <a href="#" data-page-title="Přehled aktérů"></a>.</p><h1>Spuštění případu užití</h1><p>FOB zadá požadavek na získání konkrétních částí souhrnného itineráře trasy, a to jedním z uvedených způsobů:</p><ul><li>FOB odešle zprávu obsahující požadavek na získání konkrétních částí souhrnného itineráře trasy (viz <a href="602uc02-98241327.html">602UC02: Přijmout zprávu z FOB</a>).</li></ul><h2>Vstupní podmínky</h2><p>–</p><h2>Vstupní data</h2><table><tbody><tr><th>Vstupní parametr</div></th><th>Datový typ</div></th><th colspan="1">Povinnost</div></th><th>Popis</div></th><th colspan="1">Poznámka</div></th></tr><tr><td colspan="1">Identifikátor objektu</td><td colspan="1">Číslo</td><td colspan="1">Ano</td><td colspan="1">Identifikace objektu (entita FLWW2), z kterého byla přijata zpráva.</td><td colspan="1">–</td></tr><tr><td colspan="1">Obsah zprávy</td><td colspan="1">Řetězec</td><td colspan="1">Ano</td><td colspan="1">Obsah, který byl v rámci zprávy přijat.</td><td colspan="1"><p>Musí být předáno ve formátu dle standardu XML.</p></td></tr><tr><td colspan="1">Identifikátor zprávy</td><td colspan="1">Řetězec</td><td colspan="1">Ne</td><td colspan="1">Identifikátor přijaté zprávy.</td><td colspan="1">–</td></tr><tr><td colspan="1">Verze komunikačního protokolu</td><td colspan="1">Řetězec</td><td colspan="1">Ano</td><td colspan="1">Verze, od které se odvíjí struktura obsahu zprávy.</td><td colspan="1">Jedná se o verzi použité XML obálky pro obsah zprávy (její struktury).</td></tr></tbody></table><h1>Základní tok událostí</h1><ol><li>Systém vyhodnotí na vstupu získaný obsah zprávy (vstupní parametr <strong>Obsah zprávy</strong>; viz <a href="602uc12-115999609.html">ALG01: Vyhodnotit obsah zprávy</a>).</li><li>Systém nalezne takový <a href="../../../datove-modely/datovy-78681044.html">Denní výkon</a> odpovídající požadované trase, který splňuje všechny dále uvedené podmínky zároveň:<br><ul><li><strong>Interní identifikátor</strong> je roven hodnotě výstupního parametru <strong>Identifikátor trasy</strong> získané v rámci <a href="602uc12-115999609.html">ALG01: Vyhodnotit obsah zprávy</a>.</li></ul></li><li>Systém nalezne takovou instanci entity <a href="../../../datove-modely/datovy-78681044.html">Přihlášené zařízení na denním výkonu</a> odpovídající nalezenému <a href="../../../datove-modely/datovy-78681044.html">Dennímu výkonu</a>, která splňuje všechny dále uvedené podmínky zároveň:<br><ul><li>Hodnota atributu <strong>Denní výkon</strong> odpovídá nalezenému <a href="../../../datove-modely/datovy-78681044.html">Dennímu výkonu</a> (viz krok 2).</li></ul></li><li>Pokud není soubor s trasou aktuální, systém provede jeho aktualizaci (viz <a href="602uc12-115999609.html">AF04: Aktualizovat soubor se souhrnným itinerářem trasy</a>).</li><li>Pro všechny požadované části souhrnného itineráře trasy – zadané rozmezí je dáno výstupními parametry <strong>Pořadí první části</strong> a <strong>Pořadí poslední části</strong> v rámci <a href="602uc12-115999609.html">ALG01: Vyhodnotit obsah zprávy</a> včetně:<br><ol><li>Systém vygeneruje požadovanou část souhrnného itineráře trasy – spustí <a href="#" data-page-title="205UC11: Rozdělit souhrnný itinerář trasy denního výkonu"></a>, na vstup jsou předány následující informace:<br><ul><li><strong>Souhrnný itinerář trasy</strong>: hodnota atributu <strong>Souhrnný itinerář trasy</strong> odpovídajícího <a href="../../../datove-modely/datovy-78681044.html">Přihlášeného zařízení na denním výkonu</a> (viz krok 3).</li><li><strong>Pořadí části souhrnného itineráře trasy</strong>: právě „zkoumané“ pořadí části souhrnného itineráře trasy.</li></ul></li><li>Systém odešle požadovanou část trasy – spustí <a href="#" data-page-title="602UC13: Odeslat konkrétní části souhrnného itineráře trasy na FOB"></a>, na vstup jsou předány následující informace:<br><ul><li><strong>Identifikátor objektu</strong>: hodnota vstupního parametru <strong>Identifikátor objektu</strong>.</li><li><strong>Identifikátor odpovědní zprávy</strong>: hodnota vstupního parametru <strong>Identifikátor zprávy</strong>.</li><li><strong>Verze komunikačního protokolu</strong>: hodnota vstupního parametru <strong>Verze komunikačního protokolu</strong>.</li><li><strong>Identifikátor trasy</strong>: interní identifikátor právě zkoumaného <a href="../../../datove-modely/datovy-78681044.html">Denního výkonu</a> (viz krok 2).</li><li><strong>Datum poslední změny trasy</strong>: hodnota atributu <strong>Datum poslední změny trasy</strong> právě zkoumané instanci entity <a href="../../../datove-modely/datovy-78681044.html">Přihlášené zařízení na denním výkonu</a> (viz krok 3 základního toku událostí).</li><li><strong>Pořadí části souhrnného itineráře trasy</strong>: právě „zkoumané“ pořadí části souhrnného itineráře trasy.</li><li><strong>Část souhrnného itineráře trasy</strong>: získaná část souhrnného itineráře trasy (hodnota výstupního parametru <strong>Část souhrnného itineráře trasy</strong> v rámci <a href="#" data-page-title="205UC11: Rozdělit souhrnný itinerář trasy denního výkonu"></a>; viz krok 5.a).</li><li><strong>Počet částí souhrnného itineráře trasy</strong>: celkový počet částí souhrnného itineráře trasy (hodnota výstupního parametru <strong>Počet částí <strong>souhrnného itineráře </strong>trasy</strong> v rámci <a href="#" data-page-title="205UC11: Rozdělit souhrnný itinerář trasy denního výkonu"></a>; viz krok 5.a).</li></ul></li></ol></li></ol><p>Poznámka: V rámci toku událostí probíhá rozdělení trasy v každé iteraci cyklu odesílající požadovanou část trasy (viz krok 5). Při implementaci však nemusí být dělení trasy prováděno při každém požadavku na její konkrétní část. To platí především v případech, kdy se FOB ptá na více částí trasy zároveň (např. 1 až 10). Trasu jako takovou stačí rozdělit jen jednou, přepočet je nutný např. až v případě aktualizace odpovídajícího denního výkonu.</p><h1>Alternativní toky událostí</h1><h2>AF01: Požadovaná trasa není k dispozici</h2><p>Cílem alternativního toku událostí je odeslání chybového hlášení na FOB v případě, kdy požaduje část trasy, která již neexistuje.</p><h3>Vstupní podmínky</h3><ul><li>Pro požadovanou trasu nebyl nalezen žádný <a href="../../../datove-modely/datovy-78681044.html">Denní výkon</a>.</li></ul><h3>Tok událostí</h3><ol><li>Alternativní tok událostí začíná krokem 2 základního toku událostí.</li><li>Systém odešle informaci o nedostupnosti trasy – spustí <a href="#" data-page-title="602UC05: Odeslat informaci o chybě na FOB"></a>, na vstup jsou předány následující informace:<br><ul><li><strong>Identifikátor objektu</strong>: hodnota vstupního parametru <strong>Identifikátor objektu</strong>.</li><li><strong>Identifikátor odpovědní zprávy</strong>: hodnota vstupního parametru <strong>Identifikátor zprávy</strong>.</li><li><strong>Verze komunikačního protokolu</strong>: hodnota vstupního parametru <strong>Verze komunikačního protokolu</strong>.</li><li><strong>Chybové hlášení</strong>: MSG_ERR_ROUTE_NOT_FOUND (viz <a href="#" data-page-title="Systémové hlášky">Systémové hlášky</a>).</li></ul></li><li>Případ užití končí.</li></ol><p>Poznámka: U odesílané zprávy je potvrzováno přijetí adresátem. To není <strong>zatím</strong> žádným způsobem vyhodnocováno.</p><h3>Výstupní podmínky</h3><ul><li>Systém přijal požadavek na získání konkrétních částí souhrnného itineráře trasy, na který odpověděl.</li></ul><h2>AF02: Zařízení není přihlášeno na trasu</h2><p>Cílem alternativního toku událostí je vytvoření záznamu o přihlášení zařízení na trasu v případě, kdy tento záznam ještě neexistuje (resp. existuje, ale neobsahuje požadovaný souhrnný itinerář trasy). V takovém případě dojde k přihlášení zařízení na trasu (resp. ke generování odpovídajícího souhrnného itineráře trasy).</p><h3>Vstupní podmínky</h3><p>Je splněna alespoň jedna z dále uvedených podmínek:</p><ul><li>Pro odpovídající <a href="../../../datove-modely/datovy-78681044.html">Denní výkon</a> nebyla nalezena žádná instance entity <a href="../../../datove-modely/datovy-78681044.html">Přihlášené zařízení na denním výkonu</a> (viz krok 3 základního toku událostí).</li><li>Hodnota atributu <strong>Souhrnný itinerář trasy</strong> nalezené instance entity <a href="../../../datove-modely/datovy-78681044.html">Přihlášené zařízení na denním výkonu</a> (viz krok 3 základního toku událostí) není k dispozici.</li></ul><h3>Tok událostí</h3><ol><li>Alternativní tok událostí začíná krokem 3 základního toku událostí.</li><li>Systém založí záznam o přihlášeném zařízení na denním výkonu – spustí <a href="#" data-page-title="205UC03: Založit záznam o přihlášeném zařízení na denním výkonu"></a>, na vstup jsou předány následující informace:<br><ul><li><strong>Zakládaný záznam o přihlášeném zařízení na denním výkonu</strong>: hodnoty jednotlivých atributů entity <a href="../../../datove-modely/datovy-78681044.html">Přihlášené zařízení na denním výkonu</a> jsou předány následovně:<br><ul><li><strong>Denní výkon</strong>: právě zkoumaný <a href="../../../datove-modely/datovy-78681044.html">Denní výkon</a> (viz krok 2 základního toku událostí).</li><li><strong>Přihlášené zařízení</strong>: hodnota vstupního parametru <strong>Identifikátor objektu</strong>.</li><li><strong>Verze komunikačního protokolu</strong>: hodnota vstupního parametru <strong>Verze komunikačního protokolu</strong>.</li><li><strong>Verze trasy</strong>: není předána žádná hodnota (NULL). hodnota výstupního parametru <strong>Požadovaná verze trasy</strong> získaná v rámci <a href="602uc12-115999609.html">ALG01: Vyhodnotit obsah zprávy</a>.</li><li><strong>Trasa</strong>: není předána žádná hodnota (NULL). systém vygeneruje trasu pro odpovídající <a href="../../../datove-modely/datovy-78681044.html">Denní výkon</a> – spustí <a href="#" data-page-title="205UC01: Generovat trasu denního výkonu">205UC01: Generovat trasu denního výkonu</a>, na vstup jsou předány následující informace:<br><ul><li><strong>Verze</strong>: hodnota výstupního parametru <strong>Požadovaná verze trasy</strong> získaná v rámci <a href="602uc12-115999609.html">ALG01: Vyhodnotit obsah zprávy</a>.</li><li><strong>Denní výkon</strong>: právě zkoumaný <a href="../../../datove-modely/datovy-78681044.html">Denní výkon</a> (viz krok 2 základního toku událostí).<br></li></ul></li><li><strong>Verze souhrnného itineráře trasy</strong>: hodnota výstupního parametru <strong>Požadovaná verze trasy</strong> získaná v rámci <a href="602uc12-115999609.html">ALG01: Vyhodnotit obsah zprávy</a>.</li><li><strong>Souhrnný itinerář trasy</strong>: systém vygeneruje souhrnný itinerář trasy pro odpovídající <a href="../../../datove-modely/datovy-78681044.html">Denní výkon</a> – spustí <a href="#" data-page-title="205UC10: Generovat souhrnný itinerář trasy denního výkonu"></a>, na vstup jsou předány následující informace:<br><ul><li><strong>Verze</strong>: hodnota výstupního parametru <strong>Požadovaná verze trasy</strong> získaná v rámci <a href="602uc12-115999609.html">ALG01: Vyhodnotit obsah zprávy</a>.</li><li><strong>Denní výkon</strong>: právě zkoumaný <a href="../../../datove-modely/datovy-78681044.html">Denní výkon</a> (viz krok 2 základního toku událostí).</li></ul></li><li><strong>Datum poslední změny trasy</strong>: datum poslední změny právě zkoumaného <a href="../../../datove-modely/datovy-78681044.html">Denního výkonu</a> (viz krok 2 základního toku událostí).</li></ul></li></ul></li><li>Návrat na krok 3 základního toku událostí (požadovaná instance entity <a href="../../../datove-modely/datovy-78681044.html">Přihlášené zařízení na denním výkonu</a> již bude k dispozici).</li></ol><p>Poznámka: Nakonec nedochází k současnému generování trasy a souhrnného itineráře. Při založení nové instance entity <a href="../../../datove-modely/datovy-78681044.html">Přihlášené zařízení na denním výkonu</a> je připravena pouze odpovídající část řešená v rámci tohoto UC.</p><h3>Výstupní podmínky</h3><ul><li>Systém vytvořil odpovídající instanci entity <a href="../../../datove-modely/datovy-78681044.html">Přihlášené zařízení na denním výkonu</a>.</li></ul><h2>AF03: Na trasu je již přihlášeno jiné zařízení</h2><p>Cílem alternativního toku událostí je odeslání chybového hlášení na FOB v případě, kdy jsou vyžadovány informace o trase, ne kterou je již přihlášeno jiné zařízení.</p><h3>Vstupní podmínky</h3><ul><li>Existuje alespoň jedna instance entity <a href="../../../datove-modely/datovy-78681044.html">Přihlášené zařízení na denním výkonu</a>, která splňuje všechny dále uvedené podmínky zároveň:<ul><li>Hodnota atributu <strong>Denní výkon</strong> odpovídá právě zkoumanému <a href="../../../datove-modely/datovy-78681044.html">Dennímu výkonu</a> (viz krok 2 základního toku událostí).</li><li>Hodnota atributu <strong>Přihlášené zařízení</strong> je různá od hodnoty vstupního parametru <strong>Identifikátor objektu</strong>.</li></ul></li></ul><div><h3>Tok událostí</h3><ol><li>Alternativní tok událostí začíná krokem 3 základního toku událostí.</li><li>Systém odešle informaci, že je na trasu již přihlášeno jiné zařízení – spustí <a href="#" data-page-title="602UC05: Odeslat informaci o chybě na FOB"></a>, na vstup jsou předány následující informace:<br><ul><li><strong>Identifikátor objektu</strong>: hodnota vstupního parametru <strong>Identifikátor objektu</strong>.</li><li><strong>Identifikátor odpovědní zprávy</strong>: hodnota vstupního parametru <strong>Identifikátor zprávy</strong>.</li><li><strong>Verze komunikačního protokolu</strong>: hodnota vstupního parametru <strong>Verze komunikačního protokolu</strong>.</li><li><strong>Chybové hlášení</strong>: MSG_ERR_ROUTE_IS_USED (viz <a href="#" data-page-title="Systémové hlášky">Systémové hlášky</a>).</li></ul></li><li>Případ užití končí.</li></ol><p>Poznámka: U odesílané zprávy je potvrzováno přijetí adresátem. To není <strong>zatím</strong> žádným způsobem vyhodnocováno.</p><h3>Výstupní podmínky</h3><ul><li>Systém přijal požadavek na získání konkrétních částí souhrnného itineráře trasy, na který odpověděl.</li></ul><h2>AF04: Aktualizovat soubor se souhrnným itinerářem trasy</h2><p>Cílem alternativního toku událostí je aktualizace souboru se souhrnným itinerářem trasy v případě, kdy nedošlo k jeho aktualizaci po změně odpovídajícího <a href="../../../datove-modely/datovy-78681044.html">Denního výkonu</a>. Zachycena je i situace, kdy FOB požaduje jinou verzi souboru se souhrnným itinerářem trasy, než je aktuálně připravena.</p><h3>Vstupní podmínky</h3><p>Pro spuštění alternativního toku událostí je dostačující splnění alespoň jedné z uvedených podmínek:</p><ul><li>Hodnota atributu <strong>Datum poslední změny trasy</strong> právě zkoumané instanci entity <a href="../../../datove-modely/datovy-78681044.html">Přihlášené zařízení na denním výkonu</a> (viz krok 3 základního toku událostí) je různá od <strong>data poslední změny</strong> právě zkoumaného <a href="../../../datove-modely/datovy-78681044.html">Denního výkonu</a> (viz krok 2 základního toku událostí).</li><li>Hodnota atributu <strong>Verze souhrnného itineráře trasy</strong> právě zkoumané instance entity <a href="../../../datove-modely/datovy-78681044.html">Přihlášené zařízení na denním výkonu</a> (viz krok 3 základního toku událostí) je různá od hodnoty výstupního parametru <strong>Požadovaná verze trasy</strong> v rámci <a href="602uc12-115999609.html">ALG01: Vyhodnotit obsah zprávy</a>.</li></ul><h3>Tok událostí</h3><ol><li>Alternativní tok událostí začíná krokem 4 základního toku událostí.</li><li>Systém edituje záznam o přihlášeném zařízení na denním výkonu – spustí <a href="#" data-page-title="205UC04: Upravit záznam o přihlášeném zařízení na denním výkonu"></a>, na vstup jsou předány následující informace:<br><ul><li><strong>Editovaný záznam o přihlášeném zařízení na denním výkonu</strong>: právě zkoumaná instance entity <a href="../../../datove-modely/datovy-78681044.html">Přihlášené zařízení na denním výkonu</a> (viz krok 3 základního toku událostí).</li><li><strong>Změny v záznamu o přihlášeném zařízení na denním výkonu</strong>: hodnoty jednotlivých atributů entity <a href="../../../datove-modely/datovy-78681044.html">Přihlášené zařízení na denním výkonu</a> jsou změněny následovně (hodnota v rámci neuvedených atributů je zachována):<br><ul><li><strong>Verze trasy</strong>: hodnota výstupního parametru <strong>Požadovaná verze trasy</strong> získaná v rámci <a href="602uc12-115999609.html">ALG01: Vyhodnotit obsah zprávy</a>. <em>Zachována stávající hodnota.</em></li><li><strong>Trasa</strong>: pokud je pro právě zkoumané <a href="../../../datove-modely/datovy-78681044.html">Přihlášené zařízení na denním výkonu</a> (viz krok 3 základního toku událostí) k dispozici hodnota atributu <strong>Trasa</strong>: <br><ul><li>Systém vygeneruje trasu pro odpovídající <a href="../../../datove-modely/datovy-78681044.html">Denní výkon</a> – spustí <a href="#" data-page-title="205UC01: Generovat trasu denního výkonu">205UC01: Generovat trasu denního výkonu</a>, na vstup jsou předány následující informace:<br><ul><li><strong>Verze</strong>: hodnota atributu <strong>Verze trasy</strong> právě zkoumané instance entity <a href="../../../datove-modely/datovy-78681044.html">Přihlášené zařízení na denním výkonu</a> (viz krok 3 základního toku událostí).</li><li><strong>Verze</strong>: hodnota výstupního parametru <strong>Požadovaná verze trasy</strong> získaná v rámci <a href="602uc12-115999609.html">ALG01: Vyhodnotit obsah zprávy</a>.</li><li><strong>Denní výkon</strong>: právě zkoumaný <a href="../../../datove-modely/datovy-78681044.html">Denní výkon</a> (viz krok 2 základního toku událostí).</li></ul></li></ul></li><li><strong>Verze souhrnného itineráře trasy</strong>:</li><li><strong>Souhrnný itinerář trasy</strong>: systém vygeneruje souhrnný itinerář trasy pro odpovídající <a href="../../../datove-modely/datovy-78681044.html">Denní výkon</a> – spustí <a href="#" data-page-title="205UC10: Generovat souhrnný itinerář trasy denního výkonu"></a>, na vstup jsou předány následující informace:<br><ul><li><strong>Verze</strong>: hodnota výstupního parametru <strong>Požadovaná verze trasy</strong> získaná v rámci <a href="602uc12-115999609.html">ALG01: Vyhodnotit obsah zprávy</a>.</li><li><strong>Denní výkon</strong>: právě zkoumaný <a href="../../../datove-modely/datovy-78681044.html">Denní výkon</a> (viz krok 2 základního toku událostí).</li></ul></li><li><strong>Datum poslední změny trasy</strong>: datum poslední změny právě zkoumaného <a href="../../../datove-modely/datovy-78681044.html">Denní výkon</a> (viz krok 2 základního toku událostí).</li></ul></li></ul></li><li>Návrat na krok 4 základního toku událostí (trasa by již měla být aktuální).</li></ol><p>Poznámka: Soubor s informacemi o trase je aktualizován pouze v případě, že již existuje. Pokud k dispozici není, není generován ani po modifikaci odpovídajícího denního výkonu.</p><h3>Výstupní podmínky</h3><ul><li>Systém aktualizoval trasu a souhrnný itinerář trasy odpovídajícího <a href="../../../datove-modely/datovy-78681044.html">Denního výkonu</a>.</li></ul><h2>AF05: Není dostupná žádná část souhrnného itineráře trasy</h2><p>Cílem alternativního toku událostí je odeslání chybového hlášení na FOB v případě, kdy není k dispozici ani jedna z požadovaných částí souhrnného itineráře trasy.</p><p>Poznámka: Pokud je k dispozici alespoň jedna z požadovaných částí souhrnného itineráře trasy, má FOB k dispozici i celkový počet těchto částí, který je předáván v rámci odpovědi. V takovém případě chybové hlášení odesíláno není.</p><h3>Vstupní podmínky</h3><ul><li>Nebyla k dispozici ani jedna z požadovaných částí souhrnného itineráře trasy (požadovaný interval byl „mimo rozsah“).</li></ul><h3>Tok událostí</h3><ol><li>Alternativní tok událostí začíná krokem 5 základního toku událostí.</li><li>Systém odešle informaci, že není k dispozici ani jedna z požadovaných částí trasy – spustí <a href="#" data-page-title="602UC05: Odeslat informaci o chybě na FOB"></a>, na vstup jsou předány následující informace:<br><ul><li><strong>Identifikátor objektu</strong>: hodnota vstupního parametru <strong>Identifikátor objektu</strong>.</li><li><strong>Identifikátor odpovědní zprávy</strong>: hodnota vstupního parametru <strong>Identifikátor zprávy</strong>.</li><li><strong>Verze komunikačního protokolu</strong>: hodnota vstupního parametru <strong>Verze komunikačního protokolu</strong>.</li><li><strong>Chybové hlášení</strong>: MSG_ERR_REQUIRED_ITINERARY_PARTS_OUT_OF_RANGE (viz <a href="#" data-page-title="Systémové hlášky">Systémové hlášky</a>).</li></ul></li><li>Případ užití končí.</li></ol><p>Poznámka: U odesílané zprávy je potvrzováno přijetí adresátem. To není <strong>zatím</strong> žádným způsobem vyhodnocováno.</p><h3>Výstupní podmínky</h3><ul><li>Systém přijal požadavek na získání konkrétních částí souhrnného itineráře trasy, na který odpověděl.</li></ul><h2>AF06: Verze trasy není podporována</h2><p>Cílem alternativního toku událostí je odeslání chybového hlášení na FOB v případě, kdy není podporována požadovaná verze souhrnného itineráře trasy.</p><h3>Vstupní podmínky</h3><ul><li>Při generování souhrnného itineráře trasy došlo k chybě – hodnota výstupního parametru <strong>Chybové hlášení</strong> v rámci <a href="#" data-page-title="205UC10: Generovat souhrnný itinerář trasy denního výkonu"></a> byla nastavena na hodnotu MSG_ERR_ROUTE_VERSION_NOT_SUPPORTED.</li></ul><h3>Tok událostí</h3><ol><li>Alternativní tok událostí začíná na jednom z dále uvedených míst:<br><ul><li>Krok 2 alternativního toku událostí <a href="602uc12-115999609.html">AF02: Zařízení není přihlášeno na trasu</a>.</li><li>Krok 2 alternativního toku událostí <a href="602uc12-115999609.html">AF04: Aktualizovat soubor s trasou</a>.</li></ul></li><li>Systém odešle informaci, že požadovaná verze souhrnného itineráře trasy není podporována – spustí <a href="#" data-page-title="602UC05: Odeslat informaci o chybě na FOB"></a>, na vstup jsou předány následující informace:<br><ul><li><strong>Identifikátor objektu</strong>: hodnota vstupního parametru <strong>Identifikátor objektu</strong>.</li><li><strong>Identifikátor odpovědní zprávy</strong>: hodnota vstupního parametru <strong>Identifikátor zprávy</strong>.</li><li><strong>Verze komunikačního protokolu</strong>: hodnota vstupního parametru <strong>Verze komunikačního protokolu</strong>.</li><li><strong>Chybové hlášení</strong>: výstupní parametr <strong>Chybové hlášení</strong> v rámci <a href="#" data-page-title="205UC10: Generovat souhrnný itinerář trasy denního výkonu"></a>.</li></ul></li><li>Případ užití končí.</li></ol><p>Poznámka: U odesílané zprávy je potvrzováno přijetí adresátem. To není <strong>zatím</strong> žádným způsobem vyhodnocováno.</p><h3>Výstupní podmínky</h3><ul><li>Systém přijal požadavek na získání konkrétních částí souhrnného itineráře trasy, na který odpověděl.</li></ul><h2>AF07: Požadovaný rozsah není v pořádku</h2><p>Cílem alternativního toku událostí je odeslání chybového hlášení na FOB v případě, kdy není zadán validní rozsah požadovaných částí souhrnného itineráře trasy.</p><h3>Vstupní podmínky</h3><ul><li>Hodnota výstupního parametru <strong>Pořadí první části</strong> (viz <a href="602uc12-115999609.html">ALG01: Vyhodnotit obsah zprávy</a>) je větší než hodnota výstupního parametru <strong>Pořadí poslední části</strong> (viz <a href="602uc12-115999609.html">ALG01: Vyhodnotit obsah zprávy</a>).</li></ul><h3>Tok událostí</h3><ol><li>Alternativní tok událostí začíná krokem 1 základního toku událostí.</li><li>Systém odešle informaci, že požadovaný rozsah není v pořádku – spustí <a href="#" data-page-title="602UC05: Odeslat informaci o chybě na FOB"></a>, na vstup jsou předány následující informace:<ul><li><strong>Identifikátor objektu</strong>: hodnota vstupního parametru <strong>Identifikátor objektu</strong>.</li><li><strong>Identifikátor odpovědní zprávy</strong>: hodnota vstupního parametru <strong>Identifikátor zprávy</strong>.</li><li><strong>Verze komunikačního protokolu</strong>: hodnota vstupního parametru <strong>Verze komunikačního protokolu</strong>.</li><li><strong>Chybové hlášení</strong>: MSG_ERR_REQUIRED_ITINERARY_PARTS_NOT_VALID (viz <a href="#" data-page-title="Systémové hlášky">Systémové hlášky</a>).</li></ul></li><li>Případ užití končí.</li></ol><p>Poznámka: U odesílané zprávy je potvrzováno přijetí adresátem. To není <strong>zatím</strong> žádným způsobem vyhodnocováno.</p><h3>Výstupní podmínky</h3><ul><li>Systém přijal požadavek na získání konkrétních částí souhrnného itineráře trasy, na který odpověděl.</li></ul></div><h1>Výjimkové toky událostí</h1><h2>EF01: Čtení obsahu zprávy skončilo chybou</h2><h3>Vstupní podmínky</h3><ul><li>Při čtení obsahu zprávy došlo k chybě.</li></ul><h3>Tok událostí</h3><ol><li>Výjimkový tok událostí začíná krokem 1 základního toku událostí.</li><li>Systém předá na výstupu UC chybové hlášení (MSG_ERR_FOB_PACKET_CONTENT_READ_NOT_SUCCESSFUL, viz <a href="../../../systemove-78681299.html">Systémové hlášky</a>).</li><li>Případ užití končí.</li></ol><h3>Výstupní podmínky</h3><ul><li>Systém nepřijal zprávu.</li></ul><h2>EF02: Verze obsahu zprávy není podporována</h2><h3>Vstupní podmínky</h3><ul><li>Na vstupu získaná verze obsahu zprávy (vstupní parametr <strong>Verze komunikačního protokolu</strong>) není podporována.</li></ul><h3>Tok událostí</h3><ol><li>Výjimkový tok událostí začíná krokem 1 základního toku událostí.</li><li>Systém předá na výstupu UC chybové hlášení s uvedenými parametry (viz <a href="../../../systemove-78681299.html">Systémové hlášky</a>):<br><ul><li><strong>Chybové hlášení</strong>: MSG_ERR_FOB_PACKET_VERSION_NOT_SUPPORTED.</li><li><strong>Verze</strong>: hodnota vstupního parametru <strong>Verze komunikačního protokolu</strong>.</li></ul></li><li>Případ užití končí.</li></ol><h3>Výstupní podmínky</h3><ul><li>Systém nepřijal zprávu.</li></ul><h1>Ukončení případu užití</h1><h2>Výstupní podmínky</h2><p>Systém přijal požadavek na získání konkrétních částí trasy, na který odpověděl.</p><h2>Výstupní data</h2><table><tbody><tr><th>Výstupní parametr</div></th><th>Datový typ</div></th><th colspan="1">Povinnost</div></th><th>Popis</div></th><th colspan="1">Poznámka</div></th></tr><tr><td colspan="1">Chybové hlášení</td><td colspan="1">–</td><td colspan="1">Ne</td><td colspan="1">V podstatě se jedná o kód chyby, kvůli které nemohl být dokončen UC.</td><td colspan="1"><p>Informace je předána pouze v případě, kdy nebyly splněny výstupní podmínky tohoto UC.</p></td></tr></tbody></table><h1>Algoritmy</h1><h2>ALG01: Vyhodnotit obsah zprávy</h2><p>Vzhledem k tomu, že v rámci algoritmu dochází ke čtení získané zprávy, jsou na jeho výstupu předány získané informace. Jejich výčet je uveden v tabulce.</p><table><tbody><tr><th>Výstupní parametr</div></div></th><th>Datový typ</div></div></th><th colspan="1">Povinnost</div></div></th><th>Popis</div></div></th><th colspan="1">Podporované verze</div></th><th colspan="1">Poznámka</div></div></th></tr><tr><td colspan="1">Identifikátor trasy</td><td colspan="1">Číslo</td><td colspan="1">Ano</td><td colspan="1">Identifikátor konkrétní trasy.</td><td colspan="1">Od <a href="602uc12-115999609.html">Verze 1.0</a>.</td><td colspan="1">–</td></tr><tr><td colspan="1">Pořadí první části</td><td colspan="1">Číslo</td><td colspan="1">Ano</td><td colspan="1">Pořadové číslo první z požadovaných částí.</td><td colspan="1">Od <a href="602uc12-115999609.html">Verze 1.0</a>.</td><td colspan="1">–</td></tr><tr><td colspan="1">Pořadí poslední části</td><td colspan="1">Číslo</td><td colspan="1">Ano</td><td colspan="1">Pořadové číslo poslední z požadovaných částí.</td><td colspan="1">Od <a href="602uc12-115999609.html">Verze 1.0</a>.</td><td colspan="1">–</td></tr><tr><td colspan="1">Požadovaná verze trasy</td><td colspan="1">Řetězec</td><td colspan="1">Ano</td><td colspan="1">Verze, ve které je požadováno zaslání části souhrnného itineráře trasy.</td><td colspan="1">Od <a href="602uc12-115999609.html">Verze 1.0</a>.</td><td colspan="1">–</td></tr></tbody></table><p>Pro zajištění zpětné kompatibility je při generování obsahu zprávy vyhodnocována jeho požadovaná verze (vstupní parametr <strong>Verze komunikačního protokolu</strong>).</p><table><tbody><tr><th>Verze komunikačního protokolu</div></th><th>Verze obsahu zprávy (algoritmus)</div></th></tr><tr><td>1.0</td><td><a href="602uc12-115999609.html">Verze 1.0</a></td></tr></tbody></table><p>Poznámka: Pokud není požadovaná verze podporována, je vyvolán odpovídající výjimkový tok (viz <a href="602uc12-115999609.html">EF02: Verze obsahu zprávy není podporována</a>).</p><h3>Verze 1.0</h3><p>Cílem algoritmu je vyhodnocení obsahu zprávy získané na vstupu UC. Jeho ukázka je pro úplnost naznačena dále (zobrazené hodnoty jsou pouze ilustrativní).</p>truehtml/xml1<p>Popis jednotlivých elementů je uveden v tabulce.</p><table><tbody><tr><th>Element/atribut</div></div></th><th colspan="1">Datový typ</div></div></th><th colspan="1">Povinnost</div></div></th><th>Popis</div></div></th><th colspan="1">Výstupní parametr</th><th colspan="1"> Hodnota</th><th>Poznámka</div></div></th></tr><tr><td colspan="1">itineraryPart</td><td colspan="1">–</td><td colspan="1">Ano</td><td colspan="1">Element s informacemi o požadovaných částech souhrnného itineráře trasy.</td><td colspan="1">–</td><td colspan="1">–</td><td colspan="1">Element je obsažen právě jednou.</td></tr><tr><td colspan="1">routeId</td><td colspan="1">Řetězec</td><td colspan="1">Ano</td><td colspan="1">Identifikátor trasy, pro kterou mají být být odeslány požadované části souhrnného itineráře trasy.</td><td colspan="1">Identifikátor trasy</td><td colspan="1">Je převzata obsažená hodnota (není třeba provádět žádné další akce).</td><td colspan="1">–</td></tr><tr><td colspan="1">partFrom</td><td colspan="1">Číslo</td><td colspan="1">Ano</td><td colspan="1">Pořadí první požadované části souhrnného itineráře trasy (začátek intervalu požadovaných částí souhrnného itineráře trasy včetně).</td><td colspan="1">Pořadí první části</td><td colspan="1">Je převzata obsažená hodnota (není třeba provádět žádné další akce).</td><td colspan="1">–</td></tr><tr><td colspan="1">partTo</td><td colspan="1">Číslo</td><td colspan="1">Ano</td><td colspan="1">Pořadí poslední požadované části souhrnného itineráře trasy (konec intervalu požadovaných částí souhrnného itineráře trasy včetně).</td><td colspan="1">Pořadí poslední části</td><td colspan="1">Je převzata obsažená hodnota (není třeba provádět žádné další akce).</td><td colspan="1">–</td></tr><tr><td colspan="1">fileV</td><td colspan="1">Řetězec</td><td colspan="1">Ano</td><td colspan="1">Verze, ve které je požadováno zaslání části souhrnného itineráře trasy.</td><td colspan="1">Požadovaná verze trasy</td><td colspan="1">Je převzata obsažená hodnota (není třeba provádět žádné další akce).</td><td colspan="1">–</td></tr></tbody></table><p>Pro úplnost je doplněn i náhled paketu, který je odesílán z FOB (zobrazené hodnoty jsou pouze ilustrativní).</p>html/xml1<h1>Validace</h1><p>–</p><h1>Uživatelské rozhraní</h1><p>–</p><h1>Grafický návrh</h1><p>–</p><h1>Revize</h1><h3>31. 10. 2023: Tomáš Nadrchal</h3><table><tbody><tr><th>Odkaz</div></div></div></th><th>Stručný popis změny/doplnění</div></div></div></th></tr><tr><td colspan="1"><a href="602uc12-115999609.html">AF02: Zařízení není přihlášeno na trasu</a></td><td colspan="1">Změny související s revizí verzování trasy a souhrnného itineráře. (naznačeno růžově).</td></tr><tr><td colspan="1"><a href="602uc12-115999609.html">AF04: Aktualizovat soubor s trasou</a></td><td colspan="1">Změny související s revizí verzování trasy a souhrnného itineráře. (naznačeno růžově).</td></tr></tbody></table>
</div>
</body>
</html>
