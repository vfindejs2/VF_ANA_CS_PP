<!DOCTYPE html>
<html lang="cs">
<head>
  <meta charset="utf-8">
  <title>602UC04: Přijmout potvrzení o přijetí zprávy z FOB</title>
</head>
<body>
<div class="wiki-content">
<p></p><h1>Stručný popis, cíl</h1><p>Cílem případu užití je získání zprávy z rozhraní aplikace FOB, která obsahuje informaci potvrzující přijetí konkrétní zprávy.</p><p>Poznámka: Identifikace potvrzované zprávy může být předána přímo v „hlavičce“ zprávy (viz <a href="#" data-page-title="flw-commservice-hub">flw-commservice-hub</a>). Tento způsob však není ve FOB využíván, proto je <strong>zatím</strong> informace získávána z těla zprávy. </p><h1>Seznam aktérů</h1><table><tbody><tr><th>Aktér</th><th colspan="1">Poznámka</th></tr><tr><td colspan="1">FOB</td><td colspan="1">–</td></tr></tbody></table><p>Poznámka: Úplný přehled aktérů je zobrazen samostatně, viz <a href="#" data-page-title="Přehled aktérů"></a>.</p><h1>Spuštění případů užití</h1><p>FOB potvrdí přijetí konkrétní zprávy, a to jedním z uvedených způsobů:</p><ul><li>FOB odešle informaci o přijetí notifikace o akci nad trasou (viz <a href="#" data-page-title="602UC11: Odeslat notifikaci o akci nad trasou na FOB">602UC11: Odeslat notifikaci o akci nad trasou na FOB</a>).</li><li>FOB odešle informaci o přijetí informace o chybě (viz <a href="#" data-page-title="602UC05: Odeslat informaci o chybě na FOB"></a>).</li></ul><h2>Vstupní podmínky</h2><p>–</p><h2>Vstupní data</h2><table><tbody><tr><th>Vstupní parametr</div></th><th>Datový typ</div></th><th colspan="1">Povinnost</div></th><th>Popis</div></th><th colspan="1">Poznámka</div></th></tr><tr><td colspan="1">Obsah zprávy</td><td colspan="1">Řetězec</td><td colspan="1">Ano</td><td colspan="1">Obsah, který byl v rámci zprávy přijat.</td><td colspan="1"><p>Musí být předáno ve formátu dle standardu XML.</p></td></tr><tr><td colspan="1">Verze komunikačního protokolu</td><td colspan="1">Řetězec</td><td colspan="1">Ano</td><td colspan="1">Verze, od které se odvíjí struktura obsahu zprávy.</td><td colspan="1">Jedná se o verzi použité XML obálky pro obsah zprávy (její struktury).</td></tr></tbody></table><h1>Základní tok událostí</h1><ol><li>Systém vyhodnotí na vstupu získaný obsah zprávy (vstupní parametr Obsah zprávy; viz <a href="602uc04-98242089.html">ALG01: Vyhodnotit obsah zprávy</a>).</li><li>Systém nastaví hodnotu výstupního parametru Identifikátor odpovědní zprávy: výstupní parametr Identifikátor odpovědní zprávy získaný v rámci <a href="602uc04-98242089.html">ALG01: Vyhodnotit obsah zprávy</a>.</li></ol><h1>Alternativní toky událostí</h1><p>–</p><h1>Výjimkové toky událostí</h1><h2>EF01: Čtení obsahu zprávy skončilo chybou</h2><h3>Vstupní podmínky</h3><ul><li>Při čtení obsahu zprávy došlo k chybě.</li></ul><h3>Tok událostí</h3><ol><li>Výjimkový tok událostí začíná krokem 1 základního toku událostí.</li><li>Systém předá na výstupu UC chybové hlášení (MSG_ERR_FOB_PACKET_CONTENT_READ_NOT_SUCCESSFUL, viz <a href="../../../systemove-78681299.html">Systémové hlášky</a>).</li><li>Případ užití končí.</li></ol><h3>Výstupní podmínky</h3><ul><li>Systém nepřijal zprávu.</li></ul><h2>EF02: Verze obsahu zprávy není podporována</h2><h3>Vstupní podmínky</h3><ul><li>Na vstupu získaná verze obsahu zprávy  (vstupní parametr Verze komunikačního protokolu) není podporována.</li></ul><h3>Tok událostí</h3><ol><li>Výjimkový tok událostí začíná krokem 1 základního toku událostí.</li><li>Systém předá na výstupu UC chybové hlášení s uvedenými parametry (viz <a href="../../../systemove-78681299.html">Systémové hlášky</a>):<br><ul><li>Chybové hlášení: MSG_ERR_FOB_PACKET_VERSION_NOT_SUPPORTED.</li><li>Verze: hodnota vstupního parametru Verze komunikačního protokolu.</li></ul></li><li>Případ užití končí.</li></ol><h3>Výstupní podmínky</h3><ul><li>Systém nepřijal zprávu.</li></ul><h1>Ukončení případu užití</h1><h2>Výstupní podmínky</h2><p>Systém přijal zprávu z FOB a porozuměl jejímu obsahu. </p><h2>Výstupní data</h2><table><tbody><tr><th>Výstupní parametr</div></th><th>Datový typ</div></th><th colspan="1">Povinnost</div></th><th>Popis</div></th><th colspan="1">Poznámka</div></th></tr><tr><td colspan="1">Identifikátor odpovědní zprávy</td><td colspan="1">Řetězec</td><td colspan="1">Ano</td><td colspan="1">Identifikátor zprávy, pro kterou bylo v rámci tohoto UC získáno potvrzení o přijetí („request“ zpráva).</td><td colspan="1">Slouží k jednoznačnému vyhodnocení, která zpráva je z FOB potvrzována.</td></tr><tr><td colspan="1">Chybové hlášení</td><td colspan="1">–</td><td colspan="1">Ne</td><td colspan="1">V podstatě se jedná o kód chyby, kvůli které nemohl být dokončen UC.</td><td colspan="1"><p>Informace je předána pouze v případě, kdy nebyly splněny výstupní podmínky tohoto UC.</p></td></tr></tbody></table><h1>Algoritmy</h1><h2>ALG01: Vyhodnotit obsah zprávy</h2><p>Vzhledem k tomu, že v rámci algoritmu dochází ke čtení získané zprávy, jsou na jeho výstupu předány získané informace. Jejich výčet je uveden v tabulce.</p><table><tbody><tr><th>Výstupní parametr</div></th><th>Datový typ</div></th><th colspan="1">Povinnost</div></th><th>Popis</div></th><th colspan="1">Podporované verze</th><th colspan="1">Poznámka</div></th></tr><tr><td colspan="1">Identifikátor odpovědní zprávy</td><td colspan="1">Řetězec</td><td colspan="1">Ano</td><td colspan="1">Identifikátor zprávy, pro kterou bylo odesláno potvrzení o přijetí.</td><td colspan="1">Od <a href="602uc04-98242089.html">Verze 1.0</a>.</td><td colspan="1">–</td></tr></tbody></table><p>Pro zajištění zpětné kompatibility je při generování obsahu zprávy vyhodnocována jeho požadovaná verze (vstupní parametr Verze komunikačního protokolu).</p><table><tbody><tr><th>Verze komunikačního protokolu</th><th>Verze obsahu zprávy (algoritmus)</th></tr><tr><td>1.0</td><td><a href="602uc04-98242089.html">Verze 1.0</a></td></tr></tbody></table><p>Poznámka: Pokud není požadovaná verze podporována, je vyvolán odpovídající výjimkový tok (viz <a href="602uc04-98242089.html">EF02: Verze obsahu zprávy není podporována</a>).</p><h3>Verze 1.0</h3><p>Cílem algoritmu je vyhodnocení obsahu zprávy získané na vstupu UC. Jeho ukázka je pro úplnost naznačena dále (zobrazené hodnoty jsou pouze ilustrativní).</p>truehtml/xml1<p>Popis jednotlivých elementů je uveden v tabulce.</p><table><tbody><tr><th>Element/atribut</div></div></th><th colspan="1">Datový typ</div></div></th><th colspan="1">Povinnost</div></div></th><th>Popis</div></div></th><th colspan="1">Výstupní parametr</th><th colspan="1"> Hodnota</th><th>Poznámka</div></div></th></tr><tr><td colspan="1">ack</td><td colspan="1">–</td><td colspan="1">Ano</td><td colspan="1">Element s informacemi o potvrzované zprávě.</td><td colspan="1">–</td><td colspan="1">–</td><td colspan="1">–</td></tr><tr><td colspan="1">packet_id</td><td colspan="1">Řetězec</td><td colspan="1">Ano</td><td colspan="1">Identifikátor zprávy, pro kterou bylo odesláno potvrzení o přijetí.</td><td colspan="1">Identifikátor odpovědní zprávy</td><td colspan="1">Je převzata obsažená hodnota (není třeba provádět žádné další akce).</td><td colspan="1">–</td></tr></tbody></table><p>Pro úplnost je doplněn i náhled paketu, který je odesílán z FOB (zobrazené hodnoty jsou pouze ilustrativní).</p>html/xml1<h1>Validace</h1><p>–</p><h1>Uživatelské rozhraní</h1><p>–</p><h1>Grafický návrh</h1><p>–</p><h1>Revize</h1><p>–</p>
</div>
</body>
</html>
