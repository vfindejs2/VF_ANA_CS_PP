<!DOCTYPE html>
<html lang="cs">
<head>
  <meta charset="utf-8">
  <title>707UC01: Exportovat do CSV</title>
</head>
<body>
<div class="wiki-content">
<p></p><h1>Stručný popis, cíl</h1><p>Cílem případu užití je export na vstupu získaných informací do souboru ve formátu CSV. </p><p>Poznámka: Na vstupu jsou tedy přímo získány záznamy, které chceme exportovat.</p><h1>Seznam aktérů</h1><table><tbody><tr><th>Aktér</th><th colspan="1">Poznámka</th></tr><tr><td colspan="1">Uživatel</td><td colspan="1">–</td></tr></tbody></table><p>Poznámka: Úplný přehled aktérů je zobrazen samostatně, viz <a href="#" data-page-title="Aktéři"></a>.</p><h1>Spuštění případů užití</h1><p>Uživatel zadá požadavek na export do CSV, a to jedním z uvedených způsobů:</p><ul><li>Uživatel zadá požadavek na export objednávek v přehledu objednávek (viz <a href="#" data-page-title="100UI02: Obrazovka přehledu objednávek"></a>).</li><li>Uživatel zadá požadavek na export objednaných služeb v detailu objednávky (viz <a href="#" data-page-title="100UI05: Objednané služby objednávky"></a>).</li><li>Uživatel zadá požadavek na export objednaných služeb v přehledu objednaných služeb (viz <a href="#" data-page-title="101UI01: Obrazovka přehledu objednaných služeb"></a>).</li></ul><h2>Vstupní podmínky</h2><p>–</p><h2>Vstupní data</h2><table><tbody><tr><th>Vstupní parametr</div></th><th>Datový typ</div></th><th colspan="1">Povinnost</div></th><th>Popis</div></th><th colspan="1">Poznámka</div></th></tr><tr><td colspan="1">Název souboru</td><td colspan="1">Řetězec</td><td colspan="1">Ano</td><td colspan="1">Text, který bude použit jako název výsledného souboru.</td><td colspan="1">–</td></tr><tr><td colspan="1">Řádky</td><td colspan="1">Pole (kolekce)</td><td colspan="1">Ano</td><td colspan="1"><p>Kolekce jednotlivých řádků, které mají být exportovány do CSV. Každý řádek je pak složen z dílčích položek, kdy každá položka představuje jeden „sloupec“ výsledného CSV souboru (všechny řádky by měly obsahovat stejný počet položek).</p></td><td colspan="1">Konkrétní způsob implementace je dán externím dodavatelem.</td></tr></tbody></table><h1>Základní tok událostí</h1><ol><li>Systém zahájí generování CSV souboru (viz <a href="https://confluence.radium.cz/display/mpgskdispecer/707UC01%3A+Exportovat+do+CSV#id-707UC01:ExportovatdoCSV-U%C5%BEivatelsk%C3%A9rozhran%C3%AD">Uživatelské rozhraní</a>):<br><ol><li>Systém vytvoří prázdný CSV soubor (kódování UTF-8), jeho název je následující: vstupní parametr <strong>Název souboru</strong>.</li><li>Pro všechny na vstupu získané řádky (vstupní parametr <strong>Řádky</strong>):<br><ol><li>Systém vloží řádek do tohoto souboru v předepsaném formátu (viz <a href="https://confluence.radium.cz/display/mpgskdispecer/707UC01%3A+Exportovat+do+CSV#id-707UC01:ExportovatdoCSV-ALG01:Form%C3%A1t%C5%99%C3%A1dkusouboru">ALG01: Formát řádku souboru</a>).</li><li>Systém vloží znak konce řádku (UTF-8: <strong>U+000D U+000A</strong>) do tohoto souboru (za poslední řádek již není znak vkládán). </li></ol></li></ol></li><li>Systém dokončí generování CSV souboru – předá ho na výstupu UC (výstupní parametr <strong>Soubor</strong>).</li></ol><h1>Alternativní toky událostí</h1><p>–</p><h1>Výjimkové toky událostí</h1><h2>EF01: Generování souboru skončilo chybou</h2><h3>Vstupní podmínky</h3><ul><li>Generování výsledného souboru skončilo chybou.</li></ul><h3>Tok událostí</h3><ol><li>Výjimkový tok událostí začíná krokem 1 základního toku událostí.</li><li>Systém předá na výstupu UC chybové hlášení (MSG_ERR_EXPORT_ENDED_WITH_ERROR, viz <a href="#" data-page-title="Systémové hlášky">Systémové hlášky</a>).</li><li>Případ užití končí.</li></ol><h3>Výstupní podmínky</h3><ul><li>Nebyl vygenerován CSV soubor.</li></ul><h1>Ukončení případu užití</h1><h2>Výstupní podmínky</h2><p>Byl vygenerován CSV soubor, ten byl předán na výstupu UC.</p><h2>Výstupní data</h2><table><tbody><tr><th>Výstupní parametr</div></th><th>Datový typ</div></th><th colspan="1">Povinnost</div></th><th>Popis</div></th><th colspan="1">Poznámka</div></th></tr><tr><td colspan="1">Soubor</td><td colspan="1">Soubor (CSV)</td><td colspan="1">Ano</td><td colspan="1">Výsledný soubor s požadovanými záznamy.</td><td colspan="1">–</td></tr><tr><td colspan="1">Chybové hlášení</td><td colspan="1">–</td><td colspan="1">Ne</td><td colspan="1">V podstatě se jedná o kód chyby, kvůli které nemohl být dokončen UC.</td><td colspan="1"><p>Informace je předána pouze v případě, kdy nebyly splněny výstupní podmínky tohoto UC.</p></td></tr></tbody></table><h1>Algoritmy</h1><h2>ALG01: Formát řádku souboru</h2><p>Jednotlivé řádky vkládané do výsledného CSV souboru (i soubor jako takový) musí splňovat určité podmínky (standard <a href="https://datatracker.ietf.org/doc/html/rfc4180">IETF RFC4180</a>). My si nyní popíšeme, v jakém formátu budou dílčí řádky vkládány (jedná se o stručný popis, závazná jsou kritéria daná v rámci standardu <a href="https://datatracker.ietf.org/doc/html/rfc4180">IETF RFC4180</a>).</p><p>Na vstupu UC máme k dispozici množinu řádků, které chceme exportovat (vstupní parametr <strong>Řádky</strong>). Každý řádek je pak složen z dílčích položek, které jsou postupně vkládány do vytvářeného souboru. Na úrovni těchto položek pak dodržujeme následující pravidla.</p><ul><li>Jednotlivé položky jsou odděleny pomocí znaku čárky (UTF-8: <strong>U+002C</strong>). Za poslední položkou řádku již tento oddělovač použit není.</li><li>Pokud položka přímo obsahuje „systémový“ znak (čárka, nový řádek, uvozovka), musí být být uzavřen v uvozovkách (UTF-8: <strong>U+0022</strong>).</li></ul><div><p>Poznámka: Jednotlivé řádky jsou odděleny pomocí znaku CRLF (UTF-8: <strong>U+000D U+000A</strong>).</p></div><h1>Validace</h1><p>–</p><h1>Uživatelské rozhraní</h1><p>Výsledný soubor je generována ve formátu CSV, tomu odpovídá i popis chování.</p><ul><li>Název výsledného souboru je získán na vstupu UC (vstupní parametr <strong>Název souboru</strong>).</li><li>Obsažené záznamy jsou získány na vstupu UC (vstupní parametr <strong>Řádky</strong>), jejich pořadí a struktura je pak zachována i ve výsledném souboru (viz <a href="https://confluence.radium.cz/display/mpgskdispecer/707UC01%3A+Exportovat+do+CSV#id-707UC01:ExportovatdoCSV-Z%C3%A1kladn%C3%ADtokud%C3%A1lost%C3%AD">Základní tok událostí</a>).</li><li>Struktura výsledného souboru vychází ze standardu <a href="https://datatracker.ietf.org/doc/html/rfc4180">IETF RFC4180</a>.</li></ul><h1>Grafický návrh</h1><p></p><h1>Revize</h1><p>–</p>
</div>
</body>
</html>
