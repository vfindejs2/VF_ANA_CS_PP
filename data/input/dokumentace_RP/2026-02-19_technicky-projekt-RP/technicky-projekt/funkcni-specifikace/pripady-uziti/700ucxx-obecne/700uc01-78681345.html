<!DOCTYPE html>
<html lang="cs">
<head>
  <meta charset="utf-8">
  <title>700UC01: Přihlásit uživatele</title>
</head>
<body>
<div class="wiki-content">
<p></p><h1>Stručný popis, cíl UC</h1><p>UC je vstupní branou k používání aplikace RoadPlan, během procesu přihlašování je ověřena identita Uživatele a jsou vyhodnocena jeho uživatelská oprávnění. </p><p><em>Poznámka: Tento případ užití odpovídá situaci, kdy Uživatel zadává své přístupové údaje do přihlašovacího formuláře. Pokud bude podporováno SSO přihlašování, bude popsáno dodatečně.</em></p><h1>Seznam aktérů</h1><table><tbody><tr><th>Aktér</th><th>Popis</th><th colspan="1">Typická role</th></tr><tr><td>Uživatel</td><td><p>Jedná se o uživatele aplikace RoadPlan.</p></td><td colspan="1"><p>Všechny role.</p></td></tr><tr><td colspan="1">Systém FleetwareWeb2</td><td colspan="1"><p>Externí aplikace FleetwareWeb2, která komunikuje s aplikací RoadPlan na systémové úrovni.</p><p>Jedná se o konkrétní instanci FleetwareWeb2, se kterou je RoadPlan integrován.</p></td><td colspan="1">-</td></tr></tbody></table><h1>Spuštění případu užití</h1><p>Uživatel do webového prohlížeče zadá URL adresu aplikace RoadPlan a vyšle požadavek na zobrazení webové stránky.</p><h1>Vstupní podmínky</h1><ul><li>Uživatel není přihlášený do aplikace RoadPlan ani do systému FleetwareWeb2 (viz <a href="700uc01-78681345.html">AF01: Uživatel je přihlášený do systému FleetwareWeb2</a>).</li><li>V URL adrese je předán UC (modul) aplikace, který má být spuštěný, a další parametry podporované v <a href="https://confluence.radium.cz/display/mpgskdispecer/URL+States">URL States</a>.</li></ul><h1>Základní tok událostí</h1><ol><li>Systém zobrazí přihlašovací obrazovku (viz <a href="#" data-page-title="700UI04: Přihlašovací obrazovka"></a>).</li><li>Uživatel vyplní své přihlašovací údaje a zadá požadavek k přihlášení (viz <a href="700uc01-78681345.html">AF02: Uživatel před přihlášením změní jazykovou mutaci aplikace RoadPlan</a>).</li><li>Systém provede kontrolu vyplnění vstupních dat (viz <a href="700uc01-78681345.html">Kontrola vstupních dat</a>).</li><li>Systém provede vyhodnocení platnosti přístupových údajů (viz <a href="700uc01-78681345.html">ALG01: Kontrola platnosti přístupových údajů</a>, <a href="700uc01-78681345.html">EF02: Neplatné přihlašovací údaje</a>).</li><li>Systém zobrazí příslušný UC aplikace RoadPlan, který je předaný v URL (viz <a href="700uc01-78681345.html">EF01: Uživateli chybí oprávnění na UC</a>, <a href="700uc01-78681345.html">EF03: Uživatel nemá oprávnění na modul RoadPlan</a>).</li><li>Systém průběžně aktualizuje nadpis karty prohlížeče tak, aby odpovídal právě spuštěnému UC (viz <a href="700uc01-78681345.html">ALG02: Získat nadpis karty prohlížeče</a>).</li></ol><p><em>Poznámka: V rámci kroku 1 dojde k předvyplnění přihlašovacích údajů, se kterými proběhlo poslední úspěšné přihlášení do dané instance aplikace RoadPlan. Dále dochází k zapamatování naposledy zvolené jazykové mutace aplikace. Tato funkčnost je v kompetenci webového prohlížeče.</em></p><h1>Alternativní toky událostí</h1><h3>AF01: Uživatel je přihlášený do systému FleetwareWeb2</h3><ol><li>Systém zobrazí příslušný UC aplikace RoadPlan, který je předaný v URL (viz <a href="700uc01-78681345.html">EF01: Uživateli chybí oprávnění na UC</a>). </li></ol><p><em>Poznámka: V tomto případě tedy nebude zobrazena Přihlašovací obrazovka.</em></p><h3>AF02: Uživatel před přihlášením změní jazykovou mutaci aplikace RoadPlan</h3><ol><li>Uživatel otevře nabídku pro výběr jazyka.</li><li>Systém zobrazí seznam podporovaných jazyků, aktuální jazyk je vybraný. </li><li>Uživatel změní výběr na jiný jazyk.</li><li>Systém zavře nabídku pro výběr jazyka a Přihlašovací obrazovku zobrazí v nově zvoleném jazyce. <br><ul><li>Jakékoli údaje vyplněné do vstupních polí přitom zůstávají zachovány.</li></ul></li><li>Pokračování krokem 2 základního toku.</li></ol><h1>Výjimkové toky událostí</h1><h3>EF01: Uživateli chybí oprávnění na UC</h3><ol><li>Systém zobrazí uživateli informaci o chybějícím oprávnění na příslušný UC (kód hlášky MSG_ERR_UNAUTHORIZED_ACCESS, viz <a href="#" data-page-title="Systémové hlášky">Systémové hlášky</a>).</li><li>Uživatel hlášku potvrdí.</li><li>Systém Uživatele přesměruje na výchozí stránku aplikace RoadPlan (<a href="#" data-page-title="703UC01: Zobrazit stránku O aplikaci">703UC01: Zobrazit stránku O aplikaci</a>).</li></ol><h3>EF02: Neplatné přihlašovací údaje</h3><ol><li>Systém zobrazí uživateli informaci o neplatných přihlašovacích údajích (kód hlášky MSG_BAD_AUTHENTICATION_DATA, viz <a href="#" data-page-title="Systémové hlášky">Systémové hlášky</a>).</li></ol><h3>EF03: Uživatel nemá oprávnění na modul RoadPlan</h3><ol><li>Systém zobrazí uživateli informaci o chybějícím oprávnění na příslušný UC (kód hlášky MSG_ERR_UNAUTHORIZED_ACCESS, viz <a href="#" data-page-title="Systémové hlášky">Systémové hlášky</a>).</li></ol><h3>EF04: Uživatelský účet byl zablokován</h3><ol><li>Systém zobrazí uživateli informaci o neplatných přihlašovacích údajích (kód hlášky MSG_USER_ACCOUNT_BLOCKED, viz <a href="#" data-page-title="Systémové hlášky">Systémové hlášky</a>).</li></ol><p>Poznámka: FLWW2 API pro zablokované účty vrací tyto chybové kódy: {MaxLoginAttemptsExceeded}.</p><h1>Výstupní podmínky</h1><ul><li>Uživatel je přihlášený do aplikace RoadPlan.</li><li>Uživatel může přistupovat k funkcím systému v rozsahu sady svých uživatelských oprávnění.</li></ul><h1>Validace</h1><h3>Kontrola vstupních dat</h3><ul><li>Pokud konfigurace příslušné instance aplikace RoadPlan vyžaduje zadání Firmy, pak musí být Firma vyplněna.</li><li>Uživatelské jméno musí být vyplněno.</li><li>Heslo musí být vyplněno.</li></ul><h1>Algoritmy</h1><h3>ALG01: Kontrola platnosti přístupových údajů</h3><p>Vyhodnocení platnosti přístupových údajů je v kompetenci aplikace FleetwareWebAPI. Viz <a href="#" data-page-title="Web API Autentikace">Web API Autentikace</a>.</p><h3>ALG02: Získat nadpis karty prohlížeče</h3><p>Nadpis zobrazený v kartě prohlížeče odpovídá právě spuštěnému případu užití. Způsob, jakým je samotná hodnota získána, je blíže popsán v tabulce.</p><p>Poznámka: Chování vychází z aplikace FLWW2.</p><table><tbody><tr><th>Případ užití</div></th><th>Popis</div></th><th>Formát</div></th><th>Poznámka</div></th></tr><tr><td>–</td><td>Situace, kdy není spuštěn žádný UC.</td><td>Fleetware RoadPlan</td><td>Jedná se např. o situace, ve kterých dochází k načítání konkrétního případu užití – ten ale zatím není spuštěn.</td></tr><tr><td></td><td>Situace, kdy je zobrazena přihlašovací obrazovka.</td><td>RoadPlan RP – Přihlášení</td><td>–</td></tr><tr><td>Ostatní</td><td>Ostatní situace, ve kterých je již spuštěn konkrétní UC.</td><td><p>RoadPlan RP – <Nadpis obrazovky></p><ul><li>Hodnota parametru <strong>Nadpis obrazovky</strong> je získána z hlavičky aplikace, konkrétně se pak jedná o <strong>Primární nadpis</strong> hlavičky aplikace (viz <a href="#" data-page-title="700UI03: Hlavička aplikace"></a>).</li></ul></td><td><p>Pro přehled nádob je tedy např. zobrazen následující nadpis karty prohlížeče:</p><ul><li>RP – Objednávky</li></ul></td></tr></tbody></table><h1>Uživatelské rozhraní</h1><p>Viz <a href="#" data-page-title="700UI04: Přihlašovací obrazovka"></a>.</p><h1>Revize</h1><h2>6. 6. 2022: Tomáš Nadrchal</h2><table><tbody><tr><th>Odkaz</div></th><th>Stručný popis změny</div></th></tr><tr><td colspan="1"><a href="700uc01-78681345.html">ALG02: Získat nadpis karty prohlížeče</a></td><td colspan="1">Revize chování pro nastavení nadpisu karty v prohlížeči (naznačeno modře).</td></tr></tbody></table><h2>24. 2. 2022: Tomáš Nadrchal</h2><table><tbody><tr><th>Odkaz</div></th><th>Stručný popis změny</div></th></tr><tr><td colspan="1"><a href="700uc01-78681345.html">Základní tok událostí</a></td><td colspan="1">Doplněno chování pro nastavení nadpisu karty v prohlížeči (naznačeno modře).</td></tr><tr><td colspan="1"><a href="700uc01-78681345.html">ALG02: Získat nadpis karty prohlížeče</a></td><td colspan="1">Doplněno chování pro nastavení nadpisu karty v prohlížeči (naznačeno modře).</td></tr></tbody></table><h3>20. 01. 2020: Miroslav Slivoně</h3><table><tbody><tr><th>Odkaz</div></div></div></th><th>Stručný popis změny/doplnění</div></div></div></th></tr><tr><td colspan="1"><a href="700uc01-78681345.html">EF04: Uživatelský účet byl zablokován</a></td><td colspan="1"><p>Doplněn EF04 - zablokovaný účet</p></td></tr></tbody></table><h3>17. 7. 2019: Miroslav Slivoně</h3><table><tbody><tr><th>Odkaz</div></div></div></th><th>Stručný popis změny/doplnění</div></div></div></th></tr><tr><td colspan="1"> <a href="700uc01-78681345.html">EF03: Uživatel nemá oprávnění na modul RoadPlan</a> </td><td colspan="1"><p>Doplněn EF03 - chybějící oprávnění na modul RoadPlan.</p><p>Pozor - došlo k úpravě hlášky MSG_ERR_UNAUTHORIZED_ACCESS.</p></td></tr></tbody></table>
</div>
</body>
</html>
