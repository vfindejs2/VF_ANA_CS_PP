<!DOCTYPE html>
<html lang="cs">
<head>
  <meta charset="utf-8">
  <title>702UC09: Upravit aktivity dle pravidla opakování</title>
</head>
<body>
<div class="wiki-content">
<p></p><h1>Stručný popis, cíl</h1><p>Cílem případu užití je editace pravidla opakování, podle kterého následně vzniknou nové aktivity. Specifikovat je možné nejen zmíněné pravidlo opakování, ale také některé další parametry odvozené třídy. Následně dochází k provedení těchto akcí…</p><ul><li>Odebrání aktivit, které nejsou dále požadovány (dochází k jejich nahrazení aktivitami z dalšího kroku).</li><li>Založení aktivit dle nově nastaveného pravidla opakování (včetně dalších úprav na úrovni odvozené třídy).</li></ul><h1>Seznam aktérů</h1><table><tbody><tr><th>Aktér</th><th colspan="1">Poznámka</th></tr><tr><td colspan="1">Uživatel</td><td colspan="1">–</td></tr></tbody></table><p>Poznámka: Úplný přehled aktérů je zobrazen samostatně, viz <a href="../../../../high-level-concept/akteri-78680673.html">Aktéři</a>.</p><h1>Spuštění případu užití</h1><p>Uživatel zadá požadavek na editaci pravidla opakování aktivity, a to jedním z uvedených způsobů:</p><ul><li>Uživatel zadá požadavek na editaci pravidla opakování aktivity v rámci dispečerské plachty (viz <a href="#" data-page-title="702UC03: Zobrazit dispečerskou plachtu"></a>).</li><li>Uživatel zadá požadavek na editaci pravidla opakování aktivity v rámci detailu položky kalendáře (viz <a href="#" data-page-title="702UC08: Zobrazit detail položky horizontálního kalendáře"></a>).</li></ul><h2>Vstupní podmínky</h2><p>Ke spuštění případu užití jsou nutná následující oprávnění na případy užití (viz <a href="../../../../uzivatelska-78681297.html">Uživatelská oprávnění a role</a>):</p><ul><li>Správa dispečerské plachty.</li></ul><p>Ke spuštění případu užití jsou dále nutná následující oprávnění:</p><ul><li>zastavení generování aktivit dle pravidla opakování (viz <a href="#" data-page-title="702UC07: Zastavit generování aktivit dle pravidla opakování">702UC07: Zastavit generování aktivit dle pravidla opakování</a>),</li><li>generování nových aktivit dle pravidla opakování (viz <a href="#" data-page-title="702UC06: Generovat aktivity dle pravidla opakování">702UC06: Generovat aktivity dle pravidla opakování</a>),</li><li>odebrání existujících zakázek (viz <a href="#" data-page-title="501UC06: Odebrat zakázku">501UC06: Odebrat zakázku</a>).</li></ul><p>Na vstupu získané <a href="../../../../datove-modely/datovy-78681044.html">Pravidlo opakování aktivity</a> (vstupní parametr <strong>Editované pravidlo opakování aktivity</strong>) splňuje všechny dále uvedené podmínky zároveň:</p><ul><li>Hodnota atributu <strong>Externí identifikátor</strong> není k dispozici (je nastavena na NULL). <strong><em>Taková pravidla opakování aktuálně nevznikají.</em></strong><br><ul><li><em>Akce je dostupná pouze v případě, kdy <a href="../../../../datove-modely/datovy-78681044.html">Pravidlo opakování aktivity</a> vzniklo na straně aplikace RoadPlan (aktuálně pak záznamy tohoto typu jinde nevznikají).</em></li></ul></li></ul><p><em>Interní poznámka: Aktuálně pracujeme pouze s <a href="../../../../datove-modely/datovy-78681044.html">Aktivitami</a> typu <strong>Zakázka</strong>. Systém tedy zatím nepočítá s možností upravit pravidlo opakování <em><a href="../../../../datove-modely/datovy-78681044.html">Aktivity</a> jiného typu</em>.</em></p><h2>Vstupní data</h2><table><tbody><tr><th>Vstupní parametr</div></th><th>Datový typ</div></th><th colspan="1">Povinnost</div></th><th>Popis</div></th><th colspan="1">Poznámka</div></th></tr><tr><td colspan="1">Editované pravidlo opakování aktivity</td><td colspan="1"><a href="../../../../datove-modely/datovy-78681044.html">Pravidlo opakování aktivity</a></td><td colspan="1">Ano</td><td colspan="1">Pravidlo opakování aktivity, které má být editováno.</td><td colspan="1">Na vstupu je získána instance této entity, případně její identifikace.</td></tr><tr><td colspan="1">Zakázka</td><td colspan="1"><a href="../../../../datove-modely/datovy-78681044.html">Zakázka</a></td><td colspan="1">Ano</td><td colspan="1">Informace o zakázce, které byly nastaveny v rámci formuláře.</td><td colspan="1">Na vstupu jsou získány hodnoty atributů této entity (včetně hodnot atributů odkazované <a href="../../../../datove-modely/datovy-78681044.html">Aktivity</a>).</td></tr><tr><td>Pravidlo opakování</td><td>Řetězec</td><td>Ano</td><td>Specifikace pravidla opakování, která byla nastavena v rámci formuláře.</td><td>–</td></tr></tbody></table><p><em>Interní poznámka: Aktuálně pracujeme pouze s <a href="../../../../datove-modely/datovy-78681044.html">Aktivitami</a> typu <strong>Zakázka</strong>. Systém tedy zatím nepočítá s možností upravit pravidlo opakování <em><a href="../../../../datove-modely/datovy-78681044.html">Aktivity</a> jiného typu</em>.</em></p><h1>Základní tok událostí</h1><ol><li>Pokud na vstupu získané <a href="../../../../datove-modely/datovy-78681044.html">Pravidla opakování aktivity</a> (vstupní parametr <strong>Editované pravidlo opakování aktivity</strong>) splňuje vstupní podmínky v rámci <a href="#" data-page-title="702UC07: Zastavit generování aktivit dle pravidla opakování">702UC07: Zastavit generování aktivit dle pravidla opakování</a>:<br><ol><li>Systém zastaví další generování <a href="../../../../datove-modely/datovy-78681044.html">Aktivit</a> dle tohoto pravidla opakování – spustí <a href="#" data-page-title="702UC07: Zastavit generování aktivit dle pravidla opakování">702UC07: Zastavit generování aktivit dle pravidla opakování</a>, na vstup jsou předány následující informace:<br><ul><li><strong>Pravidlo opakování aktivity</strong>: na vstupu získané <a href="../../../../datove-modely/datovy-78681044.html">Pravidlo opakování aktivity</a> (vstupní parametr <strong>Editované pravidlo opakování aktivity</strong>).</li><li><strong>Odebrat související aktivity</strong>: předána hodnota <strong>FALSE</strong> (odebírání <a href="../../../../datove-modely/datovy-78681044.html">Aktivit</a> probíhá až v rámci tohoto UC).<br></li></ul></li></ol></li><li>Systém označí na vstupu získané <a href="../../../../datove-modely/datovy-78681044.html">Pravidlo opakování aktivity</a> jako editované – spustí <a href="#" data-page-title="501UC08: Upravit pravidlo opakování aktivity">501UC08: Upravit pravidlo opakování aktivity</a>, na vstup jsou předány následující informace:<ul><li><strong>Editované pravidlo opakování aktivity</strong>: na vstupu získané <a href="../../../../datove-modely/datovy-78681044.html">Pravidlo opakování aktivity</a> (vstupní parametr <strong>Editované pravidlo opakování aktivity</strong>).</li><li><strong>Změny v pravidle opakování aktivity</strong>: oproti editovanému <a href="../../../../datove-modely/datovy-78681044.html">Pravidlu opakování aktivity</a> dochází ke změně hodnoty v dále uvedených atributech:<ul><li><strong>Provedena editace pravidla opakování</strong>: předána hodnota <strong>TRUE</strong>.<br></li></ul></li></ul></li><li>Systém dle na vstupu získaných informací založí nové <a href="../../../../datove-modely/datovy-78681044.html">Pravidla opakování aktivity</a> a provede generování <a href="../../../../datove-modely/datovy-78681044.html">Aktivit</a> – spustí <a href="#" data-page-title="702UC06: Generovat aktivity dle pravidla opakování">702UC06: Generovat aktivity dle pravidla opakování</a>, na vstup jsou předány následující informace:<br><ul><li><strong>Zakázka</strong>: informace o <a href="../../../../datove-modely/datovy-78681044.html">Zakázce</a> získané na vstupu (vstupní parametr <strong>Zakázka</strong>).</li><li><strong>Pravidlo opakování</strong>: na vstupu získané pravidlo opakování (vstupní parametr <strong>Pravidlo opakování</strong>).</li></ul></li><li>Systém zpracuje takové původní <a href="../../../../datove-modely/datovy-78681044.html">Aktivity</a>, které nejsou dále požadovány…<br><ol><li>Systém získá první z nově vytvořených <a href="../../../../datove-modely/datovy-78681044.html">Aktivit</a> (vznikla dle nového <a href="../../../../datove-modely/datovy-78681044.html">Pravidla opakování aktivity</a>) – hledá takový záznam, který splňuje všechny dále uvedené podmínky zároveň:<br><ul><li>Hodnota atributu <strong>Je aktivní</strong> nabývá hodnoty <strong>TRUE</strong> (<em>v tomto stavu by měly být všechny <a href="../../../../datove-modely/datovy-78681044.html">Aktivity</a> daného pravidla opakování</em>).</li><li>Hodnota atributu <strong>Pravidlo opakování</strong> odpovídá založenému <a href="../../../../datove-modely/datovy-78681044.html">Pravidlu opakování aktivity</a> (viz krok <strong>3</strong>).<br></li><li>Hodnota atributu <strong>Začátek aktivity</strong> je nejmenší (<em>hledáme pouze první <a href="../../../../datove-modely/datovy-78681044.html">Aktivitu</a> daného pravidla opakování, tu nejstarší</em>)</li></ul></li><li>Systém získá všechny původní <a href="../../../../datove-modely/datovy-78681044.html">Aktivity</a> (vznikly dle původního <a href="../../../../datove-modely/datovy-78681044.html">Pravidla opakování aktivity</a>), které mají být odebrány – hledá takové záznamy, které splňují všechny dále uvedené podmínky zároveň:<br><ul><li>Hodnota atributu <strong>Je aktivní</strong> nabývá hodnoty <strong>TRUE</strong> (<em>již odebrané <a href="../../../../datove-modely/datovy-78681044.html">Aktivity</a> můžeme ignorovat</em>).</li><li>Hodnota atributu <strong>Pravidlo opakování</strong> odpovídá na vstupu získanému <a href="../../../../datove-modely/datovy-78681044.html">Pravidlu opakování aktivity</a> (vstupní parametr <strong>Editované pravidlo opakování aktivity</strong>).</li><li>Hodnota atributu <strong>Začátek aktivity</strong> je větší nebo rovna hodnotě atributu <strong>Začátek aktivity</strong> první nově vygenerované <a href="../../../../datove-modely/datovy-78681044.html">Aktivity</a> (viz krok <strong>4.a</strong>).<br><ul><li><em>Zachovány jsou tedy jak <a href="../../../../datove-modely/datovy-78681044.html">Aktivity</a> v minulosti, tak aktivity, které se vyskytují před první nově vygenerovanou <a href="../../../../datove-modely/datovy-78681044.html">Aktivitou</a>.</em></li><li><em>Je tedy zachována kontinuita mezi <a href="../../../../datove-modely/datovy-78681044.html">Aktivitami</a> původního a upraveného <a href="../../../../datove-modely/datovy-78681044.html">Pravidla opakování aktivity</a>.</em></li></ul></li></ul></li><li>Pro všechny získané <a href="../../../../datove-modely/datovy-78681044.html">Aktivity</a> (viz krok <strong>4.b</strong>):<br><ol><li>Systém odebere odpovídající <a href="../../../../datove-modely/datovy-78681044.html">Zakázku</a> – spustí <a href="#" data-page-title="501UC06: Odebrat zakázku">501UC06: Odebrat zakázku</a>, na vstup jsou předány následující informace:<br><ul><li><strong>Odebíraná zakázka</strong>: taková <a href="../../../../datove-modely/datovy-78681044.html">Zakázka</a>, která v rámci atributu <strong>Aktivita</strong> odkazuje na právě zkoumanou <a href="../../../../datove-modely/datovy-78681044.html">Aktivitu</a>.</li></ul></li></ol></li></ol></li></ol><h1>Alternativní toky událostí</h1><p>–</p><h1>Výjimkové toky událostí</h1><h2>EF01: Pravidlo opakování již bylo upraveno</h2><p>Výjimkový tok událostí zajišťuje nemožnost opakované editace jednoho <a href="../../../../datove-modely/datovy-78681044.html">Pravidla opakování aktivity</a>.</p><p>Poznámka: Důvodem je vznik navazujícího <a href="../../../../datove-modely/datovy-78681044.html">Pravidla opakování aktivity</a>, pro které vznikají další <a href="../../../../datove-modely/datovy-78681044.html">Aktivity</a>.</p><h3>Vstupní podmínky</h3><ul><li>Hodnota atributu <strong>Provedena editace pravidla opakování</strong> u na vstupu získaného <a href="../../../../datove-modely/datovy-78681044.html">Pravidla opakování aktivity</a> (vstupní parametr <strong>Editované pravidlo opakování aktivity</strong>) je nastavena na <strong>TRUE</strong>.</li></ul><h3>Tok událostí</h3><ol><li>Výjimkový tok událostí začíná krokem <strong>1</strong> základního toku událostí.</li><li>Systém předá na výstupu UC chybové hlášení (MSG_INFO_REPETITION_RULE_UPDATE_UNAVAILABLE, viz <a href="#" data-page-title="Systémové hlášky">Systémové hlášky</a>).</li><li>Případ užití končí.</li></ol><h3>Výstupní podmínky</h3><ul><li>Nedošlo k editaci získaného <a href="../../../../datove-modely/datovy-78681044.html">Pravidla opakování aktivity</a>. Uvedená skutečnost byla předána na výstupu UC.</li></ul><h1>Ukončení případu užití</h1><h2>Výstupní podmínky</h2><p>Došlo k zastavení původního <a href="../../../../datove-modely/datovy-78681044.html">Pravidlo opakování aktivity</a> a vytvoření nového.</p><ul><li>Současně byly vygenerovány <a href="../../../../datove-modely/datovy-78681044.html">Aktivity</a> dle nově vzniklého <a href="../../../../datove-modely/datovy-78681044.html">Pravidlo opakování aktivity</a>.</li><li>Dále byly odebrány takové <a href="../../../../datove-modely/datovy-78681044.html">Aktivity</a>, které byly v kolizi s těmi nově vzniklými.</li></ul><h2>Výstupní data</h2><table><tbody><tr><th>Výstupní parametr</div></div></th><th>Datový typ</div></div></th><th colspan="1">Povinnost</div></div></th><th>Popis</div></div></th><th colspan="1">Poznámka</div></div></th></tr><tr><td colspan="1">Chybové hlášení</td><td colspan="1">–</td><td colspan="1">Ne</td><td colspan="1">V podstatě se jedná o kód chyby, kvůli které nemohl být dokončen UC.</td><td colspan="1"><p>Informace je předána pouze v případě, kdy nebyly splněny výstupní podmínky tohoto UC.</p></td></tr></tbody></table><h1>Algoritmy</h1><p>–</p><h1>Validace</h1><p>–</p><h1>Uživatelské rozhraní</h1><p>–</p><h1>Grafický návrh</h1><p>–</p><h1>Revize</h1><p>–</p>
</div>
</body>
</html>
