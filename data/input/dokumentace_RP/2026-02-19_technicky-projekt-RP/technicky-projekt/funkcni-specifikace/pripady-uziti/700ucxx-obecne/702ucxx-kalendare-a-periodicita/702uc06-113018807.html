<!DOCTYPE html>
<html lang="cs">
<head>
  <meta charset="utf-8">
  <title>702UC06: Generovat aktivity dle pravidla opakování</title>
</head>
<body>
<div class="wiki-content">
<p></p><h1>Stručný popis, cíl</h1><p>Cílem případu užití je generování aktivit dle zadaného pravidla opakování. Pokud se jedná o neomezené pravidlo opakování, zajišťuje UC také dodatečné generování aktivit (vždy je zajištěn výhled na určité období).</p><h1>Seznam aktérů</h1><table><tbody><tr><th>Aktér</th><th colspan="1">Poznámka</th></tr><tr><td colspan="1">Čas</td><td colspan="1">Zajišťuje dodatečné generování aktivit pro neomezené pravidlo opakování.</td></tr><tr><td colspan="1">Uživatel</td><td colspan="1">Spouští generování aktivit (v případě neomezeného pravidla opakování jsou generovány zakázky pouze pro omezené období).</td></tr></tbody></table><p>Poznámka: Úplný přehled aktérů je zobrazen samostatně, viz <a href="../../../../high-level-concept/akteri-78680673.html">Aktéři</a>.</p><h1>Spuštění případu užití</h1><p>Nastane čas na dodatečné generování aktivit (pro neomezená pravidla opakování, kdy je držen výhled na období určité délky).</p><p>Uživatel zadá požadavek na generování aktivit dle pravidla opakování, a to jedním z uvedených způsobů:</p><ul><li>Uživatel zadá požadavek na založení zakázka dle pravidla opakování (viz <a href="#" data-page-title="702UC03: Zobrazit dispečerskou plachtu"></a>).</li><li>Uživatel zadá požadavek na změnu pravidla opakování aktivity (viz <a href="#" data-page-title="702UC09: Upravit aktivity dle pravidla opakování">702UC09: Upravit aktivity dle pravidla opakování</a>).</li></ul><h2>Vstupní podmínky</h2><p>Ke spuštění případu užití jsou nutná oprávnění na založení <a href="../../../../datove-modely/datovy-78681044.html">Zakázky</a> (viz <a href="#" data-page-title="501UC04: Založit zakázku"></a>).</p><p><em>Interní poznámka: Vstupní podmínky nepočítají s možností generování <a href="../../../../datove-modely/datovy-78681044.html">Aktivit</a> jiného typu (aktuálně pracujeme pouze s <a href="../../../../datove-modely/datovy-78681044.html">Aktivitami</a> typu Zakázka).</em></p><h2>Vstupní data</h2><table><tbody><tr><th>Vstupní parametr</div></th><th>Datový typ</div></th><th colspan="1">Povinnost</div></th><th>Popis</div></th><th colspan="1">Poznámka</div></th></tr><tr><td colspan="1">Zakázka</td><td colspan="1"><a href="../../../../datove-modely/datovy-78681044.html">Zakázka</a></td><td colspan="1">Ano</td><td colspan="1">Zakázka, která má být založena v rámci předaného pravidla opakování.</td><td colspan="1">Na vstupu jsou získány hodnoty <strong>nesystémových</strong> atributů této entity (včetně obsažené <a href="../../../../datove-modely/datovy-78681044.html">Aktivity</a>).</td></tr><tr><td colspan="1">Pravidlo opakování</td><td colspan="1">Řetězec</td><td colspan="1">Ano</td><td colspan="1">Specifikace pravidla opakování, podle kterého mají být generovány <a href="../../../../datove-modely/datovy-78681044.html">Aktivity</a>.</td><td colspan="1">–</td></tr></tbody></table><p><em>Interní poznámka: Vstupní data nepočítají s možností generování <a href="../../../../datove-modely/datovy-78681044.html">Aktivit</a> jiného typu (aktuálně pracujeme pouze s <a href="../../../../datove-modely/datovy-78681044.html">Aktivitami</a> typu <strong>Zakázka</strong>). Odpovídají pak situaci, kdy dochází k založení <a href="../../../../datove-modely/datovy-78681044.html">Zakázky</a> (tedy případy, kdy je <strong>Aktérem</strong> uživatel, nikoliv <strong>Čas</strong>).</em></p><h1>Základní tok událostí</h1><ol><li>Systém založí <a href="../../../../datove-modely/datovy-78681044.html">Pravidlo opakování aktivity</a> pro na vstupu získané pravidlo opakování (vstupní parametr <strong>Pravidlo opakování</strong>) – spustí <a href="#" data-page-title="501UC07: Založit pravidlo opakování aktivity"></a>, na vstup jsou předány následující informace:<br><ul><li><strong>Zakládané pravidlo opakování aktivity</strong>: jsou předány hodnoty nesystémových atributů entity <a href="../../../../datove-modely/datovy-78681044.html">Pravidlo opakování aktivity</a>…<br><ul><li><strong>Externí identifikátor</strong>: není předána žádná hodnota (<strong>NULL</strong>).</li><li><strong>Pravidlo opakování</strong>: na vstupu získané pravidlo opakování (vstupní parametr <strong>Pravidlo opakování</strong>).</li><li><strong>Specifikace zakázky</strong>: na vstupu získaná <a href="../../../../datove-modely/datovy-78681044.html">Zakázka</a> (vstupní parametr <strong>Zakázka</strong>).<br><ul><li><em>Interní poznámka: Získaná <a href="../../../../datove-modely/datovy-78681044.html">Zakázka</a> je převedena do textové podoby. To je v režii externího dodavatele.</em><br></li></ul></li><li><strong>Barva aktivity</strong>: hodnota atributu <strong>Barva aktivity</strong> entity <a href="../../../../datove-modely/datovy-78681044.html">Aktivita</a> – atribut <strong>Aktivita</strong> na vstupu získané <a href="../../../../datove-modely/datovy-78681044.html">Zakázky</a> (vstupní parametr <strong>Zakázka</strong>).<br><ul><li><em>Uvedené nastavení probíhá pouze při spuštění uživatelem (založení <a href="../../../../datove-modely/datovy-78681044.html">Zakázky</a> s pravidlem opakování).<br></em></li><li><em>V rámci získané <a href="../../../../datove-modely/datovy-78681044.html">Zakázky</a> jsou k dispozici informace zadané přímo uživatelem v odpovídajícím formuláři.</em></li><li><em>V případě dodatečného generování <a href="../../../../datove-modely/datovy-78681044.html">Zakázek</a> (aktérem je <strong>Čas</strong>) již <a href="../../../../datove-modely/datovy-78681044.html">Pravidlo opakování aktivity</a> existuje.</em></li></ul></li></ul></li></ul></li><li>Systém vyhodnotí založené <a href="../../../../datove-modely/datovy-78681044.html">Pravidlo opakování aktivity</a> (viz krok 1) – pro všechny termíny daného pravidla opakování (atribut <strong>Pravidlo opakování</strong>) provede následující akce:<br><ol><li>Systém odešle požadavek na založení nové instance entity <a href="../../../../datove-modely/datovy-78681044.html">Aktivita</a> (resp. odvozené třídy) – spustí <a href="../../501ucxx-sprava-dat-kalendare-a-periodicita/501uc04-113017545.html">501UC04: Založit zakázku</a>, na vstup jsou předány následující informace:<br><ul><li><strong>Zakládaná zakázka</strong>: získáno v rámci specifikace založeného <a href="../../../../datove-modely/datovy-78681044.html">Pravidla opakování aktivity</a> (atribut <strong>Specifikace zakázky</strong>). Některé z nesystémových atributů jsou pak určeny nad rámec této specifikace následovně…<br><ul><li><strong>Aktivita → Začátek aktivity</strong>: hodnota obsahuje dílčí složky, ty jsou nastaveny následovně…<br><ul><li><strong>Datum</strong>: právě zkoumaný termín v rámci specifikace <a href="../../../../datove-modely/datovy-78681044.html">Pravidla opakování aktivity</a> (atribut <strong>Pravidlo opakování</strong>).</li><li><strong>Čas</strong>: získán v rámci specifikace <a href="../../../../datove-modely/datovy-78681044.html">Pravidla opakování aktivity</a> (atribut <strong>Pravidlo opakování</strong>).</li></ul></li><li><strong>Aktivita → Konec aktivity</strong>: hodnota obsahuje dílčí složky, ty jsou nastaveny následovně…<br><ul><li><strong>Datum</strong>: právě zkoumaný termín v rámci specifikace <a href="../../../../datove-modely/datovy-78681044.html">Pravidla opakování aktivity</a> (atribut <strong>Pravidlo opakování</strong>).</li><li><strong>Čas</strong>: získán v rámci specifikace <a href="../../../../datove-modely/datovy-78681044.html">Pravidla opakování aktivity</a> (atribut <strong>Pravidlo opakování</strong>).<br></li></ul></li><li><strong>Aktivita → Pravidlo opakování</strong>: předáno založené <a href="../../../../datove-modely/datovy-78681044.html">Pravidlo opakování aktivity</a> (viz krok <strong>1</strong>).</li><li><strong>Aktivita → Barva aktivity</strong>: hodnota atributu <strong>Barva aktivity</strong> založeného <a href="../../../../datove-modely/datovy-78681044.html">Pravidla opakování aktivity</a> (viz krok <strong>1</strong>).<ul><li><em>Jedná se o barvu, která byla nastavena <em>při zakládání <a href="../../../../datove-modely/datovy-78681044.html">Zakázky</a> </em>(u konkrétních <a href="../../../../datove-modely/datovy-78681044.html">Zakázek</a> může být změněna).</em></li></ul></li></ul></li></ul></li></ol></li><li>Pokud se jedná o omezené pravidlo opakování (<strong>nebyl</strong> spuštěn <a href="702uc06-113018807.html">AF01: Neomezené pravidlo opakování</a>) – dojde k odebrání založeného <a href="../../../../datove-modely/datovy-78681044.html">Pravidla opakování aktivity</a> (viz krok <strong>1</strong>).<br><ol><li>Systém odešle požadavek na odebrání instance entity <a href="../../../../datove-modely/datovy-78681044.html">Pravidla opakování aktivity</a> – spustí <a href="#" data-page-title="501UC09: Odebrat pravidlo opakování aktivity">501UC09: Odebrat pravidlo opakování aktivity</a>, na vstup jsou předány následující informace:<br><ul><li><strong>Odebírané pravidlo opakování aktivity</strong>: založené <a href="../../../../datove-modely/datovy-78681044.html">Pravidlo opakování aktivity</a> (viz krok <strong>1</strong>).<br><ul><li><em>Taková <a href="../../../../datove-modely/datovy-78681044.html">Pravidla opakování aktivity</a>, pro která již byly vygenerovány všechny <a href="../../../../datove-modely/datovy-78681044.html">Aktivity</a>, jsou označena jako odebraná.</em></li></ul></li></ul></li></ol></li></ol><p>Poznámka: Pokud nastane při generování <a href="../../../../datove-modely/datovy-78681044.html">Aktivit</a> situace, kdy je jeden týden sdílen mezi dvěma roky, dostane tento týden pořadové číslo podle roku, ve kterém spočívá jeho větší část. První týden roku je pak ten, který obsahuje den 4. ledna, případně ten, který obsahuje první lednový čtvrtek (viz ISO-8601).</p><p><em>Interní poznámka: Aktuálně pracujeme pouze s <a href="../../../../datove-modely/datovy-78681044.html">Aktivitami</a> typu <strong>Zakázka</strong>, systém tedy zatím nepočítá s možností založit <em><a href="../../../../datove-modely/datovy-78681044.html">Aktivitu</a> jiného typu (viz volání <a href="#" data-page-title="501UC04: Založit zakázku"></a>)</em>.</em></p><h1>Alternativní toky událostí</h1><h2>AF01: Neomezené pravidlo opakování</h2><p>Cílem alternativního toku událostí je rozdělení neomezeného pravidla opakování na dílčí celky – pro ně jsou pak průběžně generovány odpovídající <a href="../../../../datove-modely/datovy-78681044.html">Aktivity</a>.</p><h3>Vstupní podmínky</h3><ul><li>Na vstupu získané pravidlo opakování (vstupní parametr <strong>Pravidlo opakování</strong>) obsahuje podmínku vykonání s neomezenou dobou trvání.</li></ul><h3>Tok událostí</h3><ol><li>Alternativní tok událostí začíná krokem 2 základního toku událostí.</li><li>Systém vygeneruje instance entity <a href="../../../../datove-modely/datovy-78681044.html">Aktivita</a> (resp. odvozené třídy) dle <a href="702uc06-113018807.html">Základního toku události</a> – pouze však pro období trvající <strong>3 měsíce</strong>.</li><li>Následně systém průběžně generuje další instance entity <a href="../../../../datove-modely/datovy-78681044.html">Aktivita</a> (resp. odvozené třídy) dle <a href="702uc06-113018807.html">Základního toku události</a> – pro každý další <strong>1 měsíc</strong> (udržován „výhled“ na další 3 měsíce).<ul><li><em>Poznámka: Průběžné generování probíhá po dobu, kdy je odpovídající <a href="../../../../datove-modely/datovy-78681044.html">Pravidlo opakování aktivity</a> aktivní (hodnota atributu <strong>Je aktivní</strong> je rovna <strong>TRUE</strong>).</em></li></ul></li></ol><h3>Výstupní podmínky</h3><p>Došlo k vygenerování <a href="../../../../datove-modely/datovy-78681044.html">Aktivit</a> pro výchozí období odpovídajícího pravidla opakování. Následně dochází k průběžnému generování <a href="../../../../datove-modely/datovy-78681044.html">Aktivit</a> pro následující období (je udržován „výhled“ na období dané délky).</p><h1>Výjimkové toky událostí</h1><p>–</p><h1>Ukončení případu užití</h1><h2>Výstupní podmínky</h2><p>Došlo k vygenerování <a href="../../../../datove-modely/datovy-78681044.html">Aktivit</a> pro na vstupu získané pravidlo opakování. V případě pravidla s neomezenou délkou trvání systém pokračuje v průběžném generování dalších <a href="../../../../datove-modely/datovy-78681044.html">Aktivit</a>.</p><h2>Výstupní data</h2><p>–</p><h1>Algoritmy</h1><p>–</p><h1>Validace</h1><p>–</p><h1>Uživatelské rozhraní</h1><p>–</p><h1>Grafický návrh</h1><p>–</p><h1>Revize</h1><h3>12. 8. 2024: Tomáš Nadrchal</h3><table><tbody><tr><th>Odkaz</div></div></div></th><th>Stručný popis změny/doplnění</div></div></div></th></tr><tr><td colspan="1"><a href="702uc06-113018807.html">Základní tok událostí</a></td><td colspan="1">Doplněno chování související s nastavením barvy (naznačeno modře).</td></tr></tbody></table>
</div>
</body>
</html>
