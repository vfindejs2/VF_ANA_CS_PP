<!DOCTYPE html>
<html lang="cs">
<head>
  <meta charset="utf-8">
  <title>500UC15: Založit bankovní spojení</title>
</head>
<body>
<div class="wiki-content">
<p></p><h1>Stručný popis, cíl UC</h1><p>Cílem UC je založení nového Bankovního spojení.</p><h1>Seznam aktérů</h1><table><tbody><tr><th>Aktér</th><th>Popis</th><th colspan="1">Typická role</th></tr><tr><td>Uživatel</td><td><p>Jedná se o uživatele aplikace RoadPlan, který musí mít oprávnění spouštět tento UC.</p></td><td colspan="1"><p> </p></td></tr></tbody></table><h1>Spuštění případu užití</h1><p>Uživatel zadá požadavek k založení nového Bankovního spojení jedním z těchto způsobů:</p><ul><li>Založení nového Bankovního spojení z formuláře Zákazníka při jeho založení (<a href="#" data-page-title="500UC01: Založit zákazníka"></a>),</li><li>Založení nového Bankovního spojení z formuláře Zákazníka při jeho editaci (<a href="#" data-page-title="500UC03: Upravit zákazníka">500UC03: Upravit zákazníka</a>),</li><li>Založení nového Bankovního spojení z formuláře Objednávky při jejím založení (<a href="#" data-page-title="100UC01: Založit objednávku"></a>),</li><li>Založení nového Bankovního spojení z formuláře Objednávky při jejím založení ze šablony (<a href="#" data-page-title="100UC02: Založit objednávku ze šablony"></a>),</li><li>Založení nového Bankovního spojení z formuláře Objednávky při jejím založení jako kopie Objednávky (<a href="#" data-page-title="100UC07: Vytvořit kopii objednávky"></a>),</li><li>Založení nového Bankovního spojení z formuláře Objednávky při její editaci (<a href="#" data-page-title="100UC03: Upravit objednávku">100UC03: Upravit objednávku</a>).</li></ul><h1>Vstupní podmínky</h1><p>Nejsou.</p><h1>Základní tok událostí</h1><ol><li>Systém zobrazí formulář Bankovního spojení a provede jeho výchozí nastavení dle <a href="#" data-page-title="500UI05: Formulář bankovního spojení"></a>.</li><li>Uživatel vyplní formulář. Očekávaný postup:<br><ol><li>Uživatel vyplní číslo IBAN a stiskne tlačítko pro převod na číslo účtu.</li><li>Systém vypočítá číslo účtu a vyplní odpovídající pole (vyplněním kódu banky dojde vyplnění polí Banka a SWIFT).</li><li>Uživatel vyplní zbývající pole: Poznámka.</li></ol></li><li>Uživatel stiskne tlačítko pro potvrzení vytvořeného Bankovního spojení.</li><li>Systém provede validaci vstupních údajů.</li><li>Systém uloží Bankovní spojení.</li><li>Systém se vrátí zpět do části aplikace, kde došlo k požadavku na založení Bankovního spojení.</li></ol><h1>Alternativní toky událostí</h1><h3>AF01: Údaje ve formuláři nejsou validní</h3><h4>Vstupní podmínky</h4><ul><li>Údaje ve formuláři nejsou validní – viz <a href="500uc15-82838082.html">Validace</a>.</li></ul><h4>Tok události</h4><ol><li>Alternativní tok událostí začíná krokem 4 základního toku událostí.</li><li>Systém zvýrazní ovládací prvky, které neobsahují validní hodnotu.</li><li>Systém zobrazí uživateli informaci, že některé ze zadaných údajů nejsou validní (TODO: kód hlášky, viz <a href="../../../systemove-78681299.html">Systémové hlášky</a>).<strong> Návrat na krok 2 základního toku událostí</strong>.</li></ol><h3>AF02: Uživatel zná pouze číslo účtu</h3><h4>Tok událostí</h4><ol><li>Alternativní tok událostí začíná krokem 2 základního toku událostí.</li><li>Uživatel vyplní číslo účtu a stiskne tlačítko pro převod na IBAN.</li><li>Systém vypočítá IBAN a vyplní odpovídající pole. <strong>Návrat na krok 2.c základního toku událostí.</strong></li></ol><h3>AF03: Převod z IBAN na číslo účtu se nepovedl</h3><h4>Vstupní podmínky</h4><ul><li>Převod na číslo účtu se nepovedl.</li></ul><h4>Tok událostí</h4><ol><li>Alternativní tok událostí začíná krokem 2.b základního toku událostí.</li><li>Systém zobrazí uživateli informaci.<br><ol><li>Pokud se nejedná o slovenský IBAN: Nejedná se o IBAN slovenské banky (TODO: kód hlášky, viz <a href="../../../systemove-78681299.html">Systémové hlášky</a>).</li><li>Pokud není IBAN validní: Zadaný IBAN není validní (TODO: kód hlášky, viz <a href="../../../systemove-78681299.html">Systémové hlášky</a>).</li></ol></li><li><strong>Návrat na krok 2 základního toku událostí</strong>.</li></ol><h3>AF04: Převod z čísla účtu na IBAN se nepovedl</h3><h4>Vstupní podmínky</h4><ul><li>Převod na IBAN se nepovedl.</li></ul><h4>Tok událostí</h4><ol><li>Alternativní tok událostí začíná krokem 2 alternativního toku událostí AF02.</li><li>Systém zobrazí uživateli informaci.<br><ol><li>Pokud kód banky nepatří slovenské bance: Nejedná se o slovenský kód banky (TODO: kód hlášky, viz <a href="../../../systemove-78681299.html">Systémové hlášky</a>).</li><li>Pokud není výsledný IBAN validní: Výsledný IBAN není validní (TODO: kód hlášky, viz <a href="../../../systemove-78681299.html">Systémové hlášky</a>).</li></ol></li><li><strong>Návrat na krok 2 základního toku událostí</strong>.</li></ol><h1>Výjimkové toky událostí</h1><h3>EF01: Storno</h3><h4>Tok událostí</h4><ol><li>Výjimkový tok událostí může začít kdykoliv.</li><li>KDYŽ uživatel stiskne tlačítko Storno.<br><ol><li>Systém se vrátí zpět do části aplikace, kde došlo k požadavku na založení Bankovního spojení. <strong>Konec toku událostí</strong>.</li></ol></li><li>KDYŽ uživatel opustí formulář pro založení Bankovního spojení.<br><ol><li><strong>Konec toku událostí</strong>.</li></ol></li></ol><h4>Výstupní podmínky</h4><ul><li>Nebylo vytvořeno Bankovní spojení.</li></ul><h1>Výstupní podmínky</h1><ul><li>Bylo vytvořeno Bankovní spojení.</li></ul><h1>Validace</h1><p>Validace je prováděna průběžně, pokud uživatel vstoupí do pole s možností zadání hodnoty, zadá hodnotu a pole opustí ve stavu, kdy hodnota není validní, je na to upozorněn. Ovládací prvek je graficky zvýrazněn a je doplněno chybové hlášení. Konkrétní validace jednotlivých polí jsou uvedeny v <a href="#" data-page-title="500UI05: Formulář bankovního spojení"></a>. Hlídána jsou jak konkrétní validační kritéria každé položky, tak i to, zda je položka povinná.</p><p>Jakmile uživatel stiskne tlačítko pro založení, je provedena validace všech polí. V případě, kdy je vyplněn jak IBAN, tak číslo učtu, jsou provedeny následující validace:</p><ul><li>Pokud se jedná o slovenský IBAN, musí být vyplněn i kód slovenské banky – a naopak.</li><li>Pokud se jedná o slovenský IBAN či o kód slovenské banky, musí si IBAN i číslo účtu odpovídat – postup:<ul><li>IBAN se převede na číslo účtu (viz <a href="500uc15-82838082.html">Převod z IBAN na ćíslo účtu</a>) a výsledné číslo účtu se porovná s tím ve formuláři.</li><li>Poznámka: Název banky a SWIFT se nepřebírá z polí formuláře, ale načte se v rámci této validace.</li></ul></li></ul><p>Pokud jsou všechny údaje v pořádku, je Bankovní spojení uloženo. Pokud ne, jsou chybně vyplněná pole zvýrazněna a doplněna o chybové hlášení. Uživateli je navíc zobrazeno chybové hlášení, že Bankovní spojení nemůže být uloženo.</p><h1>Algoritmy</h1><p>Struktura čísla IBAN pro Slovenskou republiku je následující: <strong>SKkk bbbb rrrr rruu uuuu uuuu</strong> (viz <a href="500uc15-82838082.html">Legenda</a>).</p><h4>Legenda</h4><table><tbody><tr><th>Znak</th><th>Popis</th></tr><tr><td><strong>k</strong></td><td><strong>Kontrolní číslice definované IBAN (v některých zemích obsahuje už národní číslo účtu kontrolní číslice používající stejný systém, v těchto zemích pak tyto kontrolní číslice vycházejí u všech platných IBAN stejně, např. všechna portugalská IBAN začínají PT50).</strong></td></tr><tr><td><strong>b</strong></td><td><strong>Kód banky.</strong></td></tr><tr><td>p</td><td>Kód pobočky.</td></tr><tr><td><strong>r</strong></td><td><strong>Předčíslí čísla účtu.</strong></td></tr><tr><td><strong>u</strong></td><td><strong>Číslo účtu.</strong></td></tr><tr><td>m</td><td>Identifikátor majitele účtu (např. rodné číslo).</td></tr><tr><td>c</td><td>Kontrolní číslice definované národní bankou.</td></tr><tr><td>n</td><td>Kód měny.</td></tr><tr><td>x</td><td>Rezerva, nepoužívá se.</td></tr></tbody></table><h4>Převodní tabulka</h4><table><tbody><tr><th>Znak</th><th>Číslo</th><th>Znak</th><th>Číslo</th><th>Znak</th><th>Číslo</th><th>Znak</th><th>Číslo</th><th>Znak</th><th>Číslo</th><th>Znak</th><th>Číslo</th><th colspan="1">Znak</th><th colspan="1">Číslo</th></tr><tr><td>a</td><td>10</td><td>e</td><td>14</td><td>i</td><td>18</td><td>m</td><td>22</td><td>q</td><td>26</td><td>u</td><td>30</td><td colspan="1">y</td><td colspan="1">34</td></tr><tr><td>b</td><td>11</td><td>f</td><td>15</td><td>j</td><td>19</td><td>n</td><td>23</td><td>r</td><td>27</td><td>v</td><td>31</td><td colspan="1">z</td><td colspan="1">35</td></tr><tr><td>c</td><td>12</td><td>g</td><td>16</td><td>k</td><td>20</td><td>o</td><td>24</td><td>s</td><td>28</td><td>w</td><td>32</td><td colspan="1"> </td><td colspan="1"> </td></tr><tr><td>d</td><td>13</td><td>h</td><td>17</td><td>l</td><td>21</td><td>p</td><td>25</td><td>t</td><td>29</td><td>x</td><td>33</td><td colspan="1"> </td><td colspan="1"> </td></tr></tbody></table><h4>Validace IBAN</h4><p>Dostupné pro všechna čísla IBAN.</p><table><tbody><tr><th>Krok</th><th>Hodnota před</th><th colspan="1">Hodnota po</th><th>Popis</th></tr><tr><td>1</td><td>SK70 7500 0000 0000 2581 8343</td><td colspan="1">75000000000025818343SK70</td><td>Přesun prvních 4 znaků na konec a odstranění mezer.</td></tr><tr><td>2</td><td>75000000000025818343SK70 </td><td colspan="1">75000000000025818343282070</td><td>Nahrazení všech písmen čísly – viz <a href="500uc15-82838082.html">Převodní tabulka</a>.</td></tr><tr><td>3</td><td>75000000000025818343282070 mod 97</td><td colspan="1"><strong>1</strong></td><td><p>Výpočet zbytku po celočíselném dělení číslem 97. Pro validní IBAN je výsledek 1.</p><p>Poznámka: Pozor na vhodné zvolení datového typu.</p></td></tr></tbody></table><h4>Převod z IBAN na číslo účtu</h4><p>Dostupné pouze pro slovenská čísla IBAN – je tedy nejprve provedena kontrola, zda je kód banky obsažen v číselníku slovenských bank.</p><table><tbody><tr><th>Krok</th><th>Hodnota před</th><th colspan="1">Hodnota po</th><th>Popis</th></tr><tr><td>1</td><td>SK70 7500 0000 0000 2581 8343</td><td colspan="1">–</td><td><p>Kontrola, zda se jedná o slovenský IBAN.</p></td></tr><tr><td colspan="1">2</td><td colspan="1">SK70 7500 0000 0000 2581 8343</td><td colspan="1">–</td><td colspan="1">Kontrola, zda je IBAN validní – viz <a href="500uc15-82838082.html">Validace IBAN</a>.</td></tr><tr><td colspan="1">3</td><td colspan="1">SK70 7500 0000 0000 2581 8343</td><td colspan="1">000000-25818343/7500</td><td colspan="1">Získání čísla účtu z IBAN dle schématu.</td></tr><tr><td colspan="1">4</td><td colspan="1"><strong>000000-25818343/7500</strong></td><td colspan="1">–</td><td colspan="1">Kontrola, zda se jedná o kód slovenské banky.</td></tr></tbody></table><h4>Převod z čísla účtu na IBAN</h4><p>Dostupné pouze pro slovenská čísla účtu – je tedy nejprve provedena kontrola, zda IBAN začíná znaky SK.</p><table><tbody><tr><th>Krok</th><th>Hodnota před</th><th colspan="1">Hodnota po</th><th>Popis</th></tr><tr><td colspan="1">1</td><td colspan="1">000000-25818343/7500</td><td colspan="1">–</td><td colspan="1">Kontrola, zda se jedná o kód slovenské banky.</td></tr><tr><td>2</td><td>000000-25818343/7500</td><td colspan="1">SKkk 7500 0000 0000 2581 8343</td><td><p>Vyplnění čísla IBAN dle schématu a čísla účtu.</p><p>Poznámka: V případě potřeby jsou „pomocné“ nuly vkládány před skupinu čísla účtu.</p></td></tr><tr><td colspan="1">3</td><td colspan="1">SKkk 7500 0000 0000 2581 8343</td><td colspan="1">75000000000025818343SKkk</td><td colspan="1">Výpočet kontrolní číslice: Přesun prvních 4 znaků na konec a odstranění mezer.</td></tr><tr><td colspan="1">4</td><td colspan="1">75000000000025818343SKkk</td><td colspan="1">75000000000025818343282000</td><td colspan="1">Výpočet kontrolní číslice: Nahrazení všech písmen čísly – viz <a href="500uc15-82838082.html">Převodní tabulka</a>, kromě kontrolních číslic, ty jsou nahrazeny nulou.</td></tr><tr><td colspan="1">5</td><td colspan="1">75000000000025818343282000 mod 97</td><td colspan="1">28</td><td colspan="1"><p>Výpočet kontrolní číslice: Výpočet zbytku po celočíselném dělení číslem 97.</p><p>Poznámka: Pozor na vhodné zvolení datového typu.</p></td></tr><tr><td colspan="1">6</td><td colspan="1">98 - 28</td><td colspan="1">70</td><td colspan="1">Výpočet kontrolní číslice: Získání kontrolní číslice – rozdíl 98 a zbytek po dělení.</td></tr><tr><td colspan="1">7</td><td colspan="1">SKkk 7500 0000 0000 2581 8343</td><td colspan="1">SK70 7500 0000 0000 2581 8343</td><td colspan="1">Dosazení kontrolní číslice do čísla IBAN.</td></tr><tr><td colspan="1">8</td><td colspan="1"><strong>SK70 7500 0000 0000 2581 8343</strong></td><td colspan="1">–</td><td colspan="1">Kontrola, zda je výsledný IBAN validní – viz <a href="500uc15-82838082.html">Validace IBAN</a>.</td></tr></tbody></table><p><br>Uživatelské rozhraní</p><p>Rozložení formuláře je uvedeno v samostatném dokumentu – viz <a href="#" data-page-title="500UI05: Formulář bankovního spojení"></a>.</p>
</div>
</body>
</html>
