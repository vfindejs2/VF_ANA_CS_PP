<!DOCTYPE html>
<html lang="cs">
<head>
  <meta charset="utf-8">
  <title>500UC03: Upravit zákazníka</title>
</head>
<body>
<div class="wiki-content">
<p></p><h1>Stručný popis, cíl UC</h1><p>Cílem UC je editace existujícího <a href="../../../datove-modely/datovy-78681044.html">Zákazníka</a>.</p><h1>Seznam aktérů</h1><table><tbody><tr><th>Aktér</th><th>Popis</th><th colspan="1">Typická role</th></tr><tr><td>Uživatel</td><td><p>Jedná se o uživatele aplikace RoadPlan, který musí mít oprávnění spouštět tento UC.</p></td><td colspan="1"><p> </p></td></tr></tbody></table><h1>Spuštění případu užití</h1><p>Uživatel zadá požadavek k editace vytvořeného Zákazníka jedním z těchto způsobů:</p><ul><li>Editace vytvořeného Zákazníka z formuláře Objednávky při jejím založení (<a href="../100ucxx-objednavky/100uc01-78681388.html">100UC01: Založit objednávku</a>).</li><li>Editace vytvořeného Zákazníka z formuláře Objednávky při její editaci (<a href="../100ucxx-objednavky/100uc03-79429791.html">100UC03: Upravit objednávku</a>).</li><li>Editace vytvořeného Zákazníka z přehledu Zákazníků (<a href="500uc05-82838061.html">500UC05: Zobrazit přehled zákazníků</a>).</li></ul><h1>Vstupní podmínky</h1><p>Je možné editovat pouze takového Zákazníka, který zatím není zanesen v systému WinyX.</p><p>Uživatel má následující <a href="../../../uzivatelska-78681297.html">oprávnění na typ entit</a>:</p><ul><li>Zákazníci - zobrazení a modifikace.</li></ul><h3>Vstupní data</h3><ul><li>Entita <a href="../../../datove-modely/datovy-78681044.html">Zákazník</a>.</li></ul><h1>Základní tok událostí</h1><ol><li>Systém zobrazí formulář <a href="../../../datove-modely/datovy-78681044.html">Zákazníka</a> a provede jeho nastavení dle předaných vstupních dat dle <a href="../../uzivatelske-rozhrani/500uixx-sprava-dat/500ui03-82837649.html">500UI03: Formulář zákazníka</a>.</li><li>Uživatel vyplní formulář. V rámci vyplňování může spustit následující případy užití:<br><ul><li>Rejstřík podnikatelských subjektů: <a href="500uc02-82838055.html">500UC02: Najít zákazníka v rejstříku podnikatelských subjektů</a>.</li><li>Adresa: <a href="500uc34-83264165.html">500UC34: Založit adresu</a>, <a href="https://confluence.radium.cz/display/mpgskdispecer/500UC35%3A+Upravit+adresu">500UC35: Upravit adresu</a>, <a href="https://confluence.radium.cz/display/mpgskdispecer/500UC36%3A+Smazat+adresu">500UC36: Smazat adresu</a>.</li><li>Osoba zákazníka: <a href="500uc11-82838073.html">500UC11: Založit osobu zákazníka</a>, <a href="500uc12-82838076.html">500UC12: Upravit osobu zákazníka</a>, <a href="500uc13-82838078.html">500UC13: Smazat osobu zákazníka</a>.</li><li>Bankovní spojení: <a href="500uc15-82838082.html">500UC15: Založit bankovní spojení</a>, <a href="500uc16-82838084.html">500UC16: Upravit bankovní spojení</a>, <a href="500uc17-82838087.html">500UC17: Smazat bankovní spojení</a>.</li><li>Místo realizace:<br><ul><li><a href="500uc07-82838065.html">500UC07: Založit místo realizace</a> (poznámka: při založení Místa realizace, kdy zatím není žádné Místo realizace nastaveno, je jako vstupní parametr formuláře pro Místo realizace předána Adresa sídla Zákazníka, pokud je tato adresa k dispozici),</li><li><a href="500uc08-82838067.html">500UC08: Upravit místo realizace</a>, na vstup jsou předány následující hodnoty:<br><ul><li>Místo realizace: odpovídající <a href="../../../datove-modely/datovy-78681044.html">Místo realizace</a>, pro které byla spuštěna editace.</li><li>Úplná editace: TRUE (poznámka: při editaci <a href="../../../datove-modely/datovy-78681044.html">Zákazníka</a> je možné editovat všechny jeho položky).<br></li></ul></li><li><a href="500uc09-82838069.html">500UC09: Smazat místo realizace</a>.</li></ul></li><li>Poznámka: Pokud je do skupiny Osoby zákazníka (Statutární zástupci a Kontaktní osoby řešeny samostatně), Bankovní spojení či Místa realizace přidána nová položka nebo je stávající položka editována, a zároveň dojde k nastavení této položky jako výchozí, stávající výchozí položce ve skupině je tento příznak odebrán. Jinými slovy, ve skupině může (a musí) být nastavena jako výchozí právě jedna položka.</li></ul></li><li>Uživatel stiskne tlačítko Uložit.</li><li>Systém provede validaci vstupních údajů.</li><li>Systém uloží změny <a href="../../../datove-modely/datovy-78681044.html">Zákazníka</a>.<br><ul><li>Poznámka: Je nastavena i hodnota atributu Načten z rejstříku entity <a href="../../../datove-modely/datovy-78681044.html">Zákazník</a> – ta je získána z formuláře <a href="../../../datove-modely/datovy-78681044.html">Zákazníka</a> (viz <a href="../../uzivatelske-rozhrani/500uixx-sprava-dat/500ui03-82837649.html">500UI03: Formulář zákazníka</a>).</li></ul></li><li>Systém se vrátí zpět do části aplikace, kde došlo k požadavku na editaci <a href="../../../datove-modely/datovy-78681044.html">Zákazníka</a>.<br><ol><li>Pokud došlo k požadavku na editaci <a href="../../../datove-modely/datovy-78681044.html">Zákazníka</a> z přehledu <a href="../../../datove-modely/datovy-78681044.html">Zákazníka</a>, systém označí editovaného <a href="../../../datove-modely/datovy-78681044.html">Zákazníka</a>.</li></ol></li></ol><h1>Alternativní toky událostí</h1><h3>AF01: Údaje ve formuláři nejsou validní</h3><h4>Vstupní podmínky</h4><ul><li>Údaje ve formuláři nejsou validní – viz <a href="500uc03-82838057.html">Validace</a>.</li></ul><h4>Tok události</h4><ol><li>Alternativní tok událostí začíná krokem 4 základního toku událostí.</li><li>Systém zvýrazní ovládací prvky, které neobsahují validní hodnotu.</li><li>Systém zobrazí uživateli informaci, že některé ze zadaných údajů nejsou validní (MSG_ERR_FORM_NOT_VALID, viz <a href="#" data-page-title="Systémové hlášky">Systémové hlášky</a>).</li><li>Uživatel potvrdí zobrazené hlášení.</li><li>Systém zavře zobrazené hlášení. <strong>Návrat na krok 2 základního toku událostí</strong>.</li></ol><h3>AF02: Zákazník se zadaným identifikátorem již existuje</h3><h4>Vstupní podmínky</h4><ul><li>Již existuje taková instance entity <a href="../../../datove-modely/datovy-78681044.html">Zákazník</a>, která splňuje všechny dále uvedené podmínky zároveň:<ul><li>Hodnota atributu IČO nabývá stejné hodnoty jako u právě zakládaného <a href="../../../datove-modely/datovy-78681044.html">Zákazníka</a> (stejný atribut je využit pro uložení čísla OP u <a href="../../../datove-modely/datovy-78681044.html">Zákazníka</a> typu Nepodnikatel).<br></li></ul></li></ul><p>Poznámka:</p><ul><li><a href="../../../datove-modely/datovy-78681044.html">Zákazník</a>, který byl získán na vstupu UC, není v rámci kontroly vstupních podmínek vyhodnocován.</li><li>Není rozlišováno, zda se jedná o <a href="../../../datove-modely/datovy-78681044.html">Zákazníka</a> typu Podnikatel či Nepodnikatel. Případ, kdy by IČO odpovídalo číslu OP, by neměl nastat (pokud by se tak stalo, mělo by se jednat o chybně zadané informace).</li></ul><h4>Tok událostí</h4><ol><li>Alternativní tok událostí začíná krokem 4 základního toku událostí.</li><li>Systém zobrazí uživateli informaci, že <a href="../../../datove-modely/datovy-78681044.html">Zákazník</a> s tímto identifikátorem již existuje – systémové hlášení se liší dle typu zakládaného <a href="../../../datove-modely/datovy-78681044.html">Zákazníka</a> (atribut Typ zákazníka):<br><ul><li>Podnikatel: MSG_CONF_CANCEL_ADD_EXIST_CUSTOMER_BUSINESS_SUBJECT, viz <a href="#" data-page-title="Systémové hlášky">Systémové hlášky</a>.</li><li>Nepodnikatel: MSG_CONF_CANCEL_ADD_EXIST_CUSTOMER_PERSON, viz <a href="#" data-page-title="Systémové hlášky">Systémové hlášky</a>.</li></ul></li><li>Pokud uživatel potvrdí systémové hlášení (vybere možnost Ano):<br><ol><li>Systém zavře zobrazené hlášení.</li><li><strong>Systém pokračuje v základním toku událostí.</strong></li></ol></li><li>Jinak (vybere možnost Ne):<br><ol><li>Systém zavře zobrazené hlášení.</li><li><strong>Návrat na krok 2 základního toku událostí</strong>.</li></ol></li></ol><h1>Výjimkové toky událostí</h1><h3>EF01: Storno</h3><h4>Tok událostí</h4><ol><li>Výjimkový tok událostí může začít kdykoliv.</li><li>KDYŽ uživatel stiskne tlačítko Storno.<br><ol><li>Systém se vrátí zpět do části aplikace, kde došlo k požadavku na editaci <a href="../../../datove-modely/datovy-78681044.html">Zákazníka</a>. <strong>Konec toku událostí</strong>.</li></ol></li><li>KDYŽ uživatel opustí formulář pro editaci <a href="../../../datove-modely/datovy-78681044.html">Zákazníka</a>.<br><ol><li><strong>Konec toku událostí</strong>.</li></ol></li></ol><h4>Výstupní podmínky</h4><ul><li>Nebyly uloženy změny <a href="../../../datove-modely/datovy-78681044.html">Zákazníka</a>.</li></ul><h1>Výstupní podmínky</h1><ul><li>Byly uloženy změny <a href="../../../datove-modely/datovy-78681044.html">Zákazníka</a>.</li></ul><h1>Validace</h1><p>Validace je prováděna průběžně, pokud uživatel vstoupí do pole s možností zadání hodnoty, zadá hodnotu a pole opustí ve stavu, kdy hodnota není validní, je na to upozorněn. Ovládací prvek je graficky zvýrazněn a je doplněno chybové hlášení. Konkrétní validace jednotlivých polí jsou uvedeny v <a href="../../uzivatelske-rozhrani/500uixx-sprava-dat/500ui03-82837649.html">500UI03: Formulář zákazníka</a>. Hlídána jsou jak konkrétní validační kritéria každé položky, tak i to, zda je položka povinná.</p><p>Jakmile uživatel stiskne tlačítko Uložit, je provedena validace všech polí.</p><p>Pokud je ve skupinách Osoby zákazníka (Statutární zástupci a Kontaktní osoby řešeny samostatně), Bankovní spojení či Místa realizace alespoň jedna položka, musí být nastaveno, která z položek skupiny je výchozí.</p><p>Pokud jsou všechny údaje v pořádku, je <a href="../../../datove-modely/datovy-78681044.html">Zákazník</a> uložen. Pokud ne, jsou chybně vyplněná pole zvýrazněna a doplněna o chybové hlášení. Uživateli je navíc zobrazeno chybové hlášení, že <a href="../../../datove-modely/datovy-78681044.html">Zákazník</a> nemůže být uložena.</p><h1>Algoritmy</h1><p>Nejsou.</p><h1>Uživatelské rozhraní</h1><p>Rozložení formuláře je uvedeno v samostatném dokumentu – viz <a href="#" data-page-title="500UI03: Formulář zákazníka"></a>.</p><h1>Revize</h1><h3>28. 7. 2020: Tomáš Nadrchal</h3><table><tbody><tr><th>Odkaz</th><th>Stručný popis změny/doplnění</th></tr><tr><td colspan="1"><a href="500uc03-82838057.html">Základní tok událostí</a></td><td colspan="1">Doplněn popis chování o nastavení informace, zda byl zákazník vytvořen za použití rejstříku podnikatelských subjektů (naznačeno modře).</td></tr><tr><td colspan="1"><a href="500uc03-82838057.html">AF02: Zákazník se zadaným identifikátorem již existuje</a></td><td colspan="1">Doplněn alternativní tok s kontrolou, zda již neexistuje zákazník se stejným identifikátorem (naznačeno modře).</td></tr></tbody></table><h3>3. 3. 2020: Tomáš Nadrchal</h3><table><tbody><tr><th>Odkaz</th><th>Stručný popis změny/doplnění</th></tr><tr><td colspan="1"><a href="500uc03-82838057.html">Vstupní podmínky</a></td><td colspan="1">Revize potřebných oprávnění (naznačeno modře).</td></tr><tr><td colspan="1"><a href="500uc03-82838057.html">AF01: Údaje ve formuláři nejsou validní</a></td><td colspan="1">Doplněno chybějící chybové hlášení (naznačeno modře).</td></tr></tbody></table><h3>14. 5. 2019: Tomáš Nadrchal</h3><table><tbody><tr><th>Odkaz</th><th>Stručný popis změny/doplnění</th></tr><tr><td colspan="1"><a href="500uc03-82838057.html">Základní tok událostí</a></td><td colspan="1">Doplněny vstupní parametry při volání UC pro editaci <a href="../../../datove-modely/datovy-78681044.html">Místa realizace</a>.</td></tr></tbody></table><h3>3. 12. 2018: Tomáš Nadrchal</h3><table><tbody><tr><th>Odkaz</th><th>Stručný popis změny/doplnění</th></tr><tr><td colspan="1"><a href="500uc03-82838057.html">Validace</a></td><td colspan="1">Odebrání poznámky o nemožnosti uložení provedených změn Zákazníka, pokud existuje jiný Zákazník se stejným IČO.</td></tr></tbody></table><h3>21. 11. 2018: Tomáš Nadrchal</h3><table><tbody><tr><th>Odkaz</th><th>Stručný popis změny/doplnění</th></tr><tr><td colspan="1"><a href="500uc03-82838057.html">Validace</a></td><td colspan="1">Doplnění poznámky o nemožnosti uložení provedených změn Zákazníka, pokud existuje jiný Zákazník se stejným IČO.</td></tr></tbody></table><p><br></p>
</div>
</body>
</html>
