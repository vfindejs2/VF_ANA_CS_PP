<!DOCTYPE html>
<html lang="cs">
<head>
  <meta charset="utf-8">
  <title>500UC08: Upravit místo realizace</title>
</head>
<body>
<div class="wiki-content">
<p></p><h1>Stručný popis, cíl UC</h1><p>Cílem UC je editace Místa realizace.</p><h1>Seznam aktérů</h1><table><tbody><tr><th>Aktér</th><th>Popis</th><th colspan="1">Typická role</th></tr><tr><td>Uživatel</td><td><p>Jedná se o uživatele aplikace RoadPlan, který musí mít oprávnění spouštět tento UC.</p></td><td colspan="1"><p> </p></td></tr></tbody></table><h1>Spuštění případu užití</h1><p>Uživatel zadá požadavek k editaci Místa realizace jedním z těchto způsobů:</p><ul><li>Editace Místa realizace z formuláře Zákazníka při jeho založení (<a href="500uc01-82838053.html">500UC01: Založit zákazníka</a>),</li><li>Editace Místa realizace z formuláře Zákazníka při jeho editaci (<a href="500uc03-82838057.html">500UC03: Upravit zákazníka</a>),</li><li>Editace Místa realizace z formuláře Objednávky při jejím založení (<a href="../100ucxx-objednavky/100uc01-78681388.html">100UC01: Založit objednávku</a>),</li><li>Editace Místa realizace z formuláře Objednávky při jejím založení ze šablony (<a href="../100ucxx-objednavky/100uc02-79429803.html">100UC02: Založit objednávku ze šablony</a>),</li><li>Editace Místa realizace z formuláře Objednávky při jejím založení jako kopie Objednávky (<a href="../100ucxx-objednavky/100uc07-79429801.html">100UC07: Vytvořit kopii objednávky</a>),</li><li>Editace Místa realizace z formuláře Objednávky při její editaci (<a href="../100ucxx-objednavky/100uc03-79429791.html">100UC03: Upravit objednávku</a>).</li><li>Editace Místa realizace z detailu Zákazníka ()</li><li>Editace Místa realizace z přehledu na obrazovce pro kontrolu realizace Denního výkonu (<a href="#" data-page-title="400UC02: Zobrazit seznam s objednanými službami"></a>).</li><li>Editace Místa realizace z mapy na obrazovce pro kontrolu realizace Denního výkonu (<a href="#" data-page-title="400UC03: Zobrazit mapu s průběhem realizace"></a>).</li></ul><h1>Vstupní podmínky</h1><p>Uživatel má následující <a href="../../../uzivatelska-78681297.html">oprávnění na typ entit</a>:</p><ul><li>Zákazník - zobrazení a modifikace.</li></ul><h3>Vstupní data</h3><ul><li>Místo realizace: <a href="../../../datove-modely/datovy-78681044.html">Místo realizace</a>, které má být editováno.</li><li>Úplná editace: Informace, zda je umožněna úplná editace (boolean).</li></ul><h1>Základní tok událostí</h1><ol><li>Systém zobrazí formulář Místa realizace a provede jeho nastavení dle <a href="../../uzivatelske-rozhrani/500uixx-sprava-dat/500ui04-82837662.html">500UI04: Formulář místa realizace</a>, na vstup jsou pak předány následující hodnoty:<br><ul><li><a href="../../../datove-modely/datovy-78681044.html">Místo realizace</a>, které je získáno na vstupu UC.</li><li>Informace, zda je umožněna úplná editace, která je získána na vstupu UC.</li></ul></li><li>Uživatel provádí požadované změny (viz <a href="500uc08-82838067.html">AF04 - Manuální změna souřadnic</a>).</li><li>Uživatel stiskne tlačítko pro potvrzení změn Místa realizace.</li><li>Systém provede validaci vstupních údajů.</li><li>Systém uloží změny <a href="../../../datove-modely/datovy-78681044.html">Místa realizace</a>.</li><li>Systém se vrátí zpět do části aplikace, kde došlo k požadavku na editaci Místa realizace.</li></ol><h1>Alternativní toky událostí</h1><h3>AF01: Údaje ve formuláři nejsou validní</h3><h4>Vstupní podmínky</h4><ul><li>Údaje ve formuláři nejsou validní – viz <a href="500uc07-82838065.html">Validace</a>.</li></ul><h4>Tok události</h4><ol><li>Alternativní tok událostí začíná krokem 4 základního toku událostí.</li><li>Systém zvýrazní ovládací prvky, které neobsahují validní hodnotu.</li><li>Systém zobrazí uživateli informaci, že některé ze zadaných údajů nejsou validní (MSG_ERR_FORM_NOT_VALID, viz <a href="#" data-page-title="Systémové hlášky">Systémové hlášky</a>). <strong>Návrat na krok 2 základního toku událostí</strong>.</li></ol><h3>AF02: Nejsou dostupné informace pro dopředné geokódování</h3><h4>Vstupní podmínky</h4><ul><li>Není vyplněno žádné z polí pro zadání adresy.</li></ul><h4>Tok události</h4><ol><li>Alternativní tok začíná krokem 2 základního toku událostí.</li><li>Systém zobrazí uživateli informaci, že není vyplněno žádné z polí pro zadání adresy (MSG_ERR_ADDRESS_NOT_SET, viz <a href="#" data-page-title="Systémové hlášky">Systémové hlášky</a>). <strong>Návrat na krok 2 základního toku událostí</strong>.</li></ol><h3>AF03: Dopředné geokódování nevrátilo žádné adresy</h3><h4>Vstupní podmínky</h4><ul><li>Nebyla nalezena žádná adresa.</li></ul><h4>Tok událostí</h4><ol><li>Alternativní tok událostí začíná krokem 2 základního toku událostí.</li><li>Systém zobrazí uživateli informaci, že zadaným údajům neodpovídá žádná adresa (MSG_INFO_ADDRESS_NOT_FOUND, viz <a href="#" data-page-title="Systémové hlášky">Systémové hlášky</a>). <strong>Návrat na krok 2 základního toku událostí</strong>.</li></ol><h3>AF04: Manuální zadání souřadnic</h3><h4>Vstupní podmínky</h4><ul><li>Došlo k manuálnímu zadání souřadnic (buď přímo vyplněním vstupních polí nebo posunu polohy bodu v mapě).</li></ul><h4>Tok události</h4><ol><li>Alternativní tok událostí začíná krokem 3 základního toku událostí.</li><li>Pokud příslušné <a href="../../../datove-modely/datovy-78681044.html">Místo realizace</a> figuruje (viz <em>Poznámka 1</em>) v některé <a href="../../../datove-modely/datovy-78681044.html">Lokaci objednané služby</a> patřící do <a href="../../../datove-modely/datovy-78681044.html">Denního výkonu</a>, který je v jednom ze stavů {Plánovaný}:<br><ol><li>Systém zobrazí modální okno s dotazem pro potvrzení přepočtu Denních výkonů po změně souřadnic (MSG_CONF_UPDATE_DAILY_ROUTES,viz <a href="../../../systemove-78681299.html">Systémové hlášky</a>).</li><li>Uživatel zvolí jednu z možností:<br><ol><li>Pokud potvrdí požadavek na změnu souřadnic – stiskne tlačítko Ano. <strong>Pokračovat krokem 3.</strong></li><li>Jinak načíst původní souřadnice. <strong>Návrat na krok 2 základního toku událostí</strong>.</li></ol></li></ol></li><li>Systém uloží změny <a href="../../../datove-modely/datovy-78681044.html">Místa realizace</a> a v rámci této transakce provede potřebná opatření (aktualizaci aktuálních <a href="../../../datove-modely/datovy-78681044.html">Lokací objednaných služeb</a> a <a href="../../../datove-modely/datovy-78681044.html">Denních výkonů</a>) – viz algoritmus <a href="500uc08-82838067.html">Změna souřadnic</a>.</li><li><strong>Návrat na krok 6 základního toku událostí</strong>.</li></ol><p><em>Poznámka 1: </em><em><a href="../../../datove-modely/datovy-78681044.html">Denní výkon</a> má kolekci <a href="../../../datove-modely/datovy-78681044.html">Položky denního výkonu</a>, odtud je v závislosti na typu položky referencována přímo <em><a href="../../../datove-modely/datovy-78681044.html">Lokace objednané služby</a> nebo</em>  <a href="../../../datove-modely/datovy-78681044.html">Objednaná služba</a>, <em>která má na sobě kolekci <em><em><a href="../../../datove-modely/datovy-78681044.html">Lokace objednané služby</a></em></em>.</em> Příslušné <a href="../../../datove-modely/datovy-78681044.html">Lokace objednané služby</a> pak mají atribut reference na <a href="../../../datove-modely/datovy-78681044.html">Místo realizace</a>.</em></p><h1>Výjimkové toky událostí</h1><h3>EF01: Storno</h3><h4>Tok událostí</h4><ol><li>Výjimkový tok událostí může začít kdykoliv.</li><li>KDYŽ uživatel stiskne tlačítko Storno.<br><ol><li>Systém se vrátí zpět do části aplikace, kde došlo k požadavku na editaci Místa realizace. <strong>Konec toku událostí</strong>.</li></ol></li><li>KDYŽ uživatel opustí formulář pro editaci Místa realizace.<br><ol><li><strong>Konec toku událostí</strong>.</li></ol></li></ol><h4>Výstupní podmínky</h4><ul><li>Nebyly uloženy změny Místa realizace.</li></ul><h1>Výstupní podmínky</h1><ul><li>Byly uloženy změny <a href="../../../datove-modely/datovy-78681044.html">Místa realizace</a>.</li></ul><h1>Validace</h1><p>Viz <a href="500uc07-82838065.html">Validace</a> pro založení <a href="../../../datove-modely/datovy-78681044.html">Místa realizace</a>.</p><h1>Algoritmy</h1><p>Viz <a href="500uc07-82838065.html">Algoritmy</a> pro založení <a href="../../../datove-modely/datovy-78681044.html">Místa realizace</a>.</p><h3>Změna souřadnic</h3><ol><li>Systém zajistí nastavení parametru Stav geokódingu pro dané <a href="../../../datove-modely/datovy-78681044.html">Místo realizace</a> na hodnotu "Manuálně".</li><li>Systém nalezne všechny <a href="../../../datove-modely/datovy-78681044.html">Lokace objednané služby</a>, které současně splňují níže uvedené podmínky:<br><ul><li>Týkají se právě modifikovaného <a href="../../../datove-modely/datovy-78681044.html">Místa realizace</a>.</li><li>Patří k <a href="../../../datove-modely/datovy-78681044.html">Objednané službě</a>, která je ve stavu K naplánování.</li><li>Patří k <a href="../../../datove-modely/datovy-78681044.html">Objednané službě</a>, která je ve stavu Naplánovaná a zároveň je odpovídající <a href="../../../datove-modely/datovy-78681044.html">Denní výkony</a> ve stavu Plánovaný.</li></ul></li><li>Nalezené <a href="../../../datove-modely/datovy-78681044.html">Lokace objednané služby</a> systém <a href="../101ucxx-objednane-sluzby/101uc01-82116734.html">přegeneruje</a> tak, aby použily nově zadané souřadnice <a href="../../../datove-modely/datovy-78681044.html">Místa realizace</a>.</li><li>Systém nalezne všechny <a href="../../../datove-modely/datovy-78681044.html">Objednané služby</a>, které současně splňují níže uvedené podmínky:<br><ul><li>Figurují v nich <a href="../../../datove-modely/datovy-78681044.html">Lokace objednané služby</a> nalezené v kroku 2 (atribut Lokace objednané služby). </li><li><a href="../../../datove-modely/datovy-78681044.html">Objednaná služba</a> je v jednom z uvedených stavů: K naplánování.</li></ul></li><li>Pro nalezené <a href="../../../datove-modely/datovy-78681044.html">Objednané služby</a> systém přepočítá trasy pomocí odpovídajícího algoritmu, viz <a href="../101ucxx-objednane-sluzby/101uc01-82116734.html">Získání trasy</a>.</li><li>Systém nalezne všechny <a href="../../../datove-modely/datovy-78681044.html">Denní výkony</a>, které současně splňují níže uvedené podmínky:<br><ul><li>Figurují v nich (<em>viz Poznámka 1</em>) <a href="../../../datove-modely/datovy-78681044.html">Lokace objednané služby</a> nalezené v kroku 2. </li><li><a href="../../../datove-modely/datovy-78681044.html">Denní výkon</a> je v jednom z uvedených stavů: Plánovaný.</li></ul></li><li>Pro nalezené <a href="../../../datove-modely/datovy-78681044.html">Denní výkon</a>y systém přepočítá trasy pomocí volání případu užití <a href="../200ucxx-planovani-denni-vykony/200uc29-83267154.html">200UC29: Získat trasu denního výkonu</a>.<br></li></ol><p><em>Poznámka 1: </em><em><a href="../../../datove-modely/datovy-78681044.html">Denní výkon</a> má kolekci <a href="../../../datove-modely/datovy-78681044.html">Položky denního výkonu</a>, odtud je v závislosti na typu položky referencovaná přímo <em><a href="../../../datove-modely/datovy-78681044.html">Lokace objednané služby</a> nebo</em> <a href="../../../datove-modely/datovy-78681044.html">Objednaná služba</a>, která má na sobě kolekci <em><em><a href="../../../datove-modely/datovy-78681044.html">Lokací objednané služby</a></em></em>.</em></p><p><em>Poznámka 2: Algoritmus předpokládá, že aktivní instance entit vzniklé při modifikaci zachovávají vazbu na původní instanci entity – viz .</em></p><h1>Uživatelské rozhraní</h1><p>Rozložení formuláře je uvedeno v samostatném dokumentu – viz <a href="#" data-page-title="500UI04: Formulář místa realizace"></a>.</p><h1>Revize</h1><h3>17. 2. 2020: Tomáš Nadrchal</h3><table><tbody><tr><th>Odkaz</div></div></th><th>Stručný popis změny/doplnění</div></div></th></tr><tr><td colspan="1"><a href="500uc08-82838067.html">Základní tok událostí</a></td><td colspan="1">Provedena revize závěrečné části základního toku událostí (naznačeno modře).</td></tr><tr><td colspan="1"><a href="500uc08-82838067.html">AF01: Údaje ve formuláři nejsou validní</a></td><td colspan="1">Doplněna specifikace chybového hlášení.</td></tr><tr><td colspan="1"><a href="500uc08-82838067.html">AF02: Nejsou dostupné informace pro dopředné geokódování</a></td><td colspan="1">Doplněna specifikace chybového hlášení.</td></tr><tr><td colspan="1"><a href="500uc08-82838067.html">AF03: Dopředné geokódování nevrátilo žádné adresy</a></td><td colspan="1">Doplněna specifikace chybového hlášení.</td></tr><tr><td colspan="1"><a href="500uc08-82838067.html">AF04 - Manuální změna souřadnic</a></td><td colspan="1">Aktualizovány stavy, ve kterých dojde k aktualizaci <a href="../../../datove-modely/datovy-78681044.html">Denních výkonů</a> (naznačeno modře).</td></tr><tr><td colspan="1"><a href="500uc08-82838067.html">Změna souřadnic</a></td><td colspan="1"><p>Přesněji specifikováno vyhodnocení zasažených <a href="../../../datove-modely/datovy-78681044.html">Lokací objednané služby</a> (naznačeno modře).</p><p>Odebráno vyhodnocení na manuální posun souřadnice (naznačeno modře).</p></td></tr></tbody></table><h3>10. 1. 2020: Tomáš Nadrchal</h3><table><tbody><tr><th>Odkaz</div></th><th>Stručný popis změny/doplnění</div></th></tr><tr><td colspan="1"><a href="500uc08-82838067.html">Spuštění případu užití</a></td><td colspan="1">Doplněny UC, které spouští tento UC (naznačeno modře).</td></tr><tr><td colspan="1"><a href="500uc08-82838067.html">Změna souřadnic</a></td><td colspan="1">Provedena revize algoritmu pro aktualizaci tras <a href="../../../datove-modely/datovy-78681044.html">Denních výkonů</a> (naznačeno modře).</td></tr></tbody></table><h3>20. 5. 2019: Miroslav Slivoně</h3><table><tbody><tr><th>Odkaz</div></th><th>Stručný popis změny/doplnění</div></th></tr><tr><td colspan="1"><a href="500uc08-82838067.html">AF04 - Manuální změna souřadnic</a></td><td colspan="1">Alternativní tok událostí vykonaný při manuální změně souřadnic.</td></tr><tr><td colspan="1"><a href="500uc08-82838067.html">Změna souřadnic</a></td><td colspan="1">Algoritmus popisující reakci na aktualizaci souřadnic.</td></tr></tbody></table><h3>14. 5. 2019: Tomáš Nadrchal</h3><table><tbody><tr><th>Odkaz</div></th><th>Stručný popis změny/doplnění</div></th></tr><tr><td colspan="1"><a href="500uc08-82838067.html">Vstupní data</a></td><td colspan="1">Aktualizována množina vstupních dat – přidán binární parametr indikující, zda je umožněna úplná editace <a href="../../../datove-modely/datovy-78681044.html">Místa realizace</a>.</td></tr><tr><td colspan="1"><a href="500uc08-82838067.html">Základní tok událostí</a></td><td colspan="1">Aktualizován základní tok událostí – zobrazení formuláře <a href="../../../datove-modely/datovy-78681044.html">Místa realizace</a> a provedení potřebných opatření před uložením změn.</td></tr><tr><td colspan="1"><a href="500uc08-82838067.html">Změna adresy a souřadnic</a></td><td colspan="1">Přidán algoritmus zajišťující provedení potřebných změn v rámci ostatních částí systému.</td></tr></tbody></table><p><br></p><div><br></div>
</div>
</body>
</html>
