<!DOCTYPE html>
<html lang="cs">
<head>
  <meta charset="utf-8">
  <title>206UC05: Zobrazit panel mapy denních výkonů</title>
</head>
<body>
<div class="wiki-content">
<p></p><h1>Stručný popis, cíl</h1><p>Cílem případu užití je zobrazení panelu s mapou takových denních výkonů, které jsou právě zobrazeny v rámci panelu s přehledem denních výkonů stejné obrazovky (viz <a href="#" data-page-title="206UC04: Zobrazit panel přehledu denních výkonů"></a>). To znamená, že např. nastavení filtru v panelu s přehledem ovlivní množství dostupných záznamů v mapě.</p><p>Poznámka: Použitá mapa vychází z obecné komponenty, tomu odpovídá také její chování (viz <a href="../../uzivatelske-rozhrani/700uixx-obecne/700ui01-komponenty/700ui01-83266189.html">700UI01: Komponenty – mapa</a>).</p><h1>Seznam aktérů</h1><table><tbody><tr><th>Aktér</th><th colspan="1">Poznámka</th></tr><tr><td colspan="1">Uživatel</td><td colspan="1">–</td></tr></tbody></table><p>Poznámka: Úplný přehled aktérů je zobrazen samostatně, viz <a href="../../../high-level-concept/akteri-78680673.html">Aktéři</a>.</p><h1>Spuštění případu užití</h1><p>Uživatel zadá požadavek na zobrazení panelu mapy denních výkonů, a to jedním z uvedených způsobů:</p><ul><li>Uživatel zobrazí obrazovku plánování denních výkonů (viz <a href="206uc01-114460020.html">206UC01: Zobrazit obrazovku plánování denních výkonů</a>).</li></ul><h2>Vstupní podmínky</h2><p>Uživatel má oprávnění na zobrazení obrazovky plánování denních výkonů (viz <a href="206uc01-114460020.html">206UC01: Zobrazit obrazovku plánování denních výkonů</a>).</p><h2>Vstupní data</h2><table><tbody><tr><th>Vstupní parametr</div></th><th>Datový typ</div></th><th colspan="1">Povinnost</div></th><th>Popis</div></th><th colspan="1">Poznámka</div></th></tr><tr><td colspan="1">Denní výkony</td><td colspan="1"><a href="../../../datove-modely/datovy-78681044.html">Denní výkon</a> (kolekce)</td><td colspan="1">Ano</td><td colspan="1">Denní výkony, pro které mohou být zobrazeny jejich trajektorie v panelu s mapou (předáno včetně barevného značení).</td><td colspan="1">Může být předána prázdná kolekce.</td></tr><tr><td colspan="1">Režim pro čtení</td><td colspan="1">Boolean</td><td colspan="1">Ano</td><td colspan="1">Informace, zda je možné v rámci panelu provádět změny. Pokud je panel zobrazen pouze ke čtení – TRUE, jinak – FALSE.</td><td colspan="1"><em>V rámci panelu není aktuálně možné provádět žádné změny.</em></td></tr></tbody></table><h1>Základní tok událostí</h1><ol><li>Systém zobrazí panel přehledu objednaných služeb (viz <a href="206uc05-115213117.html">Uživatelské rozhraní</a>).</li><li>Systém zpřístupní dostupné funkčnosti.</li></ol><h1>Alternativní toky událostí</h1><p>–</p><h1>Výjimkové toky událostí</h1><p>Poznámka: Oprávnění na spuštění případu užití jsou vyhodnocována v nadřazeném UC.</p><h1>Ukončení případu užití</h1><h2>Výstupní podmínky</h2><p>Uživateli byl zobrazen panel s mapou denních výkonů, ve kterém zobrazené záznamy a dostupné funkce odpovídají jeho uživatelským oprávněním.</p><h2>Výstupní data</h2><p>–</p><h1>Algoritmy</h1><h2>ALG01: Vykreslit trajektorii denního výkonu</h2><p>Algoritmus slouží k vykreslení trajektorie <a href="../../../datove-modely/datovy-78681044.html">Denního výkonu</a>, kdy nejsou zobrazeny pozice dílčích <a href="../../../datove-modely/datovy-78681044.html">Lokací objednaných služeb</a>. Na vstupu algoritmu jsou pak požadovány následující informace:</p><ul><li><strong>Denní výkon</strong>: <a href="../../../datove-modely/datovy-78681044.html">Denní výkon</a>, pro který má být vykreslena trajektorie.</li><li><strong>Barva</strong>: Barva, kterou má být trajektorie <a href="../../../datove-modely/datovy-78681044.html">Denního výkonu</a> vykreslena.</li><li><strong>Je zvýrazněn</strong>: Informace, zda má být trajektorie <a href="../../../datove-modely/datovy-78681044.html">Denního výkonu</a> vykreslena jako zvýrazněná.<br><ul><li>Pokud má být zvýrazněna – předáno <strong>TRUE</strong>.</li><li>Jinak zvýrazněna být nemá – předáno <strong>FALSE</strong>.</li></ul></li></ul><p>Trajektorie <a href="../../../datove-modely/datovy-78681044.html">Denního výkonu</a> je dána množinou obsažených <a href="../../../datove-modely/datovy-78681044.html">Položek denního výkonu</a>, ty vykreslujeme v uvedeném pořadí:</p><ol><li><strong>Počáteční položka denního výkonu</strong>: Hodnota atributu <strong>Počáteční položka denního výkonu</strong> na vstupu algoritmu získaného <a href="../../../datove-modely/datovy-78681044.html">Denního výkonu</a>.</li><li><strong>Navštívené položky denního výkonu</strong>: Takové <a href="../../../datove-modely/datovy-78681044.html">Položky denního výkonu</a>, u kterých hodnota atributu <strong>Denní výkon</strong> odpovídá <a href="../../../datove-modely/datovy-78681044.html">Dennímu výkonu</a>, který byl získán na vstupu algoritmu.<br><ul><li>Poznámka: Pořadí, ve kterém jsou tyto <a href="../../../datove-modely/datovy-78681044.html">Položky denního výkonu</a> vykreslovány, odpovídá pořadí v rámci <a href="../../../datove-modely/datovy-78681044.html">Denního výkonu</a>.</li></ul></li><li><strong>Koncová položka denního výkonu</strong>: Hodnota atributu <strong>Koncová položka denního výkonu</strong> na vstupu algoritmu získaného <a href="../../../datove-modely/datovy-78681044.html">Denního výkonu</a>.</li></ol><p>Každá <a href="../../../datove-modely/datovy-78681044.html">Položka denního výkonu</a> je tvořena alespoň jednou <a href="../../../datove-modely/datovy-78681044.html">Lokací objednané služby</a>. Vykreslení trajektorie pak probíhá právě na úrovni zmíněných <a href="../../../datove-modely/datovy-78681044.html">Lokací objednaných služeb</a>, a to v uvedeném pořadí (do pomocné kolekce je vkládáno vždy na konec):</p><ol><li>Pro všechny získané <a href="../../../datove-modely/datovy-78681044.html">Položky denního výkonu</a> v daném pořadí (viz dříve):<br><ol><li>Pokud je v rámci právě zkoumané <a href="../../../datove-modely/datovy-78681044.html">Položky denního výkonu</a> k dispozici hodnota atributu <strong>Lokace objednané služby</strong> (ostatní položky):<br><ol><li>Pomocná kolekce je rozšířena o odkazovanou <a href="../../../datove-modely/datovy-78681044.html">Lokaci objednané služby</a>: hodnota atributu <strong>Lokace objednané služby</strong> právě zkoumané <a href="../../../datove-modely/datovy-78681044.html">Položky denního výkonu</a>.</li></ol></li><li>Jinak v rámci právě zkoumané <a href="../../../datove-modely/datovy-78681044.html">Položky denního výkonu</a> taková hodnota k dispozici není (položky typu objednaná služba):<br><ol><li>Pomocná kolekce je rozšířena o takové <a href="../../../datove-modely/datovy-78681044.html">Lokace objednané služby</a>, které splňují všechny dále uvedené podmínky zároveň:<br><ul><li>Hodnota atributu <strong>Objednaná služba</strong> odpovídá dané <a href="../../../datove-modely/datovy-78681044.html">Objednané službě</a> – atribut <strong>Objednaná služba</strong> právě zkoumané <a href="../../../datove-modely/datovy-78681044.html">Položky denního výkonu</a>.</li><li>Hodnota atributu <strong>Provést</strong> je rovna hodnotě <strong>TRUE</strong>.</li></ul></li></ol></li></ol></li></ol><p>Poznámka: V některých případech může být v rámci <a href="../../../datove-modely/datovy-78681044.html">Položky denního výkonu</a> odkazována jak <a href="../../../datove-modely/datovy-78681044.html">Objednaná služba</a>, tak <a href="../../../datove-modely/datovy-78681044.html">Lokace objednané služby</a>. V takovém případě pracujeme s <a href="../../../datove-modely/datovy-78681044.html">Lokací objednané služby</a>.</p><p>Když mám připraveny <a href="../../../datove-modely/datovy-78681044.html">Lokace objednaných služeb</a>, můžeme přistoupit k samotnému vykreslení trajektorie na vstupu získaného <a href="../../../datove-modely/datovy-78681044.html">Denního výkonu</a>.</p><ol><li>Pro všechny získané <a href="../../../datove-modely/datovy-78681044.html">Lokace objednaných služeb</a> v daném pořadí (viz dříve):<br><ol><li>Systém vykreslí spojnici do následující <a href="../../../datove-modely/datovy-78681044.html">Lokace objednané služby</a>:<ul><li><strong>Barva</strong>: Je použita barva získaná na vstupu algoritmu.</li><li><strong>Spojnice</strong>: Je vykreslena trajektorie (atribut <strong>Trasa do další lokace</strong> právě zkoumané <a href="../../../datove-modely/datovy-78681044.html">Lokace objednané služby</a>).</li></ul></li><li>Pokud má být trajektorie zvýrazněna – na vstupu algoritmu je získána hodnota <strong>TRUE</strong>:<ol><li>Systém zvýrazní spojnici vykreslenou v rámci kroku <strong>1.a</strong> (podbarví ji, viz dále):<ul><li><strong>Barva</strong>: Je použita barva <strong>#FFFFFF</strong>.</li></ul></li></ol></li></ol></li></ol><p>Způsob, jakým jsou vykresleny zvýrazněné <a href="../../../datove-modely/datovy-78681044.html">Denní výkony</a>, je naznačen na obrázku.</p><p><img src="206uc05-zobrazit-panel-mapy-dennich-vykonu-115213117_images/image2023-6-9 12-1-3.png" data-attachment="true"></p><p>Poznámka: Koncová <a href="../../../datove-modely/datovy-78681044.html">Položka denního výkonu</a> již neobsahuje další část trajektorie <a href="../../../datove-modely/datovy-78681044.html">Denního výkonu</a>. Pokud tedy vykreslujeme pouze samotnou trajektorii, může být přeskočena.</p><h1>Validace</h1><p>–</p><h1>Uživatelské rozhraní</h1><h2>Drátový diagram</h2><p><img src="206uc05-zobrazit-panel-mapy-dennich-vykonu-115213117_images/image2023-6-9 7-56-11.png" data-attachment="true"></p><h2>Přehled UI komponent</h2><table><tbody><tr><th>Prvek</th><th>Skupina</th><th>Poznámka</th></tr><tr><td colspan="1">1</td><td colspan="1"><a href="206uc05-115213117.html">Mapa</a></td><td colspan="1">–</td></tr><tr><td colspan="1">2</td><td colspan="1"><a href="206uc05-115213117.html">Nástrojová lišta</a></td><td colspan="1">–</td></tr></tbody></table><h2>Mapa</h2><p>Mapa slouží k zobrazení trajektorie <a href="../../../datove-modely/datovy-78681044.html">Denních výkonů</a> (bez odpovídajících <a href="../../../datove-modely/datovy-78681044.html">Objednaných služeb</a>, resp. jejich lokací). Pracujeme tedy s následujícími zdroji dat:</p><ul><li><a href="../../../datove-modely/datovy-78681044.html">Denní výkony</a> jsou získány na vstupu UC (vstupní parametr <strong>Denní výkony</strong>), přímo v mapě jsou pak zobrazeny pouze následující záznamy:<br><ul><li>Nastavení provedená v <a href="206uc05-115213117.html">nástrojové liště</a> (specifikace dostupných trajektorií).</li><li>Pro označený záznam existuje alespoň jedna <a href="../../../datove-modely/datovy-78681044.html">Položka denního výkonu</a> (atribut <strong>Denní výkon</strong> odkazuje na právě zkoumaný <a href="../../../datove-modely/datovy-78681044.html">Denní výkon</a>).</li></ul></li></ul><h3>Vykreslení denních výkonů</h3><p>Vykreslení <a href="../../../datove-modely/datovy-78681044.html">Denních výkonů</a> je řešeno v rámci jediné vrstvy, jedná se pak o trajektorie těchto <a href="../../../datove-modely/datovy-78681044.html">Denních výkonů</a>. Způsob zobrazení je pak možné specifikovat také uživatelsky (viz <a href="206uc05-115213117.html">Nástrojová lišta</a>).</p><ol><li>Pokud má být vrstva vykreslena (viz <a href="206uc05-115213117.html">Nástrojová lišta</a>, komponenta 1):<br><ol><li>Pro všechny <a href="../../../datove-modely/datovy-78681044.html">Denní výkony</a>, které mají být vykresleny:<br><ol><li>Pokud má být vrstva s trajektoriemi vykreslena pouze pro právě označené <a href="../../../datove-modely/datovy-78681044.html">Denní výkony</a> (viz <a href="206uc05-115213117.html">Nástrojová lišta</a>, komponenta 1.1):<br><ol><li>Pokud právě zkoumaný <a href="../../../datove-modely/datovy-78681044.html">Denní výkon</a> <strong>není</strong> označen v přehledu (viz <a href="206uc04-115213112.html">206UC04: Zobrazit panel přehledu denních výkonů</a>):<br><ol><li>Přechod na krok <strong>1.a</strong> (právě zkoumaný <a href="../../../datove-modely/datovy-78681044.html">Denní výkon</a> je přeskočen).</li></ol></li></ol></li><li>Systém vykreslí trajektorii <a href="../../../datove-modely/datovy-78681044.html">Denního výkonu</a> dle <a href="206uc05-115213117.html">ALG01: Vykreslit trajektorii denního výkonu</a>, na vstup jsou předány následující informace:<br><ul><li><strong>Denní výkon</strong>: Právě zkoumaný <a href="../../../datove-modely/datovy-78681044.html">Denní výkon</a>.</li><li><strong>Barva</strong>: Konkrétní barva je získána spolu s odpovídajícím <a href="../../../datove-modely/datovy-78681044.html">Denním výkonem</a> na vstupu UC (vstupní parametr <strong>Denní výkony</strong>).</li><li><strong>Je zvýrazněn</strong>: Pokud se jedná o poslední označený <a href="../../../datove-modely/datovy-78681044.html">Denní výkon</a> v přehledu (viz <a href="206uc04-115213112.html">206UC04: Zobrazit panel přehledu denních výkonů</a>) – <strong>TRUE</strong>, jinak – <strong>FALSE</strong>.</li></ul></li></ol></li></ol></li><li>Jinak je vykreslení vrstvy potlačeno (vrstva je nastavena jako skrytá):<br><ol><li>Systém zruší vykreslení vrstvy v mapě.</li></ol></li></ol><h2>Nástrojová lišta</h2><p>Nástrojová lišta slouží především ke specifikaci v mapě zobrazených informací. Chování pak vychází z jejího <a href="../../uzivatelske-rozhrani/700uixx-obecne/700ui01-komponenty/700ui01-83266189.html">obecného popisu</a>, k dispozici jsou následující panely:</p><ul><li>Mapové podklady (viz <a href="../../uzivatelske-rozhrani/700uixx-obecne/700ui01-komponenty/700ui01-83266189.html">popis</a>),</li><li>Vrstvy (viz dále).</li></ul><h3>Drátový diagram</h3><p><img src="206uc05-zobrazit-panel-mapy-dennich-vykonu-115213117_images/image2023-6-9 8-9-29.png" data-attachment="true"></p><h3>Přehled UI komponent</h3><table><tbody><tr><th>Prvek</div></th><th>Komponenta</div></th><th colspan="1">Nadpis</div></th><th>Typ komponenty</div></th><th colspan="1">Chování</div></th><th colspan="1">Výchozí stav</div></th><th colspan="1">Zdrojová data</div></th><th colspan="1">Poznámka</div></th></tr><tr><td colspan="1">1</td><td colspan="1">Vrstva denních výkonů</td><td colspan="1">Denní výkony</td><td colspan="1"><p>Položka nástrojové lišty (viz <a href="../../uzivatelske-rozhrani/700uixx-obecne/700ui01-komponenty/700ui01-83266189.html">Vrstvy</a>)</p><ul><li>Typ položky: <strong>Rozšířená</strong></li></ul></td><td colspan="1">Položka panelu nástrojové lišty pro nastavení zobrazení <a href="../../../datove-modely/datovy-78681044.html">Denních výkonů</a> v mapě (včetně možnosti skrýt celou vrstvu).</td><td colspan="1">Vrstva je zobrazena</td><td colspan="1">Entita <a href="../../../datove-modely/datovy-78681044.html">Denní výkon</a> (vstupní parametr <strong>Denní výkony</strong>).</td><td colspan="1">Zobrazené záznamy mohou být omezeny nastavením v rámci <a href="#" data-page-title="206UC04: Zobrazit panel přehledu denních výkonů"></a> (nastavení filtrů v přehledu).</td></tr><tr><td colspan="1">1.1</td><td colspan="1">Režim zobrazení trajektorií</td><td colspan="1">Jen pro označené</td><td colspan="1">SwitchButton</td><td colspan="1"><p>Tlačítko slouží k nastavení režimu zobrazení trajektorií na úrovni <a href="../../../datove-modely/datovy-78681044.html">Denních výkonů</a>.</p><ul><li>Pokud je tlačítko stisknuto, jsou zobrazeny trajektorie pouze pro právě označené <a href="../../../datove-modely/datovy-78681044.html">Denní výkony</a> (vyhodnoceno dle <a href="#" data-page-title="206UC04: Zobrazit panel přehledu denních výkonů">206UC04: Zobrazit panel přehledu denních výkonů</a>).</li><li>Pokud tlačítko stisknuto není, jsou zobrazeny trajektorie pro všechny zobrazené <a href="../../../datove-modely/datovy-78681044.html">Denní výkony</a>.</li></ul></td><td colspan="1">Tlačítko není stisknuto (trajektorie pro všechny záznamy)</td><td colspan="1">–</td><td colspan="1">–</td></tr><tr><td colspan="1">–</td><td colspan="1">Zobrazit trasu</td><td colspan="1">–</td><td colspan="1">–</td><td colspan="1">–</td><td colspan="1">–</td><td colspan="1">–</td><td colspan="1"><em>Odebráno.</em></td></tr><tr><td colspan="1">–</td><td colspan="1">Naznačit směr</td><td colspan="1">–</td><td colspan="1">–</td><td colspan="1">–</td><td colspan="1">–</td><td colspan="1">–</td><td colspan="1"><em>Odebráno.</em></td></tr></tbody></table><h2>Chování</h2><p>–</p><h2>Uživatelská nastavení</h2><p>V rámci panelu je použito <a href="../../persistence-stavu-ui/uzivatelska-86149256.html">Uživatelská nastavení klienta</a>. Prvky, u kterých je ukládáno uživatelské nastavení, jsou uvedeny ve formě tabulky. Jejich výchozí hodnota pak odpovídá popisu uživatelského rozhraní.</p><table><tbody><tr><th>Funkční celek</th><th>Ukládaná hodnota</th><th>Poznámka</th></tr><tr><td colspan="1"><a href="206uc05-115213117.html">Nástrojová lišta</a></td><td colspan="1">Viditelnost nástrojové lišty</td><td colspan="1">Popis chování uveden samostatně (viz <a href="../../uzivatelske-rozhrani/700uixx-obecne/700ui01-komponenty/700ui01-83266189.html">Viditelnost nástrojové lišty</a>).</td></tr><tr><td colspan="1"><a href="206uc05-115213117.html">Nástrojová lišta</a></td><td colspan="1">Nastavení mapového podkladu (včetně barevnosti)</td><td colspan="1">Popis chování uveden samostatně (viz <a href="../../uzivatelske-rozhrani/700uixx-obecne/700ui01-komponenty/700ui01-83266189.html">Mapové podklady</a>).</td></tr><tr><td colspan="1"><a href="206uc05-115213117.html">Nástrojová lišta</a></td><td colspan="1"><p>Nastavení zobrazených vrstev – ukládáno pro následující komponenty:</p><ul><li>Vrstva denních výkonů (komponenta 1): <strong>viditelnost vrstvy</strong>.</li><li>Režim zobrazení trajektorií (komponenta 1.1): <strong>nastavení tlačítka</strong>.<br></li></ul></td><td colspan="1">–</td></tr></tbody></table><h2>Parametry URL</h2><p>Poznámka: Parametry URL jsou řešeny v nadřazeném UC.</p><h1>Grafický návrh</h1><p>TODO</p><h1>Revize</h1><h2>9. 6. 2023: Tomáš Nadrchal</h2><p>Změny oproti stávajícímu chování graficky odlišeny (naznačeno modře).</p>
</div>
</body>
</html>
