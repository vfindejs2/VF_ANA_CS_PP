<!DOCTYPE html>
<html lang="cs">
<head>
  <meta charset="utf-8">
  <title>101UC02: Vytvořit objednanou službu na výzvu</title>
</head>
<body>
<div class="wiki-content">
<p></p><h1>Stručný popis, cíl UC</h1><p>Cílem UC je vytvoření <a href="../../../datove-modely/datovy-78681044.html">Objednané služby</a> na výzvu pro konkrétní <a href="../../../datove-modely/datovy-78681044.html">Objednávku</a> (Objednávka pak musí být ve stavu K realizaci či Plněná).</p><p>Poznámka: Možnost vytvoření <a href="../../../datove-modely/datovy-78681044.html">Objednané služby</a> na výzvu je omezena stavem <a href="../../../datove-modely/datovy-78681044.html">Objednávky</a>.</p><h1>Seznam aktérů</h1><h1>Seznam aktérů</h1><table><tbody><tr><th>Aktér</div></th><th colspan="1">Poznámka</div></th></tr><tr><td>Uživatel</td><td colspan="1"><p>–</p></td></tr><tr><td colspan="1">Synchronizační komponenta</td><td colspan="1">–</td></tr></tbody></table><h1>Spuštění případu užití</h1><p>Uživatel zadá požadavek na vytvoření <a href="../../../datove-modely/datovy-78681044.html">Objednané služby</a> na výzvu jedním z těchto způsobů:</p><ul><li>Vytvoření <a href="../../../datove-modely/datovy-78681044.html">Objednané služby</a> na výzvu z detailu objednávky v přehledu objednávek (viz <a href="#" data-page-title="100UC06: Zobrazit detail objednávky">100UC06: Zobrazit detail objednávky</a>).</li><li>Vytvoření <a href="../../../datove-modely/datovy-78681044.html">Objednané služby</a> na výzvu z detailu objednané služby v přehledu objednaných služeb (viz <a href="#" data-page-title="101UC06: Zobrazit detail objednané služby"></a>).</li><li>Vytvoření <a href="../../../datove-modely/datovy-78681044.html">Objednané služby</a> na výzvu z přehledu objednaných služeb (viz <a href="#" data-page-title="101UI01: Obrazovka přehledu objednaných služeb"></a>).</li></ul><p>Synchronizační komponenta zadá požadavek na vytvoření <a href="../../../datove-modely/datovy-78681044.html">Objednané služby</a> na výzvu jedním z těchto způsobů:</p><ul><li>Vytvoření <a href="../../../datove-modely/datovy-78681044.html">Objednané služby</a> na výzvu při synchronizaci jízd (viz <a href="../605ucxx-winyx-synchronizace-dat-recovera/605uc03-116788570.html">605UC03: Získat jízdy</a>).</li></ul><h1>Vstupní podmínky</h1><p><a href="../../../datove-modely/datovy-78681044.html">Objednaný úkon</a> získaný na vstupu UC odpovídá <a href="../../../datove-modely/datovy-78681044.html">Objednávce</a> (atribut Objednávka entity <a href="../../../datove-modely/datovy-78681044.html">Položka objednávky</a> – atribut Položka objednávky entity <a href="../../../datove-modely/datovy-78681044.html">Objednaná nádoba</a> – atribut Objednaná nádoba entity <a href="../../../datove-modely/datovy-78681044.html">Objednaný úkon</a>), která je v jednom z dále uvedených stavů (Atribut Stav): K realizaci, Plněná.</p><ul><li>Uživatel má následující <a href="../../../uzivatelska-78681297.html">oprávnění na moduly a UC</a>:<ul><li>Objednané služby.</li></ul></li><li>Uživatel má následující <a href="../../../uzivatelska-78681297.html">oprávnění na typ entit</a>:<br><ul><li>Objednané služby - zobrazení a modifikace,</li><li>Objednávky - zobrazení.</li></ul></li></ul><p>Poznámka: Generování <a href="../../../datove-modely/datovy-78681044.html">Objednaných služeb</a> obecně je omezeno i stavem odpovídající <a href="../../../datove-modely/datovy-78681044.html">Objednávky</a> (atribut Stav). Ten musí být nastaven na jednu z uvedených hodnot:</p><ul><li>K realizaci,</li><li>Plněná.</li></ul><h3>Vstupní data</h3><table><tbody><tr><th>Vstupní parametr</div></div></th><th>Datový typ</div></div></th><th colspan="1">Povinnost</div></div></th><th>Popis</div></div></th><th colspan="1">Poznámka</div></div></th></tr><tr><td colspan="1">Objednaný úkon</td><td colspan="1"><a href="../../../datove-modely/datovy-78681044.html">Objednaný úkon</a></td><td colspan="1">Ano</td><td colspan="1"><a href="../../../datove-modely/datovy-78681044.html">Objednaný úkon</a>, pro který má být generovány <a href="../../../datove-modely/datovy-78681044.html">Objednané služby</a> na výzvu.</td><td colspan="1">–</td></tr><tr><td colspan="1">Datum realizace od</td><td colspan="1">Datum</td><td colspan="1">Ne</td><td colspan="1">Datum představující začátek předpokládaného období realizace. </td><td colspan="1">Pokud je hodnota k dispozici, není zobrazen formulář pro vytvoření objednané služby.</td></tr><tr><td colspan="1">Datum realizace od</td><td colspan="1">Datum</td><td colspan="1">Ne</td><td colspan="1">Datum představující konec předpokládaného období realizace.</td><td colspan="1">Pokud je hodnota k dispozici, není zobrazen formulář pro vytvoření objednané služby.</td></tr><tr><td colspan="1">Čas realizace od</td><td colspan="1">Čas</td><td colspan="1">Ne</td><td colspan="1">Čas představující začátek časového okna pro jednotlivé dny realizace.</td><td colspan="1">–</td></tr><tr><td colspan="1">Čas realizace do</td><td colspan="1">Čas</td><td colspan="1">Ne</td><td colspan="1">Čas představující konec časového okna pro jednotlivé dny realizace.</td><td colspan="1">–</td></tr><tr><td colspan="1">Poznámka</td><td colspan="1">Řetězec</td><td colspan="1">Ne</td><td colspan="1">Poznámka k vytvářené objednané službě.</td><td colspan="1">–</td></tr><tr><td colspan="1"><p>Identifikátor jízdy</p></td><td colspan="1">Řetězec</td><td colspan="1">Ne</td><td colspan="1">Identifikátor jízdy, pro kterou objednaná služba vzniká.</td><td colspan="1">Typicky získáno z ERP systému.</td></tr><tr><td colspan="1">Evidenční číslo výchozího vozidla</td><td colspan="1">Řetězec</td><td colspan="1">Ne</td><td colspan="1">Evidentní číslo vozidla, které má provést realizaci objednané služby.</td><td colspan="1">Typicky získáno z ERP systému.</td></tr><tr><td colspan="1">Výchozí datum realizace</td><td colspan="1">Datum</td><td colspan="1">Ne</td><td colspan="1">Datum, v rámci kterého má být provedena realizace objednané služby.</td><td colspan="1">Typicky získáno z ERP systému.</td></tr></tbody></table><h1>Základní tok událostí</h1><ol><li>Pokud nejsou k dispozici hodnoty pro dále uvedené vstupní parametry: <strong>Datum realizace od</strong>, <strong>Datum realizace do</strong>:<br><ol><li>Systém zobrazí formulář pro přidání <a href="../../../datove-modely/datovy-78681044.html">Objednané služby</a> na výzvu v modálním okně dle <a href="#" data-page-title="101UI02: Formulář pro vytvoření objednané služby na výzvu"></a>, na vstup jsou předány následující hodnoty:<br><ul><li>Objednaný úkon: <a href="../../../datove-modely/datovy-78681044.html">Objednaný úkon</a> získaný na vstupu UC.</li></ul></li><li>Uživatel vyplní formulář.</li><li>Uživatel stiskne tlačítko Přidat.</li><li>Systém provede validaci vstupních údajů (viz <a href="101uc02-82116736.html">Validace</a>).<br></li><li>Systém zavře modální okno s formulářem.<br></li></ol></li><li>Systém vytvoří <a href="../../../datove-modely/datovy-78681044.html">Objednané služby</a>, jejich počet se odvíjí od <a href="../../../datove-modely/datovy-78681044.html">Typu dopravy</a> (atribut Typ dopravy entity <a href="../../../datove-modely/datovy-78681044.html">Typ nádoby</a> – atribut Typ nádoby entity <a href="../../../datove-modely/datovy-78681044.html">Objednaná nádoba</a> – atribut Objednaná nádoba entity <a href="../../../datove-modely/datovy-78681044.html">Objednaný úkon</a>):<br><ol><li>Hákový nakladač, Ramenový nakladač: atribut Počet nádob entity <a href="../../../datove-modely/datovy-78681044.html">Objednaná nádoba</a>  – atribut Objednaná nádoba entity <a href="../../../datove-modely/datovy-78681044.html">Objednaný úkon</a>.</li><li>Lisovací vozidlo, Valník, Komunální vozidlo – pilot, Cisterna: 1.</li></ol></li><li>Systém nastaví hodnoty hodnoty jednotlivých atributů pro všechny vytvořené <a href="../../../datove-modely/datovy-78681044.html">Objednané služby</a>.<br><ul><li><strong>Stav</strong>: K naplánování.</li><li><strong>Objednaný úkon</strong>: <a href="../../../datove-modely/datovy-78681044.html">Objednaný úkon</a> získaný na vstupu UC.</li><li><strong>Konkrétní objednaná nádoba</strong>: vychází z počtu <a href="../../../datove-modely/datovy-78681044.html">Objednaných služeb</a> vygenerovaných pro konkrétní <a href="../../../datove-modely/datovy-78681044.html">Objednaný úkon</a> dle počtu odpovídajících <a href="../../../datove-modely/datovy-78681044.html">Objednaných nádob</a>.<br><ul><li>Pokud byla vygenerována právě jedna <a href="../../../datove-modely/datovy-78681044.html">Objednaná služba</a>: 1.</li><li>Jinak: Pořadí <a href="../../../datove-modely/datovy-78681044.html">Objednané služby</a> v rámci vygenerované množiny (poznámka: číselná řada začíná číslem 1).</li></ul></li><li><strong>Datum realizace od</strong>: Hodnota odpovídá způsobu, jakým byl UC spuštěn (viz krok <strong>1</strong>):<br><ul><li>Pokud byl zobrazen formulář pro nastavení pro založení <a href="../../../datove-modely/datovy-78681044.html">Objednané služby</a>: výstupní parametr <strong>Datum od</strong> (viz <a href="#" data-page-title="101UI02: Formulář pro vytvoření objednané služby na výzvu">101UI02: Formulář pro vytvoření objednané služby na výzvu</a>).</li><li>Jinak byla potřebné informace získány na vstupu UC: hodnota vstupního parametru <strong>Datum realizace od</strong>.</li></ul></li><li><strong>Datum realizace do</strong>: Hodnota odpovídá způsobu, jakým byl UC spuštěn (viz krok <strong>1</strong>):<br><ul><li>Pokud byl zobrazen formulář pro nastavení pro založení <a href="../../../datove-modely/datovy-78681044.html">Objednané služby</a>: výstupní parametr <strong>Datum do</strong> (viz <a href="#" data-page-title="101UI02: Formulář pro vytvoření objednané služby na výzvu">101UI02: Formulář pro vytvoření objednané služby na výzvu</a>).</li><li>Jinak byla potřebné informace získány na vstupu UC: hodnota vstupního parametru <strong>Datum realizace do</strong>.</li></ul></li><li><strong>Čas realizace od</strong>: Hodnota odpovídá způsobu, jakým byl UC spuštěn (viz krok <strong>1</strong>):<br><ul><li>Pokud byl zobrazen formulář pro nastavení pro založení <a href="../../../datove-modely/datovy-78681044.html">Objednané služby</a>: výstupní parametr <strong>Čas od</strong> (viz <a href="#" data-page-title="101UI02: Formulář pro vytvoření objednané služby na výzvu">101UI02: Formulář pro vytvoření objednané služby na výzvu</a>).</li><li>Jinak byla potřebné informace získány na vstupu UC: hodnota vstupního parametru <strong>Čas od</strong>.</li></ul></li><li><strong>Čas realizace do</strong>: Hodnota odpovídá způsobu, jakým byl UC spuštěn (viz krok <strong>1</strong>):<br><ul><li>Pokud byl zobrazen formulář pro nastavení pro založení <a href="../../../datove-modely/datovy-78681044.html">Objednané služby</a>: výstupní parametr <strong>Čas do</strong> (viz <a href="#" data-page-title="101UI02: Formulář pro vytvoření objednané služby na výzvu">101UI02: Formulář pro vytvoření objednané služby na výzvu</a>).</li><li>Jinak byla potřebné informace získány na vstupu UC: hodnota vstupního parametru <strong>Čas do</strong>.</li></ul></li><li><strong>Poznámka</strong>: Hodnota odpovídá způsobu, jakým byl UC spuštěn (viz krok <strong>1</strong>):<br><ul><li>Pokud byl zobrazen formulář pro nastavení pro založení <a href="../../../datove-modely/datovy-78681044.html">Objednané služby</a>: výstupní parametr <strong>Poznámka</strong> (viz <a href="#" data-page-title="101UI02: Formulář pro vytvoření objednané služby na výzvu">101UI02: Formulář pro vytvoření objednané služby na výzvu</a>).</li><li>Jinak byla potřebné informace získány na vstupu UC: hodnota vstupního parametru <strong>Poznámka</strong>.</li></ul></li><li><strong>Identifikátor jízdy</strong>: hodnota vstupního parametru <strong>Identifikátor jízdy</strong>.</li><li><strong>Evidenční číslo výchozího vozidla</strong>: hodnota vstupního parametru <strong>Evidenční číslo výchozího vozidla</strong>.</li><li><strong>Výchozí datum realizace</strong>: hodnota vstupního parametru <strong>Výchozí datum realizace</strong>.<strong><br></strong></li><li><strong>Datum vytvoření</strong>: aktuální datum a čas.</li><li><strong>Vytvořil</strong>: právě přihlášený <a href="../../../datove-modely/datovy-78681044.html">Uživatel</a>.</li><li><strong>Vytvořeno uživatelem</strong>: TRUE.<br></li><li><strong>Vytvořeno na výzvu</strong>: TRUE.</li><li><strong>Pořadí v rámci objednávky</strong>: vyžaduje provedení změn konkrétní <a href="../../../datove-modely/datovy-78681044.html">Objednávky</a>, které je součástí nastavení hodnoty tohoto atributu (inkrementace počítadla <a href="../../../datove-modely/datovy-78681044.html">Objednaných služeb</a>).<br><ol><li>Systém inkrementuje hodnotu atributu Počet vygenerovaných objednaných služeb u na vstupu získané <a href="../../../datove-modely/datovy-78681044.html">Objednávky</a>.</li><li>Systém nastaví hodnotu řešeného atributu vytvářené <a href="../../../datove-modely/datovy-78681044.html">Objednané služby</a> dle atributu Počet vygenerovaných objednaných služeb na vstupu získané <a href="../../../datove-modely/datovy-78681044.html">Objednávky</a>.<br></li></ol></li><li><strong>Položka denního výkonu</strong>: NULL.</li><li><strong>Lokace objednané služby</strong>: viz <a href="101uc01-82116734.html">Generování lokací objednané služby</a>.</li><li><strong>Pořadí v rámci objednané služby</strong>: 1.<br></li><li><strong>Následující objednaná služba</strong>: NULL.</li><li><strong>Způsob rozdělení následující objednané služby</strong>: NULL.</li><li><strong>Předchozí objednaná služba</strong>: NULL.</li><li><strong>Způsob rozdělení předchozí objednané služby</strong>: NULL.</li><li><strong>Realizace denního výkonu</strong>: NULL.</li><li><strong>Pořadí v realizaci denního výkonu</strong>: NULL.</li><li><strong>Realizována</strong>: NULL.</li><li><strong>Způsob přeplánování</strong>: NULL.</li><li><strong>Přeplánováno do objednané služby</strong>: NULL.</li><li><strong>Přeplánováno z objednané služby</strong>: NULL.</li></ul></li><li>Systém uloží vytvořené <a href="../../../datove-modely/datovy-78681044.html">Objednané služby</a>.</li><li>TODO: Systém zobrazí informaci o úspěšném vytvoření <a href="../../../datove-modely/datovy-78681044.html">Objednaných služeb</a> na výzvu (TODO: kód hlášky, viz <a href="../../../systemove-78681299.html">Systémové hlášky</a>) – přidat i volání UC pro Toast notifikaci.</li></ol><h1>Alternativní toky událostí</h1><h3>AF01: Údaje ve formuláři nejsou validní</h3><h4>Vstupní podmínky</h4><ul><li>Údaje ve formuláři nejsou validní – viz <a href="101uc02-82116736.html">Validace</a>.</li></ul><h4>Tok události</h4><ol><li>Alternativní tok událostí začíná krokem 4 základního toku událostí.</li><li>Systém zvýrazní ovládací prvky, které neobsahují validní hodnotu.</li><li>Systém zobrazí modální okno s informací, že některé ze zadaných údajů nejsou validní (MSG_ERR_FORM_NOT_VALID, viz <a href="#" data-page-title="Systémové hlášky">Systémové hlášky</a>).</li><li>Uživatel potvrdí chybové hlášení.</li><li>Systém zavře modální okno. <strong>Návrat na krok 2 základního toku událostí</strong>.</li></ol><h1>Výjimkové toky událostí</h1><h3>EF01: Storno</h3><h4>Tok událostí</h4><ol><li>Výjimkový tok událostí může začít kdykoliv.</li><li>KDYŽ uživatel stiskne tlačítko pro zrušení vytváření <a href="../../../datove-modely/datovy-78681044.html">Objednané služby</a> na výzvu.<br><ol><li>Systém zavře modální okno s formulářem. <strong>Konec toku událostí</strong>.</li></ol></li><li>KDYŽ uživatel opustí formulář pro definici pravidla opakování.<br><ol><li><strong>Konec toku událostí</strong>.</li></ol></li></ol><h4>Výstupní podmínky</h4><ul><li>Nebyly vytvořeny <a href="../../../datove-modely/datovy-78681044.html">Objednané služby</a> na výzvu.</li></ul><h1>Výstupní podmínky</h1><ul><li>Byly vytvořeny <a href="../../../datove-modely/datovy-78681044.html">Objednané služby</a> na výzvu.</li></ul><h1>Validace</h1><p>Validace je prováděna průběžně, pokud uživatel vstoupí do pole s možností zadání hodnoty, zadá hodnotu a pole opustí ve stavu, kdy hodnota není validní, je na to upozorněn. Ovládací prvek je graficky zvýrazněn a je doplněno chybové hlášení. Konkrétní validace jednotlivých polí jsou uvedeny v <a href="#" data-page-title="101UI02: Formulář pro vytvoření objednané služby na výzvu"></a>. Hlídána jsou jak konkrétní validační kritéria každé položky, tak i to, zda je položka povinná.</p><p>Jakmile uživatel stiskne tlačítko pro vytvoření <a href="../../../datove-modely/datovy-78681044.html">Objednané služby</a> na výzvu, je provedena validace všech polí. Pokud nejsou všechny údaje v pořádku, jsou chybně vyplněná pole zvýrazněna a doplněna o chybové hlášení.</p><h1>Algoritmy</h1><p>Nejsou.</p><h1>Uživatelské rozhraní</h1><p>Rozložení formuláře je uvedeno v samostatném dokumentu – viz <a href="#" data-page-title="101UI02: Formulář pro vytvoření objednané služby na výzvu"></a>.</p><h1>Revize</h1><h3>28. 1. 2024: Tomáš Nadrchal</h3><table><tbody><tr><th>Odkaz</th><th>Stručný popis změny/doplnění</th></tr><tr><td colspan="1"><a href="101uc02-82116736.html">Spuštění případu užití</a></td><td colspan="1">Revize případů užití, které spouštějí tento UC (naznačeno růžově).</td></tr><tr><td colspan="1"><a href="101uc02-82116736.html">Vstupní data</a></td><td colspan="1">Revize vstupních dat pro spuštění synchronizační komponentou (naznačeno růžově).</td></tr><tr><td colspan="1"><a href="101uc02-82116736.html">Základní tok událostí</a></td><td colspan="1">Revize chování pro spuštění synchronizační komponentou (naznačeno růžově).</td></tr></tbody></table><h3>3. 3. 2023: Tomáš Nadrchal</h3><table><tbody><tr><th>Odkaz</th><th>Stručný popis změny/doplnění</th></tr><tr><td colspan="1"><a href="101uc02-82116736.html">Základní tok událostí</a></td><td colspan="1">Doplněna podpora pro nové typy dopravy (naznačeno modře).</td></tr></tbody></table><h3>15. 3. 2022: Tomáš Nadrchal</h3><table><tbody><tr><th>Odkaz</th><th>Stručný popis změny/doplnění</th></tr><tr><td colspan="1"><a href="101uc02-82116736.html">Základní tok událostí</a></td><td colspan="1">Doplněno nastavení nově přidaných atributů Objednané služby (naznačeno růžově). <em><strong>ID-053</strong></em></td></tr></tbody></table><h3>10. 3. 2022: Tomáš Nadrchal</h3><table><tbody><tr><th>Odkaz</th><th>Stručný popis změny/doplnění</th></tr><tr><td colspan="1"><a href="101uc02-82116736.html">Základní tok událostí</a></td><td colspan="1">Doplněno nastavení nově přidaných atributů Objednané služby (naznačeno modře). <em><strong>ID-054</strong></em></td></tr></tbody></table><h3>27. 3. 2021: Tomáš Nadrchal</h3><p>Provedeny změny v rámci celého dokumentu (naznačeno modře). Viz <a href="../../../rp-sprava-pozadavku/id-89065686.html">ID-040: Násobné rozdělení objednané služby</a>.</p><h3>9. 1. 2020: Tomáš Nadrchal</h3><table><tbody><tr><th>Odkaz</th><th>Stručný popis změny/doplnění</th></tr><tr><td colspan="1"><a href="101uc02-82116736.html">Základní tok událostí</a></td><td colspan="1">Aktualizován výčet pro nastavení výchozích hodnot atributů <a href="../../../datove-modely/datovy-78681044.html">Objednané služby</a> (naznačeno modře).</td></tr></tbody></table><h3>10. 9. 2019: Tomáš Nadrchal</h3><table><tbody><tr><th>Odkaz</div></th><th>Stručný popis změny/doplnění</div></th></tr><tr><td colspan="1"><a href="101uc02-82116736.html">Základní tok událostí</a></td><td colspan="1">Doplněn aktuální popis chování.</td></tr><tr><td colspan="1"><a href="101uc02-82116736.html">Alternativní toky událostí</a></td><td colspan="1">Doplněno chybové hlášení při zadání údajů, které nejsou validní.</td></tr></tbody></table>
</div>
</body>
</html>
