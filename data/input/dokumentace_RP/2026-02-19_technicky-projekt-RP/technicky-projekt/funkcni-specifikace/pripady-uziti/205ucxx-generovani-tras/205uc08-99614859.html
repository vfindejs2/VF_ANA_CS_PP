<!DOCTYPE html>
<html lang="cs">
<head>
  <meta charset="utf-8">
  <title>205UC08: Provést aktualizaci trasy denního výkonu</title>
</head>
<body>
<div class="wiki-content">
<p></p><h1>Stručný popis, cíl</h1><p>Cílem případu užití je aktualizace trasy v případě, že dojde např. k modifikaci odpovídajícího denního výkonu. Součástí UC je i odeslání notifikace o aktualizaci trasy na právě přihlášené zařízení.</p><p>Poznámka: Podmínkou spuštění případu užití je skutečnost, že je na trasu (resp. denní výkon) přihlášeno zařízení.</p><h1>Seznam aktérů</h1><table><tbody><tr><th>Aktér</th><th colspan="1">Poznámka</th></tr><tr><td colspan="1">Uživatel</td><td colspan="1">–</td></tr></tbody></table><p>Poznámka: Úplný přehled aktérů je zobrazen samostatně, viz <a href="#" data-page-title="Přehled aktérů"></a>.</p><h1>Spuštění případů užití</h1><p>Uživatel zadá požadavek na aktualizaci trasy denního výkonu, a to jedním z uvedených způsobů:</p><ul><li>Uživatel provede editaci denního výkonu (viz <a href="#" data-page-title="200UC02: Upravit denní výkon">200UC02: Upravit denní výkon</a>).</li><li>Uživatel provede vložení položky na denní výkon (viz <a href="#" data-page-title="200UC25: Vložit položku do denního výkonu"></a>).</li><li>Uživatel provede odebrání položky z denního výkonu (viz <a href="#" data-page-title="200UC26: Odebrat položky z denního výkonu"></a>).</li><li>Uživatel provede změnu pořadí položek denního výkonu (viz <a href="#" data-page-title="200UC27: Změnit pořadí položky v denním výkonu"></a>).</li><li>Uživatel provede změnu přestávky v denním výkonu (viz <a href="#" data-page-title="200UC32: Upravit přestávku denního výkonu"></a>).</li><li>Uživatel provede změnu provozní doby denního výkonu (viz <a href="#" data-page-title="200UC33: Upravit provozní dobu denního výkonu">200UC33: Upravit provozní dobu denního výkonu</a>).</li><li>Uživatel provede vložení položek na denní výkon (viz <a href="#" data-page-title="200UC47: Vložit položky do denního výkonu"></a>).</li><li>Uživatel provede změnu doby manipulace lokace objednané služby vložené na denním výkonu (viz <a href="#" data-page-title="200UC50: Změnit dobu manipulace"></a>).</li><li>Uživatel provede sloučení objednané služby, která je vložena na denním výkonu (viz <a href="#" data-page-title="200UC55: Sloučit objednanou službu"></a>).</li><li>Uživatel provede změnu pořadí lokací v objednané službě, která je vložena na denním výkonu (viz <a href="#" data-page-title="201UC09: Změnit pořadí lokace v objednané službě"></a>).</li><li>Uživatel provede přidání lokace typu jiné do objednané služby, která je vložena na denním výkonu (viz <a href="#" data-page-title="201UC10: Přidat lokaci typu jiné do objednané služby"></a>).</li><li>Uživatel provede přidání lokace typu časový interval do objednané služby, která je vložena na denním výkonu (viz <a href="#" data-page-title="201UC11: Přidat lokaci typu časový interval do objednané služby"></a>).</li><li>Uživatel provede odebrání lokace z objednané služby, která je vložena na denním výkonu (viz <a href="#" data-page-title="201UC12: Odebrat lokaci z objednané služby"></a>). </li><li>Uživatel provede změnu časového okna u lokace objednané služby, která je vložena na denní výkon (viz <a href="#" data-page-title="201UC13: Změnit časové okno u lokace objednané služby"></a>).</li><li>Uživatel provede zrušení časového okna u lokace objednané služby, která je vložena na denní výkon (viz <a href="#" data-page-title="201UC14: Zrušit časové okno u lokace objednané služby"></a>).</li><li>Uživatel provede změnu adresy u lokace objednané služby, který je vložena na denní výkon (viz <a href="#" data-page-title="201UC17: Změnit adresu u lokace objednané služby"></a>).</li></ul><h2>Vstupní podmínky</h2><ul><li>Na vstupu získaný <a href="../../../datove-modely/datovy-78681044.html">Denní výkon</a> (vstupní parametr Denní výkon) má nastavený datum realizace (atribut Datum realizace) na dnešní datum.</li><li>Na vstupu získaný <a href="../../../datove-modely/datovy-78681044.html">Denní výkon</a> (vstupní parametr Denní výkon) je v jednom uvedených stavů (atribut Stav):<br><ul><li>Schválený,</li><li>Plněný.</li></ul></li><li>Existuje alespoň jeden záznam o <a href="../../../datove-modely/datovy-78681044.html">Přihlášeném zařízení na denním výkonu</a>, který splňuje všechny dále uvedené podmínky zároveň:<br><ul><li>Jedná se o aktivní záznam.</li><li>Hodnota atributu Denní výkon odpovídá na vstupu získanému <a href="../../../datove-modely/datovy-78681044.html">Dennímu výkonu</a> (vstupní parametr Denní výkon).</li></ul></li></ul><h2>Vstupní data</h2><table><tbody><tr><th>Vstupní parametr</div></th><th>Datový typ</div></th><th colspan="1">Povinnost</div></th><th>Popis</div></th><th colspan="1">Poznámka</div></th></tr><tr><td colspan="1">Denní výkon</td><td colspan="1"><a href="../../../datove-modely/datovy-78681044.html">Denní výkon</a></td><td colspan="1">Ano</td><td colspan="1">Denní výkon, pro který je požadováno provedení aktualizace trasy.</td><td colspan="1">–</td></tr></tbody></table><h1>Základní tok událostí</h1><ol><li>Systém nalezne takový záznam o <a href="../../../datove-modely/datovy-78681044.html">Přihlášeném zařízení na denním výkonu</a>, který splňuje všechny dále uvedené podmínky zároveň:<br><ul><li>Jedná se o aktivní záznam.</li><li>Hodnota atributu <strong>Denní výkon</strong> odpovídá na vstupu získanému <a href="../../../datove-modely/datovy-78681044.html">Dennímu výkonu</a> (vstupní parametr <strong>Denní výkon</strong>).<br></li></ul></li><li>Systém aktualizuje záznam o <a href="../../../datove-modely/datovy-78681044.html">Přihlášeném zařízení na denním výkonu</a> – spustí <a href="205uc04-99123475.html">205UC04: Upravit záznam o přihlášeném zařízení na denním výkonu</a>, na vstup jsou předány následující informace:<br><ul><li><strong>Editovaný záznam o přihlášeném zařízení na denním výkonu</strong>: právě zkoumaná instance entity <a href="../../../datove-modely/datovy-78681044.html">Přihlášené zařízení na denním výkonu</a> (viz krok 1).<br></li><li><strong>Změny v záznamu o přihlášeném zařízení na denním výkonu</strong>: hodnoty jednotlivých atributů entity <a href="../../../datove-modely/datovy-78681044.html">Přihlášené zařízení na denním výkonu</a> jsou změněny následovně (hodnota v rámci neuvedených atributů je zachována):<br><ul><li><strong>Trasa</strong>: pokud je pro právě zkoumané <a href="../../../datove-modely/datovy-78681044.html">Přihlášené zařízení na denním výkonu</a> (viz krok 1) k dispozici hodnota atributu <strong>Trasa</strong>:<ul><li>Systém vygeneruje trasu pro odpovídající <a href="../../../datove-modely/datovy-78681044.html">Denní výkon</a> – spustí <a href="205uc01-98241179.html">205UC01: Generovat trasu denního výkonu</a>, na vstup jsou předány následující informace:<br><ul><li><strong>Verze</strong>: hodnota atributu <strong>Verze trasy</strong> právě zkoumané instance entity <a href="../../../datove-modely/datovy-78681044.html">Přihlášené zařízení na denním výkonu</a> (viz krok 1).<br></li><li><strong>Denní výkon</strong>: na vstupu získaný <a href="../../../datove-modely/datovy-78681044.html">Denní výkon</a> (vstupní parametr <strong>Denní výkon</strong>).<br></li></ul></li></ul></li><li><strong>Souhrnný itinerář trasy</strong>: pokud je pro právě zkoumané <a href="../../../datove-modely/datovy-78681044.html">Přihlášené zařízení na denním výkonu</a> (viz krok 1) k dispozici hodnota atributu <strong>Souhrnný itinerář trasy</strong>:<ul><li>Systém vygeneruje souhrnný itinerář trasy pro odpovídající <a href="../../../datove-modely/datovy-78681044.html">Denní výkon</a> – spustí <a href="205uc10-115999616.html">205UC10: Generovat souhrnný itinerář trasy denního výkonu</a>, na vstup jsou předány následující informace:<ul><li><strong>Verze</strong>: hodnota atributu <strong>Verze souhrnného itineráře trasy</strong> právě zkoumané instance entity <a href="../../../datove-modely/datovy-78681044.html">Přihlášené zařízení na denním výkonu</a> (viz krok 1).</li><li><strong>Denní výkon</strong>: na vstupu získaný <a href="../../../datove-modely/datovy-78681044.html">Denní výkon</a> (vstupní parametr <strong>Denní výkon</strong>).</li></ul></li></ul></li><li><strong>Datum poslední změny trasy</strong>: datum poslední změny na vstupu získaného <a href="../../../datove-modely/datovy-78681044.html">Denního výkonu</a> (vstupní parametr <strong>Denní výkon</strong>).</li></ul></li></ul></li><li>Systém nalezne takový záznam o <a href="../../../datove-modely/datovy-78681044.html">Aktuální verzi komunikačního protokolu zařízení</a>, který splňuje všechny dále uvedené podmínky zároveň:<br><ul><li>Jedná se o aktivní záznam.<br></li><li>Hodnota atributu Přihlášené zařízení je rovna hodnotě atributu Přihlášené zařízení právě zkoumané instance entity <a href="../../../datove-modely/datovy-78681044.html">Přihlášené zařízení na denním výkonu</a> (viz krok 1).</li></ul></li><li>Pokud je nalezen záznam o <a href="../../../datove-modely/datovy-78681044.html">Aktuální verzi komunikačního protokolu zařízení</a>, systém odešle notifikaci o aktualizaci trasy – spustí <a href="#" data-page-title="602UC11: Odeslat notifikaci o akci nad trasou na FOB">602UC11: Odeslat notifikaci o akci nad trasou na FOB</a>, na vstup jsou předány následující informace:<br><ul><li>Identifikátor objektu: hodnota atributu Přihlášené zařízení právě zkoumané instance entity <a href="../../../datove-modely/datovy-78681044.html">Přihlášené zařízení na denním výkonu</a> (viz krok 1).<br></li><li>Verze komunikačního protokolu: hodnota atributu Verze komunikačního protokolu právě zkoumané instance entity <a href="../../../datove-modely/datovy-78681044.html">Aktuální verzi komunikačního protokolu zařízení</a> (viz krok 3).</li><li>Identifikátor trasy: interní identifikátor na vstupu získaného <a href="../../../datove-modely/datovy-78681044.html">Denního výkonu</a> (vstupní parametr Denní výkon).</li><li>Akce nad trasou: CHANGE (viz <a href="../../../datove-modely/datovy-78681044.html">Akce nad trasou</a>).</li></ul></li></ol><p>Poznámka: Soubory s informacemi o trase jsou aktualizovány pouze v případě, že již existují. Pokud např. není k dispozici souhrnný itinerář trasy, není generován ani po modifikaci odpovídajícího denního výkonu.</p><h1>Alternativní toky událostí</h1><p>–</p><h1>Výjimkové toky událostí</h1><p>–</p><h1>Ukončení případu užití</h1><h2>Výstupní podmínky</h2><p>Došlo k aktualizaci trasy a souhrnného itineráře trasy denního výkonu. Pokud jsou splněny další podmínky, došlo k odeslání této informace na přihlášené zařízení.</p><h2>Výstupní data</h2><p>–</p><h1>Algoritmy</h1><p>–</p><h1>Validace</h1><p>–</p><h1>Uživatelské rozhraní</h1><p>–</p><h1>Grafický návrh</h1><p>–</p><h1>Revize</h1><h3>31. 10. 2023: Tomáš Nadrchal</h3><table><tbody><tr><th>Odkaz</div></div></div></div></th><th>Stručný popis změny/doplnění</div></div></div></div></th></tr><tr><td colspan="1"><a href="205uc08-99614859.html">Základní tok událostí</a></td><td colspan="1">Změny související s revizí verzování trasy a souhrnného itineráře (naznačeno růžově).</td></tr></tbody></table><h3>21. 9. 2023: Tomáš Nadrchal</h3><table><tbody><tr><th>Odkaz</div></div></div></div></th><th>Stručný popis změny/doplnění</div></div></div></div></th></tr><tr><td colspan="1"><a href="205uc08-99614859.html">Základní tok událostí</a></td><td colspan="1">Doplněno nastavení nového atributu při aktualizaci trasy (naznačeno modře).</td></tr></tbody></table>
</div>
</body>
</html>
