<!DOCTYPE html>
<html lang="cs">
<head>
  <meta charset="utf-8">
  <title>603UC22: Zahájit export záznamů</title>
</head>
<body>
<div class="wiki-content">
<p><strong>Rozpracováno – banky!</strong></p><p>Nahrazuje <a href="#" data-page-title="601UC01: Export nových zákazníků"></a> (viz <a href="#" data-page-title="Zpětná kompatibilita synchronizační komponenty"></a>).</p><p></p><h1>Stručný popis, cíl UC</h1><p>Cílem případu užití je zahájení exportu dat do integrační databáze při současném zajištění orchestrace přenosu těchto dat.</p><p>Poznámka: Synchronizace je připravena pro data ze systému Helios (zákazník MPG SK).</p><h1>Seznam aktérů</h1><table><tbody><tr><th>Aktér</th><th>Poznámka</th></tr><tr><td>Uživatel</td><td><p>K provedení akce dochází při uložení <a href="../../../datove-modely/datovy-78681044.html">Objednávky</a> s nově založeným <a href="../../../datove-modely/datovy-78681044.html">Zákazníkem</a> k realizaci.</p></td></tr></tbody></table><h1>Spuštění případu užití</h1><p>Uživatel zadá požadavek na zahájení exportu záznamů, a to jedním u dále uvedených způsobů:</p><ul><li>Uživatel zadá požadavek na export záznamů uložením objednávky k realizaci při jejím založení (viz <a href="#" data-page-title="100UC01: Založit objednávku"></a>; tato objednávka obsahuje nově založeného zákazníka).</li><li>Uživatel zadá požadavek na export záznamů uložením objednávky k realizaci při její editaci (viz <a href="#" data-page-title="100UC03: Upravit objednávku">100UC03: Upravit objednávku</a>; tato objednávka obsahuje nově založeného zákazníka).</li></ul><h2>Vstupní podmínky</h2><p>Je nastavena konfigurace pro synchronizaci:</p><ul><li>napojení integrační databáze.</li></ul><h2>Vstupní data</h2><table><tbody><tr><th>Vstupní parametr</div></div></div></th><th>Datový typ</div></div></div></th><th colspan="1">Povinnost</div></div></div></th><th>Popis</div></div></div></th><th colspan="1">Poznámka</div></div></div></th></tr><tr><td colspan="1">Zákazník</td><td colspan="1"><a href="../../../datove-modely/datovy-78681044.html">Zákazník</a></td><td colspan="1">Ano</td><td colspan="1">Zákazník, který má být synchronizován.</td><td colspan="1">Zákazník založený v aplikaci RoadPlan po uložení objednávky, ve které figuruje, k realizaci.</td></tr></tbody></table><h1>Základní tok událostí</h1><ol><li>Systém postupně odesílá na integrační databázi taková data, která souvisí se synchronizovaným <a href="../../../datove-modely/datovy-78681044.html">Zákazníkem</a> – je pak dodrženo stanovené pořadí na úrovni jednotlivých entit (viz <a href="603uc22-109085277.html">ALG01: Pořadí entit při synchronizaci</a>):<br><ul><li><a href="#" data-page-title="603UC03: Odeslat zákazníky">603UC03: Odeslat zákazníky</a>,</li><li><a href="#" data-page-title="603UC05: Odeslat osoby zákazníka">603UC05: Odeslat osoby zákazníka</a>,</li><li><a href="#" data-page-title="603UC07: Odeslat bankovní spojení">603UC07: Odeslat bankovní spojení</a>,</li><li><a href="#" data-page-title="603UC09: Odeslat banky">603UC09: Odeslat banky</a>,</li><li><a href="#" data-page-title="603UC11: Odeslat místa realizace">603UC11: Odeslat místa realizace</a>,</li><li><a href="#" data-page-title="603UC20: Odeslat adresy">603UC20: Odeslat adresy</a>.</li></ul></li><li>Systém označí na vstupu získaného <a href="../../../datove-modely/datovy-78681044.html">Zákazníka</a> (vstupní parametr Zákazník) jako odeslaného – nastaví hodnotu atributu Odeslán ke kontrole na TRUE. </li></ol><h1>Alternativní toky událostí</h1><p>–</p><h1>Výjimkové toky událostí</h1><h2>EF01: Export záznamů skončil chybou</h2><h3>Vstupní podmínky</h3><ul><li>Při nahrání dat na rozhraní došlo k chybě.</li></ul><h3>Tok událostí</h3><ol><li>Výjimkový tok událostí začíná krokem 1 základního toku událostí.</li><li>Systém provede logování informace o chybě nahrání dat do databáze (datum a čas, typ entity, tvar dotazu, chybová zpráva).</li><li>Případ užití končí.</li></ol><p>Poznámka: Odpovídající chybové hlášení může být získáno přímo v rámci volaných případů užití.</p><h3>Výstupní podmínky</h3><ul><li>Nebyla provedena synchronizace, uvedená skutečnost bylo logována.</li></ul><h1>Ukončení případu užití</h1><h2>Výstupní podmínky</h2><p>Byla provedena synchronizace na vstupu získaného <a href="../../../datove-modely/datovy-78681044.html">Zákazníka</a> (včetně instancí souvisejících entit).</p><h2>Výstupní data</h2><p>–</p><h1>Algoritmy</h1><h2>ALG01: Pořadí entit při synchronizaci</h2><p>Při synchronizaci je nutné dodržovat pořadí odesílaných informací – záznamy některých entit musí být odeslány přednostně, protože mohou být následně odkazovány. Musí být tedy dodržena v tabulce uvedená sekvence.</p><table><tbody><tr><th>#</div></th><th>Entita</div></th><th>Odpovídající entita rozhraní</div></th><th>Závislosti</div></th><th colspan="1">Poznámka</div></th></tr><tr><td colspan="1">1</td><td colspan="1"><a href="../../../datove-modely/datovy-78681044.html">Banka</a></td><td colspan="1"><p>BankCandidate</p></td><td colspan="1">–</td><td colspan="1"><p>TODO: Jak funguje odesílání bank nyní? Banky není možné v RP zakládat.</p><p>Pro získané banky je volán <a href="#" data-page-title="603UC09: Odeslat banky">603UC09: Odeslat banky</a>, na vstup jsou předány následující informace:</p><ul><li>Banky: získané <a href="../../../datove-modely/datovy-78681044.html">Banky</a>.</li></ul></td></tr><tr><td colspan="1"> </td><td colspan="1"><a href="../../../datove-modely/datovy-78681044.html">Adresa</a></td><td colspan="1"><p>AddressCandidate</p></td><td colspan="1">–</td><td colspan="1"><p>Synchronizovány jsou takové <a href="../../../datove-modely/datovy-78681044.html">Adresy</a>, které splňují všechny dále uvedené podmínky zároveň:</p><ul><li>Jedná se o záznam odkazovaný z alespoň jedné instance řešených entit:<br><ul><li>Hodnota atributu Adresa sídla u odpovídajícího <a href="../../../datove-modely/datovy-78681044.html">Zákazníka</a>.</li><li>Hodnota atributu Adresa entity <a href="../../../datove-modely/datovy-78681044.html">Místo realizace</a> – pro taková aktivní <a href="../../../datove-modely/datovy-78681044.html">Místa realizace</a>, která odkazují na odpovídajícího <a href="../../../datove-modely/datovy-78681044.html">Zákazníka</a> (viz specifikace synchronizovaných <a href="../../../datove-modely/datovy-78681044.html">Míst realizace</a> v této tabulce). </li></ul></li></ul><p>Pro získané adresy je volán <a href="#" data-page-title="603UC20: Odeslat adresy">603UC20: Odeslat adresy</a>, na vstup jsou předány následující informace:</p><ul><li>Adresy: získané <a href="../../../datove-modely/datovy-78681044.html">Adresy</a>.</li></ul></td></tr><tr><td colspan="1">2</td><td colspan="1"><a href="../../../datove-modely/datovy-78681044.html">Zákazník</a></td><td colspan="1"><p>CustomerCandidate</p></td><td colspan="1"><a href="../../../datove-modely/datovy-78681044.html">Adresa</a></td><td colspan="1"><p>Synchronizován je na vstupu získaný <a href="../../../datove-modely/datovy-78681044.html">Zákazník</a> (k synchronizaci pak dochází i v případě, kdy by se nejednalo o aktivní záznam).</p><p>Pro získaného zákazníka je volán <a href="#" data-page-title="603UC03: Odeslat zákazníky">603UC03: Odeslat zákazníky</a>, na vstup jsou předány následující informace:</p><ul><li>Zákazníci: na vstupu získaný <a href="../../../datove-modely/datovy-78681044.html">Zákazník</a> (vstupní parametr Zákazník).</li></ul></td></tr><tr><td colspan="1">3</td><td colspan="1"><a href="../../../datove-modely/datovy-78681044.html">Osoba zákazníka</a></td><td colspan="1"><p>CustomerPersonCandidate</p></td><td colspan="1"><a href="../../../datove-modely/datovy-78681044.html">Zákazník</a></td><td colspan="1"><p>Synchronizovány jsou takové <a href="../../../datove-modely/datovy-78681044.html">Osoby zákazníka</a>, které splňují všechny dále uvedené podmínky zároveň:</p><ul><li>Jedná se o aktivní záznam.</li><li>Hodnota atributu Zákazník odpovídá na vstupu získanému <a href="../../../datove-modely/datovy-78681044.html">Zákazníkovi</a> (vstupní parametr Zákazník).</li></ul><p>Pro získané osoby zákazníka je volán <a href="#" data-page-title="603UC05: Odeslat osoby zákazníka">603UC05: Odeslat osoby zákazníka</a>, na vstup jsou předány následující informace:</p><ul><li>Osoby zákazníka: získané <a href="../../../datove-modely/datovy-78681044.html">Osoby zákazníka</a>.</li></ul></td></tr><tr><td colspan="1"> </td><td colspan="1"><a href="../../../datove-modely/datovy-78681044.html">Bankovní spojení</a></td><td colspan="1"><p>BankAccountCandidate</p></td><td colspan="1"><a href="../../../datove-modely/datovy-78681044.html">Banka</a>, <a href="../../../datove-modely/datovy-78681044.html">Zákazník</a></td><td colspan="1"><p>Synchronizována jsou taková <a href="../../../datove-modely/datovy-78681044.html">Bankovní spojení</a>, která splňují všechny dále uvedené podmínky zároveň:</p><ul><li>Jedná se o aktivní záznam.</li><li>Hodnota atributu Zákazník odpovídá na vstupu získanému <a href="../../../datove-modely/datovy-78681044.html">Zákazníkovi</a> (vstupní parametr Zákazník).</li></ul><p>Pro získaná bankovní spojení je volán <a href="#" data-page-title="603UC07: Odeslat bankovní spojení">603UC07: Odeslat bankovní spojení</a>, na vstup jsou předány následující informace:</p><ul><li>Bankovní spojení: získaná <a href="../../../datove-modely/datovy-78681044.html">Bankovní spojení</a>.</li></ul></td></tr><tr><td colspan="1"> </td><td colspan="1"><a href="../../../datove-modely/datovy-78681044.html">Místo realizace</a></td><td colspan="1"><p>CustomerSiteCandidate</p></td><td colspan="1"><a href="../../../datove-modely/datovy-78681044.html">Adresa</a>, <a href="../../../datove-modely/datovy-78681044.html">Zákazník</a></td><td colspan="1"><p>Synchronizována jsou taková <a href="../../../datove-modely/datovy-78681044.html">Místa realizace</a>, která splňují všechny dále uvedené podmínky zároveň:</p><ul><li>Jedná se o aktivní záznam.</li><li>Hodnota atributu Zákazník odpovídá na vstupu získanému <a href="../../../datove-modely/datovy-78681044.html">Zákazníkovi</a> (vstupní parametr Zákazník).</li></ul><p>Pro získaná místa realizace je volán <a href="#" data-page-title="603UC11: Odeslat místa realizace">603UC11: Odeslat místa realizace</a>, na vstup jsou předány následující informace:</p><ul><li>Místa realizace: získaná <a href="../../../datove-modely/datovy-78681044.html">Místa realizace</a>.</li></ul></td></tr></tbody></table><h1>Validace</h1><p>–</p><h1>Uživatelské rozhraní</h1><p>–</p><h1>Grafický návrh</h1><p>–</p><h1>Revize</h1><p>–</p>
</div>
</body>
</html>
