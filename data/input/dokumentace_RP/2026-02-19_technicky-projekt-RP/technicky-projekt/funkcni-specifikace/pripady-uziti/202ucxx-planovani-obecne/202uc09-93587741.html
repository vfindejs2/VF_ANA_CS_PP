<!DOCTYPE html>
<html lang="cs">
<head>
  <meta charset="utf-8">
  <title>202UC09: Odebrat neschválené denní výkony</title>
</head>
<body>
<div class="wiki-content">
<p></p><h1>Stručný popis, cíl UC</h1><p>Případ užití slouží k mazání denních výkonů, které nebyly ani v den realizace uživatelem potvrzeny jako schválené. Důvodem je především značné množství těchto denních výkonů – ne na všech provozovnách je plánování denních výkonů k dispozici (denní výkony vznikají, ale není možné s nimi pracovat). Algoritmus je pak spouštěn každý den po půlnoci, tedy ve chvíli, kdy již proběhlo ukončení realizace schválených denních výkonů.</p><ol><li>Systém nalezne všechny neschválené denní výkony v minulosti.</li><li>Pokud je na některém z nalezených denních výkonů vložena alespoň jedna položka denního výkonu, dojde k vyčištění takového denního výkonu (případné objednané služby jsou dále k dispozici pro naplánování).</li><li>Následně dojde ke smazání všech nalezených denních výkonů.</li></ol><p>Poznámka: Případ užití nahrazuje <a href="#" data-page-title="400UC19: Zrušení neschválených denních výkonů"></a>.</p><h1>Seznam aktérů</h1><table><tbody><tr><th>Aktér</th><th>Popis</th><th colspan="1">Typická role</th></tr><tr><td colspan="1">Čas</td><td colspan="1">Komponenta systému RoadPlan, která dle nastavených parametrů spouští v požadovaném čase danou úlohu.</td><td colspan="1">–</td></tr></tbody></table><h1>Spuštění případu užití</h1><p>Nastane čas pro spuštění UC – začátek aktuálního dne.</p><h1>Vstupní podmínky</h1><p>Uživatel má následující <a href="../../../uzivatelska-78681297.html">oprávnění na moduly a UC</a>:</p><ul><li>Plánování denních výkonů.</li></ul><p>Uživatel má následující <a href="../../../uzivatelska-78681297.html">oprávnění na typ entit</a>:</p><ul><li>Denní výkony - zobrazení a modifikace,</li><li>Objednané služby - zobrazení a modifikace.</li></ul><h1>Základní tok událostí</h1><ol><li>Systém nalezne takové <a href="../../../datove-modely/datovy-78681044.html">Denní výkony</a>, které splňují všechny dále uvedené podmínky zároveň.<br><ul><li>Atribut <strong>Stav</strong> nabývá hodnoty <strong>Plánovaný</strong>.</li><li>Atribut <strong>Datum realizace</strong> je menší než datum spuštění UC (ke spuštění dochází v ranních hodinách, odebíráme tedy včerejší <a href="../../../datove-modely/datovy-78681044.html">Denní výkony</a> či starší).</li></ul></li><li>Pokud není nalezen žádný <a href="../../../datove-modely/datovy-78681044.html">Denní výkon</a>:<br><ol><li>Případ užití končí.</li></ol></li><li>Pro všechny nalezené <a href="../../../datove-modely/datovy-78681044.html">Denní výkony</a>:<br><ol><li>Systém vyhodnotí, zda pro právě zkoumaný <a href="../../../datove-modely/datovy-78681044.html">Denní výkon</a> existuje výpůjčka – hledá takové záznamy, které splňuje všechny dále uvedené podmínky:<br><ul><li>Hodnota atributu <strong>Datum realizace</strong> odpovídá datu realizace právě zkoumaného <a href="../../../datove-modely/datovy-78681044.html">Denního výkonu</a> (atribut <strong>Datum realizace</strong>).</li><li>Hodnota atributu <strong>Vozidlo</strong> odpovídá <a href="../../../datove-modely/datovy-78681044.html">Objektu</a>, který je odkazován v rámci právě zkoumaného <a href="../../../datove-modely/datovy-78681044.html">Denního výkonu</a> (atribut <strong>Vozidlo</strong>).</li><li>Hodnota atributu <strong>Stav</strong> je nastavena na <strong>Vypůjčený</strong> (viz <a href="../../../datove-modely/datovy-78681044.html">Stav denního výkonu</a>).</li></ul></li><li>Systém zpracuje právě zkoumaný <a href="../../../datove-modely/datovy-78681044.html">Denní výkony</a> – provede jeho přípravu na odebrání.<br><ol><li>Systém získá odpovídající <a href="../../../datove-modely/datovy-78681044.html">Položky denního výkonu</a> – hledá takové záznamy, které splňují všechny dále uvedené podmínky zároveň:<br><ul><li>Hodnota atributu <strong>Denní výkon</strong> odkazuje na právě zkoumaný <a href="../../../datove-modely/datovy-78681044.html">Denní výkon</a>.</li><li>Daná <a href="../../../datove-modely/datovy-78681044.html">Položka denního výkonu</a> <strong>není</strong> odkazována v rámci atributu <strong>Počáteční položka denního výkonu</strong> právě zkoumaného <a href="../../../datove-modely/datovy-78681044.html">Denního výkonu</a> (nejedná se o start).</li><li>Daná <a href="../../../datove-modely/datovy-78681044.html">Položka denního výkonu</a> <strong>není</strong> odkazována v rámci atributu <strong>Koncová položka denního výkonu</strong> právě zkoumaného <a href="../../../datove-modely/datovy-78681044.html">Denního výkonu</a> (nejedná se o cíl).<br></li></ul></li><li>Systém odebere všechny položky z právě zkoumaného <a href="../../../datove-modely/datovy-78681044.html">Denního výkonu</a> – spustí <a href="#" data-page-title="200UC26: Odebrat položky z denního výkonu"></a>, na vstup jsou předány následující informace:<br><ul><li><strong>Položky denního výkonu</strong>: získané <a href="../../../datove-modely/datovy-78681044.html">Položky denního výkonu</a> (viz krok <strong>3.b.i</strong>).<br></li></ul></li></ol></li><li>Systém odebere právě zkoumaný <a href="../../../datove-modely/datovy-78681044.html">Denní výkon</a>.</li><li>Pokud byl nalezen duplicitní <a href="../../../datove-modely/datovy-78681044.html">Denní výkon</a> k tomu právě zkoumanému (viz krok <strong>3.a</strong>):<br><ol><li>Systém odebere tento duplicitní <a href="../../../datove-modely/datovy-78681044.html">Denní výkon</a> (měl by být k dispozici právě 1 záznam, ten by pak neměl obsahovat žádné <a href="../../../datove-modely/datovy-78681044.html">Položky denního výkonu</a>).</li></ol></li></ol></li></ol><h1>Alternativní toky událostí</h1><p>–</p><h1>Výjimkové toky událostí</h1><p>–</p><h1>Výstupní podmínky</h1><p>Všechny neschválené <a href="../../../datove-modely/datovy-78681044.html">Denní výkony</a> v minulosti jsou odebrány. Případné <a href="../../../datove-modely/datovy-78681044.html">Objednané služby</a> jsou připraveny k opětovnému naplánování.</p><h1>Validace</h1><p>–</p><h1>Algoritmy</h1><p>–</p><h1>Uživatelské rozhraní</h1><p>–</p><h1>Revize</h1><h2>8. 1. 2025: Tomáš Nadrchal</h2><table><tbody><tr><th>Odkaz</th><th>Stručný popis změny</th></tr><tr><td colspan="1"><a href="202uc09-93587741.html">Základní tok událostí</a></td><td colspan="1">Doplněno chování související s vypůjčenými denními výkony (naznačeno modře).</td></tr></tbody></table>
</div>
</body>
</html>
