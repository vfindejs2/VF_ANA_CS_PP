<!DOCTYPE html>
<html lang="cs">
<head>
  <meta charset="utf-8">
  <title>ID-100: Migrace objednávek do Helios</title>
</head>
<body>
<div class="wiki-content">
<p></p><h1>Požadavek</h1><p>Cílem požadavku je migrace objednávek aplikace RP z WinyX do Helios prostředí. Vzhledem k jejich množství u některých provozoven není vhodný jejich ruční přenos…</p><ul><li>Přenášeny pak budou pouze hlavičky těchto objednávek. Samotné objednané služby migrovat nebudeme.</li><li>Seznam objednávek, které mají být migrovány, pak bude získán přímo od zákazníka.</li></ul><p>Poznámka: Chceme přenést co možná nejvíce informací – při zachování rozumné pracnosti.</p><h1>Aktuální stav</h1><p>Dosud byly objednávky přenášeny ručně – uživatelé měli k dispozici archivní prostředí, podle kterého aktivní objednávky zadávali.</p><p>Poznámka: Důvodem byla složitost migrace – některé z odkazovaných záznamů bylo složité párovat automaticky (např. MR či LM).</p><h1>Návrh řešení</h1><p>Pro zakládání objednávek bude připraven skript, který načte data z WinyX prostředí aplikace RP. Způsob získání těchto dat bude konzultován s vývojáři.</p><ul><li>Data můžeme načíst přímo z DB daného prostředí aplikace RP (dle dodaného seznamu).</li><li>Stejně tak můžeme data načítat z importního souboru, který si připravíme a naplníme.</li><li>Pro některé typy záznamů však bude potřeba připravit mapovací tabulky (např. LM).</li></ul><p>Část dat přeneseme jednoduše, pouze je načteme z WinyX prostředí. U některých záznamů však budeme muset provést mapování na odpovídající data v Helios prostředí…</p><table><tbody><tr><th>Entita</th><th>Stručný popis</th><th>Nutnost mapování</th><th>Poznámka</th></tr><tr><td>Objednávka</td><td>Hlavička objednávky pro nastavení zákazníka.</td><td><ul><li>Objednavatel</li><li>Bankovní spojení</li><li>Statutární zástupce</li><li>Zástupce objednatele</li></ul></td><td><p>Pozor, číslo objednávky nebude zachováno – bude odpovídat číselné řadě Helios prostředí.</p><p> Je požadováno přenést informaci o původním čísle objednávky? Může být doplněno do interní poznámky.</p><p>Budou přeneseny také informace o tom, kdo provedl založení či poslední změnu objednávky (uživatelé mají stejná ID napříč prostředími).</p><p>TODO: Objednávky budou ve stavu na realizaci – možné editovat uživateli → zjednodušit migraci.</p></td></tr><tr><td>Položka objednávky</td><td>Dílčí položky dané objednávky.</td><td><ul><li>Rámcová smlouva</li><li>Místo realizace</li></ul></td><td><p>U rámcové smlouvy je na straně MDB k dispozici WinyX-ID, u místa realizace nikoliv.</p><p>TODO Přepokládáme, že si zasmluvněná místa realizace budou odpovídat napříč prostředími (pokud bude docházet k mapování).</p><ul><li>Pokud nalezneme – použít, jinak vzít výchozí, pokud je. Jinak nenastavit a přenést jen hlavičku (stav Rozpracovaná).</li></ul></td></tr><tr><td>Objednaná nádoba</td><td>Parametry dané nádoby včetně informací o nakládání s jejím obsahem.</td><td><ul><li>Typ nádoby</li></ul></td><td>Pokud nedošlo ke změně názvu u Typů dopravy, můžeme ho použít pro mapování hodnot napříč prostředími.</td></tr><tr><td>Vývoz na Likvidační místo</td><td>Informace o obsaženém druhu odpadu a cílovém likvidačním místě.</td><td><ul><li>Likvidační místo</li><li>Druh odpadu</li></ul></td><td><p>Druh dopadu můžeme mapovat dle jeho kódu. U likvidačního místa musíme mapovací tabulku vytvořit.</p><p>Přepokládáme, že si zasmluvněné druhy odpadu budou odpovídat napříč prostředími.</p></td></tr><tr><td>Objednaný úkon</td><td>Úkon objednaný nad danou nádobou.</td><td><ul><li>Cílové místo realizace</li><li>Výchozí likvidační místo</li></ul></td><td>Viz předešlé body.</td></tr><tr><td colspan="1">Řádek výpočtu ceny</td><td colspan="1">Informace o předpokládané ceně za objednávku.</td><td colspan="1"><ul><li>Druh odpadu</li></ul></td><td colspan="1">Druh dopadu můžeme mapovat dle jeho kódu.</td></tr><tr><td colspan="1">Oblíbená objednávka uživatele</td><td colspan="1">Každý uživatel si může objednávku označit jako oblíbenou.</td><td colspan="1">–</td><td colspan="1">Přenášení této informace není požadováno.</td></tr></tbody></table><p>Některé z uvedených entit mohou být problematické s ohledem na mapování. Musíme tedy určit způsob, kterým budeme data párovat.</p><table><tbody><tr><th>Entita</th><th>Mapování</th><th>Poznámka</th></tr><tr><td>Objednavatel</td><td>Mapování proběhne přes WinyX-ID. Záznamy bez něj bude řešeny separátně.</td><td>Pravděpodobně bude možné využít WinyX-ID.</td></tr><tr><td>Bankovní spojení</td><td> </td><td>TODO: Výchozí hodnoty.<br></td></tr><tr><td colspan="1">Osoba zákazníka</td><td colspan="1">TODO: Využity již neaktivní záznamy.</td><td colspan="1">Využito pro <strong>Statutární zástupce</strong> a <strong>Zástupce objednatele</strong>. TODO: Výchozí hodnoty.</td></tr><tr><td colspan="1">Rámcová smlouva</td><td colspan="1">Mapování proběhne přes WinyX-ID. Záznamy bez něj bude řešeny separátně.</td><td colspan="1">Pravděpodobně bude možné využít WinyX-ID. TODO: Asi problém pro obecná smlouvy (na cykliku i necykliku) → pokud bude jedna smlouva, neznamená to, že v Helios nebudou 2.</td></tr><tr><td>Místo realizace</td><td> </td><td>Využito také pro <strong>Cílové místo realizace</strong>.</td></tr><tr><td colspan="1">Typ nádoby</td><td colspan="1"> </td><td colspan="1"> </td></tr><tr><td colspan="1">Likvidační místo</td><td colspan="1">Zákazník dodá mapovací tabulku pro LM obsažená v objednávkách.</td><td colspan="1">Využito také pro <strong>Výchozí likvidační místo</strong>. TODO: Pro dané objednávky bychom doplnili seznam LM pro doplnění mapovací tabulky.</td></tr></tbody></table><p>TODO: Pokud vyplníme vše povinné, můžeme uložit k realizaci, pokud bude něco chybět, uložíme jako rozpracovanou (nebo vše jako rozpracované). Přenášíme pouze objednávky v daném stavu – ty uzavřené by měli jiný stav po založení v Helios (nebyl by nastaven datum realizace → nebo vytvořit místo objednávky šablonu).</p><h1>Akceptační testy</h1><p>Pro splnění požadavku musí být splněny následující testovací scénáře.</p><h2>TC01: Xxx</h2><ol><li>Systém…</li></ol><h1>Poznámka</h1><p>–</p>
</div>
</body>
</html>
