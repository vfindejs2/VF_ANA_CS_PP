<!DOCTYPE html>
<html lang="cs">
<head>
  <meta charset="utf-8">
  <title>ID-093: Změna stanoviště vozidla</title>
</head>
<body>
<div class="wiki-content">
<p><strong>Realizace bude pravděpodobně požadována až po dokončení 3. fáze požadavku ID-065 (předpoklad 2025).</strong></p><p></p><h1>Požadavek</h1><p>Některá vozidla začínají realizaci svého denního výkonu jinde než na domovské provozovně. Proto je požadováno doplnění možnosti specifikovat stanoviště daného vozidla.</p><ul><li>Stanoviště pak bude využito jako počáteční a cílový bod denního výkonu.</li><li>Pokud nebude stanoviště k dispozici, bude vozidlo začínat na provozovně.</li></ul><p>Poznámka: Pojem stanoviště nijak nesouvisí se stanovištěm, jak ho známe z aplikace Pasport.</p><h1>Aktuální stav</h1><p>Aktuálně je při generování denních výkonů vždy nastaven start i cíl dle adresy odpovídající provozovny. Pokud chce uživatel počáteční či cílový bod denního výkonu změnit, musí to udělat ručně (v rámci obrazovky editace denního výkonu). Akci je pak nutné provést pro každý jednotlivý denní výkon.</p><h1>Návrh řešení</h1><p>Vzhledem k tomu, že primárním systémem pro evidenci vozidel je FLWW2, musíme návrh řešení rozdělit na 2 části…</p><ul><li><strong>FLWW2</strong> – správa stanovišť a jejich přiřazení k vozidlům (příprava dat).</li><li><strong>RoadPlan</strong> – synchronizace stanovišť a generování denních výkonů.</li></ul><h2>FLWW2</h2><p>V první řadě musíme požadované informace doplnit na straně FLWW2, který je primárním systémem pro správu vozidel. Dojde tedy k rozšíření modulu se správou systému…</p><ul><li><strong>Správa stanovišť</strong> – modul umožňující správu stanovišť.</li><li><strong>Správa přiřazení stanovišť</strong> – rozšíření objektů o přiřazená stanoviště.</li></ul><h3>Správa stanovišť</h3><p>Správa stanovišť bude doplněna jako samostatný modul ve správě systému. Dostupné akce pak budou odpovídat uživatelským oprávněním…</p><ul><li>Zobrazení stanovišť – uživatel má k dispozici daný modul, nemůže ale provádět žádné změny v datech.</li><li>Editace stanovišť – uživatel má k dispozici daný modul včetně správy dat (zakládání, editace a odebírání).</li></ul><p>Na úrovni stanoviště pak bude možné evidovat dále uvedené informace (zmíněny pouze atributy důležité z pohledu RP):</p><ul><li>Název stanoviště – textový řetězec s názvem stanoviště (povinný údaj).</li><li>Adresa stanoviště – adresa stanoviště ve strukturované podobě.</li><li>Souřadnice stanoviště – poloha stanoviště v terénu.</li></ul><p>Uživatel si tedy připraví potřebná stanoviště, s kterými bude dále pracovat.</p><h3>Správa přiřazení stanovišť</h3><p>Následně, když máme k dispozici požadovaná stanoviště, můžeme provést jejich přiřazení k vozidlům. To bude umožněno hned na několika místech…</p><ul><li>Správa stanovišť – přímo ve správě stanovišť bude možné přiřadit k danému stanovišti požadované objekty.</li><li>Správa objektů – nastavení stanoviště bude možné provést také přímo v modulu, který slouží ke správě vozidel.</li></ul><p>Na úrovni přiřazení stanoviště k vozidlu jsou k dispozici dále uvedené informace…</p><ul><li>Identifikace objektu – specifikace požadovaného vozidla (povinný údaj).</li><li>Identifikace stanoviště – specifikace požadovaného stanoviště (povinný údaj).</li><li>Začátek platnosti – specifikace období, po které je vozidlo na dané stanoviště přiřazeno.</li><li>Konec platnosti – specifikace období, po které je vozidlo na dané stanoviště přiřazeno.</li></ul><p>Zadání platnosti pak není povinné. Pokud není platnost vyplněna, jedná se o neomezené období. V jeden čas pak může být vozidlo přiřazeno maximálně k jednomu stanovišti.</p><h2>RoadPlan</h2><p>Když máme připravena data na straně FLWW2, můžeme je přenést do RoadPlan a zpracovat je. Zde musíme provést dále uvedené úpravy:</p><ul><li><strong>Datový model</strong> – příprava datového modelu, v rámci kterého budou doplněny entity související se stanovišti vozidel.</li><li><strong>Synchronizační komponenta</strong> – rozšíření synchronizační komponenty o nové informace (stanoviště, vazba stanoviště na vozidlo). </li><li><strong>Generování denních výkonů</strong> – revize algoritmu pro generování denních výkonů, kdy budou využity nově získané informace.</li></ul><h3>Datový model</h3><p>Datový model bude rozšířen o nové entity, jejich popis je uveden v tabulce. Uvedeny jsou pak pouze stěžejní informace, uvedený výčet atributů tedy nemusí být úplný.</p><table><tbody><tr><th>Entita</th><th>Stručný popis</th><th>Atributy</th><th>Poznámka</th></tr><tr><td>Stanoviště</td><td>Číselník stanovišť, která budou získávána z FLWW2.</td><td><ul><li>Název (povinný)</li><li>Adresa</li><li>Souřadnice</li></ul></td><td>Stanoviště může být při generování denních výkonů použito pouze v případě, kdy obsahuje adresu a souřadnice.</td></tr><tr><td>Přiřazení stanoviště k objektu</td><td>Vazba stanoviště na konkrétní objekt (včetně platnosti této vazby).</td><td><ul><li>Objekt (povinný)</li><li>Stanoviště (povinný)</li><li>Platnost od</li><li>Platnost do</li></ul></td><td>Při následné práci se záznamem musíme vyhodnocovat jeho platnost.</td></tr></tbody></table><h3>Synchronizační komponenta</h3><p>V rámci synchronizační komponenty pro systém FLWW2 bude nutné provést rozšíření přenášených informací…</p><ul><li><strong>Stanoviště</strong> – jsou přenášeny všechny dostupné záznamy.</li><li><strong>Přiřazení stanoviště k objektu</strong> – jsou přenášeny všechny dostupné záznamy.</li><li><em><strong>Adresa</strong> – vychází ze způsobu, jakým bude předána adresa v rámci stanoviště…</em><ul><li><em>Reference na adresu – získání odpovídající adresy přes API.</em></li><li><em>Parametry adresy – řešeno v rámci synchronizace stanoviště.</em></li></ul></li></ul><p>Poznámka: Princip synchronizace je shodný jako u ostatních entit (např. uživatelé).</p><h3>Generování denních výkonů</h3><p>Když máme k dispozici všechny potřebné informace, můžeme se věnovat algoritmu pro generování denních výkonů. Při něm řešíme 2 situace…</p><ul><li>generování nových denních výkonů (pro dané vozidlo a den zatím denní výkon neexistuje),</li><li>kontrola aktuálnosti existujících denních výkonů (např. změna typu dopravy vozidla).</li></ul><p>V obou případech je však princip fungování algoritmu podobný, hledáme takové stanoviště, které splňuje dále uvedené podmínky:</p><ul><li>existuje přiřazení stanoviště k vozidlu platné ke dni realizace denního výkonu,</li><li>odpovídající stanoviště obsahuje validní adresu a souřadnice.</li></ul><p>Takové stanoviště by mělo být nalezeno maximálně jedno…</p><ul><li>Pokud je takové stanoviště získáno, je použito při generování denního výkonu.</li><li>V opačném případě pracujeme s provozovnou tohoto denního výkonu.</li></ul><p>U existujícího denního výkonu pak musíme vyhodnotit, zda nedošlo ke změně stanoviště, tedy…</p><ul><li>zda je adresa začátku a konce daného denního výkonu aktuální,</li><li>zda odpovídá aktuálně přiřazenému stanovišti u daného vozidla.</li></ul><p>Poznámka: Stanoviště bude použito pouze pro nastavení začátku a konce denního výkonu. V dále uvedených případech budeme stále pracovat s provozovnou:</p><ul><li>vložení rozdělení směny,</li><li>vložení lokace typu provozovna.</li></ul><h1>Akceptační testy</h1><p>Pro splnění požadavku musí být splněny následující testovací scénáře.</p><h2>TC01: Založení stanoviště (FLWW2)</h2><ol><li>Uživatel zadá požadavek na zobrazení modulu pro správu stanovišť.</li><li>Systém zobrazí modul stanovišť a zpřístupní uživateli odpovídající funkčnosti (dle jeho oprávnění).</li><li>Uživatel zadá požadavek na založení stanoviště.</li><li>Systém zobrazí formulář stanoviště ve výchozím stavu (prázdný formulář).</li><li>Uživatel vyplní formulář a zadané informace potvrdí.</li><li>Systém provede validaci a následně požadované stanoviště založí. </li></ol><h2>TC02: Přiřazení stanoviště k vozidlu (FLWW2)</h2><ol><li>Uživatel zadá požadavek na zobrazení modulu pro správu stanovišť.</li><li>Systém zobrazí modul stanovišť a zpřístupní uživateli odpovídající funkčnosti (dle jeho oprávnění).</li><li>Uživatel označí požadované stanoviště a zadá požadavek na jeho přiřazení k objektu.</li><li>Systém zobrazí formulář pro přiřazení stanoviště k objektu.</li><li>Uživatel vyplní formulář a zadané informace potvrdí.</li><li>Systém provede validaci a následně požadované přiřazení stanoviště k objektu založí.</li></ol><p>Poznámka: Testovací scénář je možné spustit na více místech: správa stanovišť, správa objektů (popsáno pro modul stanovišť).</p><h2>TC03: Přenos stanovišť mezi systémy (FLWW2, RP)</h2><p>Předpoklad: Došlo k založení stanoviště ve FLWW2.</p><ol><li>Systém FLWW2 předá informaci, že došlo k založení nového stanoviště.</li><li>Systém RP přijme informaci o založení nového stanoviště…<ol><li>Načte z FLWW2 odpovídající informace o stanovišti.</li><li>Zpracuje získané informace a uloží je.</li></ol></li></ol><h2>TC04: Přenos přiřazení mezi systémy (FLWW2, RP)</h2><p>Předpoklad: Došlo k založení přiřazení stanoviště k vozidlu ve FLWW2.</p><ol><li>Systém FLWW2 předá informaci, že došlo k založení nového přiřazení stanoviště k vozidlu.</li><li>Systém RP přijme informaci o založení nového přiřazení stanoviště k vozidlu…<ol><li>Načte z FLWW2 odpovídající informace o přiřazení stanoviště k vozidlu.</li><li>Zpracuje získané informace a uloží je.</li></ol></li></ol><h2>TC05: Generování denních výkonů (RP)</h2><p>Předpoklad: Byl spuštěn noční proces, který zajišťuje generování denních výkonů.</p><ol><li>Systém v rámci generování denních výkonů vyhodnotí, zda je pro odpovídající vozidlo k dispozici stanoviště…<br><ol><li>Systém se pokusí nalézt přiřazení stanoviště k vozidlu, které splňuje všechny dále uvedené podmínky:<br><ul><li>Odkazuje na právě řešení vozidlo.</li><li>Je platné vzhledem k datu realizace.</li></ul></li><li>Pokud je nalezeno dané přiřazení stanoviště k vozidlu: Systém získá odpovídající stanoviště.</li><li>Pokud je získáno stanoviště: Systém provede jeho validaci (musí obsahovat adresu a souřadnice).</li></ol></li><li>Pokud bylo získáno validní stanoviště: Systém při generování denního výkonu nastaví start a cíl dle tohoto stanoviště.</li><li>Jinak validní stanoviště získáno nebylo: Systém při generování denního výkonu nastaví start a cíl dle odpovídající provozovny.</li></ol><p>Poznámka: Testovací scénář je popsán z pohledu jednoho vozidla (resp. denního výkonu). Důraz je pak kladen na problematiku stanovišť.</p><h2>TC06: Kontrola aktuálnosti denních výkonů (RP)</h2><p>Předpoklad: Byl spuštěn proces, který zajišťuje kontrolu aktuálnosti denních výkonů.</p><ol><li>Systém v rámci kontroly aktuálnosti denních výkonů vyhodnotí, zda je pro odpovídající vozidlo k dispozici stanoviště…<br><ol><li>Systém se pokusí nalézt přiřazení stanoviště k vozidlu, které splňuje všechny dále uvedené podmínky:<br><ul><li>Odkazuje na právě řešení vozidlo.</li><li>Je platné vzhledem k datu realizace.</li></ul></li><li>Pokud je nalezeno dané přiřazení stanoviště k vozidlu: Systém získá odpovídající stanoviště.</li><li>Pokud je získáno stanoviště: Systém provede jeho validaci (musí obsahovat adresu a souřadnice).<br></li></ol></li><li>Pokud bylo získáno validní stanoviště: Systém dále pracuje s adresou a souřadnicemi tohoto stanoviště.</li><li>Jinak validní stanoviště získáno nebylo: Systém dále pracuje s adresou a souřadnicemi odpovídající provozovny.</li><li>Systém vyhodnotí, zda získaná adresa a souřadnice odpovídají startu a cíli právě zkoumaného denního výkonu.<ol><li>Pokud ano, nejsou prováděny žádné změny v rámci tohoto denního výkonu.</li><li>Jinak dochází k aktualizaci adresy a souřadnic pro začátek a konec denního výkonu. </li></ol></li></ol><p>Poznámka: Testovací scénář je popsán z pohledu jednoho vozidla (resp. denního výkonu). Důraz je pak kladen na problematiku stanovišť.</p><h1>Poznámka</h1><p>–</p>
</div>
</body>
</html>
