<!DOCTYPE html>
<html lang="cs">
<head>
  <meta charset="utf-8">
  <title>ID-070: Zkušební provoz pro cyklický svoz odpadu</title>
</head>
<body>
<div class="wiki-content">
<p></p><h1>Požadavek</h1><p>Cílem požadavku je zahájení zkušebního provozu pro plánování cyklického svozu odpadu. Jednat se pak má o „odlehčenou“ verzi plánování, pro kterou bude využito stávající chování aplikace. Požadovány jsou pak následující dílčí změny:</p><ul><li><strong>Revize sestavy POVOS</strong> – rozložení sestavy pro tento typ dopravy se v určitých ohledech liší, byl pak přiložen její vzor (viz ).<ul><li>Poznámka: Nesmí dojít ke změně rozložení tiskové sestavy pro aktuálně implementovaná lisovací vozidla (Frontpress).</li></ul></li><li><strong>Rozšíření importu vozidel</strong> – vozidla řešeného typu dopravy jsou identifikována pomocí evidenčního čísla. Začínají pak jedním z uvedených prefixů: <strong>05</strong>, <strong>20</strong>.</li><li><strong>Rozšíření max. počtu nádob</strong> – při zakládání objednávek je specifikován počet nádob daného typu na MR, ten bude nutné rozšířit (aktuálně pouze 255).</li></ul><h1>Aktuální stav</h1><p>Aktuální chování aplikace neumožňuje přidání libovolného typu dopravy bez nutnosti dalších zásahů do implementace.</p><h1>Návrh řešení</h1><p>Požadované chování je nutné implementovat hned na několika místech v aplikaci. Nejprve si tedy představíme navrhované řešení jako celek, následně se budeme věnovat konkrétním změnám…</p><ul><li>Pro plánování cyklického svozu odpadu budou využity stávající obrazovky aplikace.</li><li>Bude vytvořen nový typ dopravy, ten může být pojmenován následovně: <strong>Komunální vozidlo – pilot</strong>.</li><li>Díky tomu nemusíme rozlišovat aktuální lisovací vozidla (Frontpress) od těch na cyklický svoz.</li><li>Dostupné funkčnosti i odpovídající vozidla tedy řešíme na úrovni typu dopravy, nikoliv pro dílčí případy užití (např. tisk sestavy POVOS).</li><li>Plánování pro lisovací vozidla a cyklický svoz tedy bude probíhat separátně.</li></ul><p>Hned na začátku zmíníme také otevřené body, dílčí odpovědi pak mají vliv na výsledné chování.</p><ul><li><strong>Bude pro cyklický svoz zadáván typ nádoby?</strong> Pro lisovací vozidla je typ nádoby povinný, u valníku být zadán nemusí. <strong>ANO</strong></li><li><strong>Bude pro cyklický svoz zadáváno vlastnictví nádoby?</strong> U lisovacího vozidla možné zadat je, u valníku nikoliv. <em><strong>NE</strong></em></li><li><strong>Jsou synchronizovány odpovídající rámcové smlouvy?</strong> Pokud budeme chtít vytvářet objednávky pod rámcovou smlouvou, musíme mít k dispozici potřebná data. <em><strong>ANO</strong></em></li><li>V rámci objednané služby budou lokace typu místo realizace a likvidační místo. <strong>Má být u likvidačního místa nastaven atribut Provést na FALSE? <em>ANO</em></strong></li></ul><p>Poznámka: Jedná se pouze o hrubý návrh řešení.</p><h2>Datový model</h2><p>Nejdůležitějším krokem na úrovni datového modelu je přidání nového typu dopravy: <strong>Komunální vozidlo – pilot</strong>. Ten je využíván napříč celým návrhem řešení.</p><p>Poznámka: Pojmenování nového typu dopravy se může ještě měnit. Při volbě názvu jsme pak vycházeli ze skutečnosti, že se jedná pouze o zkušební provoz. </p><h2>Synchronizace</h2><p>V rámci synchronizace musíme začít pracovat s novým typem vozidel. Dojde tedy k rozšíření převodní tabulky, která dle evidenčního čísla (purpose) specifikuje odpovídající typ dopravy.</p><ul><li><strong>Cyklický svoz</strong> – evidenční číslo začíná jednou z uvedených hodnot: <strong>05</strong>, <strong>20</strong>.</li></ul><p>V případě kladných odpovědí na některé z otevřených bodů bude nutné provést další úpravy:</p><ul><li>specifikace načítaných typů nádob → <strong>rozšíření mapovací tabulky</strong> (viz dále),</li><li>specifikace načítaných rámcových smluv (včetně souvisejících entit) → <strong>smlouvy požadovaného typu jsou již synchronizovány</strong>.</li></ul><p>Co se týče specifikace typu dopravy pro synchronizované typy nádob, je použita převodní tabulka. Ta bude rozšířena o nové položky. Aktuální stav je uveden v tabulce…</p><table><tbody><tr><th>BCED_ContainterType.Group</div></th><th>Typ dopravy</div></th></tr><tr><td><p>Ekosklad</p><p>Mobilný lisovací kontajner</p><p>Prípojný kontajner</p><p>Stacionárna lis. jednotka</p><p>HNK</p></td><td>Hákový nakladač</td></tr><tr><td>VOK</td><td>Ramenový nakladač</td></tr><tr><td>MGB</td><td>Lisovací vozidlo</td></tr><tr><td colspan="1">malé nádoby</td><td colspan="1">Komunální vozidlo – pilot</td></tr></tbody></table><h2>Uživatelské rozhraní</h2><p>Nejobsáhlejším celkem je část s popisem změn na uživatelském rozhraní (včetně související logiky na pozadí). Zde projdeme jednotlivé moduly aplikace ve směru, který odpovídá životnímu cyklu objednávky (od založení objednávky po její realizaci).</p><p>Začneme však obecnými změnami, které jsou společné pro celou aplikaci. V rámci jednotlivých modulů již nebudou zmiňovány.</p><ul><li><strong>Filtrování záznamů dle typu dopravy</strong> – všude tam, kde filtrujeme záznamy dle typu dopravy, bude doplněn nový typ dopravy. Typicky se jedná o přehledové tabulky či obrazovky související s plánováním denních výkonů.</li></ul><p>Poznámka: Aplikace by si měla umět poradit s případem, kdy nebude dostupnost nového typu dopravy dále požadována (např. ukončení zkušebního provozu).</p><h3>Objednávky</h3><p>Při práci s objednávkami již musíme brát v potaz nový typ dopravy. Ten je specifikován v rámci <strong>formuláře objednané nádoby</strong> při zakládání či editaci objednávky. V odpovídajícím formuláři pak musí být provedeny následující akce:</p><ul><li><strong>Doplnění nového typu dopravy</strong> – možnost přidání objednané nádoby pro cyklický svoz.</li><li><strong>Dostupné typy nádob</strong> – výběr odpovídajícího typu objednané nádoby pro daný typ dopravy.</li><li><strong>Zadání počtu nádob</strong> – navýšení maximálního možného počtu nádob pro nový typ dopravy (<strong>max. 1 000 nádob</strong>).</li><li><strong>Specifikace vlastnictví nádoby</strong> – omezení možnosti zadat vlastnictví objednané nádoby (hodnotu nebude možné nastavit).</li><li><strong>Dostupné typy úkonu</strong> – specifikace dostupných typů úkonu pro nový typ dopravy (pouze Sběr).</li></ul><p>Poznámka: Obdobné změny musí být provedeny také pro šablony objednávek.</p><h3>Objednané služby</h3><p>U objednaných služeb se obejdeme beze změn, co se týče uživatelského rozhraní. Řešit však musíme algoritmus zodpovědný za <strong>generování objednaných služeb</strong>…</p><ul><li>Vstupní data algoritmu odpovídají novému typu dopravy (viz změny ve formuláři objednané nádoby).</li><li>Obsažené lokace jsou generovány následovně:<ol><li><strong>MR</strong> – zadané místo realizace,</li><li><strong>LM</strong> – zadaná likvidační místa (ve výchozím stavu je atribut <strong>Provést</strong> nastaven na <strong>Ne</strong>).</li></ol></li></ul><h3>Denní výkony</h3><p>S denními výkony se setkáváme hned na několika obrazovkách, máme k dispozici jejich přehled a dále také obrazovky pro plánování či monitoring realizace.</p><ul><li>V rámci obrazovek začneme pracovat s novým typem dopravy, dostupné funkčnosti pak ve většině případů kopírují chování lisovacích vozidel.</li><li>Co se týče rozdílů, zmíníme především tiskovou sestavu POVOS, která se v určitých ohledech od lisovacích vozidel odlišuje.<br><ul><li>Dojde k vytvoření kopie stávající sestavy POVOS. Ta bude upravena dle potřeb cyklického svozu.</li><li>Bude se tedy jednat o novou tiskovou sestavu.</li></ul></li></ul><p>Poznámka: Tisková sestava POVOS se liší pouze v rozložení, logika na pozadí je zachována (viz dále). Je pak potřeba upravit jak tiskovou sestavu jako takovou, tak její „prázdnou“ variantu.</p><ol><li><strong>Nadpis sestavy</strong> – liší se nadpis tiskové sestavy.</li><li><strong>Pole s nádobami</strong> – liší se struktura oblasti pro zadání počtu obsloužených nádob.</li></ol><p><img src="id-070-zkusebni-provoz-pro-cyklicky-svoz-odpadu-113018544_images/image2023-2-3 10-22-43.png" data-attachment="true"></p><p><strong>Dodatečná úprava chování</strong>: Je požadováno rozšíření související s tiskem sestavy POVOS. Jedná se pak o následující změny:</p><ul><li>Pro denní výkony nového typu dopravy bude dostupná nejen sestava POVOS, ale také zjednodušený itinerář trasy.<ul><li>V rámci zjednodušeného itineráře nejsou prováděny žádné další změny.</li><li>Sestava je popsána zde: <a href="#" data-page-title="200UI21: Zjednodušený itinerář trasy denního výkonu">200UI21: Zjednodušený itinerář trasy denního výkonu</a>.</li><li>Sestava je již použita např. pro hákové nakladače.</li></ul></li><li>Dojde tedy k rozšíření formuláře pro nastavení tisku u tohoto typu dopravy (viz obrázek). Uvedený formulář je použit např. pro hákové nakladače.<br></li></ul><p><img src="id-070-zkusebni-provoz-pro-cyklicky-svoz-odpadu-113018544_images/image2023-5-24 11-38-9.png" data-attachment="true"><br></p><h3>Časové využití vozidel</h3><p>Obrazovky časového využití budou rozšířeny o nový typ dopravy, chování jako takové může být zachováno. Je pak nutné zmínit, že plánovaná trasa se bude od té skutečné výrazně lišit. Důvodem je především „kvalita“ plánované trasy, v rámci které nebudou zadávány jednotlivé nádoby, ale jejich shluky např. na úrovni obcí.</p><h3>Správa systému</h3><p>Správa systému zůstane beze změn, pokud však budeme pracovat s typy nádob pro cyklický svoz odpadu, budou v odpovídajícím číselníku k dispozici nová data.</p><h1>Akceptační testy</h1><p>Pro splnění požadavku musí být splněny následující testovací scénáře.</p><h2>TC01: Xxx</h2><ol><li>Systém…</li></ol><h1>Poznámka</h1><p>Může nastat situace, kdy dispečer potřebuje vozidlo odvolat na likvidační místo dříve, než jsou obslouženy všechny nádoby v místě realizace (typicky větší obce) – došlo k naplnění vozidla v průběhu obsluhy nádob daného místa realizace. Možné varianty, jak uvedenou situaci řešit bez úprav aplikace, jsou popsány v tabulce.</p><table><tbody><tr><th>Způsob</th><th>Stručný popis</th><th>Náhled</th><th>Poznámka</th></tr><tr><td>Bod průjezdu</td><td><p>Uživatel vytvoří bod průjezdu se stejnou adresou, jakou má dané místo realizace. Ten vloží ihned za odpovídající objednanou službu. Následně je vloženo požadované likvidační místo.</p><p>Akce je pak provedena na obrazovce editace denního výkonu (M5).</p></td><td><img src="id-070-zkusebni-provoz-pro-cyklicky-svoz-odpadu-113018544_images/image2023-1-17 21-5-48.png" data-attachment="true"></td><td>Možné provést bez generování „pomocných“ objednaných služeb.</td></tr><tr><td>Sběr na výzvu</td><td><p>Uživatel si připraví podklady již na úrovni objednávky. Přidá objednané nádoby v uvedené konfiguraci.</p><ul><li><strong>Odpovídající objednaná nádoba</strong> – obsahuje úplné informace o objednané nádobě (typ nádoby, <strong>počet nádob</strong>, druh odpadu, pravidlo opakování…).</li><li><strong>Pomocná objednaná nádoba</strong> – jedná se o kopii předchozí objednané nádoby, která se liší pouze v počtu nádob (nastavena pouze jedna nádoba, což tolik nezkresluje skutečný počet nádob pří následném plánování na denní výkon).Typ úkonu je pak nastaven na výzvu – uživatel generuje odpovídající objednanou službu pouze v případě potřeby.</li></ul><p>Pokud nastane situace, kdy je nutné odvolat řidiče na likvidační místo ještě před dokončením obsluhy daného místa realizace, uživatel vytvoří objednanou službu na výzvu a vloží ji na denní výkon. Uživatel tedy musí pracovat na úrovni několika obrazovek.</p></td><td><img src="id-070-zkusebni-provoz-pro-cyklicky-svoz-odpadu-113018544_images/image2023-1-17 21-10-23.png" data-attachment="true"></td><td>Nutné uvažovat nad řešenou akcí již při zakládání objednávky.</td></tr><tr><td>Rozdělení nádob</td><td><p>Uživatel si připraví podklady již na úrovni objednávky. Pro danou objednanou nádobu přidá takové množství úkonů, které odpovídá počtu odvolání řidiče na likvidační místo.</p><ul><li>Pokud bude vozidlo odvoláno jednou, jsou založeny 2 úkony – první pro odvolání vozidla na likvidační místo a druhé pro dokončení obsluhy místa realizace.</li><li>Objednané služby tedy budou zdvojeny a bude možné je v tomto duchu i naplánovat.</li></ul><p>Nastavený počet nádob by pak měl odpovídat poměrné části dle množství objednaných úkonů – pokud máme celkem 260 nádob a vkládáme 2 úkony, ve formuláři bude nastavena hodnota 130. Následně dojde k vygenerování 2 objednaných služeb, každá pro nastavených 130 nádob (tedy 260 celkem).</p></td><td><img src="id-070-zkusebni-provoz-pro-cyklicky-svoz-odpadu-113018544_images/image2023-1-17 21-21-6.png" data-attachment="true"></td><td><p>Nutné uvažovat nad řešenou akcí již při zakládání objednávky.</p><p>Užitečné pro případy, kdy je odvolání řidiče na likvidační místo jisté.</p></td></tr></tbody></table>
</div>
</body>
</html>
