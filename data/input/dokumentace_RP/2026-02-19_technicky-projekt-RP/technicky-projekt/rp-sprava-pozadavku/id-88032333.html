<!DOCTYPE html>
<html lang="cs">
<head>
  <meta charset="utf-8">
  <title>ID-002: Kopírování bodu průjezdu</title>
</head>
<body>
<div class="wiki-content">
<p></p><h1>Požadavek</h1><p>Vzhledem k tomu, že není v rámci aktuálně používaného mapového serveru (výpočet trasy) umožněno vkládání uzavírek, je potřeba usnadnit dispečerům vytváření objízdných tras. Jedna z možností, kterou dispečeři aktuálně využívají, je vložení bodu průjezdu do trasy. Ti však musí opakovaně vytvářet stejný bod průjezdu pro každou z cest, která vede přes uzavřený úsek.</p><h1>Aktuální stav</h1><p>Vyhnutí se uzavřenému úseku je možné řešit pouze vkládáním bodu průjezdu do denního výkonu. V případě opakovaného průjezdu uzavřeným místem, je nutné vkládat bod průjezdu pro každý z průjezdů.</p><h1>Návrh řešení</h1><p>K dispozici jsou pak různá řešení, každé má své výhody i nevýhody. Uvedená řešení je pak možné implementovat i současně.</p><h2>Kopírování bodu průjezdu</h2><p>V rámci obrazovky pro editaci denního výkonu (M5) bude vložena funkce, která umožní kopírování existujícího bodu průjezdu (viz obrázek). Uživatel tedy v tabulce označí požadovaný bod průjezdu a stiskne odpovídající tlačítko v nástrojové liště. Tím dojde k vytvoření kopie označeného bodu průjezdu, která je vložena jako poslední položka denního výkonu.</p><p><img src="id-002-kopirovani-bodu-prujezdu-88032333_images/image2020-5-19 14-32-34.png" data-attachment="true"></p><p> Jednoduché řešení.</p><p> Nutnost vytvořit alespoň jeden bod průjezdu pro každý denní výkon a každý den po dobu uzavírky. Při samotném vkládání bodu průjezdu je dále nutné určit jeho pozici v rámci denního výkonu, ve výchozím stavu je totiž vložen na konec.</p><h2>Seznam bodů průjezdu</h2><p>Aby uživatel nebyl nucen denně vytvářet jeden a ten samý bod průjezdu, nabízí se možnost vytvoření seznamu bodů průjezdu. Tuto myšlenku je možné zobecnit, jak naznačují varianty řešení uvedené v tabulce (vybrána může být právě jedna varianta).</p><p>Poznámka: Při vytváření takového bodu průjezdu se pak na pozadí nastaví provozovna, pro kterou bude dostupný. Pouze u uživatelů, kteří mají oprávnění na více provozoven, bude možné provozovnu zvolit (není naznačeno v rámci náhledů). Uživateli se pak zobrazují pouze takové body průjezdu, které odpovídají jeho provozovně.</p><table><tbody><tr><th>Varianta</th><th>Náhled</th><th>Popis</th></tr><tr><td colspan="1"><p>1</p><p> </p></td><td colspan="1"><img src="id-002-kopirovani-bodu-prujezdu-88032333_images/image2020-5-19 14-38-46.png" data-attachment="true"></td><td colspan="1"><p>Pro každý typ adresného bodu je ve správě systému doplněn samostatný číselník. Tam uživatel může vkládat nové, či měnit a odebírat stávající záznamy. Jako příklad konkrétních číselníků lze uvést následující:</p><ul><li>body průjezdu,</li><li>místa dočasného uložení.</li></ul><p>Nevýhodou je ovšem velký počet položek menu v případě, kdy budou tyto číselníky dále rozšiřovány.</p><p>Pro vytváření či editaci bodu průjezdu je použit běžný formulář pro zadání adresy se souřadnicemi, který může být doplněn atributy:</p><ul><li>Název,</li><li>Poznámka,</li><li>Platnost od, Platnost do (pro nastavení období, ve kterém se má bod průjezdu nabízet; po uplynutí doby platnosti může dojít i ke zrušení bodu průjezdu).</li></ul><p>Poznámka: Název ani poznámka nejsou nutnými položkami pro plnohodnotnou funkčnost.</p></td></tr><tr><td colspan="1"><p>2</p><p> </p></td><td colspan="1"><img src="id-002-kopirovani-bodu-prujezdu-88032333_images/image2020-5-19 14-39-28.png" data-attachment="true"></td><td colspan="1"><p>Existuje společný přehled adresných bodů, ty jsou zadávány obdobným způsobem jako u varianty 1. I zde mohou být doplněny atributy Název a Poznámka (není nutné). Musí však být obsažen atribut specifikující typ adresného bodu, ten může nabývat následujících hodnot.</p><ul><li>bod průjezdu,</li><li>místo dočasného uložení.</li></ul><p>Výhodou je možnost snadného rozšíření typů adresných bodů, které navíc neovlivní počet položek v menu.</p><p>Nevýhodou pak je problematické doplňování dalších atributů pouze k některým typům adresného bodu.</p></td></tr></tbody></table><p>Samotný přehled je pak tvořen tabulkou, její sloupce vychází z položek, které je možné zadat v rámci formuláře. Odvíjí se tedy i od zvolené varianty. V případě, kdy má uživatel právo na více než jednu provozovnu, je navíc zobrazen sloupec s informací, pro kterou provozovnu je bod průjezdu vytvořen. V případě potřeby může být doplněn i detail bodu průjezdu (v případě adresného bodu by byl zobrazen ještě typ adresného bodu).</p><p><img src="id-002-kopirovani-bodu-prujezdu-88032333_images/image2020-5-19 14-40-1.png" data-attachment="true"></p><p>Když máme k dispozici přehled bodů průjezdu, můžeme pokračovat v plánování těchto bodů na denní výkony. V tabulce jsou uvedeny možné varianty, jak vytvořený bod na denní výkon vložit. Obě varianty mohou být implementovány současně.</p><table><tbody><tr><th>Varianta</th><th>Náhled</th><th>Popis</th></tr><tr><td colspan="1"><p>1</p><p> </p></td><td colspan="1"><img src="id-002-kopirovani-bodu-prujezdu-88032333_images/image2020-5-19 14-40-28.png" data-attachment="true"></td><td colspan="1"><p>Aktuální tlačítko pro přidání bodu průjezdu bude doplněno o nabídku, kde si může uživatel zvolit, zda si přeje vytvořit nový bod průjezdu, nebo použít existující.</p><p>Nabídka pak obsahuje vložené body průjezdu pro odpovídající provozovnu (případně adresné body typu Bod průjezdu, dle zvolené varianty). Nevýhodou však je nutnost doplnit opatření pro případ, kdy existuje velké množství bodů průjezdu. To ovšem zvyšuje pracnost této varianty řešení.</p><p>V takovém případě by došlo k omezení výpisu na N položek, které by byly řazeny dle četnosti použití v rámci provozovny. Bylo by tedy zobrazeno N nejčastěji používaných bodů průjezdu. Změnou by prošla i struktura kontextové nabídky:</p><ul><li>vložení nového bodu průjezdu – chování jako ve stávající implementaci,</li><li>vložení existujícího bodu průjezdu (není naznačeno na obrázku) – po kliknutí se zobrazí výběrový dialog s body průjezdu (možnost rozšíření o variantu 3),</li><li>vložení konkrétního existujícího bodu průjezdu – výběr z N zobrazených bodů průjezdu.</li></ul></td></tr><tr><td colspan="1"><p>2</p><p> </p></td><td colspan="1"><img src="id-002-kopirovani-bodu-prujezdu-88032333_images/image2020-5-19 14-40-56.png" data-attachment="true"></td><td colspan="1"><p>Aktuální tlačítko pro přidání bodu průjezdu bude zachováno, změny se odehrávají až ve formuláři pro přidání bodu průjezdu. Pokud si uživatel přeje vytvořit nový bod průjezdu, nic mu v tom nebrání. Pokud ale chce použít existující bod průjezdu (případně adresné body typu Bod průjezdu, dle zvolené varianty), může toho dosáhnout několika způsoby.</p><ul><li>Postupným psaním požadované adresy – uživatel postupně vpisuje požadovanou adresu, systém mu formou našeptávače nabízí odpovídající záznamy. Vždy je pak zobrazeno maximálně 10 záznamů zároveň.</li><li>Výběrem v modálním okně – uživatel stiskne tlačítko pro zobrazení přehledu bodů průjezdu, systém zobrazí modální okno, kde uživatel zvolí požadovanou položku (možnost rozšíření o variantu 3).</li></ul><p>Po výběru požadovaného bodu průjezdu dojde k předvyplnění formuláře. Jedná se o obdobu vyhledávače podnikatelských subjektů ve formuláři zákazníka.</p></td></tr><tr><td colspan="1"><p>3</p><p> </p></td><td colspan="1"><img src="id-002-kopirovani-bodu-prujezdu-88032333_images/image2020-6-3 11-59-45.png" data-attachment="true"></td><td colspan="1"><p>Jedná se o možné doplnění varianty 1 a 2, kdy by byl výběrový dialog pro adresný bod doplněn o mapu zobrazující nejen pozici adresných bodů, ale i zvolenou část trasy denního výkonu. Předpokladem je pak označení některé z lokací objednané služby – zobrazená část trasy by odpovídala úseku mezi označenou lokací a lokací bezprostředně následující. Označení adresného bodu by pak bylo umožněno nejen přímo v tabulce, ale i kliknutím na bod v mapě. Pokud by nebyla žádná lokace označena, budou v mapě zobrazeny jen adresné body.</p><p>Poznámka: Adresné body pak mohou být filtrovány dle souřadnic vzhledem k pozici zobrazené části trasy. </p><p>Po potvrzení zvoleného adresného bodu dojde ke vložení bodu průjezdu za označenou lokaci objednané služby. Uživatel tedy dále nemusí měnit pozici vytvořeného bodu průjezdu.</p><p>Poznámka: Jedná se o hrubý náčrt.</p></td></tr><tr><td colspan="1"><p>4</p><p> </p></td><td colspan="1"><img src="id-002-kopirovani-bodu-prujezdu-88032333_images/image2020-6-3 12-32-52.png" data-attachment="true"></td><td colspan="1"><p>Jedná se o obdobu varianty 3 s tím, že by adresné body byly zobrazeny přímo v mapách obrazovky plánováno denních výkonů (M4).</p><p>Uživatel by pravým tlačítkem klikl na požadovanou část trasy a po zobrazení kontextové nabídky by zvolil možnost přidaní bodu průjezdu. V mapě by se pak zobrazily pouze takové body průjezdu, které se vyskytují v okolí zvolené části trasy. Uživatel by zvolil požadovaný bod průjezdu, který by byl následně vložen přímo na zvolenou pozici v rámci denního výkonu.</p><p>Akce by byla dostupná jak v mapě denního výkonu, tak v mapě s detailem (trasa je pak zobrazena pouze v případě, kdy je v tabulce označena objednaná služba).</p><p>Poznámka: Jedná se o hrubý náčrt.</p></td></tr></tbody></table><p>Poznámka: Uvedené varianty řešení jsou pak v principu použitelné i pro místa dočasného uložení, samozřejmě s drobnými úpravami.</p><p> Univerzální řešení, které je možné zobecnit i pro jiné použití (místa dočasného uložení…).</p><p> Nutnost spravovat číselník adresných bodů. Při samotném vkládání bodu průjezdu je dále nutné určit jeho pozici v rámci denního výkonu, ve výchozím stavu je totiž vložen na konec (mimo variantu 3 a 4).</p><h2>Vytvoření bodu průjezdu v mapě</h2><p>Bod průjezdu se dá vytvořit i formou interakce v rámci mapy. Uživatel „chytne“ trajektorii a jejím přetažením na jiné místo v mapě vytvoří nový bod průjezdu.</p><p> Rychlé vytvoření bodu průjezdu, který je vložen přímo na požadovanou pozici v rámci denního výkonu.</p><p> Nutnost opakovaného vytváření bodu průjezdu pro každý průjezd uzavírkou.</p><h2>Využití pokročilého řešení pro výpočet trasy</h2><p>Na trhu je k dispozici několik dodavatelů poskytujících podporu pro výpočet požadované trasy. Je tedy možné stávající řešení zaměnit za jiné. Při výběru je pak nutné prověřit jak aktuálnost mapových podkladů, tak případnou možnost deaktivace jednotlivých úseků mapy.</p><p> Mohou být k dispozici pokročilé funkce jako zahrnutí parametrů vozidla do výpočtu trasy (rozměry, hmotnost…) a podobně.</p><p> Obvykle se jedná o placenou službu, může být omezen i maximální počet dotazů na mapový server. Vyžaduje změny ve stávající implementaci. Nutný průzkum trhu. Při plánování na několik dní dopředu může nastat situace, kdy budou brány v potaz i uzavírky, které nejsou platné pro konkrétní plánovaný den realizace.</p><p>Obecně je routing v rámci níže uvedených služeb součástí balíku mapy + geokóding + routing.</p><p>Informace  pro ilustraci cenové politiky poskytovatelů:</p><p>CEDA:</p><ul><li>Mapová data CZ + SK (mapová data Evropy za příplatek, poskytovatel TomTom).</li><li>Podpora výpočtu tras pro nákladní vozidla.</li><li>Základní aktualizace 2 x ročně, průběžné dílčí aktualizace (opravy, významné uzavírky) při využití cloudové služby.</li><li>Cena okolo 10 € ročně / vozidlo (mapy, geokóding, truck routing).</li></ul><p>HERE:</p><ul><li>Mapová data Evropa.</li><li>Podpora výpočtu tras pro nákladní vozidla.</li><li>Kontinuální aktualizace při využití cloudové služby.</li><li>Cca 15 € ročně / vozidlo (mapy, geokóding, truck routing).<ul><li>V případě, že by byly v aplikaci zobrazovány na mapě i CWI kontejnery a přívěsy, pak se ze ně také platí (cca 5€ ročně / objekt). </li></ul></li></ul><p>PTV:</p><ul><li>Mapová data Evropa.</li><li>Velmi pokročilý routing, detailní plánování tras, bohaté možnosti parametrizace.</li><li>Služba je výrazně dražší, orientačně 30€ ročně / vozidlo. Nemáme k dispozici aktuální ceník (v případě zájmu si jej vyžádáme). </li></ul><p>Služby je možné otestovat v demo webech jednotlivých poskytovatelů:</p><ul><li>CEDA - poskytneme na vyžádání</li><li>HERE: <a href="https://wego.here.com/">https://wego.here.com/</a>, <a href="https://mobile.here.com/">https://mobile.here.com/</a></li><li>PTV: <a href="https://ptv-logistics.github.io/xserverjs/premium-samples/lrm-xserver/xserver-2/">https://ptv-logistics.github.io/xserverjs/premium-samples/lrm-xserver/xserver-2/</a></li></ul><h2>Zobrazení dopravních informací</h2><p>Možným doplněním uvedených návrhů řešení je přidání mapové vrstvy s dopravními informacemi (uzavírky, kongesce…). Uživateli tak bude umožněno zobrazit i samotné uzavírky, a to přímo v mapě (např. <a href="https://www.zjazdnost.sk/map/view.html">https://www.zjazdnost.sk/map/view.html</a>).</p><p>Jako vhodné se pro přidání této vrstvy jeví následující obrazovky:</p><ul><li>Editace denních výkonů (M5) – pouze informace o uzavírkách. Navíc jsou zobrazeny pouze uzavírky platné v den realizace.</li><li>Monitoring realizace denních výkonů (M7) – veškeré informace, tedy i kongesce a podobně. Vrstva je pak k dispozici pouze v den realizace.</li></ul><h2>Závěr</h2><p>Jako vhodná se nám pak jeví kombinace uvedených variant:</p><ul><li><a href="id-88032333.html">Využití pokročilého řešení pro výpočet trasy</a> – některá řešení navíc zahrnují i možnost výpočtu trasy dle parametrů konkrétního vozidla (např. omezení hmotnosti).</li><li><a href="id-88032333.html">Seznam bodů průjezdu</a> – snadný způsob, jak řešit dlouhodobé uzavírky. Možnost využít i spolu s předchozím řešením v případě, kdy se uzavírka objeví v rámci předchozího návrhu řešení až dodatečně. Funkčnost je navíc v principu využitelná i pro další požadavky (např. místa dočasného uložení).</li></ul><p>Poznámka: Je však třeba počítat i s omezeními jednotlivých variant.</p><p>Jako zajímavé doplnění především pro potřeby operativního plánování se jeví návrh řešení <a href="id-88032333.html">Zobrazení dopravních informací</a>. Dispečer bude mít možnost sledovat aktuální dopravní situaci, podle které bude schopen vkládat body průjezdu během dne tak, aby řidič zbytečně neuvízl v zácpě způsobené např. dopravní nehodou.</p><h1>Akceptační testy</h1><p>Vzhledem k tomu, že je možné zvolit více možných řešení zároveň, jsou jednotlivé akceptační testy uvedeny ve skupinách.</p><h2>Kopírování bodu průjezdu</h2><p>Vychází z návrhu řešení <a href="id-88032333.html">Kopírování bodu průjezdu</a>.</p><h3>TC01: Vytvořit kopii bodu průjezdu</h3><ol><li>Uživatel označí v tabulce lokaci/položku typu bod průjezdu.</li><li>Systém zobrazí tlačítko pro vytvoření kopie bodu průjezdu.</li><li>Uživatel stiskne tlačítko pro vytvoření kopie bodu průjezdu.</li><li>Systém vytvoří nový bod průjezdu, který svými parametry odpovídá označené lokaci typu bod průjezdu.</li><li>Systém vloží vytvořený bod průjezdu jako v pořadí poslední položku denního výkonu.</li></ol><h1>Poznámka</h1><p>–</p>
</div>
</body>
</html>
