<!DOCTYPE html>
<html lang="cs">
<head>
  <meta charset="utf-8">
  <title>ID-014: Aktualizace denních výkonů dle aktuálního vozového parku</title>
</head>
<body>
<div class="wiki-content">
<p></p><h1>Požadavek</h1><p>V případě, kdy dojde k přidání nového, nebo odebrání stávajícího vozidla, je nutné provést aktualizaci již vytvořených denních výkonů:</p><ul><li>Pro přidaná vozidla je potřeba vytvořit nové denní výkony, a to pro takové dny realizace, pro které již existují denní výkony (zároveň se ale nejedná o datum v minulosti).</li><li>Pro odebraná vozidla je potřeba zrušit/odebrat existující denní výkony, a to pro takové dny realizace, které nejsou v minulosti.</li></ul><p>Aktuální řešení však není dostačující, je tedy požadována jeho revize.</p><p>Dále pak vznikl nový požadavek související s generováním DV. Vzhledem k období, na které jsou DV generovány (aktuálně výhled na 14 dní dopředu), existuje velké množství prázdných DV, které čekají na naplánování. Požadováno je pak omezení množství těchto DV (dle požadavku zákazníka by měl stačit následující den). Dále jsou DV generovány při zobrazení obrazovky plánování pro datum v budoucnosti, i zde je pak požadována revize chování.</p><h1>Aktuální stav</h1><p>Nyní je možné dosáhnout aktualizace 2 způsoby:</p><ol><li>Ručně – uživatel začíná na určitý den plánovat objednané služby, ale zjistí, že některé z vozidel chybí/přebývá. Spustí tedy uvedenou akci ručně. Po stisknutí tlačítka dojde k aktualizaci denních výkonů pro daný den, typ dopravy a provozovnu.</li><li>Automaticky – systém každý den kolem půlnoci provede revizi, zda neexistují denní výkony pro již neaktivní vozidla, případně zda pro některá vozidla denní výkony nechybí. Aktualizace se pak provede na úrovni celého nasazení systému, a to 14 dní dopředu od dnešního data.</li></ol><p>Dle nalezených nesrovnalostí jsou provedeny odpovídající akce:</p><ul><li>Chybějící denní výkon – systém vytvoří pro nově přidané vozidlo denní výkon na všechna data realizace v budoucnosti, pro které existují denní výkony.</li><li>Přebývající denní výkon – systém provede zrušení denního výkonu pro neaktivní vozidlo. Denní výkon je pak nastaven do stavu Zrušený, obdobně jako je tomu u kontroly neschválených denních výkonů na konci dne realizace. Objednané služby, které mohou být vloženy na takovém denním výkonu, jsou z denního výkonu odebrány (je možné je opětovné naplánovat na jiné vozidlo).</li></ul><p>Na zrušené denní výkony pak sice není možné plánovat objednané služby, ale zároveň nejsou nijak zvýrazněny, což může být pro uživatele matoucí.</p><p>Vzhledem k rozšíření požadovaného chování je doplněn i popis aktuálního stavu. Denní výkony jsou generovány na 14 dní dopředu s tím, že délka období je realizována jako konfigurační hodnota. Pokud pak uživatel na obrazovce plánování DV zadá datum v budoucnosti, pro které nejsou zatím DV vygenerovány, dojde k vytvoření DV pro tento den.</p><h1>Návrh řešení</h1><p>Původní návrh řešení byl rozšířen o nové požadavky. Došlo tak k vytvoření nového návrhu řešení, viz <a href="id-88032343.html">Rozšířená varianta</a>.</p><h2>Původní varianta</h2><p>Jako řešení navrhujeme dále uvedený postup, který je složen ze 2 kroků. První zajistí rychlé napravení problému, druhý pak doplní užitečné chování, které zpříjemní uživateli práci.</p><p>Poznámka: V případě nízké pracnosti je možné oba kroky sloučit do jednoho.</p><table><tbody><tr><th>Krok</th><th>Popis</th><th>Poznámka</th></tr><tr><td>1</td><td><p>Automatická kontrola nebude omezena pevně daným obdobím, dojde ke kontrole všech denních výkonů vyskytujících se v budoucnosti (na úrovni celého nasazení aplikace). Budou tak ošetřeny i takové případy, kdy uživatel omylem zobrazí obrazovku pro plánování denních výkonů (M4) např. pro další měsíc (pro daný den jsou v tu chvíli vygenerovány denní výkony). </p><p>Pokud uživatel spustí ruční aktualizaci denních výkonů, bude provedena stejná akce jako u automatické aktualizace. Jediným rozdílem bude rozsah této akce – při ručním spuštění bude kontrola provedena u jedné provozovny, ne v rámci celého nasazení jako při spuštění systémem. To zajistí doplnění/zrušení denních výkonů pro celé období, ne pouze aktuálně zobrazený den.</p><p>Následně by byly zrušené denní výkony na obrazovce plánování (M4) graficky zvýrazněny ikonou.</p></td><td><p>Je potřeba prověřit, jak dlouho může taková aktualizace dat trvat. Neměla by způsobit „zamrznutí systému“.</p><p>První krok tedy nerozlišuje, jakým způsobem byl denní výkon zrušen.</p></td></tr><tr><td>2</td><td><p>Následně by bylo rozlišeno, jakým způsobem byl denní výkon zrušen – zde nabízíme 2 možné přístupy:</p><ol><li>Denní výkony rušené v rámci tohoto chování budou mazány. Nebudou tedy nadále k dispozici.</li><li>Denní výkony budou rušeny, bude ale doplněn nový stav denního výkonu, např. „Zrušen z důvodu deaktivace vozidla“. Takové denní výkony se nebudou nikde v rámci systému zobrazovat. Tedy ani na obrazovce pro plánování (M4).</li></ol></td><td>Ukládání takových denních výkonů asi není potřeba.</td></tr></tbody></table><p>Jako vhodné se jeví doplnění algoritmu o kontrolu, zda u některých vozidel nedošlo pouze ke změně provozovny. To by způsobilo problémy ve vyhodnocení, nyní algoritmus s tímto případem nepočítá. Aktuálně systém vyhodnocuje nutnost vygenerovat či zrušit denní výkony zároveň. V případě, kdy nalezne vozidlo se změněnou provozovnou, je to pro něj nové vozidlo dané provozovny. Neřeší, zda již toto vozidlo existovalo na jiné provozovně. Vznikají pak komplikace.</p><p>Situaci je možné řešit jednoduše tak, že nejprve bude provedeno odebrání denních výkonů, pro které již není k dispozici vozidlo. Až následně by došlo ke generování denních výkonů pro vozidla, která naopak přibyla. Nemělo by pak dojít k uvedenému problému.</p><h2>Rozšířená varianta</h2><p>Dále je tedy uveden návrh řešení rozšířený o nové požadavky. Navíc pak není navrhované chování řešeno v rámci více kroků.</p><p>Začneme automatickým generováním DV, které by bylo nejen modifikováno, ale zároveň i doplněno o možnost ručního generování DV. Jednalo by se o následující opatření:</p><ul><li>Automatické generování DV by stále probíhalo s několikadenním předstihem, délku tohoto období je pak možné nastavit pomocí konfigurační hodnoty. Pokud je období 14 dní příliš dlouhé, navrhujeme jeho zkrácení na 1 týden, a to z důvodu zachování možností plánování s předstihem bez nutnosti ručního generování DV. Pokročilé odebírání takových DV v budoucnosti, na které nejsou naplánovány žádné objednané služby, by mohlo být komplikované a pro uživatele ne zcela transparentní.</li><li>Automatické generování DV by pak bylo potlačeno v případě, kdy uživatel na obrazovce plánování DV (M4) zobrazí datum v budoucnosti, pro které zatím nejsou DV vytvořeny. V případě potřeby vytvořit DV pro takové datum realizace by byla k dispozici možnost ručního vygenerování DV. Množství omylem vygenerovaných DV by tak bylo výrazně omezeno.</li><li>Pokud by uživatel zobrazil v rámci obrazovky plánování DV (M4) datum v budoucnosti, pro které neexistují DV, došlo by k zobrazení tlačítka pro ruční vygenerování DV. Po jeho stisknutí by byly vytvořeny DV pro daný den, danou provozovnu a pro všechny dostupné typy dopravy.</li></ul><p>Poznámka: Automatické generování DV pak bude muset být upraveno pro situace, kdy jsou pro daný den již vygenerovány DV pouze pro některou z provozoven. Bude se pak jednat o obdobu chování zajišťující aktualizaci DV při změnách ve vozovém parku – již vytvořené DV budou zachovány.</p><p>Dále je pak potřeba ošetřit situace, kdy dochází ke změnám ve vozovém parku (rozšíření flotily vozidel, vyřazení vozidla…). Zde je nutné provést následující opatření:</p><ul><li>Automatická kontrola, zda existují DV pro všechna vozidla a zda existuje aktivní vozidlo pro všechny DV, bude prováděna automaticky každý den kolem půlnoci, a to pro všechny provozovny a všechny DV v budoucnosti.</li><li>V případě ručního spuštění této kontroly bude akce provedena pro odpovídající provozovnu a všechny její DV v budoucnosti (včetně neschválených DV v den realizace – liší se od automatického spuštění).</li><li>Provedeny pak budou určité akce, které se odvíjí od jednotlivých případů, které mohou nastat:<ul><li>Bylo přidáno nové vozidlo – budou vygenerováno nové DV (pro dny realizace v budoucnosti, pro které jsou vygenerovány DV + den realizace při ručním spuštění).</li><li>U vozidla byla změněna provozovna – budou smazány existující DV pro původní provozovnu a následně vytvořeny DV pro nově nastavenou provozovnu (pro dny realizace v budoucnosti, pro který jsou vygenerovány DV + den realizace při ručním spuštění). Schválené DV budou přeskočeny, o tom však bude uživatel informován (při ručním spuštění).</li><li>Bylo vyřazeno stávající vozidlo – budou smazány existující DV (pro dny realizace v budoucnosti, pro který jsou vygenerovány DV + den realizace při ručním spuštění). Schválené DV budou přeskočeny, o tom však bude uživatel informován (při ručním spuštění).</li></ul></li></ul><p>Poznámka: Nebude tedy docházet k rušení DV, ale přímo k jejich mazání.</p><p>S uvedeným chováním souvisí i rušení DV, které v odpovídající den realizace nebyly schváleny. Tento proces pak bude modifikován, odpovídající DV budou rovnou mazány. V minulosti by byly tedy k dispozici pouze takové DV, u kterých došlo ke schválení.</p><p>V případě, kdy uživatel zobrazí obrazovku plánování DV a zároveň není pro zvolené parametry k dispozici žádný DV, je v rámci přehledu DV zobrazena informace, že není k dispozici žádný DV (aktuální chování). Nově pak bude toto chování rozšířeno následovně – pokud je v uvedeném případě nastavené datum realizace v budoucnosti, je zobrazen následující text: <strong>Žádný denní výkon není k dispozici. Pokud chcete pokračovat v plánování, je nutné denní výkony vygenerovat ručně.</strong></p><p><img src="id-014-aktualizace-dennich-vykonu-dle-aktualniho-vozoveho-parku-88032343_images/image2020-9-1 12-18-48.png" data-attachment="true"></p><h1>Detailní návrh řešení</h1><p>Vzhledem ke složitosti řešené problematiky v rámci změnového požadavku považujeme za vhodné uvést i detailní návrh řešení. Ten se právě z důvodu složitosti může lišit od toho původního. Provedené změny jsou pak přímo zmíněny. Uvedený text je členěn dle dílčích případů užití.</p><h2>Vytvoření DV mimo plánované období</h2><p>Aktuálně, pokud uživatel zobrazí obrazovku plánování pro datum v budoucnosti mimo plánované období, dojde k vygenerování nových denních výkonů pro zvolený den. To bude nově potlačeno. Denní výkony budou v tomto případě vytvářeny až na pokyn uživatele. Začneme pak opatřeními, která budou provedena na uživatelském rozhraní.</p><ul><li>Tlačítko pro spuštění případu užití:<br><ul><li>Umístění: Nástrojová lišta obrazovky plánování (horní lišta).</li><li>Dostupnost: Pokud je datum realizace nastaveno v budoucnosti mimo plánované období a zároveň není pro tento den a tuto provozovnu vytvořen žádný denní výkon.</li></ul></li><li>Přehled denních výkonů – pokud jsou splněny podmínky pro zpřístupnění tlačítka ke spuštění případu užití, je v rámci přehledu zobrazen následující zástupný text:<br><ul><li>Žádný denní výkon není k dispozici. Pokud chcete pokračovat v plánování, je nutné denní výkony vygenerovat ručně.</li></ul></li></ul><p>Nyní může uživatel případ užití spustit, provedeny budou následující akce:</p><ol><li>Uživatel zadá požadavek ne generování denních výkonů mimo plánované období.</li><li>Systém vygeneruje denní výkony následovně:<ul><li>Pro všechna vozidla provozovny, která je aktuálně nastavena v rámci obrazovky plánování.</li><li>Pro datum realizace, které je aktuálně nastaveno v rámci obrazovky plánování.</li></ul></li></ol><p>Poznámka: Délku plánovaného období je možné nastavit v rámci konfiguračních hodnot. Ta již existuje, její hodnota bude změněna na 7 dní.</p><h2>Automatické odebírání neschválených DV</h2><p>Algoritmus slouží k mazání denních výkonů, které nebyly ani v den realizace uživatelem potvrzeny jako schválené. Důvodem je především značné množství těchto denních výkonů z důvodu, že ne na všech provozovnách je plánování denních výkonů k dispozici (denní výkony vznikají, ale není možné s nimi pracovat). Algoritmus je pak spouštěn každý den po půlnoci, tedy ve chvíli, kdy již proběhlo ukončení realizace schválených denních výkonů.</p><ol><li>Systém nalezne všechny neschválené denní výkony v minulosti.</li><li>Pokud je na některém z nalezených denních výkonů vložena alespoň jedna položka denního výkonu, dojde k vyčištění takového denního výkonu (případné objednané služby jsou dále k dispozici pro naplánování).</li><li>Následně dojde ke smazání všech nalezených denních výkonů.</li></ol><p>Poznámka: Aktuálně, před samotnou implementací uvedeného algoritmu, stále dochází k rušení denních výkonů, u kterých nedošlo ani v den realizace ke schválení. Vzhledem k tomu, že takové denní výkony budou nově mazány, považujeme za vhodné jednorázové smazání takových denních výkonů, které splňují všechny dále uvedené podmínky zároveň:</p><ul><li>Atribut Stav nabývá hodnoty <strong>Zrušený</strong>.</li><li>Atribut Datum realizace nabývá hodnoty menší než <strong>XX. XX. 2020</strong> (tedy <strong>kromě</strong> uvedeného data; jedná se pak o datum implementace změnového požadavku).</li></ul><h2>Kontrola a generování DV</h2><p>Dále uvedený algoritmus zajistí hned několik akcí – těmi stěžejními je automatické generování denních výkonů a kontrola, zda existující denní výkony odpovídají aktuálnímu stavu vozového parku (pro všechna aktivní vozidla existuje denní výkon a pro všechny denní výkony existuje aktivní vozidlo). To je v souladu s původním návrhem řešení. V čem se ale uvedený algoritmus liší od původního návrhu řešení, je množství dat, která budou provedením algoritmu ovlivněna:</p><ul><li>Spuštění systémem – provede odpovídající akce nad denními výkony všech provozoven (spouštěno každý den po půlnoci pro všechny denní výkon v budoucnosti).</li><li><strong>Spuštění uživatelem – provede odpovídající akce nad denními výkony právě jedné provozovny </strong>(spouštěno pro konkrétní datum realizace)<strong>.</strong></li></ul><p>A právě druhý z uvedených případů představuje komplikaci. Jeho provedením by mohlo dojít k porušení pravidel, které se v rámci denních výkonů snažíme dodržovat. Ukažme si to na příkladu…</p><ul><li>V rámci WinyX došlo ke změně provozovny u konkrétního vozidla. To znamená, že se do budoucna budou denní výkony tohoto vozidla generovat pro jinou provozovnu.</li><li>My bychom však při ručním spuštění provedli akci pouze v rámci jedné provozovny – to by znamenalo, že budou existovat 2 platné denní výkony pro jedno vozidlo a jeden den (pro původní a novou provozovnu).</li><li>Bylo by pak možné denní výkony původní provozovny nějakým způsobem modifikovat, zde se však objevují další komplikace. Na denní výkon mohou být naplánovány objednané služby, denní výkon může být již schválen, nebo dokonce plněn. V takových případech není vhodné nad denním výkonem provádět žádné modifikace, v jejichž důsledku by došlo ke ztrátě dříve provedené práce.</li><li>Problém tedy není pouze v práci s denním výkony, ale i v přívětivosti těchto změn pro jednotlivé uživatele.</li></ul><p>Pokračovat tedy budeme opatřeními, která řeší problémy tohoto typu. Nově pak vycházíme z toho, že je akce provedena nad všemi provozovnami, a to i v případě, kdy ji spustí přímo uživatel. Začneme samotnými problémy. </p><ul><li>Denní výkon již není platný a je třeba ho odebrat – vozidlo bylo přesunuto na jinou provozovnu, nebo došlo k jeho vyřazení.</li><li>Na denní výkony jsou naplánovány objednané služby.</li><li>Denní výkony je schválený, nebo je již plněn.</li><li>Denní výkon se může vyskytovat na libovolné provozovně – tedy ne pouze na provozovně uživatele, který spustil tuto akci.</li></ul><p>Uvedené situace je třeba řešit. Samotné chování, podle kterého se bude systém řídit, si ve zjednodušené podobě uvedeme nyní.</p><ol><li>Uživatel zadá požadavek na „přegenerování“ denních výkonů</li><li>Systém zobrazí systémové hlášení s informací, že provedení akce může vést ke změnám v rámci existujících denních výkonů.</li><li>Uživatel požadavek potvrdí.</li><li>Systém provede odpovídající akce (viz dále) a v případě, že narazí na dříve uvedené problémy, se zachová následovně:<ol><li>Pokud je na denní výkon vložena alespoň jedna položka denního výkonu:<br><ol><li>Systém označí denní výkon jako vytvořený uživatelem (je možné ho odebrat).</li><li>Systém zruší přiřazení vozidla k dennímu výkonu.</li></ol></li><li>Jinak:<br><ol><li>Systém odebere denní výkon (na denní výkon není nic naplánovaného, je možné ho odebrat).</li></ol></li><li>Systém vytvoří nový denní výkon pro odpovídající vozidlo, den a provozovnu (pokud je vozidlo stále k dispozici).</li></ol></li></ol><p>Poznámka:</p><ul><li>Stav, ve kterém se denní výkon nachází, není brán v potaz.</li><li>Tato změna vyžaduje doplnění možnosti zrušit schválení denního výkonu, který je ve stavu Plněný – to nyní nelze.</li></ul><h5>Nastavení vstupních informací</h5><p>V první řadě vyhodnotíme vstupní informace. Jedná se pak o časové rozmezí, ve kterém má být kontrola denních výkonů provedena (může být zadáno i neomezené období). Dle toho si připravíme vstupní data pro samotný algoritmus. Jedná se o následující informace:</p><ul><li>Období, které bude zkoumáno (pro některé dny tohoto období nemusí existovat denní výkony a je třeba je vygenerovat). </li><li>Denní výkony, u kterých bude kontrola provedena (všechny denní výkony v zadaném období).</li><li>Vozidla, oproti kterým budou denní výkony vyhodnocovány (všechna aktivní vozidla, pro která jsou vytvářeny denní výkony).</li></ul><p>Co se týče zkoumaného období, může nastat několik případů, které se odlišují množstvím prováděných akcí i jejich logikou. Nejprve si představíme jednotlivé prvky uvedeného obrázku, následně si tyto případy stručně popíšeme.</p><ul><li>Šedá – datum v minulosti. Tyto denní výkony již není možné editovat.</li><li>Červená – dnešní datum. U těchto denních výkonů již může být vyhodnocována realizace.</li><li>Modrá – období, pro které jsou generovány denní výkony (dále jako „<strong>blízké období</strong>“). Na obrázku je pak uveden příklad, kdy je délka tohoto období nastavena na 7 dní.</li><li>Fialová – období, pro které zatím nejsou generovány denní výkony (dále jako „<strong>vzdálené období</strong>“).</li></ul><p>Pod časovou osou jsou pak naznačeny případy, které mohou s ohledem na zadanou délku období nastat.</p><ul><li>a) Období v minulosti – nejsou prováděny žádné akce. Denní výkony v tomto období již není možné editovat.</li><li>b) Období začínající v minulosti – datum od je změněno na dnešní datum. Dále se pokračuje jednou z následujících možností.</li><li>c) Celé období se vyskytuje v blízkém období – je provedena kontrola existujících denních výkonů oproti aktivním vozidlům, která je doplněna o případné generování chybějících denních výkonů</li><li>d) Období se vyskytuje v blízkém i vzdáleném období – provedené akce nad denními výkony se liší dle data realizace konkrétního denního výkonu, viz možnosti c) a e).</li><li>e) Celé období se vyskytuje ve vzdáleném období – je provedena pouze kontrola existujících denních výkonů oproti aktivním vozidlům.</li></ul><p><img src="id-014-aktualizace-dennich-vykonu-dle-aktualniho-vozoveho-parku-88032343_images/image2020-10-23 15-41-48.png" data-attachment="true"></p><h5>Vyhodnocení denních výkonů v blízkém období</h5><p>Nyní máme k dispozici všechny potřebné informace, můžeme tedy začít s vyhodnocováním denních výkonů v „blízkém období“. Jedná se pak o období, pro které se průběžně generují denní výkony (na obrázku naznačeno červenou a modrou barvou).</p><p>Systém toto období prochází po jednotlivých dnech a v rámci každého dne provede kontrolu, zda pro všechna aktivní vozidla existuje denní výkon a naopak. Mohou pak nastat následující situace, které si si dále blíže popíšeme:</p><ol><li>pro vozidlo existuje více jak jeden denní výkon,</li><li>pro vozidlo existuje právě jeden denní výkon,</li><li>pro vozidlo neexistuje žádný denní výkon,</li><li>vozidlo pro existující denní výkon není k dispozici.</li></ol><p>První případ představuje situaci, kdy došlo k vypůjčení vozidla – existuje denní výkon jednak pro domovskou provozovnu, navíc pak i pro provozovnu, která si vozidlo vypůjčila. Dle dalších informací pak jednotlivé denní výkony vyhodnotíme a provedeme potřebná opatření.</p><table><tbody><tr><th>Stav denního výkonu</th><th>Popis</th><th>Další podmínka</th><th>Provedená akce</th><th>Poznámka</th></tr><tr><td rowspan="2">Vypůjčený</td><td rowspan="2">Jedná se o denní výkon původní domovské provozovny.</td><td>Provozovna vozidla a denního výkonu si odpovídá.</td><td>Není provedena žádná akce.</td><td>Zatím nebyla provedena změna provozovny tohoto vozidla.</td></tr><tr><td>Provozovna vozidla a denního výkonu je odlišná.</td><td><p>Denní výkon je smazán.</p></td><td><p>U vozidla již byla změněna provozovna, denní výkon na původní provozovně již není potřeba.</p><p>V tomto stavu není na denní výkon nic naplánováno.</p></td></tr><tr><td rowspan="3">Ostatní</td><td rowspan="3">Jedná se o denní výkon vytvořený uživatelem, ke kterému bylo přiřazeno vozidlo jiné provozovny.</td><td>Provozovna vozidla a denního výkonu si odpovídá a zároveň byl denní výkon vytvořen systémem.</td><td>Není provedena žádná akce.</td><td>–</td></tr><tr><td>Provozovna vozidla a denního výkonu si odpovídá a zároveň nebyl denní výkon vytvořen systémem..</td><td>Denní výkon je označen jako vytvořený systémem.</td><td>Není možné ho uživatelsky smazat.</td></tr><tr><td colspan="1">Provozovna vozidla a denního výkonu je odlišná.</td><td colspan="1">Není provedena žádná akce.</td><td colspan="1"><p>Zatím nebyla provedena změna provozovny tohoto vozidla.</p></td></tr></tbody></table><p>Druhý případ představuje situaci, kdy máme pro každé vozidlo právě jeden denní výkon. Jedná se pak o běžný stav, my však musíme vyhodnotit, zda je denní výkon vytvořen korektně a odpovídá svými parametry aktuální situaci.</p><table><tbody><tr><th>Popis</th><th>Další podmínka</th><th>Provedená akce</th><th>Poznámka</th></tr><tr><td rowspan="2">Pro vozidlo existuje denní výkon, který je přiřazen ke stejné provozovně.</td><td colspan="1">Denní výkon je vytvořen systémem.</td><td colspan="1">Není provedena žádná akce.</td><td colspan="1">–</td></tr><tr><td colspan="1">Denní výkon není vytvořen systémem.</td><td colspan="1">Denní výkon je označen jako vytvořený systémem.</td><td colspan="1">Uživatel vytvořil denní výkon před přidáním samotného vozidla do WinyX.</td></tr><tr><td rowspan="2"><p>Pro vozidlo existuje denní výkon, který je přiřazen k odlišné provozovně.</p></td><td colspan="1"><p>Denní výkon obsahuje alespoň jednu položku denního výkonu.</p></td><td colspan="1"><p>Systém označí denní výkon jako vytvořený uživatelem (je možné ho odebrat) a následně zruší přiřazení vozidla k tomuto dennímu výkonu.</p><p>Poté je vytvořen denní výkon pro odpovídající vozidlo, den a provozovnu.</p></td><td rowspan="2"><p>Uživatel vytvořil denní výkon před přidáním samotného vozidla do WinyX, přiřadil ho však ke špatné provozovně.</p><p>Stav denního výkonu není brán v potaz.</p></td></tr><tr><td colspan="1">Denní výkon neobsahuje žádnou položku denního výkonu.</td><td colspan="1"><p>Denní výkon je smazán.</p><p>Poté je vytvořen denní výkon pro odpovídající vozidlo, den a provozovnu.</p></td></tr></tbody></table><p>Třetí případ přestavuje situaci, kdy pro konkrétní vozidlo žádný denní výkon neexistuje.</p><ul><li>V takovém případě dojde k vytvoření nového denního výkonu pro odpovídající vozidlo, den a provozovnu.</li></ul><p>Čtvrtý a poslední případ představuje situaci, kdy pro denní výkon již není k dispozici vozidlo. Systém pak postupuju následovně:</p><ul><li>Denní výkon obsahuje alespoň jednu položku denního výkonu – systém označí denní výkon jako vytvořený uživatelem (je možné ho odebrat) a následně zruší přiřazení vozidla k tomuto dennímu výkonu.</li><li>Denní výkon neobsahuje žádnou položku denního výkonu – denní výkon je smazán.</li></ul><h5>Vyhodnocení denních výkonů ve vzdáleném období</h5><p>Nyní můžeme přistoupit k druhé fázi – vyhodnocení denních výkonů ve „vzdáleném období“. Zde existují denní výkony pouze v případě, kdy je vytvořil přímo uživatel (na obrázku naznačeno fialovou barvou). To je zásadní rozdíl, který výrazně ovlivňuje podobu samotného algoritmu. Nepracujeme tedy se všemi dostupnými provozovnami, ale pouze s těmi, pro které již existuje alespoň jeden denní výkon. Vstupní data algoritmu jsou oproti předchozí variantě omezována následovně:</p><ul><li>Systém nalezne všechny denní výkony s odpovídajícím datem realizace (pokud není nalezen žádný denní výkon, je datum realizace přeskočeno).</li><li>Systém nalezne všechny provozovny, pro které jsou vytvořeny denní výkony.</li><li>Systém nalezne všechna aktivní vozidla, která jsou přiřazena k některé z nalezených provozoven.</li></ul><p>Následný postup pak vychází z algoritmu pro „blízké období“, v některých ohledech je však modifikován. Při porovnání získaných vozidel oproti denním výkonům mohou nastat tyto případy, které si následně popíšeme:</p><ol><li>pro vozidlo existuje více jak jeden denní výkon,</li><li>pro vozidlo existuje právě jeden denní výkon,</li><li>pro vozidlo neexistuje žádný denní výkon,</li><li>vozidlo pro existující denní výkon není k dispozici.</li></ol><p>První případ představuje situaci, kdy došlo k vypůjčení vozidla – existuje denní výkon jednak pro domovskou provozovnu, navíc pak i pro provozovnu, která si vozidlo vypůjčila. Dle dalších informací pak jednotlivé denní výkony vyhodnotíme a provedeme potřebná opatření.</p><table><tbody><tr><th>Stav denního výkonu</th><th>Popis</th><th>Další podmínka</th><th>Provedená akce</th><th>Poznámka</th></tr><tr><td rowspan="2">Vypůjčený</td><td rowspan="2">Jedná se o denní výkon původní domovské provozovny.</td><td>Provozovna vozidla a denního výkonu si odpovídá.</td><td>Není provedena žádná akce.</td><td>Zatím nebyla provedena změna provozovny tohoto vozidla.</td></tr><tr><td>Provozovna vozidla a denního výkonu je odlišná.</td><td><p>Denní výkon je smazán.</p></td><td><p>U vozidla již byla změněna provozovna, denní výkon na původní provozovně již není potřeba.</p><p>V tomto stavu není na denní výkon nic naplánováno.</p></td></tr><tr><td rowspan="3">Ostatní</td><td rowspan="3">Jedná se o denní výkon vytvořený uživatelem, ke kterému bylo přiřazeno vozidlo jiné provozovny.</td><td>Provozovna vozidla a denního výkonu si odpovídá a zároveň byl denní výkon vytvořen systémem.</td><td>Není provedena žádná akce.</td><td>–</td></tr><tr><td>Provozovna vozidla a denního výkonu si odpovídá a zároveň nebyl denní výkon vytvořen systémem..</td><td>Denní výkon je označen jako vytvořený systémem.</td><td>Není možné ho uživatelsky smazat.</td></tr><tr><td colspan="1">Provozovna vozidla a denního výkonu je odlišná.</td><td colspan="1">Není provedena žádná akce.</td><td colspan="1"><p>Zatím nebyla provedena změna provozovny tohoto vozidla.</p></td></tr></tbody></table><p>Druhý případ představuje situaci, kdy máme pro každé vozidlo právě jeden denní výkon. Jedná se pak o běžný stav, my však musíme vyhodnotit, zda je denní výkon vytvořen korektně a odpovídá svými parametry aktuální situaci.</p><table><tbody><tr><th>Popis</th><th>Další podmínka</th><th>Provedená akce</th><th>Poznámka</th></tr><tr><td rowspan="2">Pro vozidlo existuje denní výkon, který je přiřazen ke stejné provozovně.</td><td colspan="1">Denní výkon je vytvořen systémem.</td><td colspan="1">Není provedena žádná akce.</td><td colspan="1">–</td></tr><tr><td colspan="1">Denní výkon není vytvořen systémem.</td><td colspan="1">Denní výkon je označen jako vytvořený systémem.</td><td colspan="1">Uživatel vytvořil denní výkon před přidáním samotného vozidla do WinyX.</td></tr><tr><td rowspan="2"><p>Pro vozidlo existuje denní výkon, který je přiřazen k odlišné provozovně.</p></td><td colspan="1"><p>Denní výkon obsahuje alespoň jednu položku denního výkonu.</p></td><td colspan="1"><p>Systém označí denní výkon jako vytvořený uživatelem (je možné ho odebrat) a následně zruší přiřazení vozidla k tomuto dennímu výkonu.</p><p>Poté je vytvořen denní výkon pro odpovídající vozidlo, den a provozovnu – <strong>v případě, že byla tato provozovna nalezena v úvodu algoritmu pro právě zkoumaný den</strong>.</p></td><td rowspan="2"><p>Uživatel vytvořil denní výkon před přidáním samotného vozidla do WinyX, přiřadil ho však ke špatné provozovně.</p><p>Stav denního výkonu není brán v potaz.</p></td></tr><tr><td colspan="1">Denní výkon neobsahuje žádnou položku denního výkonu.</td><td colspan="1"><p>Denní výkon je smazán.</p><p>Poté je vytvořen denní výkon pro odpovídající vozidlo, den a provozovnu – <strong>v případě, že byla tato provozovna nalezena v úvodu algoritmu pro právě zkoumaný den</strong>.</p></td></tr></tbody></table><p>Třetí případ přestavuje situaci, kdy pro konkrétní vozidlo žádný denní výkon neexistuje.</p><ul><li>V takovém případě dojde k vytvoření nového denního výkonu pro odpovídající vozidlo, den a provozovnu (<strong>provozovna byla nalezena v úvodu algoritmu pro právě zkoumaný den – jinak by nebylo vozidlo vyhodnocováno</strong>).</li></ul><p>Čtvrtý a poslední případ představuje situaci, kdy pro denní výkon již není k dispozici vozidlo. Systém pak postupuju následovně:</p><ul><li>Denní výkon obsahuje alespoň jednu položku denního výkonu – systém označí denní výkon jako vytvořený uživatelem (je možné ho odebrat) a následně zruší přiřazení vozidla k tomuto dennímu výkonu.</li><li>Denní výkon neobsahuje žádnou položku denního výkonu – denní výkon je smazán (<strong>vozidlo může být již přiřazeno k provozovně, pro kterou zatím nejsou vytvořeny žádné denní výkony</strong>).</li></ul><h1>Akceptační testy</h1><p> Není zvolen požadovaný návrh řešení.</p><h1>Poznámka</h1><p>–</p>
</div>
</body>
</html>
