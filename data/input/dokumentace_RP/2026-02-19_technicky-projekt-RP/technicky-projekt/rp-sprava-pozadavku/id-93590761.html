<!DOCTYPE html>
<html lang="cs">
<head>
  <meta charset="utf-8">
  <title>ID-045: Tisková sestava pro itinerář trasy denního výkonu</title>
</head>
<body>
<div class="wiki-content">
<p></p><h1>Požadavek</h1><p>Aplikace umožňuje přípravu tras jednotlivých vozidel pro konkrétní den (plánování denních výkonů). Požadováno je pak doplnění tiskové sestavy, která obsahuje itinerář trasy konkrétního vozidla za požadovaný den. Ten bude určen především pro řidiče těchto vozidel, je tedy kladen důraz na přehlednost a snadnou čitelnost.</p><p>Poznámka: <strong>Nahrazeno <a href="id-97650022.html">ID-055: Zjednodušená tisková sestava pro itinerář trasy denního výkonu</a>. Došlo k výrazné změně zadání.</strong></p><h1>Aktuální stav</h1><p>Aktuálně je pro denní výkony umožněn tisk sestavy POVOS. Ten sice zachycuje jednotlivé objednané služby, které jsou naplánovány na denní výkon, ale není zřejmé jejich pořadí, množství (opakující se objednané služby) a další kontext (např. body průjezdu, dělení služeb, vytvořená MDU). Stávající řešení tedy nesplňuje dříve uvedené požadavky.</p><h1>Návrh řešení</h1><p>Návrh řešení je rozdělen na několik částí, ty spolu souvisí, ale jsou relativně nezávislé. Proto si můžeme dovolit popsat je samostatně. Jedná se o následující části:</p><ul><li><a href="id-93590761.html">Spuštění případu užití</a> (místa, kde uživatel tisk spouští),</li><li><a href="id-93590761.html">Nastavení tiskové sestavy</a> (formulář pro specifikaci tiskového výstupu),</li><li><a href="id-93590761.html">Struktura tiskové sestavy</a> (rozložení samotné tiskové sestavy).</li></ul><p>Výsledný soubor s tiskovou sestavou je pak předán ve formátu PDF, jeho název je vytvořen následovně:</p><ul><li>formát: <strong>Itinerář trasy <datum tisku></strong>,</li><li>příklad: <strong>Itinerář trasy 16. 3. 2021</strong>.</li></ul><h2>Spuštění případu užití</h2><p>Případ užití je spouštěn společně s tiskem sestavy POVOS (je využito i stejné tlačítko). Místa spuštění tedy odpovídají těm pro zmíněnou sestavu:</p><ul><li>obrazovka plánování denních výkonů (M4) – nástrojová lišta přehledu denních výkonů (pro označený denní výkon, možné spustit i jako hromadnou akci),</li><li>obrazovka editace denního výkonu (M5) – nástrojová lišta přehledu lokací objednané služby (pro editovaný denní výkon).</li></ul><p>Jak bylo zmíněno, spuštění probíhá společně se sestavou POVOS, dochází tedy pouze ke změně významu existujícího tlačítka (na obou zmíněných místech). Dále je pak uveden náhled tlačítka pro obrazovku plánování denních výkonů (M4).</p><p><img src="id-045-tiskova-sestava-pro-itinerar-trasy-denniho-vykonu-93590761_images/image2021-3-10 16-3-31.png" data-attachment="true"></p><h2>Nastavení tiskové sestavy</h2><p>K nastavení tiskové sestavy je použit stávající formulář sestavy POVOS, dochází však k jeho modifikaci. Formulář je rozšířen o možnost specifikace, které tiskové sestavy mají být pro který denní výkon tištěny. Jeho náhled je pak uveden na obrázku. Došlo k následujícím změnám:</p><ul><li>Doplnění nadpisu jednotlivých prvků pro zadání hodnoty.</li><li>Doplnění zaškrtávacího tlačítka pro tisk sestavy POVOS – ve výchozím stavu je vše zaškrtnuto.</li><li>Doplnění zaškrtávacího tlačítka pro tisk sestavy Itinerář trasy – ve výchozím stavu není nic zaškrtnuto (výchozí hodnota se může změnit dle zkušeností z praktického provozu).</li><li>Pro obě zaškrtávací tlačítka je doplněna možnost označit vše.</li><li>Pro každý denní výkon je tištěna pouze taková sestava, pro kterou je zaškrtnuto tlačítko.</li><li>Výška formuláře se přizpůsobí počtu obsažených denních výkonů. Pokud je ve formuláři načteno více jak 10 denních výkonů, je zobrazen vertikální posuvník.</li></ul><p>Po potvrzení parametrů tisku je spuštěno generování tiskových sestav, výstupem je jeden soubor pro sestavu POVOS a jeden pro Itinerář trasy.</p><p><img src="id-045-tiskova-sestava-pro-itinerar-trasy-denniho-vykonu-93590761_images/image2021-3-12 14-16-41.png" data-attachment="true"></p><h2>Struktura tiskové sestavy</h2><p>Nyní se dostáváme k samotnému rozložení tiskové sestavy. Ta je složena z dílčích panelů, které si stručně představíme. </p><ul><li>Hlavička – obsahuje základní informace o denním výkonu (datum realizace, vozidlo, řidič) a stránkování.</li><li>Informace o realizaci – jedná se o pole, do kterých řidič vyplňuje základní informace o realizaci denního výkonu (příchod, odchod, přestávky, stav tachometru…). Vychází z tiskové sestavy POVOS.</li><li>Objednavatelé v trase – seznam jednotlivých zákazníků, kteří se v rámci denního výkonu vyskytují. Pořadí pak odpovídá prvnímu výskytu v trase denního výkonu.</li><li>Itinerář trasy – samotný itinerář trasy složený z jednotlivých objednaných služeb a lokací, které mají být navštíveny.</li></ul><p>Rozložení se pak liší dle konkrétní strany dokumentu:</p><ul><li>První strana – k dispozici jsou všechny panely.</li><li>Další strany – k dispozici je pouze hlavička a itinerář trasy.</li></ul><p>Poznámka: Pokud má být pro denní výkon vytištěn lichý počet stran, je doplněna 1 prázdná strana (korektní oboustranný tisk).</p><p><img src="id-045-tiskova-sestava-pro-itinerar-trasy-denniho-vykonu-93590761_images/image2021-3-15 11-38-2.png" data-attachment="true"></p><p>Rozložení dokumentu jako takového jsme si představili, můžeme se tedy zaměřit na jednotlivé panely a jejich strukturu. V závěru si pak ukážeme náhled celé sestavy.</p><h3>Hlavička</h3><p>Hlavička panelu je složena ze 2 částí:</p><ul><li>Identifikace tiskové sestavy – obsahuje datum realizace, identifikaci vozidla a jméno přiřazeného řidiče.</li><li>Stránkování – kromě aktuální stránky je k dispozici i celkový počet stran.</li></ul><p>Poznámka: Hlavička je k dispozici na každé stráně sestavy denního výkonu.</p><p><img src="id-045-tiskova-sestava-pro-itinerar-trasy-denniho-vykonu-93590761_images/image2021-3-16 9-5-29.png" data-attachment="true"></p><h3>Informace o realizaci</h3><p>Informace o realizaci obsahuje pouze pevně daný text, vychází pak z tiskové sestavy POVOS. Došlo pouze k drobným změnám.</p><p>Poznámka: Panel je k dispozici pouze na první straně sestavy denního výkonu.</p><p><img src="id-045-tiskova-sestava-pro-itinerar-trasy-denniho-vykonu-93590761_images/image2021-3-16 9-4-48.png" data-attachment="true"></p><h3>Objednavatelé v trase</h3><p>Skupina Objednavatelé v trase obsahuje názvy zákazníků, kteří se vyskytují v rámci denního výkonu:</p><ul><li>Pořadí odpovídá prvnímu výskytu v rámci trasy denního výkonu.</li><li>Každý ze zákazníků je vytištěn právě jednou.</li><li>V nadpisu skupiny je uveden počet vytištěných zákazníků.</li></ul><p>Poznámka: Výška panelu odpovídá počtu obsažených zákazníků. Panel je pak k dispozici pouze na první straně sestavy denního výkonu.</p><p><img src="id-045-tiskova-sestava-pro-itinerar-trasy-denniho-vykonu-93590761_images/image2021-3-16 9-6-7.png" data-attachment="true"></p><h3>Itinerář trasy</h3><p>Skupina Itinerář trasy obsahuje značné množství informací, začneme tedy s jejím obecným popisem. Následně si popíšeme její dílčí části. Rozložení sestavy je následující:</p><ul><li>Nadpis skupiny – je uveden na každé straně, na které se skupina vyskytuje.</li><li>Položky denního výkonu – jednotlivé položky, které se vyskytují v rámci denního výkonu. Jednotlivé položky denního výkonu jsou odděleny. Rozložení se pak liší dle typu konkrétní položky denního výkonu:<ul><li>Objednaná sužba – kromě lokací objednané služby, kterých může být několik, obsahuje i informace o objednané službě.</li><li>Lokace objednané služby – určena pro dodatečně přidané body na trase (bod průjezdu, cesta na likvidační místo…).</li><li>Časový interval – určena pro položky specifikované časovým obdobím (přestávka).</li><li>Rozdělení – vychází z položky denního výkonu typu Lokace objednané služby a je určena pro rozdělení směny.</li></ul></li></ul><p><img src="id-045-tiskova-sestava-pro-itinerar-trasy-denniho-vykonu-93590761_images/image2021-3-16 10-28-57.png" data-attachment="true"></p><p>Dále si popíšeme jednotlivé typy položek denního výkonu.</p><h4>Objednaná sužba</h4><p>Položka typu Objednaná služba je složena ze 2 částí, ty si popíšeme i s ohledem na dostupné informace:</p><ul><li>Informace o objednané službě – souhrnné informace o objednané službě, jedná se pak o následující položky:<br><ul><li>typ úkonu,</li><li>druhy odpadu (v případě více hodnot jsou jednotlivé druhy odpadu odděleny čárkou),</li><li>typ nádoby,</li><li>název zákazníka.</li></ul></li><li>Lokace objednané služby (v některých případech se může rozložení mírně lišit, např. přestávka či bod průjezdu):<br><ul><li>pořadí v rámci denního výkonu,</li><li>indikace konkrétní akce v lokaci objednané služby (zobrazeno ve formě ikony),</li><li>zkratka typu lokace objednané služby doplněná o akci prováděnou v lokaci (např. LM: Vyprázdnit),</li><li>indikace použití přívěsu (zobrazeno ve formě ikony),</li><li>adresa lokace objednané služby, </li><li>předpokládaný čas v lokaci,</li><li>předpokládaná ujetá vzdálenost v lokaci.</li></ul></li></ul><p>Poznámka: Šířka jednotlivých sloupců je pevně dána, pokud dojde k překročení, je text zalomen na další řádek.</p><p><img src="id-045-tiskova-sestava-pro-itinerar-trasy-denniho-vykonu-93590761_images/image2021-3-16 11-14-33.png" data-attachment="true"></p><h4>Lokace objednané služby</h4><p>Rozložení tohoto typu položky vychází z jednotlivých lokací v rámci položky typu objednaná služba. Obsaženy jsou pak následující informace (v některých případech se může rozložení mírně lišit, např. lokace typu Provozovna):</p><ul><li>pořadí v rámci denního výkonu,</li><li>indikace konkrétního typu lokace objednané služby (zobrazeno ve formě ikony),</li><li>nadpis typu lokace objednané služby (např. bod průjezdu),</li><li>indikace použití přívěsu (zobrazeno ve formě ikony),</li><li>adresa lokace objednané služby, </li><li>předpokládaný čas v lokaci,</li><li>předpokládaná ujetá vzdálenost v lokaci.</li></ul><p>Poznámka: Šířka jednotlivých sloupců je pevně dána, pokud dojde k překročení, je text zalomen na další řádek.</p><p><img src="id-045-tiskova-sestava-pro-itinerar-trasy-denniho-vykonu-93590761_images/image2021-3-16 11-2-25.png" data-attachment="true"></p><p>Specifickými položkami tohoto typu pak je začátek a konec denního výkonu. </p><p><img src="id-045-tiskova-sestava-pro-itinerar-trasy-denniho-vykonu-93590761_images/image2021-3-16 11-2-51.png" data-attachment="true"></p><p><img src="id-045-tiskova-sestava-pro-itinerar-trasy-denniho-vykonu-93590761_images/image2021-3-16 11-5-55.png" data-attachment="true"></p><h4>Časový interval</h4><p>Rozložení tohoto typu položky se liší od ostatních, obsaženy jsou pak následující informace:</p><ul><li>pořadí v rámci denního výkonu,</li><li>indikace konkrétního typu položky (ikona),</li><li>nadpis položky doplněný o délku časového intervalu v minutách,</li><li>předpokládaný čas v lokaci,</li><li>předpokládaná ujetá vzdálenost v lokaci.</li></ul><p>Poznámka: Šířka jednotlivých sloupců je pevně dána, pokud dojde k překročení, je text zalomen na další řádek.</p><p><img src="id-045-tiskova-sestava-pro-itinerar-trasy-denniho-vykonu-93590761_images/image2021-3-16 11-1-51.png" data-attachment="true"></p><h4>Rozdělení</h4><p>Jedná se o obdobu položky denního výkonu typu Lokace objednané služby. Tomu odpovídá i její rozložení.</p><h3>Náhled</h3><p>Nakonec je zobrazen náhled celé sestavy.</p><p><img src="id-045-tiskova-sestava-pro-itinerar-trasy-denniho-vykonu-93590761_images/image2021-3-16 10-26-23.png" data-attachment="true"><img src="id-045-tiskova-sestava-pro-itinerar-trasy-denniho-vykonu-93590761_images/image2021-3-16 8-56-44.png" data-attachment="true"></p><h1>Akceptační testy</h1><p>Pro splnění požadavku musí být splněny následující testovací scénáře.</p><h2>TC01: Tisk itineráře trasy denního výkonu</h2><ol><li>Uživatel zadá požadavek na tisk denního výkonu (společná akce pro sestavu POVOS i Itinerář trasy).</li><li>Systém zobrazí formulář pro nastavení parametrů tisku.</li><li>Uživatel vyplní požadované údaje a potvrdí tisk.</li><li>Systém provede validaci zadaných údajů.</li><li>Systém vygeneruje výsledné soubory dle zadaných informací.<br><ol><li>Pokud má být vytištěn alespoň jeden POVOS: Systém vygeneruje výsledný soubor pro sestavu POVOS.</li><li>Pokud má být vytištěn alespoň jeden Itinerář trasy: Systém vygeneruje výsledný soubor pro sestavu Itinerář trasy.</li></ol></li><li>Systém zavře formulář.</li><li>Systém předá výsledné soubory uživateli – začne stahování těchto souborů.</li></ol><h2>TC02: Zrušení tisku itineráře trasy denního výkonu</h2><ol><li>Uživatel zadá požadavek na tisk denního výkonu (společná akce pro sestavu POVOS i Itinerář trasy).</li><li>Systém zobrazí formulář pro nastavení parametrů tisku.</li><li>Uživatel vyplní požadované údaje a zruší tisk.</li><li>Systém zavře formulář.</li></ol><h1>Poznámka</h1><p>–</p>
</div>
</body>
</html>
