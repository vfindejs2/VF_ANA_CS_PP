<!DOCTYPE html>
<html lang="cs">
<head>
  <meta charset="utf-8">
  <title>ID-057: Rozšíření možností při editaci objednávky</title>
</head>
<body>
<div class="wiki-content">
<p></p><h1>Požadavek</h1><p>Na základě zkušeností z reálného provozu je požadováno rozšíření možností při editaci objednávky. V první fázi (řeší tento požadavek) se pak budeme zabývat zpřístupněním úplné editace takové objednávky, která je ve stavu K realizaci. Jedná se o okamžik, kdy došlo k vygenerování objednaných služeb, zároveň však nebyla žádná z těchto služeb naplánována na jakýkoliv denní výkon.</p><p>Úplná editace objednávek ve stavu K realizaci slouží <strong>výhradně</strong> k opravě chybně zadaných dat. Jejím cílem v žádném případě není řízená změna.</p><p>Poznámka: Do budoucna (fáze 2) bude pravděpodobně požadováno další rozšíření možností při práci s objednávkou. Ve hře je editace objednávky ve stavu Plněná. To znamená, že už došlo ke vložení alespoň jedná z objednaných služeb na denní výkon. Změny v objednávce tedy mohou mít vliv na připravené denní výkony.</p><p>Důvody, proč uživatelé obecně potřebují provádět změny objednávky (resp. dílčích objednaných služeb) i po jejím uložení k realizaci, jsou následující:</p><ul><li>Objednavatel zadal špatný druh odpadu, případně se druh odpadu, který je skutečně obsažen v nádobě, liší (kromě stavební suti je obsažen i azbest).</li><li>Obchodní zástupce při vytváření objednávky nedokáže určit, zda bude proveden vývoz s výměnou nádoby, nebo běžný vývoz.</li><li>…</li></ul><h1>Aktuální stav</h1><p>Aktuálně jsou dostupné akce při editaci objednávky řízeny jejím stavem:</p><ul><li><strong>Úplná editace</strong>: Rozpracovaná, K upřesnění.</li><li><strong>Omezená editace</strong> (pouze změna poznámky): K realizaci, Plněná, Dokončená, Zrušená, Dokončená bez informace o realizaci.</li></ul><p>Editace objednávky je pak omezena z toho důvodu, že již byly vygenerovány objednané služby. Provedené změny v objednávce by pak mohly ovlivnit již existující objednané služby.</p><h1>Návrh řešení</h1><p>Navrhujeme tedy doplnění možnosti úplné editace i pro takové objednávky, které jsou ve stavu K realizaci. To však bude mít dopad nejen na úpravy stávající implementace, zajistit musíme i její rozšíření o zpracování souvisejících objednaných služeb.</p><p>Důležitým předpokladem je skutečnost, že objednané služby takové objednávky, která je ve stavu K realizaci, nejsou (a nikdy nebyly) naplánovány na denní výkon.</p><p>Formulář objednávky bude spolu s odpovídající logikou na pozadí upraven tak, že pro objednávky ve stavu K realizaci bude dostupná úplná editace. To znamená, že bude možné provádět libovolné změny bez ohledu na to, že již mohou existovat související objednané služby.</p><p>Po potvrzení provedených změn dojde k jejich uložení do databáze a následnému zpracování souvisejících dat.</p><ol><li>Systém nalezne všechny takové objednané služby, které byly vytvořeny z editované objednávky.</li><li>U každé nalezené objednané služby bude…<ul><li>provedeno odebrání (objednaná služba není dále dostupná pro uživatele; <strong>v1</strong>),</li><li>provedena změna stavu na Zrušena z důvodu editace objednávky (objednaná služba je stále k dispozici; <strong>v2</strong>).</li></ul></li><li>Systém provede generování nových objednaných služeb dle aktuálního stavu objednávky po provedení změn (pro celou objednávku bez ohledu na rozsah provedených změn).</li></ol><p>Poznámka: Pokud uživatel zruší objednávku, která je ve stavu K realizaci, dochází ke smazání odpovídajících objednaných služeb. </p><p>V závěru si uvedeme důsledky tohoto řešení:</p><ul><li>Jedná se o relativně jednoduché řešení s nízkým rizikem chybovosti.</li><li>Dochází k odebrání/zrušení všech objednaných služeb, a to bez ohledu na rozsah provedených změn.</li><li>Změny na úrovni objednaných služeb <strong>nebudou</strong> zachovány (např. změna časového okna).</li></ul><p>V případě, že by požadované chování mělo zajistit i provádění řízených změn objednávky, je nutné provést revizi návrhu řešení. Zde by pak bylo nutné doplnit případ užití pro aktualizaci objednávky, v takovém případě by docházelo k ukončení platnosti výchozí objednávky a následnému vytvoření objednávky navazující.</p><h1>Akceptační testy</h1><p>Pro splnění požadavku musí být splněny následující testovací scénáře.</p><h2>TC01: Editace objednávky ve stavu K realizaci</h2><ol><li>Uživatel zadá požadavek na editaci objednávky, která je ve stavu K realizaci.</li><li>Systém zobrazí formulář objednávky, který je vyplněn dle zvolené objednávky (k dispozici je úplná editace).</li><li>Uživatel provede požadované změny, které potvrdí.</li><li>Systém provede dále uvedené akce:<br><ul><li>Zpracuje existující objednané služby dané objednávky (provedená akce odpovídá zvolené variantě).</li><li>Provede generování objednaných služeb.</li><li>Uloží provedené změny v rámci objednávky.</li></ul></li><li>Systém zavře formulář objednávky a vrátí se na místo, kde byl případ užití spuštěn.</li></ol><h2>TC02: Zrušení provedených změn při editaci objednávky ve stavu K realizaci</h2><ol><li>Uživatel zadá požadavek na editaci objednávky, která je ve stavu K realizaci.</li><li>Systém zobrazí formulář objednávky, který je vyplněn dle zvolené objednávky (k dispozici je úplná editace).</li><li>Uživatel zruší provedené změny.</li><li>Systém zavře formulář objednávky a vrátí se na místo, kde byl případ užití spuštěn.</li></ol><h1>Poznámka</h1><p>–</p>
</div>
</body>
</html>
