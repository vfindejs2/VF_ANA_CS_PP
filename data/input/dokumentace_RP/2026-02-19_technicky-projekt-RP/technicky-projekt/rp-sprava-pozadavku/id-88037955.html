<!DOCTYPE html>
<html lang="cs">
<head>
  <meta charset="utf-8">
  <title>ID-017: Zobrazení informací o tisku sestavy POVOS</title>
</head>
<body>
<div class="wiki-content">
<p></p><h1>Požadavek</h1><p>Vznikl požadavek na možnost zobrazení informací o tom, s jakým předstihem a zda vůbec byla tisknuta pro jednotlivé denní výkony (DV) sestava Potvrzení o výkonu objednané služby (POVOS).</p><p>Důvodem je pak kontrola, zda uživatelé netisknou POVOS pro jednotlivé DV např. až několik dní po datu realizace – tedy pouze z důvodu, aby měli splněno.</p><h1>Aktuální stav</h1><p>Aktuálně je na úrovni DB ukládána informace, zda byla pro DV sestava POVOS vytištěna. Žádné další informace k dispozici nejsou.</p><h1>Návrh řešení</h1><p>Zobrazení požadovaných informací je pak umožněno několika způsoby:</p><ul><li>Zobrazení v rámci aplikace – požadované informace je možné zobrazit přímo v rámci aplikace (např. přehled DV). To však <strong>nedoporučujeme</strong> – jedná se přidávání nadbytečných informací, které by musely být dostupné pouze pro vedoucí pracovníky (možná komplikace při využití existujících komponent). Navíc by tak zbytečně docházelo k „zanášení“ aplikace.</li><li>Předání formou reportu – jako vhodné se jeví řešení, kdy by byla data předána ve formě reportu. Uživatel zadá parametry reportu, na základě kterých systém vygeneruje soubor s požadovanými informacemi. Jedná se o <strong>preferované řešení</strong>. </li></ul><p>Uvedený návrh řešení se pak zabývá pouze druhou z uvedených variant a je složen z několika dílčích kroků, které na sebe navazují. Postupně si je tedy projdeme. Souhrnný tok událostí je pak uveden v rámci akceptačních testů (oproti běžným reportům probíhá generování synchronně – aby uživatel mohl v rámci této záložky prohlížeče dále pracovat s aplikací, musí počkat na dokončení generování reportu).</p><p> Poznámka: Uvedený návrh řešení představuje dočasné řešení, které bude v budoucnosti nahrazeno, a to ve formě běžného reportu. Tento převod pak bude proveden bez dalších nákladů.</p><h2>Spuštění reportu</h2><p>Report bude možné spustit na obrazovce přehledu denních výkonů, a to z nástrojové lišty tabulky (viz obrázek). Po stisknutí tlačítka dojde k zobrazení formuláře pro nastavení parametrů reportu.</p><p>To, zda bude mít uživatel k dispozici tuto funkčnost, bude možné nastavit ve správě systému FLWW2 (nastavení uživatelských oprávnění uživatelů/rolí – záložka Reporty).</p><p><img src="id-017-zobrazeni-informaci-o-tisku-sestavy-povos-88037955_images/image2020-11-10 14-47-54.png" data-attachment="true"></p><p>Pokud by v rámci přehledu DV byly spouštěny i další reporty, bylo by uvedené tlačítko rozšířeno o kontextovou nabídku, viz obrázek (uvedené názvy reportů jsou orientační).</p><p><img src="id-017-zobrazeni-informaci-o-tisku-sestavy-povos-88037955_images/image2020-11-10 14-56-37.png" data-attachment="true"></p><h2>Nastavení vstupních dat reportu</h2><p>K nastavení parametrů reportu bude využit běžně používaný formulář, jeho obsah pak bude odpovídat vstupním parametrům reportu, které si dále uvedeme:</p><ul><li>Provozovna – nastavení provozovny, pro kterou bude report generován. K dispozici jsou všechny provozovny, na které má konkrétní uživatel oprávnění. Vybrána musí být právě jedna provozovna.</li><li>Období – rozmezí data realizace (od-do), pro které bude report generován. Nastaveny musí být obě hodnoty.</li><li>Typ dopravy – typ dopravy, pro který bude report generován. Kromě používaných typů dopravy bude k dispozici možnost „Vybrat vše“.</li></ul><p>Výsledný report pak bude obsahovat informace o všech denních výkonech (a jejich realizacích), které odpovídají nastaveným parametrům.</p><h2>Struktura reportu</h2><p>Navážeme strukturou samotného reportu. Ten bude předán výhradně ve formě <strong>xlsx</strong> souboru. Pojmenován bude následovně: <strong>Informace o tisku sestavy POVOS</strong>.</p><p>Jednat se pak bude o běžnou tabulku, kdy budou všechny informace obsaženy na jediném listu Excel dokumentu. Samotné sloupce jsou uvedeny v tabulce.</p><table><tbody><tr><th>Atribut</th><th>Popis</th><th colspan="1">Poznámka</th></tr><tr><td colspan="1">Datum realizace</td><td colspan="1">Datum realizace odpovídajícího DV.</td><td colspan="1">–</td></tr><tr><td>Identifikace vozidla</td><td>Identifikace vozidla odpovídajícího DV.</td><td colspan="1">–</td></tr><tr><td colspan="1">Byl vytištěn</td><td colspan="1">Informace, zda byl pro odpovídající DV vytištěn POVOS (možné hodnoty: ano/ne).</td><td colspan="1">–</td></tr><tr><td colspan="1">Byl vytištěn v předstihu</td><td colspan="1">Informace, zda byl pro odpovídající DV vytištěn POVOS v dostatečném předstihu, např. před začátkem jízdy odpovídajícího vozidla (možné hodnoty: ano/ne/–).</td><td colspan="1"><p>Jedná se tedy o porovnání data a času začátku realizace DV a data a času posledního tisku sestavy POVOS pro tento DV.</p><p>Datum a čas realizace začátku jízdy bude získán přímo z realizace DV, bude se tedy jednat o skutečný začátek realizace DV (řidič skutečně začal s realizací DV). V případě, kdy nebude tato informace k dispozici, bude místo hodnoty zobrazen zástupný text „–“.</p></td></tr><tr><td>Datum tisku</td><td>Datum a čas, kdy došlo k poslednímu vytištění sestavy POVOS pro odpovídající DV.</td><td colspan="1">–</td></tr><tr><td colspan="1">Vytiskl</td><td colspan="1">Zaměstnanec přiřazený k uživateli, který provedl poslední vytištění sestavy POVOS pro odpovídající DV.</td><td colspan="1">–</td></tr><tr><td colspan="1">Počet výtisků</td><td colspan="1">Hodnota udávající, kolikrát byla pro odpovídající DV vytištěna sestava POVOS (kolikrát byla vygenerována systémem).</td><td colspan="1">–</td></tr><tr><td>Počet služeb</td><td>Počet objednaných služeb, které byly při posledním tisku sestavy POVOS naplánovány na DV.</td><td colspan="1">Kde má být informace získána – plán/realizace/obojí?</td></tr><tr><td colspan="1">Ujetá vzdálenost</td><td colspan="1">Ujetá vzdálenost v rámci DV ve chvíli, kdy došlo k poslednímu tisku sestavy POVOS.</td><td colspan="1">Kde má být informace získána – plán/realizace/obojí?</td></tr><tr><td colspan="1">Doba jízdy</td><td colspan="1">Doba jízdy v rámci DV ve chvíli, kdy došlo k poslednímu tisku sestavy POVOS.</td><td colspan="1">–</td></tr></tbody></table><p>Poznámka: Nevýhodou může být skutečnost, že se většina uvedených informací vztahuje k poslednímu tisku sestavy POVOS. Je tedy třeba zvážit, jak často může docházet k situaci, kdy je tištěn POVOS ještě v den realizace, např. z důvodu operativních změn.</p><p>Poznámka k implementaci: Příprava reportu samozřejmě zahrnuje i rozšíření datového modelu o potřebné informace, které jsou v rámci reportu obsaženy.</p><h2>Generování a předání reportu uživateli</h2><p>Uživatel potvrdil zadání vstupních parametrů reportu, můžeme je tedy odeslat na server. V tu chvíli začíná generování výsledného souboru a uživatel nemůže dále pracovat s aplikací (na této záložce prohlížeče).</p><p>Jakmile je soubor připraven, je uživateli umožněna další práce s aplikací. Následně začne stahování výsledného souboru.</p><h1>Akceptační testy</h1><p>Pro splnění požadavku musí být splněny následující testovací scénáře.</p><h2>TC01: Spuštění reportu</h2><ol><li>Uživatel zadá požadavek na generování reportu.</li><li>Systém zobrazí formulář pro nastavení vstupních parametrů reportu.</li><li>Uživatel vyplní formulář pro nastavení vstupních parametrů reportu a potvrdí ho.</li><li>Systém odešle požadavek na server.</li><li>Systém začne generovat požadovaný report (s aplikací není možné po dobu generování reportu pracovat).</li><li>Systém dokončí generování požadovaného reportu.</li><li>Systém předá výsledný soubor uživateli (začne stahování).</li></ol><h1>Poznámka</h1><p>Původní návrh řešení byl modifikován s ohledem na způsob, jakým budou dočasně reporty v aplikaci RoadPlan řešeny.</p>
</div>
</body>
</html>
