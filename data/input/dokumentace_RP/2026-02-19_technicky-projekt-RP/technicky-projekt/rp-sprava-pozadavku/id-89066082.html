<!DOCTYPE html>
<html lang="cs">
<head>
  <meta charset="utf-8">
  <title>ID-042: Revize společnosti při tisku objednávky</title>
</head>
<body>
<div class="wiki-content">
<p></p><h1>Požadavek</h1><p>Tiskové sestavy modulu objednávek obsahují mj. informace o konkrétní provozovně, pro kterou je sestava tištěna, a o společnosti, pod kterou tato provozovna spadá (skupina Dodavatel, položky Název, Sídlo, IČO, DIČ, IČ DPH a IBAN). Aktuálně implementované chování však nepodporuje dceřiné společnosti, v uvedených polích jsou vždy vyplněny informace o MPG SK. Požadována je pak revize tohoto chování. Jedná se o následující tiskové sestavy:</p><ul><li>Formulář objednávky (<a href="../funkcni-specifikace/pripady-uziti/103ucxx-tiskove-vystupy-pro-objednavky/103uc01-82117088.html">103UC01: Vytisknout objednávku</a>),</li><li>Potvrzení o vrácení zálohy (<a href="../funkcni-specifikace/pripady-uziti/103ucxx-tiskove-vystupy-pro-objednavky/103uc02-82117091.html">103UC02: Vytisknout potvrzení o vrácení zálohy</a>).</li></ul><h1>Aktuální stav</h1><p>Pro vyplnění hodnoty v uvedených polích je použita konfigurační hodnota. Ta je pak společná pro všechny provozovny.</p><h1>Návrh řešení</h1><p>Pokud chceme splnit uvedený požadavek, musí být zmíněná pole vyplněna dle konkrétní provozovny, pro kterou je sestava tištěna. Hledáme pak společnost (provozovnu 1. úrovně), pod kterou tato provozovna spadá.</p><p>Na úrovni provozovny však neevidujeme všechny informace, které jsou v rámci sestavy tištěny. Uvedená pole tak rozdělíme do 2 skupin, u kterých se bude lišit právě způsob získání požadované hodnoty:</p><ol><li>Informace dostupné v rámci provozovny (je použita nalezená provozovna 1. úrovně):<br><ul><li>Název – hodnota atributu Název (např. Tekovská ekologická).</li><li>Sídlo – hodnota atributu Adresa (např. Nový Tekov 133, 935 33 Nový Tekov).</li></ul></li><li>Informace nedostupné v rámci provozovny (je použit konfigurační soubor, viz dále):<br><ul><li>IČO – hodnota atributu identificationNumber (např. 12345678).</li><li>DIČ – hodnota atributu taxNumber (např. 1234567890).</li><li>IČ DPH – hodnota atributu vatNumber (např. SK12345678).</li><li>IBAN – hodnota atributu iban (např. SK31 1200 0000 1987 4263 7541).</li></ul></li></ol><p><img src="id-042-revize-spolecnosti-pri-tisku-objednavky-89066082_images/image2021-7-2 12-48-43.png" data-attachment="true"></p><p>U druhé skupiny polí je pak použit konfigurační soubor (json). Ten obsahuje specifikaci uvedených polí, a to dle konkrétní společnosti (provozovny 1. úrovně). Jeho struktura je následující:</p><ul><li>organizationalUnitId – identifikátor společnosti (provozovny 1. úrovně),</li><li>identificationNumber – IČO,</li><li>taxNumber – DIČ,</li><li>vatNumber – IČ DPH,</li><li>iban – IBAN.</li></ul><p>Poznámka: Soubor obsahuje potřebné informace o všech společnostech, až při generování tiskové sestavy jsou zvoleny konkrétní hodnoty. Pokud nejsou v rámci souboru informace o konkrétní společnosti k dispozici, není v rámci sestavy tištěna žádná hodnota.</p><h1>Akceptační testy</h1><p>Pro splnění požadavku musí být splněny následující testovací scénáře.</p><h2>TC01: Tisk formuláře objednávky</h2><ol><li>Uživatel zadá požadavek na tisk formuláře objednávky.</li><li>Systém zobrazí formulář pro nastavení parametrů tisku.</li><li>Uživatel vyplní požadované údaje a potvrdí tisk.</li><li>Systém provede validaci zadaných údajů.</li><li>Systém vygeneruje výsledný soubor dle zadaných informací:<br><ul><li>v rámci pole Název (skupina Dodavatel) je vyplněn název nadřazené provozovny té provozovny, pro kterou je sestava tištěna (atribut Název; vždy jsou vyplněny informace o provozovně první úrovně),</li><li>v rámci pole Adresa (skupina Dodavatel) je vyplněna adresa nadřazené provozovny té provozovny, pro kterou je sestava tištěna (atribut Adresa; vždy jsou vyplněny informace o provozovně první úrovně),</li><li>v rámci pole IČO (skupina Dodavatel) je vyplněna odpovídající hodnota z konfiguračního souboru pro nadřazenou provozovnu (atribut identificationNumber; vždy jsou vyplněny informace související s provozovnou první úrovně),</li><li>v rámci pole DIČ (skupina Dodavatel) je vyplněna odpovídající hodnota z konfiguračního souboru pro nadřazenou provozovnu (atribut taxNumber; vždy jsou vyplněny informace související s provozovnou první úrovně),</li><li>v rámci pole IČ DPH (skupina Dodavatel) je vyplněna odpovídající hodnota z konfiguračního souboru pro nadřazenou provozovnu (atribut vatNumber; vždy jsou vyplněny informace související s provozovnou první úrovně),</li><li>v rámci pole IBAN (skupina Dodavatel) je vyplněna odpovídající hodnota z konfiguračního souboru pro nadřazenou provozovnu (atribut iban; vždy jsou vyplněny informace související s provozovnou první úrovně).</li></ul></li><li>Systém zavře formulář.</li><li>Systém předá výsledný souboru uživateli – začne stahování tohoto souboru.</li></ol><h2>TC02: Tisk potvrzení o vrácení zálohy</h2><ol><li>Uživatel zadá požadavek na tisk potvrzení o vrácení zálohy.</li><li>Systém zobrazí formulář pro nastavení parametrů tisku.</li><li>Uživatel vyplní požadované údaje a potvrdí tisk.</li><li>Systém provede validaci zadaných údajů.</li><li>Systém vygeneruje výsledný soubor dle zadaných informací:<br><ul><li>v rámci pole Název (skupina Dodavatel) je vyplněn název nadřazené provozovny té provozovny, pro kterou je sestava tištěna (atribut Název; vždy jsou vyplněny informace o provozovně první úrovně),</li><li>v rámci pole Adresa (skupina Dodavatel) je vyplněna adresa nadřazené provozovny té provozovny, pro kterou je sestava tištěna (atribut Adresa; vždy jsou vyplněny informace o provozovně první úrovně),</li><li>v rámci pole IČO (skupina Dodavatel) je vyplněna odpovídající hodnota z konfiguračního souboru pro nadřazenou provozovnu (atribut identificationNumber; vždy jsou vyplněny informace související s provozovnou první úrovně),</li><li>v rámci pole DIČ (skupina Dodavatel) je vyplněna odpovídající hodnota z konfiguračního souboru pro nadřazenou provozovnu (atribut taxNumber; vždy jsou vyplněny informace související s provozovnou první úrovně),</li><li>v rámci pole IČ DPH (skupina Dodavatel) je vyplněna odpovídající hodnota z konfiguračního souboru pro nadřazenou provozovnu (atribut vatNumber; vždy jsou vyplněny informace související s provozovnou první úrovně),</li><li>v rámci pole IBAN (skupina Dodavatel) je vyplněna odpovídající hodnota z konfiguračního souboru pro nadřazenou provozovnu (atribut iban; vždy jsou vyplněny informace související s provozovnou první úrovně).</li></ul></li><li>Systém zavře formulář.</li><li>Systém předá výsledný souboru uživateli – začne stahování tohoto souboru.</li></ol><h1>Poznámka</h1><p>Informace o společnostech: Zoznam_spoločnosti a kontaktné údaje.doc.</p>
</div>
</body>
</html>
