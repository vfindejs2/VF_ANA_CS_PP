<!DOCTYPE html>
<html lang="cs">
<head>
  <meta charset="utf-8">
  <title>ID-005: Omezení při vytváření zákazníka dle existujícího podnikatelského subjektu</title>
</head>
<body>
<div class="wiki-content">
<p></p><h1>Požadavek</h1><p>V rámci aplikace je možné založit nového zákazníka, který může být zadán buď zcela uživatelem, nebo ve spolupráci s rejstříkem podnikatelských subjektů. V druhém případě je pak část informací předvyplněna dle zvoleného subjektu.</p><ul><li>Zákazník pak požaduje, aby uživatel nemohl měnit údaje získané z externího systému.</li><li>Navíc je požadováno přidání kontroly, zda vytvářený zákazník již v rámci systému neexistuje.</li></ul><h1>Aktuální stav</h1><p>Uživatel není při vytváření nového zákazníka omezen, co se týče změn informací, které byly získány z externího systému. Není prováděna kontrola, zda je vytvářený zákazník již obsažen.</p><h1>Návrh řešení</h1><p>Uvedené požadavky je možné řešit. Jako první je pak uvedeno chování zajišťující nemožnost změny informací získaných z rejstříku podnikatelských subjektů:</p><ul><li>Jakmile uživatel načte zákazníka z rejstříku podnikatelských subjektů, dojde ve formuláři k uzamčení dále uvedených polí (není umožněna jejich editace): Název, Adresa sídla, Právní forma, IČO, DIČ, IČ DPH, Plátce DPH.</li><li>Pokud uživatel změní typ zákazníka na hodnotu Nepodnikatel, je umožněna editace uvedených polí. Pokud však uživatel opětovně změní typ zákazníka na hodnotu Podnikatel (a zároveň je ve formuláře stále vyplněn podnikatelský subjekt z externího systému), uvedená pole jsou opět znepřístupněna.</li><li>V rámci formuláře bude doplněno tlačítko pro jeho „vyčištění“, které nastaví formulář do výchozího stavu (není vyplněno žádné z polí). V takovém případě dojde k případnému odemčení uvedených polí, bude tedy umožněna jejich editace.</li><li>Poznámka: K zákazníkovi bude přidán atribut <strong>Načten z externího systému</strong>. Ten zajistí znemožnění editace uvedených polí i v případě, kdy uživatel zákazníka uloží a opětovně spustí jeho editaci.</li></ul><p>Poznámka: Při načtení zákazníka z rejstříku podnikatelských subjektů však nebude možné v rámci editace adresy sídla rovnou vytvořit místo realizace s totožnou adresou – editace adresy sídla nebude dostupná. Aktuální chování však umožňuje snadné vytvoření místa realizace, kdy jeho adresa odpovídá adrese sídla. Chování je následující:</p><ul><li>Pokud je vyplněna adresa sídla a zároveň není přidáno žádné místo realizace, jsou do formuláře místa realizace automaticky předvyplněny informace o adrese sídla.</li><li>Uživatel pak pro tuto adresu pouze spustí geokódování a případně blíže specifikuje souřadnice.</li></ul><p>Kontrola existence právě vytvářeného zákazníka pak bude probíhat následovně:</p><ul><li>Při uložení zákazníka dojde ke kontrole, zda již v rámci systému není zákazník se stejným IČO (případně číslem občanského průkazu) obsažen. Pokud ano, je zobrazen dotaz, zda si uživatel přeje zákazníka opravdu uložit. Potvrzením dojde k vytvoření nového zákazníka (<strong>není</strong> přepsán ten původní), v opačném případě dojde k návratu zpět do formuláře.</li><li>Kontrola bude probíhat jak při vytvoření nového zákazníka, tak u editace stávajícího. V rámci editace pak nebude prováděna kontrola s právě editovaným zákazníkem, bude hledána další výskyt v rámci existujících zákazníků.</li></ul><h1>Akceptační testy</h1><p>Pro splnění požadavku musí být splněny následující testovací scénáře.</p><h2>TC01: Načtení podnikatelského subjektu</h2><p>V rámci formuláře zákazníka je nastaven typ zákazníka na Podnikatel.</p><ol><li>Uživatel zadá do odpovídajícího pole hledaný řetězec (alespoň 3 znaky).</li><li>Systém nabídne prvních 10 podnikatelských subjektů, kteří vyhovují zadanému řetězci.</li><li>Uživatel zvolí požadovaný podnikatelský subjekt.</li><li>Systém vyplní v rámci formuláře informace o podnikatelském subjektu.<br></li><li>Systém znepřístupní pole pro zadání některých údajů (není umožněna jejich editace): Název, Adresa sídla, Právní forma, IČO, DIČ, IČ DPH, Plátce DPH.</li></ol><p>Poznámka: V rámci testovacího scénáře je abstrahováno od nastavení hodnoty atributu Načten z externího systému. To probíhá na pozadí.</p><h2>TC02: Změna typu zákazníka</h2><p>V rámci formuláře je načten podnikatelský subjekt z externího systému. Zároveň je nastaven typ zákazníka na Podnikatel.</p><ol><li>Uživatel provede nastavení typu Zákazníka na Nepodnikatel.</li><li>Systém aktualizuje zobrazené ovládací prvky pro zadání hodnoty a umožní jejich editaci.</li><li>Uživatel provede nastavení typu Zákazníka na Podnikatel.</li><li>Systém aktualizuje zobrazené ovládací prvky pro zadání hodnoty a u některých znemožní editaci: Název, Adresa sídla, Právní forma, IČO, DIČ, IČ DPH, Plátce DPH.</li></ol><p>Poznámka: V rámci testovacího scénáře je abstrahováno od nastavení hodnoty atributu Načten z externího systému. To probíhá na pozadí.</p><h2>TC03: Nastavení formuláře do výchozího stavu</h2><ol><li>Uživatel stiskne tlačítko pro vyčištění formuláře</li><li>Systém vymaže obsah všech polí a přehledů formuláře.</li><li>Systém umožní editaci v rámci všech polí.</li></ol><p>Poznámka: V rámci testovacího scénáře je abstrahováno od nastavení hodnoty atributu Načten z externího systému. To probíhá na pozadí.</p><h1>Poznámka</h1><p>–</p>
</div>
</body>
</html>
