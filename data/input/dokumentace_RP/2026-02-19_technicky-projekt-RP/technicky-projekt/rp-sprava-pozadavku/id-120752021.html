<!DOCTYPE html>
<html lang="cs">
<head>
  <meta charset="utf-8">
  <title>ID-097: Report problematických jízd</title>
</head>
<body>
<div class="wiki-content">
<p></p><h1>Požadavek</h1><p>V rámci synchronizace se systémem WinyX jsou předávány informace o likvidačních místech a jízdách. V některých případech však nedojde k přenosu záznamu. To je ve většině případů způsobeno problémem v datech…</p><p>Z pohledu tohoto požadavku nás pak zajímá pouze synchronizace jízd, ty vznikají na denní bázi. Je požadováno doplnění reportu s informacemi o jízdách, které se nedostaly do aplikace RoadPlan. Obsaženy by měly být minimálně tyto informace:</p><ul><li>číslo jízdy,</li><li>datum její realizace,</li><li>chybové hlášení.</li></ul><h1>Aktuální stav</h1><p>Aktuálně jsou chybová hlášení evidována na úrovni interního systému. K dispozici jsou pak informace o každém pokusu o synchronizaci dané jízdy.</p><ul><li>Problematická jízda je tedy obsažena pro každý synchronizační cyklus.</li><li>K dispozici jsou informace potřebné pro odstranění příčiny problému.</li><li>Ty jsou ovšem evidovány v těžko čitelné podobě (pro běžného uživatele).</li></ul><h1>Návrh řešení</h1><p>Nyní se dostáváme k samotnému návrhu. Cílem je nalézt nenáročné, ale efektivní řešení. To může být dle poznatků z reálného provozu dále rozvíjeno.</p><p>Výchozím způsobem pro generování a následné získání reportu bude <strong>ruční stažení</strong>. To bude dostupné zadáním URL adresy přímo v prohlížeči.</p><ul><li>Uživatel tedy získá odkaz, pomocí kterého bude možné spustit generování reportu. Jakmile je report připraven, začíná jeho stahování.</li><li>Na úrovni odkazu bude možné nastavit požadované datum realizace (např. 2025-01-15) a provozovnu (zadáno jako ID, např. 24).</li><li>Vstupní parametry dotazu jsou nepovinné. Pokud uživatel některý z parametrů nezadá, bude použita výchozí hodnota. <br><ul><li>Pro datum realizace se bude jednat o období začínající dnešním dnem.</li><li>Při nezadání provozovny budou předány všechny jízdy bez ohledu na ni.</li></ul></li><li>K této funkčnosti bude samozřejmě předán jednoduchý návod. Generování reportu tedy bude dostupné také pro dispečery.</li></ul><p> Uvedené chování může být doplněno o automatizované odesílání reportu pomocí <strong>elektronické pošty</strong> (pracnost bude uvedena samostatně).</p><ul><li>Na úrovni konfigurace bude nastaveno pravidlo opakování, podle kterého bude spouštěno generování reportu (např. každý den v 6:00, 9:00, 12:00 a 15:00).</li><li>Ve stanovené časy tedy proběhne generování reportu, který bude zaslán elektronickou poštou na zodpovědnou osobu (seznam e-mailových adres).</li><li>Součástí e-mailu bude také příloha. Ta bude obsahovat <strong>xlsx</strong> soubor s reportem, který bude získán stejným způsobe jako u ručního generování reportu (viz dříve).</li><li>Obsaženy budou informace o problematických jízdách, které mají dnešní nebo novější datum realizace. Dostupné budou záznamy všech provozoven.</li></ul><p><em>Interní poznámka: Pro získání <strong>xlsx</strong> souboru bude připraveno API, které bude použito jak při ručním generování, tak při zasílání elektronickou poštou.</em></p><p>Samotný report tedy bude předán ve formě <strong>xlsx souboru</strong>. V něm obsažené záznamy budou získány dle dále uvedené logiky:</p><ul><li>Pokud jsou při ručním spuštění reportu předány vstupní parametry, jsou odpovídajícím způsobem omezeny také v reportu dostupné záznamy.</li><li>Pro jízdu může vznikat chybové hlášení opakovaně – při každém synchronizačním běhu. V rámci reportu pak bude dostupný pouze ten nejnovější záznam.</li><li>Pokud dojde např. k opravě dat na straně WinyX, po kterém již dojde k přenosu jízdy, nebude tato jízda dále figurovat v reportu (již došlo k její synchronizaci). </li></ul><p>Nyní se dostáváme ke struktuře reportu. V něm obsažené informace jsou uvedeny v tabulce.</p><table><tbody><tr><th>Sloupec</th><th>Stručný popis</th><th>Příklad hodnoty</th><th>Poznámka</th></tr><tr><td>Jízda</td><td>Identifikátor jízdy.</td><td>12591105</td><td>Dle tohoto identifikátoru je možné nalézt jízdu také ve WinyX.</td></tr><tr><td>Datum a čas synchronizace</td><td>Datum a čas, ve kterém proběhl poslední neúspěšný pokus o synchronizaci dané jízdy.</td><td>7. 1. 2025, 09:01</td><td>Hodnota odpovídá místnímu času.</td></tr><tr><td colspan="1">Provozovna</td><td colspan="1">Provozovna, pro kterou měla jízda vzniknout.</td><td colspan="1">Praha</td><td colspan="1">Jedná se o provozovnu na straně RP.</td></tr><tr><td colspan="1">Chybové hlášení</td><td colspan="1">Srozumitelný popis důvodu, proč nedošlo k synchronizaci dané jízdy.</td><td colspan="1">–</td><td colspan="1">Konkrétní návrh bude řešen v rámci detailní analýzy.</td></tr></tbody></table><p>Z výše uvedeného pak vychází také technické řešení, to si pro úplnost alespoň stručně popíšeme.</p><ul><li>Vznikne nová tabulka, v rámci které budou ukládána dílčí chybová hlášení. Bude pak možné identifikovat, v rámci jaké akce chybové hlášení vzniklo (např. synchronizace jízd).</li><li>Na úrovni jednotlivých záznamů budou ukládány potřebné informace pro generování reportu. Právě ty budou následně předány uživateli ve formě <strong>xlsx souboru</strong> s reportem.</li></ul><h1>Akceptační testy</h1><p>Pro splnění požadavku musí být splněny následující testovací scénáře.</p><h2>TC01: Xxx</h2><ol><li>Systém…</li></ol><h1>Poznámka</h1><p>–</p>
</div>
</body>
</html>
