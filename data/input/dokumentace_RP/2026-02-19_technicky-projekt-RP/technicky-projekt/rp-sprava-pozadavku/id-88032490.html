<!DOCTYPE html>
<html lang="cs">
<head>
  <meta charset="utf-8">
  <title>ID-013: Výpadky – nedostupné pozice</title>
</head>
<body>
<div class="wiki-content">
<p></p><h1>Požadavek</h1><p>V rámci testování se objevily případy, kdy pro některá vozidla nejsou k dispozici všechny pozice. V rámci monitoringu realizace denních výkonů pak nejsou z tohoto důvodu k dispozici všechna potřebná data. To se projevuje hned v několika ohledech:</p><ul><li>získaná trajektorie vozidla se v rámci RP a FLWW2 liší,</li><li>nemusí dojít ke správnému vyhodnocení realizace jednotlivých lokací (mohou chybět data o průjezdu danou oblastí).</li></ul><p>Důvod, proč nejsou pozice k dispozici, není přesně znám – je potřeba jej přesně specifikovat, k tomu by mělo pomoci dále uvedené zaznamenávání chybových stavů. Aktuálně získané informace jsou pak následující:</p><ul><li>Z důvodu vytížení serveru získá RP odpověď typu „timeout“ místo toho, aby API FLWW2 vrátilo požadované informace. Jedná se o pravděpodobný důvod uvedeného problému, ale není jisté, zda se tak děje pouze v tomto případě.</li><li>Předpoklad, že některé pozice jsou z důvodu vytížení geoserveru nedostupné (nebylo pro ně provedeno reverzní geokódování, a tak čekají ve frontě mimo ostatní pozice), se ukázal jako mylný.</li><li>Dalším důvodem nedostupnosti pozic může být výpadek, tedy že se pozice z vozidla do FLWW2 ani nedostanou. Jsou načteny až dodatečně.</li></ul><p>Poznámka: Jedná se o stejný problém, jako v rámci požadavku <a href="#" data-page-title="ID-012: Získání informace o trase po výpadku GPS">ID-012: Získání informace o trase po výpadku GPS</a>.</p><h1>Aktuální stav</h1><p>Vyhodnocení realizace je složeno ze dvou kroků – průběžné (opakované) vyhodnocení dat během dne realizace a závěrečné vyhodnocení při ukončení realizace.</p><p>Došlo k opravě algoritmu pro vyhodnocení realizace, která probíhá na konci dne realizace. Zde jsou pro jednotlivá vozidla získávány následující informace:</p><ul><li>celkem ujetá vzdálenost,</li><li>čas konce poslední jízdy (pokud jízda přesahuje do dalšího dne, je nastaven čas 23:59:59),</li><li>průběh trajektorie (zde došlo k opravě),</li><li>události odpovídající aktivaci sledovaného vstupu.</li></ul><p>Navíc bylo rozšířeno chování, které se stará o vyhodnocení realizace během dne. Řekněme, že poslední získaná pozice byla vygenerována v 16:25. Systém pak vezme uvedené časové razítko a vyhodnotí časové rozmezí (odečte 15 minut), pro které budou načteny pozice. Výsledkem je tedy interval, který vypadá následovně: <strong>16:10-Teď</strong>. Pro toto časové rozmezí jsou získávány pozice. To znamená, že pokud některá z pozic přišla se zpožděním, bude sice vyhodnocena až dodatečně, ale nepřijdeme o ni.</p><h1>Návrh řešení</h1><p>–</p><h1>Akceptační testy</h1><p> Není zvolen požadovaný návrh řešení.</p><h1>Poznámka</h1><p>–</p>
</div>
</body>
</html>
