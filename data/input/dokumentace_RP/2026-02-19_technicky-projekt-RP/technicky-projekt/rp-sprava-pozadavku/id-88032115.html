<!DOCTYPE html>
<html lang="cs">
<head>
  <meta charset="utf-8">
  <title>ID-001: Revize chování při uzavření objednávky</title>
</head>
<body>
<div class="wiki-content">
<p></p><h1>Požadavek</h1><p>Vzhledem k aktuální situaci (krizový stav) nastávají případy, kdy je třeba pozastavit realizaci některých objednávek, případně alespoň modifikovat četnost obsluh jednotlivých nádob.</p><p>Poznámka: Již dříve byl řešen změnový požadavek s možností aktualizace objednávky (viz <a href="../funkcni-specifikace/pripady-uziti/100ucxx-objednavky/100uc11-81592476.html">100UC11: xAktualizovat objednávku</a>, poznámka: může se jednat o neaktuální popis řešení). Ten zajišťoval možnost provést změnu přímo v rámci objednávky, zjednodušeně by tedy došlo k vytvoření nové verze objednávky. Požadavek byl však s ohledem na pracnost zamítnut.</p><h1>Aktuální stav</h1><p>K dispozici je možnost zrušení či uzavření objednávky. Ve chvíli, kdy už je část objednávky realizována, je k dispozici pouze její uzavření. Aby však bylo možné objednávku uzavřít, musí být splněny určité podmínky:</p><ul><li>Objednávka je v jednom z uvedených stavů: K realizaci, Plněná.</li><li>Jsou vygenerovány všechny objednané služby.</li><li>Všechny vygenerované objednané služby jsou v jednom z uvedených stavů: Realizovaná, Nezrealizovaná, Zrušená.</li></ul><p>A právě poslední podmínka může být problémem. Pro objednávku již mohou být vygenerovány desítky objednaných služeb, které je nutné ručně zrušit (po jedné).</p><h1>Návrh řešení</h1><p>Problém je pak možné řešit několika způsoby, ty si dále uvedeme.</p><p>Poznámka: Výsledkem uvedených návrhů řešení je předčasné uzavření objednávky. Následně je tedy nutné vytvořit objednávku novou.</p><h2>Hromadné rušení objednaných služeb (1)</h2><p>Uživatel může jednotlivé objednané služby zrušit a následně uzavřít i celou objednávku – to je již implementováno. Aktuálně je však nucen rušit objednané služby po jedné. Jako možné řešení se jeví doplnění hromadného rušení objednaných služeb. To by probíhalo následovně:</p><ol><li>Uživatel označí požadované objednané služby (zahrnuje doplnění možnosti hromadného výběru v tabulce).</li><li>Následně stiskne tlačítko pro zrušení objednaných služeb, to provede hromadné zrušení všech označených služeb (zahrnuje revizi chování funkce pro rušení objednané služby tak, aby dokázala na vstupu přijmout množinu objednaných služeb).</li></ol><p>Poznámka:</p><ul><li>Hromadné rušení bude dostupné pouze v případě, kdy budou všechny označené objednané služby umožňovat zrušení.</li><li>Jako vhodná se jeví revize ostatních funkčností, u kterých dává smysl jejich hromadné provedení.</li></ul><h2>Revize chování pro uzavření objednávky (2)</h2><p>Dalším možným řešením problému je přímé uzavření stávající objednávky a vytvoření nové, u které již budou potřebné změny zaneseny. Aktuálně je však možné objednávku uzavřít pouze v případě, kdy jsou splněny určité podmínky (viz dříve). Pokud se ale vrátíme k uvedenému případu z praxe, snadno mohou nastat situace, kdy alespoň jedna z podmínek splněna není:</p><ul><li>Může být použito pravidlo opakování s neomezenou délkou období.</li><li>Všechny vygenerované objednané služby nemusí být „nějakým“ způsobem ukončeny. Při zakládání objednávky se totiž nepočítalo s tím, že nastane krizový stav.</li></ul><p>Uvedenou situaci je tedy nutné řešit, navrhujeme pak následující postup:</p><ul><li>Bude umožněno uzavření i takových objednávek, které nesplňují některé z podmínek.</li><li>Systém uživatele upozorní, že v rámci objednávky existují objednané služby, které zatím nebyly ukončeny, a zároveň se zeptá, zda si uživatel přeje tyto objednané služby zrušit.<br><ul><li>Nenaplánované služby by byly rovnou zrušeny.</li><li>Naplánované služby by byly nejprve odebrány z denních výkonů.</li></ul></li><li>Zároveň dojde k případnému zastavení generování dalších objednaných služeb.</li></ul><p>Následně uživatel vytvoří objednávku novou, kde nastaví aktuální požadavky na realizaci.</p><p>Poznámka: Dodatečně byla přidána kontrola, zda se v rámci objednávky nevyskytují takové objednané služby, které jsou naplánovány na právě plněný denní výkon. V takovém případě není možné objednávku uzavřít do doby, kdy uživatel tyto objednané služby z denních výkonů ručně odebere.</p><h1>Akceptační testy</h1><h2>TC01: Uzavření objednávky</h2><ol><li>Uživatel zadá požadavek na uzavření objednávky.</li><li>Pokud existuje pod objednávkou alespoň jedna objednaná služba ve stavu Ke kontrole:<br><ol><li>Systém zobrazí uživateli informaci, že uzavření objednávky není z uvedeného důvodu možné.</li><li>Uživatel potvrdí zobrazenou informaci.</li><li>Testovací scénář končí.</li></ol></li><li>Pokud existuje pod objednávkou alespoň jedna objednaná služba ve stavu Naplánovaná, která je zároveň vložena na Denní výkon ve stavu Plněný:<ol><li>Systém zobrazí uživateli informaci, že uzavření objednávky není z uvedeného důvodu možné.</li><li>Uživatel potvrdí zobrazenou informaci.</li><li>Testovací scénář končí.<br></li></ol></li><li>Systém se dotáže uživatele, zda si opravdu přeje objednávku uzavřít.</li><li>Uživatel potvrdí zobrazené hlášení.</li><li>Pokud existují pod objednávkou takové objednané služby, které jsou naplánovány na denní výkony (objednaná služba je ve stavu Naplánovaná):<br><ol><li>Systém zruší naplánování těchto objednaných služeb na denní výkony (vyžaduje oprávnění na modifikaci denních výkonů).</li></ol></li><li>Pokud existují pod objednávkou takové objednané služby, které zatím nebyly naplánovány na denní výkony (objednaná služba je ve stavu K naplánování):<br><ol><li>Systém zruší tyto objednané služby (vyžaduje oprávnění na modifikaci objednaných služeb).</li></ol></li><li>Systém provede uzavření objednávky.</li></ol><h2>TC02: Zrušení uzavření objednávky</h2><ol><li>Uživatel zadá požadavek na uzavření objednávky.</li><li>Systém se dotáže uživatele, zda si opravdu přeje objednávku uzavřít.</li><li>Uživatel zruší uzavírání objednávky.</li></ol><h1>Poznámka</h1><p>–</p>
</div>
</body>
</html>
