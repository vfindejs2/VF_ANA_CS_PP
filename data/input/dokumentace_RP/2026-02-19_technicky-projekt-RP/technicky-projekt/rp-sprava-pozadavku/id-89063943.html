<!DOCTYPE html>
<html lang="cs">
<head>
  <meta charset="utf-8">
  <title>ID-036: Vyhledávání rámcové smlouvy ve formuláři objednávky</title>
</head>
<body>
<div class="wiki-content">
<p></p><h1>Požadavek</h1><p>V rámci formuláře objednávky je možné vybrat pomocí našeptávače požadovanou rámcovou smlouvu, a to buď na úrovni nastavené provozovny, nebo pro zvoleného zákazníka. Zde je pak požadována taková úprava chování, aby usnadnila uživatelům práci. Ti pak rámcové smlouvy dle jejich čísla hledají následovně:</p><ul><li>číslo smlouvy začíná zadaným textem,</li><li>číslo smlouvy končí zadaným textem,</li><li>číslo smlouvy přesně odpovídá zadanému textu.</li></ul><p>Poznámka: Uvedený požadavek se netýká výběrového dialogu, který lze také použít pro výběr rámcové smlouvy.</p><h1>Aktuální stav</h1><p>Aktuálně jsou nabízeny rámcové smlouvy s takovým číslem, které obsahuje hledaný text – bez ohledu na jeho pozici v rámci čísla rámcové smlouvy.</p><p><img src="id-036-vyhledavani-ramcove-smlouvy-ve-formulari-objednavky-89063943_images/image2020-10-26 11-35-57.png" data-attachment="true"></p><h1>Návrh řešení</h1><p>Jako vhodné se jeví doplnění možnosti pokročilého vyhledávání. To bude stále probíhat pouze podle čísla smlouvy, bude však možné specifikovat, jakým způsobem mají být rámcové smlouvy vyhledávány. K dispozici pak budou následující způsoby zadávání.</p><table><tbody><tr><th>Způsob zadávání</th><th>Popis</th><th>Příklad zadání</th><th>Náhled</th><th>Poznámka</th></tr><tr><td colspan="1"> Fulltextové vyhledávání</td><td colspan="1"><p>Při běžném zadání hledaného textu je v čísle smlouvy vyhledáváno „fulltextově“.</p><p>Pokud je nalezena rámcová smlouva s číslem, které přesně odpovídá hledanému textu, je tato smlouva zobrazena jako první.</p></td><td colspan="1">120</td><td colspan="1"><img src="id-036-vyhledavani-ramcove-smlouvy-ve-formulari-objednavky-89063943_images/image2020-11-11 18-23-52.png" data-attachment="true"></td><td colspan="1"> </td></tr><tr><td>Číslo smlouvy začíná hledaným textem</td><td><p>Při zadání pomocného znaku za hledaným textem je vždy vyhledáváno „od začátku“ čísla smlouvy. Úplná specifikace tohoto způsobu zadávání je následující:</p><ul><li>Pomocný znak: *.</li><li>Pomocný znak je vyhodnocen pouze v případě, že je uveden jako úplně poslední znak hledaného textu.</li><li>Pokud je pomocný znak uveden na jiné pozici, je vyhodnocován i při porovnávání s číslem smlouvy (pokud je tedy hledaný text zadán jako „<strong>120**</strong>“, je číslo rámcové smlouvy porovnáváno s textem „<strong>120*</strong>“).</li></ul><p>Pokud je nalezena rámcová smlouva s číslem, které přesně odpovídá hledanému textu, je tato smlouva zobrazena jako první.</p></td><td>120*</td><td><img src="id-036-vyhledavani-ramcove-smlouvy-ve-formulari-objednavky-89063943_images/image2020-11-11 18-15-48.png" data-attachment="true"></td><td><p>Pomocný znak je v rámci porovnání s číslem smlouvy samozřejmě ignorován.</p><p>Pomocný znak je pak specifikován pomocí databázové konfigurační hodnoty.</p></td></tr><tr><td>Číslo smlouvy končí hledaným textem</td><td><p>Při zadání pomocného znaku před hledaným textem je vždy vyhledáváno „od konce“ čísla smlouvy. Úplná specifikace tohoto způsobu zadávání je následující:</p><ul><li>Pomocný znak: *.</li><li>Pomocný znak je vyhodnocen pouze v případě, že je uveden jako úplně první znak hledaného textu.</li><li>Pokud je pomocný znak uveden na jiné pozici, je vyhodnocován i při porovnávání s číslem smlouvy (pokud je tedy hledaný text zadán jako „<strong>**120</strong>“, je číslo rámcové smlouvy porovnáváno s textem „<strong>*120</strong>“).</li><li>Speciálním případem je zadání textu ve tvaru „<strong>*120*</strong>“, v takovém případě je hledán text „<strong>120*</strong>“.</li></ul><p>Pokud je nalezena rámcová smlouva s číslem, které přesně odpovídá hledanému textu, je tato smlouva zobrazena jako první.</p></td><td>*120</td><td><img src="id-036-vyhledavani-ramcove-smlouvy-ve-formulari-objednavky-89063943_images/image2020-10-26 12-1-33.png" data-attachment="true"></td><td><p>Pomocný znak je v rámci porovnání s číslem smlouvy samozřejmě ignorován.</p><p>Pomocný znak je pak specifikován pomocí databázové konfigurační hodnoty.</p></td></tr></tbody></table><p>Rámcové smlouvy pak nejsou porovnávány jen oproti zadanému textu, musí být splněny i další podmínky, které si nyní uvedeme (jedná se o stávající chování):</p><ul><li>jedná se o rámcovou smlouvu odpovídající provozovny,</li><li>dnešní datum se pohybuje v rozmezí platnosti rámcové smlouvy,</li><li>pokud je již vybrán zákazník, jedná se rámcovou smlouvu tohoto zákazníka.</li></ul><p>Systém pak uživateli nabídne prvních 10 nalezených rámcových smluv, které odpovídají zadanému textu a uvedeným kritériím, přičemž…</p><ul><li>Jako první jsou uvedeny rámcové smlouvy, u kterých číslo přesně odpovídá hledanému textu – ty jsou řazeny dle jejich interního ID.</li><li>Zbývající rámcové smlouvy jsou řazeny vzestupně dle čísla smlouvy (jedná se o textovou hodnotu).</li></ul><p>Poznámka: Maximální množství nabízených záznamů je pak specifikováno pomocí databázové konfigurační hodnoty.</p><p>Jako vhodné se pak jeví doplnění detailních informací v rámci kontextové nabídky s nalezenými rámcovými smlouvami. Navrhujeme pak následující formát textového výstupu: <Číslo smlouvy>, <Název zákazníka>.</p><p><img src="id-036-vyhledavani-ramcove-smlouvy-ve-formulari-objednavky-89063943_images/image2020-10-26 12-51-47.png" data-attachment="true"></p><h1>Akceptační testy</h1><p> Není zvolen požadovaný návrh řešení.</p><h1>Poznámka</h1><p>–</p>
</div>
</body>
</html>
