<!DOCTYPE html>
<html lang="cs">
<head>
  <meta charset="utf-8">
  <title>ID-058: Zobrazení míst realizace zákazníka dle provozovny ve správě systému</title>
</head>
<body>
<div class="wiki-content">
<p></p><h1>Požadavek</h1><p>Ve správě systému je u jednotlivých zákazníků požadováno doplnění logiky, která zajistí, aby uživatel viděl pouze taková místa realizace konkrétního zákazníka, která patří pod smlouvu, na kterou má tento uživatel oprávnění (dle provozoven).  </p><p>Poznámka: Je požadováno doplnění stejné logiky i pro výběr místa realizace ve formuláři objednávky v případě, kdy není zvolena rámcová smlouva (jednorázová položka objednávky). </p><h1>Aktuální stav</h1><p>Aktuálně jsou v detailu zákazníka zobrazována všechna místa realizace přiřazená k odpovídajícímu zákazníkovi (výjimku tvoří místa realizace vytvořená ve FLW RoadPlan nepotvrzená ERP systémem).</p><p>Poznámka: Číselník zákazníků je centrální, je tedy společný pro všechny provozovny.</p><h1>Návrh řešení</h1><p>Po komunikaci se zákazníkem došlo k doplnění dalších návrhů řešení – ty se liší především způsobem omezení dostupných míst realizace.</p><h2>Omezení míst realizace společností</h2><p>Původním problémem, kvůli kterému požadavek vznikl, je skutečnost, že se uživatelům pro konkrétní zákazníky zobrazují i místa realizace jiných společností. Tento problém již byl vyřešen v rámci formuláře objednávky, v přehledu zákazníků však k této akci nedošlo.</p><p>Navrhujeme tedy začít tím, že budou v přehledu zákazníků dostupná pouze taková místa realizace, které spadají pod stejnou společnost (provozovnu 1. úrovně) jako právě přihlášený uživatel.</p><p> Vyřeší původní problém za minimálních nákladů. Případná rozšíření mohou být řešena až v případě potřeby. Sjednocení chování s výběrem místa realizace ve formuláři objednávky.</p><p> Do budoucna může být požadováno rozšíření.</p><h2>Rychlý filtr míst realizace pod smlouvou </h2><p>Dalším možným řešením je doplnění rychlého filtru, který umožní uživateli filtrování pouze takových míst realizace, která patří pod smlouvy takových provozoven, na které má tento uživatel oprávnění. Po aplikaci filtru budou dostupná taková místa realizace, která splňují všechny dále uvedené podmínky zároveň: </p><ul><li>Místo realizace je přiřazeno k odpovídajícímu zákazníkovi.</li><li>Místo realizace je přiřazeno ke smlouvě, která je vytvořena pro provozovnu, na kterou má uživatel oprávnění.</li></ul><p>Obdobný rychlý filtr bude dostupný i ve výběrovém dialogu míst realizace. Jeho použití pak může být specifikováno konkrétním případem užití.</p><p>V obou případech bude tlačítko ve výchozím stavu stisknuto – bude aplikován filtr. </p><p>Poznámka: Zobrazení filtru bude možné omezit na úrovni konfiguračních hodnot (tenant).</p><p>Místa realizace, které nejsou žádným způsobem přiřazena ke konkrétní smlouvě, nebudou po aplikaci filtru uživateli dostupná.</p><p>Přiřazení místa realizace k provozovně by mělo být získáno přímo z ERP systému. Otázkou pak je, jak k této informaci bude přistupovat systém Helios. Aktuálně tedy nepovažujeme za vhodné filtrovat místa realizace bez vědomí uživatelů.</p><p>Navrhované chování je pak naznačeno na obrázku. Jako vhodné rozšíření nám přišlo i doplnění textového filtru dle názvu a adresy místa realizace, které je na obrázku také uvedeno.</p><p><img src="id-058-zobrazeni-mist-realizace-zakaznika-dle-provozovny-ve-sprave-systemu-103287262_images/image2021-12-23 13-47-0.png" data-attachment="true"></p><h2>Rozšíření místa realizace o provozovnu</h2><p>Dalším možným řešením je omezení dostupných míst realizace již na pozadí. U jednotlivých míst realizace by došlo k doplnění informace o provozovně, pod kterou má být místo realizace zobrazováno. Dle zmíněné informace by byla dostupná místa realizace filtrována.</p><p>Poznámka: Aktuálně již odpovídající atribut k dispozici je, odkazována je však odpovídající provozovna první úrovně (společnost). To není pro řešení tohoto požadavku dostatečné.</p><p>Přiřazení místa realizace ke konkrétní provozovně pak může být řešeno několika způsoby:</p><ul><li>Získání informace z WinyX – informace bude přímo načtena z rozhraní s WinyX. Systém nebude provádět žádné speciální vyhodnocení získané hodnoty.<br><ul><li>Vyžaduje úpravy na straně WinyX, informace jako taková není přímo dostupná na rozhraní.</li><li>Následně je nutné upravit synchronizaci míst realizace – rozšíření o načítání provozovny.</li><li>Jedná se o dočasné řešení – přechod na Helios.</li></ul></li><li>Vyhodnocení informace při synchronizaci – informace je nepřímo dostupná na rozhraní a může být získána výpočtem.<br><ul><li>Vyžaduje úpravy pouze na straně RoadPlan (včetně datového modelu).</li><li>Při synchronizaci místa realizace bude vyhodnoceno, pod kterou smlouvu patří. Na základě této informace bude získána odpovídající provozovna.</li></ul></li></ul><p>Poznámka: Před dokončením návrhu řešení je nutné zodpovědět několik otázek:</p><ul><li>Mohou být z WinyX získána taková místa realizace, která nemají vazbu na smlouvu (např. pro zákazníky založené v RoadPlan)? <strong>(ano)</strong></li><li>Může být jedno místo realizace použito ve více smlouvách? <strong>(ano)</strong></li><li>Jak WinyX pracuje s místy realizace, která jsou společná pro více provozoven – jedno místo realizace je odkazováno z několika smluv, kdy se u některých ze smluv liší provozovna. <strong>(ano, MR může být odkazováno z různých smluv různých provozoven)</strong></li><li>Jak bude RP pracovat s místy realizace, která patří pod smlouvu, u které došlo k vypršení platnosti. <strong>(označit jako odebrané </strong>→ problém se skrýváním na úrovni jednotlivých provozoven, platnost může vypršet pouze u některých ze smluv<strong>)</strong></li></ul><p>V rámci výsledného řešení je vhodné počítat i se změnou ERP systému. Jak bude systém Helios pracovat s místy realizace? Bude se chování lišit od toho aktuálně použitého ve WinyX?</p><p>Dále byl v rámci komunikace zmíněn požadavek na rozšíření oprávnění na editaci míst realizace.</p><ul><li>Běžný uživatel by mohl editovat pouze takové místo realizace, které se vyskytuje pod smlouvami právě jedné provozovny.</li><li>Pokud by se místo realizace vyskytovalo pod smlouvami více provozoven, mohl by jeho editaci provést pouze oprávněný pracovník. </li></ul><h1>Akceptační testy</h1><p>Pro splnění požadavku musí být splněny následující testovací scénáře.</p><h2>TC01: Dostupná místa realizace</h2><ol><li>Uživatel označí zákazníka ve správě zákazníků.</li><li>Systém aktualizuje informace v panelu s detailem dle zvoleného zákazníka.</li><li>Uživatel aplikuje rychlý filtr míst realizace.</li><li>Systém aktualizuje dostupné informace v přehledu míst realizace (panel s detailem zákazníka) – dostupná místa realizace odpovídají uvedenému návrhu řešení.</li></ol><p>Poznámka: Pro spuštění testovacího scénáře musí být zobrazen panel s detailními informacemi o zákazníkovi.</p><h1>Poznámka</h1><p>–</p>
</div>
</body>
</html>
