<!DOCTYPE html>
<html lang="cs">
<head>
  <meta charset="utf-8">
  <title>ID-053: Revize způsobu zobrazení objednaných služeb v detailu objednávky (rozdělené objednané služby)</title>
</head>
<body>
<div class="wiki-content">
<p></p><h1>Požadavek</h1><p>Cílem požadavku je možnost zobrazit počet objednaných služeb, které splňují určité požadavky, bez ohledu na to, zda došlo k jejich rozdělení. Zadání může být znít následovně: Kolik vývozů na výzvu bylo za měsíc červen provedeno pod objednávkou X.</p><ul><li>Aktuálně není bráno v potaz, zda byla některá z těchto objednaných služeb rozdělena. Počet objednaných služeb pak odpovídá jejich skutečnému počtu.</li><li>Požadováno je získání informace, kolik objednaných služeb skutečně splňuje zadanou podmínku, a to bez ohledu na jejich rozdělení.</li></ul><p>Poznámka: Doplnění informace bylo požadováno v přehledu objednávek – panel s detailními informacemi (karta Objednané služby). Uvedená logika však může dávat smysl i na obrazovce přehledu objednaných služeb.</p><h1>Aktuální stav</h1><p>V detailu objednávky (karta Objednané služby) jsou dostupné všechny objednané služby, které byly vytvořený pro odpovídající objednávku. Tomu odpovídá i jejich počet, který nebere v úvahu skutečnost, zda některé objednané služby byly či nebyly rozděleny.</p><h1>Návrh řešení</h1><p>Požadavek můžeme řešit různými způsoby, některý z nich si představíme ve formě návrhu řešení.</p><p>Poznámka: V rámci dílčích návrhů řešení je třeba počítat i s objednanými službami, které vznikají při kontrole realizace denních výkonů. Takové objednané služby jsou posuzovány stejným způsobem jako objednané služby rozdělené při plánování denních výkonů.</p><h2>Filtrování dle pořadí v rámci objednané služby</h2><p>Tabulka s objednanými službami v rámci detailu objednávky bude doplněna o sloupec s pořadím v rámci objednané služby.</p><ul><li>U objednaných služeb, které nebyly rozděleny, bude zobrazena hodnota 1.</li><li>U rozdělených objednaných služeb bude hodnota odpovídat pořadí konkrétní části v rámci objednané služby jako celku.</li></ul><p>To nám umožní při filtrování omezit výsledné objednané služby pouze na ty, u kterých je pořadí v rámci objednané služby nastaveno např. na hodnotu 1. Tím získáme i celkový počet objednaných služeb bez ohledu na jejich rozdělení.</p><p> Jednoduché řešení. Možné využít k různým účelům.</p><p> Nastavená kritéria při filtrování nemusí platit pro všechny části objednané služby (např. vozidlo, které provedlo realizaci). Výsledný počet objednaných služeb nemusí vždy odpovídat požadovanému chování – objednaná služba s pořadovým číslem 1 neodpovídá nastaveným filtrům (je nutné zvážit, podle čeho budou uživatelé filtrovat – zda se jedná o problém).</p><p>Uvedené chování je naznačeno na obrázku.</p><p><img src="id-053-revize-zpusobu-zobrazeni-objednanych-sluzeb-v-detailu-objednavky-rozdelene-objednane-sluzby-97650001_images/image2021-12-29 12-24-23.png" data-attachment="true"></p><h2>Doplnění identifikátoru objednané služby</h2><p>Po konzultaci se zákazníkem byl doplněn další návrh řešení, který se zabývá zobrazením rozdělených objednaných služeb. Cílem je snadné rozlišení, které části objednaných služeb „patří k sobě“.</p><p>Navrhujeme pak rozšíření objednané služby o identifikátor, který jednoznačně určí, z jaké objednané služby konkrétní část vznikla. Bude fungovat následovně:</p><ol><li>Při generování objednané služby dojde k přiřazení identifikátoru (viz dále).</li><li>Pokud uživatel objednanou službu rozdělí, obě části si hodnotu tohoto identifikátoru zachovají – bude společná pro všechny části výchozí objednané služby.</li></ol><p>Generování identifikátoru pak může probíhat několika způsoby, my si 2 základní představíme.</p><table><tbody><tr><th>Varianta</th><th>v1</th><th>v2</th></tr><tr><td>Popis</td><td><p>Identifikátor objednané služby je jedinečný na úrovni objednávky.</p><p>Nejvyšší hodnota identifikátoru tedy odpovídá počtu výchozích objednaných služeb v rámci objednávky.</p></td><td><p>Identifikátor objednané služby je jedinečný na úrovni aplikace.</p><p>Nejvyšší hodnota identifikátoru tedy odpovídá celkovému počtu výchozích objednaných služeb celkem.</p></td></tr><tr><td colspan="1">Náhled (naznačeno červeně; zahrnuje i variantu <a href="id-97650001.html">Filtrování dle pořadí v rámci objednané služby</a>)</td><td colspan="1"><img src="id-053-revize-zpusobu-zobrazeni-objednanych-sluzeb-v-detailu-objednavky-rozdelene-objednane-sluzby-97650001_images/image2022-1-13 13-44-8.png" data-attachment="true"></td><td colspan="1"><img src="id-053-revize-zpusobu-zobrazeni-objednanych-sluzeb-v-detailu-objednavky-rozdelene-objednane-sluzby-97650001_images/image2022-1-13 13-46-5.png" data-attachment="true"></td></tr><tr><td>Poznámka</td><td>Vhodné pro zobrazení v rámci konkrétní objednávky. V takovém případě se hodnota neopakuje.</td><td>Vhodné pro zobrazení na úrovni aplikace. V takovém případě se hodnota neopakuje.</td></tr></tbody></table><p>V závěru je uveden příklad, kde je naznačen způsob generování objednaných služeb s ohledem na řešený identifikátor. Jsou vytvořeny 2 objednávky, pro každou existují 3 objednané služby.</p><table><tbody><tr><th>Varianta</th><th>v1</th><th>v2</th></tr><tr><td>Objednávka 1</td><td><ul><li>Objednaná služba 1: <strong>1</strong></li><li>Objednaná služba 2: <strong>2</strong></li><li>Objednaná služba 3: <strong>3</strong></li></ul></td><td><ul><li>Objednaná služba 1: <strong>1</strong></li><li>Objednaná služba 2: <strong>2</strong></li><li>Objednaná služba 3: <strong>3</strong></li></ul></td></tr><tr><td>Objednávka 2</td><td><ul><li>Objednaná služba 1: <strong>1</strong></li><li>Objednaná služba 2: <strong>2</strong></li><li>Objednaná služba 3: <strong>3</strong></li></ul></td><td><ul><li>Objednaná služba 1: <strong>4</strong></li><li>Objednaná služba 2: <strong>5</strong></li><li>Objednaná služba 3: <strong>6</strong></li></ul></td></tr></tbody></table><h2>Zobrazení počtu objednaných služeb</h2><p>Panel s objednanými službami v detailu objednávky bude rozšířen o celkový počet objednaných služeb načtených v tabulce, a to bez ohledu na jejich rozdělení. Pokud tedy nastaveným kritériím pro tabulku odpovídají všechny části konkrétní objednané služby, je do celkového počtu zanesena pouze jediná z nich.</p><p> Jednoduché řešení.</p><p> Jednotlivé části objednané služby nemusí být v tabulce zobrazeny za sebou, může být nepřehledné.</p><p>Uvedené chování je naznačeno na obrázku, a to ve 2 variantách.</p><p>Poznámka: Obsah zobrazené kontextové nabídky může být ještě modifikován (z důvodu co nejvyšší vypovídající hodnoty; např. počet obsloužených nádob/služeb).</p><p><img src="id-053-revize-zpusobu-zobrazeni-objednanych-sluzeb-v-detailu-objednavky-rozdelene-objednane-sluzby-97650001_images/image2021-12-29 12-39-8.png" data-attachment="true"><img src="id-053-revize-zpusobu-zobrazeni-objednanych-sluzeb-v-detailu-objednavky-rozdelene-objednane-sluzby-97650001_images/image2021-12-29 12-38-41.png" data-attachment="true"></p><h2>Zobrazení výchozích objednaných služeb</h2><p>Neprovádět odhad pracnosti!</p><p>Panel s detailem objednávky bude rozšířen o novou záložku, která bude obsahovat přehled objednaných služeb – nebude však brán ohled jejich dělení či vytváření MDU. Pro úplnost jsou pak popsány obě záložky s přehledem objednaných služeb.</p><ul><li>Objednané služby (běžné zobrazení) – jsou zobrazeny všechny objednané služby dané objednávky (již implementováno).</li><li>Výchozí objednané služby – pokud je objednaná služba rozdělena, nejsou zobrazeny všechny její části, k dispozici je pouze jeden společný záznam. V tomto režimu jsou dostupné následující sloupce:<br><ul><li>Typ úkonu,</li><li>Adresa místa realizace,</li><li>Rámcová smlouva,</li><li>Typ dopravy,</li><li>Typ nádoby,</li><li>Konkrétní nádoba,</li><li>Vlastní nádoba.</li></ul></li></ul><p>Poznámka: Název přidané karty může být ještě modifikován.</p><p> Uživatel má k dispozici oba pohledy na data.</p><p> Pro zobrazení výchozích objednaných služeb mohou být zobrazeny pouze informace společné pro všechny části objednané služby. To má vliv i na možnosti filtrování a řazení záznamů.</p><h2>Agregace záznamů v tabulce objednaných služeb objednávky</h2><p>Neprovádět odhad pracnosti!</p><p>Tabulka s objednanými službami v rámci detailu objednávky bude doplněna o možnost agregace záznamů dle určitých pravidel. Uživatel tak může…</p><ul><li>(v1) buď zvolit libovolný ze sloupců, podle kterého bude provedena agregaci,</li><li>(v2) nebo zvolit jednu z předdefinovaných možností (např. dle „výchozí“ objednané služby).</li></ul><p>Způsob, jakým pak uživatel pracuje s aplikací, je následující:</p><ol><li>Uživatel zvolí požadovaný sloupec pro agregaci.</li><li>Systém tento sloupec skryje (v rámci skupin by byla obsažena vždy stejná hodnota) a provede agregaci:<ol><li>vytvoří „primární“ řádky dle dostupných hodnot ve zvoleném sloupci,</li><li>pod primární řádky vloží odpovídající záznamy tabulky (dle hodnoty agregovaného sloupce).</li></ol></li><li>Uživatel zruší agregaci záznamů.</li><li>Systém zobrazí tabulku ve výchozím stavu.</li></ol><p>Chování je naznačeno na obrázku.</p><p><img src="id-053-revize-zpusobu-zobrazeni-objednanych-sluzeb-v-detailu-objednavky-rozdelene-objednane-sluzby-97650001_images/image2021-12-29 13-28-49.png" data-attachment="true"></p><p> Návrh nutné konzultovat na úrovni všech aplikací rodiny FLW.</p><p> Může vyžadovat změny na úrovni datového modelu (atribut pro agregaci objednaných služeb).</p><p> Zajímavé zobrazení požadovaných informací (zvážit užitek uvedeného chování).</p><p> Vyšší pracnost (zcela nová funkčnost z pohledu aplikace). Objednané služby, které nejsou rozděleny, budou zobrazeny na 2 řádky. Neřeší problém se zobrazením celkového počtu objednaných služeb bez ohledu na jejich rozdělení. Omezené možnosti při filtrování a řazení záznamů v tabulce (probíhá na úrovni jednotlivých skupin). Problém může nastat i při zachování stránkování v rámci tabulky.</p><h1>Akceptační testy</h1><p>Pro splnění požadavku musí být splněny následující testovací scénáře.</p><h2>TC01: Xxx</h2><ol><li>Systém…</li></ol><h1>Poznámka</h1><p>–</p>
</div>
</body>
</html>
