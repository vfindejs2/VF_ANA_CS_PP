<!DOCTYPE html>
<html lang="cs">
<head>
  <meta charset="utf-8">
  <title>Ukončení realizace denních výkonů</title>
</head>
<body>
<div class="wiki-content">
<p></p><h1>Problém</h1><p>V rámci nočních hodin je spouštěn proces pro ukončení realizace denních výkonů (jejich „překlopení“), který probíhá na denní bázi. Ten vyžaduje součinnost těchto aplikací:</p><ul><li><strong>RoadPlan</strong> – provádí zpracování denních výkonů, při kterém je nutné dotazovat aplikaci FLWW2 (získávat potřebná data).</li><li><strong>FLWW2</strong> – zpracovává požadavky aplikace RoadPlan, kdy dochází k poskytování požadovaných informací.</li></ul><p>Po delší době bezproblémového chodu se však začínají vyskytovat situace, kdy spuštění procesu skončí chybou – nedojde k „překlopení“ denních výkonů. Evidujeme pak tato problematická místa…</p><ul><li><strong>Velikost DB</strong> – aktuálně databáze FLWW2 obsahuje informace o velikosti cca 550 GB. To má vliv na dobu, která je potřeba pro získání potřebných informací (způsobí „timeout“ chybu).</li><li><strong>Řešený proces</strong> – proces zajišťující ukončení realizace denních výkonů aktuálně pracuje pouze s omezenou množinou chybových stavů (nové problémy nejsou vhodně ošetřeny).</li></ul><p>Výsledkem je tedy to, že „včerejší“ denní výkony nejsou zpracovány. Zůstanou ve stavu Realizovaný a není možné s nimi dále pracovat. Jejich „překlopení“ musí být provedeno ručně.</p><h1>Návrh řešení</h1><p>Uvedený problém omezuje dispečery v práci, musíme ho tedy nějakým způsobem řešit. Navrhujeme pak jeho rozdělení do 2 kroků…</p><ol><li><strong>Operativní zásah na DB </strong>– provedení akcí, které „uleví“ databázi, což by mělo mít za následek její zrychlení (okamžitý efekt).<br><ul><li>Poznámka: Součástí bude také testování tohoto zásahu (s možností vrátit se do původního stavu).</li></ul></li><li><strong>Optimalizace procesů</strong> – změny v implementaci jak na straně RoadPlan, tak FLWW2, které zvýší robustnost řešeného procesu.</li></ol><p>Provedeme tedy maximum pro okamžité řešení problému, které nám poskytne čas na zajištění následné optimalizace uvedeného procesu.</p><p>Poznámka: Denní výkony jsou aktuálně kontrolovány tak, aby jejich případné ruční překlopení proběhlo před 6:00 (na produkčním prostředí).</p><h2>Operativní zásah na DB</h2><p>Provedením určitých akcí, které si popíšeme, jsme schopni „ulevit“ databázi. To by mělo mít za následek snížení doby potřebné pro získání požadovaných informací.</p><ul><li><strong>Indexování tabulek</strong> – indexování tabulek umožní rychlejší získání požadovaných informací (již probíhá).</li><li><strong>Vyčištění databáze</strong> – smazání historických záznamů sníží množství dat, které je při dotazování nutné procházet.</li></ul><h3>Indexování tabulek</h3><p>Pro úplnost začneme významem indexování tabulek, stručně si popíšeme jeho efekt na práci s daty…</p><ul><li>Pokud je na úrovni sloupce nastaven index, dokáže „databázový stroj“ sáhnout přímo na požadovaný záznam tabulky (díky indexu zná pozici daného řádku v tabulce – v kontextu daného sloupce).</li><li>Není tedy potřeba procházet celou tabulku a hledáním navyšovat čas potřebný k nalezení daného záznamu. To má efekt především při velkém množství dat v tabulce.</li><li>Index pak ale nemůže být nastaven každému sloupci, sice dochází ke snížení nároků na hledání v tabulce, je však navýšena režie související se zápisem do ní.</li></ul><p>Již nyní došlo k dodatečnému indexování používaných tabulek tak, abychom snížili nároky na získání informací potřebných pro ukončení realizace denních výkonů. Zmíněné indexy jsou pak občerstvovány, aby nedocházelo ke zpomalování.</p><h3>Vyčištění databáze</h3><p>Velikost databáze má do určité míry vliv na dobu, za kterou jsou vrácena dotazovaná data. Aktuálně je pak obsaženo cca 550 GB záznamů…</p><p>Provedeme tedy „pročištění“ existujících dat, kdy budou odmazány záznamy starší 5 let. Jednat se pak bude o informace tohoto typu:</p><ul><li>objekty (všechny odebrané bez ohledu na stáří mimo nákladní vozidla a přívěsy),</li><li>poziční záznamy,</li><li>události (včetně agregovaných výsypů),</li><li>jízdy,</li><li>PHM data,</li><li>reporty,</li><li>incidenty.</li></ul><p>Uvedená akce se projeví také v aplikaci, historická data zmíněného typu již nebudou dostupná. Jedná se pak o následující moduly aplikace FLWW2:</p><ul><li>Offline,</li><li>Kniha jízd,</li><li>Reporty,</li><li>Modul PHM,</li><li>Incidenty.</li></ul><p>Poznámka: Prověřeny byly samozřejmě také související systémy, které mohou některé z uvedených informací využívat. Společným prvkem pak je, že zmíněné systémy vyžadují od FLWW2 především aktuální data. Historické záznamy nejsou dále dotazovány. </p><ul><li><strong>RoadPlan</strong>, <strong>Pasport</strong> – většina informací získaných z FLWW2 je ukládána přímo v dané aplikaci. Jediným dopadem tedy může být to, že daná aplikace bude obsahovat více informací než FLWW2.</li><li><strong>WinyX</strong>, <strong>Helios</strong> – mohou být evidována historická data (v ERP systémech mohou být k dispozici informace, které už ve FLWW2 po odmazání záznamů dostupné nebudou). </li></ul><p>Ne všechna data ale stárnou, takový typ informací musí být zachován. Promazaní se tedy nebude týkat dat těchto typů:</p><ul><li>síťové adresy (všechny – CP, Teltonika, CWI, Slave, Tracker…; nutné pro zajištění jedinečnosti jejich identifikátorů),</li><li>číselníky (data dostupná ve správě systému),</li><li>servisní zásahy (údržba vozidel).</li></ul><h2>Optimalizace procesů</h2><p>Množství dat jako takové bude postupem času narůstat, problém tedy musíme řešit koncepčně – optimalizací daného procesu. Postup bude následující:</p><ol><li><strong>Detailní analýza problému</strong> – v první řadě musíme zjistit, jaká konkrétní volání působí největší problémy, jaké chyby vznikají při těchto volání apod.</li><li><strong>Návrh opatření</strong> – dle zjištěných informací bude navržena úprava stávajícího chování, to bude řešeno na úrovni obou aplikací:<br><ul><li><strong>FLWW2</strong> – optimalizace funkcí, které zajišťují poskytování dat souvisejících s ukončováním denních výkonů.</li><li><strong>RoadPlan</strong> – optimalizace způsobu volání zmíněných FLWW2 funkcí, rozšíření způsobu, kterým jsou vyhodnocovány (a řešeny) chybové stavy.</li></ul></li><li><strong>Implementace opatření</strong> – posledním krokem je implementace navržených opatření (včetně sledování provozu a vyhodnocení účinnosti těchto opatření).</li></ol>
</div>
</body>
</html>
