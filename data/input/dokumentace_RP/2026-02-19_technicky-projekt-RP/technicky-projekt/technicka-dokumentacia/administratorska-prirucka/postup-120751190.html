<!DOCTYPE html>
<html lang="cs">
<head>
  <meta charset="utf-8">
  <title>Postup nasadenia novej inštancie</title>
</head>
<body>
<div class="wiki-content">
<ul><li><p><strong>Vytvorenie databázy</strong></p><br><ol><li><p>Vytvorenie prázdenej DB pre potreby aplikácie</p></li><li><p>Vytvorenie používateľa pre pristup aplikácie do DB, nastavenie práv pre čítanie a zapisovanie do DB (prihlasovacie meno a heslo ktoré bude aplikácia používať sa uvádzajú v .env súbore)</p></li><li><p>Vytvorenie používateľa ktorý má práva pre vytváranie tabuliek a funkcií. Tento používateľ bude použitý iba pri tovrbe a updat-e databázy v rámci nasadenia aplikácie</p></li><li><p><strong>Manuálne spustenie skriptov </strong>ktoré sa nachádzajú v repozitári “<strong>database</strong>” v priečinku “<strong>init</strong>” priamo v SQL Management Studio</p><br><ol><li><p>01_init.01_up.sql</p></li><li><p>02_init_data.01_up</p></li></ol></li><li><p>Nasadenie DB docker image databázy</p><br><ul><li><p>Info ku nasadeniu DB</p><br><ul><li><p>jednotlivé skripty vytvoria databázový model, prípadne zmeny ktoré boli v čase robené</p></li><li><p>tieto skripty slúžia aj na ďalšie uprgrade DB</p></li><li><p>Postup pre build DB docker image je popísaný v ďalšom bode); SQL scripty budú automaticky spustené v rámci deploymentu</p></li><li><p>Prístupové údaje do databázy (DB_host, DB_password, DB_user) sa zadávajú do konfiguračného súboru pri deploymente (primary_database.env)</p></li></ul></li><li><p>Postup nasadenia databázy</p><br><ul><li><p>v docker-compose ponechať len service <strong>database-migration</strong> (ostatné services odstrániť, ale ponechať si konfiguráciu “bokom” kvôli opätovnému použitiu)</p></li><li><p>spustiť nasadenie - vykoná sa nasadenie len databázy</p></li></ul></li></ul></li><li><p>po nasadeni DB update tabulky “<strong>default_settings</strong>”, kde treba nastavit primarne atributy:</p><br><ol><li><p>nastavenia pre komunikaciu s FOB cez FLWW Rabbit: fobCompanyAlias, fobCompanyId, fobSenderGroup</p></li><li><p>informacie o klientovi: clientAddress, clientDic, clientIban, clientIcDph, clientIco, clientTitle</p></li><li><p>prejst aj ostatne parametre (napr. pre nasadenie v inej krajine ako SK) - geocodeCountry, defaultCurrency</p></li><li><p>pridat atribut “uiBrandingConfiguration” a nastavit default “val” na (zmenit URL linky pre prislusne nasadenie FLWW):</p></li></ol></li></ol></li></ul><p> </p><ul><li><p><strong>Prvotná synchronizácia údajov zo systémov FLWW</strong></p><br><ul><li><p>spustime specificke sluzby na synchronizaciu udajov z FLWW (mpg-flww-sync-service alebo recovera-flww-sync-service)</p></li><li><p>manualne spustenie synchronizacie FLWW entit na komponentoch - vid popis <a href="#" data-page-title="Synchronizácia základných entít z FLWW">Synchronizácia základných entít z FLWW</a></p></li></ul></li><li><p><strong>Nastavenie specifickych synchronizacnych komponent</strong></p><br><ul><li><p>v zavislosti od typu zakaznika sa nastavia synchronizacne komponenty</p><br><ul><li><p>ci chceme mat hned spustenu synchronizaciu (vid tabulka “sync_settings”)</p></li><li><p>nasledne vieme manazovat cez API specifickej sync komponenty - zastavenie/spustenie synchronizacie</p></li></ul></li></ul></li><li><p><strong>Spustenie všetkých komponentov systému</strong></p><br><ul><li><p>v docker-compose vrátime naspäť všetky services</p><br><ul><li><p>tu dat pozor aby sa nasadil aj OSRM a browserless. Tieto dve komponenty napr. nemusia byt v docker-compose ale maju zvlast. Ide o pripad ak sa tieto komponenty zdielaju napriec nasadeniami.</p></li></ul></li><li><p>spustenie nasadenia</p></li></ul></li></ul>
</div>
</body>
</html>
