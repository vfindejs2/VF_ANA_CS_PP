<!DOCTYPE html>
<html lang="cs">
<head>
  <meta charset="utf-8">
  <title>Autentifikácia</title>
</head>
<body>
<div class="wiki-content">
<p></p><h1>Základný popis</h1><ul><li>UI pasportu získava jednak token + prava z FLWW API a token generovaný zo samotného backendu systému (budeme nazývať ako "aplikačný token")<br><ul><li>UI prihlasenie robi len voci aplikacnemu backendu, ktorý všetky tieto informácie získa a následne pošle na UI (viiď diagram nižšie v dokumente)</li></ul></li><li>FLWW token je následne používaný na dopytovanie FLWW endpointov</li><li>všetky endpointy ktorý UI pasportu dopytuje voči aplikačnému backendu su zabezpečené - vyžadujú aplikačný token (JWT)</li><li>popis API na získanie tokenu </li><li>po prihlásení sú flww token a aplikačný token uchované v rámci local storage prehliadača, čo umožňuje pri ďalšom spustení aplikácie sa rovno prihlásiť do systému bez zadávania mena a hesla</li></ul><p> </p><h1>Spôsoby prihlásenia</h1><p>Do UI aplikácie je možné sa autentifikovať dvomi spôsobmi:</p><ul><li>prihlásenie cez meno a heslo</li><li>v rámci URL na klientsku aplikáciu je flww token + dalsie parametre, na základe ktorých sa používateľ autentifikuje</li></ul><h2>Prihlásenie cez meno a heslo (+ company)</h2><p>Tu rozoznávame dve možnosti podľa toho v akom móde je systém Pasport nasadzovaný. Ide o tzv. <strong>multitenant mód</strong> - teda či jedno nasadenie pasportu je určené pre viacero zákazníkov alebo nie.</p><h3>Multitenant mód aktívny</h3><ul><li>v rámci login obrazovky zadávame <strong>meno, heslo</strong> a názov <strong>company</strong></li></ul><p>FLWW používa konvenciu "company", hoci samotný pasport používa termín "tenant", resp. "tenantId" (napr. pri konfigurácii systému)</p><h3>Multitenant mód neaktívny</h3><ul><li>v rámci login obrazovky zadávame len <strong>meno</strong> a <strong>heslo</strong>.</li><li>voči FLWW API sa neposiela žiadna company, FLWW API použije default company</li></ul><p> </p><h2>Prihlásenie pomocou URL</h2><p>Účel je umožniť používateľovi aplikáciu priamo z FLWW UI bez toho, aby bol používateľ presmerovaný na login obrazovku. Pri redirect z FLWW UI sú v rámci URL nasledovné parametre:</p><ul><li>access_token - FLWW token</li><li>expires_in - čas v sekundách za koľko tento token expiruje</li><li>user (alebo userName) - používateľske meno </li></ul><p> </p><h1>Tok udalostí pri prihlasovaní </h1><p>Diagram znázorňuje komunikáciu pri prihlasovaní voči FLWW REST API, teda aké endpointy sú volané.</p><p>Diagram neznázorňuje interné dopyty Backendu voči databáze a operácie na generovanie aplikačného tokenu.</p><p><img src="autentifikacia-98241912_images/flww pasport - login flow.drawio.png" data-attachment="true"></p><p>Aké dáta sú poslanie na UI klienta je popísané v rámci dokumentácie API</p><p> </p>
</div>
</body>
</html>
