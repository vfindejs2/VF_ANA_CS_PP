<!DOCTYPE html>
<html lang="cs">
<head>
  <meta charset="utf-8">
  <title>Nádoby - Externí zákazníci</title>
</head>
<body>
<div class="wiki-content">
<p> </p><p></p><h1>Základný popis</h1><p>Dokument popisuje koncept technického riešenia zabezpečenia Use Case pre <strong>zobrazovania nádob pre externých zákazníkov</strong> systému Pasport. Detailná analýza je tu:</p><ul><li><p>Prehlad nádob - <a href="../../funkcionalni-specifikace/pripady-uziti/400ucxx-sprava-nadob/400uc14-97652013.html">https://confluence.radium.cz/pages/viewpage.action?pageId=97652013</a></p></li><li><p>Mapa nádob - <a href="../../funkcionalni-specifikace/pripady-uziti/400ucxx-sprava-nadob/400uc15-97652014.html">https://confluence.radium.cz/pages/viewpage.action?pageId=97652014</a></p></li><li><p>Detail nádob - <a href="../../funkcionalni-specifikace/pripady-uziti/400ucxx-sprava-nadob/400uc16-97652015.html">https://confluence.radium.cz/pages/viewpage.action?pageId=97652015</a></p></li><li><p>Výsypy nádob - <a href="../../funkcionalni-specifikace/pripady-uziti/400ucxx-sprava-nadob/400uc17-97652016.html">https://confluence.radium.cz/pages/viewpage.action?pageId=97652016</a></p></li><li><p>v rámci dokumentov sú odkazy na ďalšie nadväzujúce dokumentácie</p></li></ul><p> </p><p><strong>Externý zákazník</strong> - z pohľadu systému pasport je externý zákazník klasický používateľ systému, ktorý je vytváraný na úrovni FLWW a má svoje práva a pod.</p><p>Z technického hľadiska ale pre externého zákazníka sú na úrovni systému pasport definované<strong> pravidlá na základe ktorých sa mu zobrazujú dáta v systéme</strong> - ako používateľ pristupuje do špecifického modulu systému pre externých zákazníkov kde má k dispozícii dáta nádob. Detailný popis pravidiel je popísaný tu: <a href="../../funkcionalni-specifikace/pripady-uziti/400ucxx-sprava-nadob/400uc18-97652690.html">https://confluence.radium.cz/pages/viewpage.action?pageId=97652690</a>.</p><p><strong>Tieto pravidlá v princípe predstavujú filtre na základe ktorých sú na úrovni API filtrované dáta používateľovi (externému zákazníkovi).</strong></p><p>Rozlišujeme pravidla pre filtrovanie:</p><ul><li><p>nadob na zaklade objednavok</p></li><li><p>udalosti vysypov</p></li><li>dostupnost vysypov nadob</li></ul><h1>Technická realizácia</h1><h2>API pre web aplikáciu Pasport</h2><ul><li><p>tabuľka nádob - <a href="https://ai-maps.atlassian.net/wiki/spaces/FP/pages/4962919185/Dokument+cia+API#Preh%C4%BEad-n%C3%A1dob---extern%C3%AD-z%C3%A1kazn%C3%ADci">https://ai-maps.atlassian.net/wiki/spaces/FP/pages/4962919185/Dokument+cia+API#Preh%C4%BEad-n%C3%A1dob---extern%C3%AD-z%C3%A1kazn%C3%ADci</a></p></li><li><p>mapa nádob - <a href="https://ai-maps.atlassian.net/wiki/spaces/FP/pages/4962919185/Dokument+cia+API#Zoznam-n%C3%A1dob-pre-mapu---extern%C3%AD-z%C3%A1kazn%C3%ADci">https://ai-maps.atlassian.net/wiki/spaces/FP/pages/4962919185/Dokument+cia+API#Zoznam-n%C3%A1dob-pre-mapu---extern%C3%AD-z%C3%A1kazn%C3%ADci</a></p></li></ul><p>Vyššie uvedené API v rámci implementácie uplatňujú pravidlá (ďalej budeme používať výraz <strong>pokročilé filtre</strong>) podľa ktorých sú používateľovi vrátene dáta nádob.</p><h2>Definovanie pokročilých filtrov</h2><p>Na úrovni databázy je vytvorená tabuľka (<em><strong>external_customers_settings</strong></em>) kde sú pre jednotlivých používateľov (externý zákazník) definované pokročilé filtre formou JSON definície - prebral sa spôsob definovania filtru ako pokročilý filter (ktorý používa UI).</p><p>JSON má aktuálne dve hlavné časti pre definovane filtra:</p><ul><li><p><strong>containerOrderItemAssignmentFilter </strong>- definovanie filtrov pre nadoby</p><br><ul><li><p><em><strong>filterColumns</strong></em>- definovanie filtra/pravidla klasickým filtrom pre nádoby</p><br><ul><li><p>tu dávame filtre ktoré pôjdu priamo na entitu nádoby</p></li></ul></li><li><p><em><strong>advancedFilterColumns</strong> </em>- definovanie filtra/pravidla ako pokročilý filter</p><br><ul><li><p>používa sa ak potrebujeme filtrovať dáta vzhľadom na relačné entity</p></li><li><p>aktuálne je podporovaný len relačný filter <strong>nádob na objednávky </strong>(<code>"relationPath": "container->order"</code>)</p></li></ul></li></ul></li><li><p><strong>objectEmptyContainerEventFilter</strong>- definovanie filtrov pre vysypy nadob</p><br><ul><li><p><em><strong>filterColumns</strong></em>- definovanie filtra/pravidla klasickým filtrom pre nádoby</p><br><ul><li><p>tu dávame filtre ktoré pôjdu priamo na entitu vysypu nadoby</p></li></ul></li><li><p> </p></li></ul></li><li><strong>objectEmptyContainerEventAvailabilityFilter </strong>- definujeme dostupnost vysypov<br><ul><li>parametre: "dateFrom", "dateTo"<br><ul><li>je mozene zadat vo formate "2025-01-01" alebo "2025-09-08T09:47:32.594Z", pripadne null</li></ul></li><li></li></ul></li></ul><p>Moznost priamo zmenit aj v DB v tabulke [external_customers_settings] pre daneho usera<br><img src="nadoby-externi-zakaznici-98241941_images/image2025-4-4 8-12-33.png" data-attachment="true"></p><p> </p><p> </p><p>Príklad definície filtru (používateľovi sa zobrazujú len nádoby podľa konkrétnej skupiny odpadu a pre konkrétnu objednávku)</p><p>Vysvetlenie významu filtrov a ich parametrov je popísané v rámci </p><h2>Manažment pokročilých filtrov</h2><p>Vytváranie, editácia, mazanie pokročilých filtrov je možné robiť cez API backendu. Tieto akcie vykonáva administrátor systému.</p><p>Popis vyššie uvedených akcii je možné vykonať cez tieto endpointy <a href="https://ai-maps.atlassian.net/wiki/spaces/FP/pages/4962919185/Dokument+cia+API#Mana%C5%BEment-pokro%C4%8Dil%C3%BDch-filtrov-n%C3%A1dob-pre-extern%C3%BDch-z%C3%A1kazn%C3%ADkov">https://ai-maps.atlassian.net/wiki/spaces/FP/pages/4962919185/Dokument+cia+API#Mana%C5%BEment-pokro%C4%8Dil%C3%BDch-filtrov-n%C3%A1dob-pre-extern%C3%BDch-z%C3%A1kazn%C3%ADkov</a></p><p> </p><p> </p><p> </p><p> </p><p> </p>
</div>
</body>
</html>
