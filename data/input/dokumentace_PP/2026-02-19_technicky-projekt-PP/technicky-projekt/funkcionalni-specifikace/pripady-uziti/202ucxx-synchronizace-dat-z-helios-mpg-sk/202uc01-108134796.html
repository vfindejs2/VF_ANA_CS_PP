<!DOCTYPE html>
<html lang="cs">
<head>
  <meta charset="utf-8">
  <title>202UC01: Zahájit synchronizaci</title>
</head>
<body>
<div class="wiki-content">
<p></p><h1>Stručný popis, cíl</h1><p>Cílem případu užití je zahájení importu dat z integrační databáze při současném zajištění orchestrace přenosu těchto dat.</p><p>Poznámka: Synchronizace je připravena pro data ze systému Helios (zákazník MPG SK).</p><h1>Seznam aktérů</h1><table><tbody><tr><th>Aktér</th><th colspan="1">Poznámka</th></tr><tr><td colspan="1">Čas</td><td colspan="1">–</td></tr></tbody></table><p>Poznámka: Úplný přehled aktérů je zobrazen samostatně, viz <a href="#" data-page-title="Přehled aktérů"></a>.</p><h1>Spuštění případů užití</h1><p>Nastane okamžik, ve kterém má dojít k synchronizaci (erpSyncPeriod, viz <a href="../../../konfiguracni-hodnoty/konfiguracni-88033346.html">Konfigurační parametry</a>).</p><h2>Vstupní podmínky</h2><p>Je nastavena konfigurace pro synchronizaci:</p><ul><li>perioda spouštění synchronizace: erpSyncPeriod (viz <a href="../../../konfiguracni-hodnoty/konfiguracni-88033346.html">Konfigurační parametry</a>),</li><li>napojení integrační databáze.</li></ul><h2>Vstupní data</h2><table><tbody><tr><th>Vstupní parametr</div></th><th>Datový typ</div></th><th colspan="1">Povinnost</div></th><th>Popis</div></th><th colspan="1">Poznámka</div></th></tr><tr><td colspan="1">Čas poslední synchronizace</td><td colspan="1">Datum a čas</td><td colspan="1">Ano</td><td colspan="1">Datum a čas poslední úspěšné synchronizace.</td><td colspan="1">Slouží ke specifikaci časového okna, pro které má být provedena synchronizace.</td></tr></tbody></table><h1>Základní tok událostí</h1><ol><li>Systém postupně načítá z integrační databáze taková data, která byla změněna od posledního úspěšného běhu synchronizace (vstupní parametr Čas poslední synchronizace).</li><li>Systém pro načtenou dávku záznamů zahájí přenos informací do aplikace Pasport, je pak dodrženo stanovené pořadí na úrovni jednotlivých entit (viz <a href="202uc01-108134796.html">ALG01: Pořadí entit při synchronizaci</a>) – spustí tedy odpovídající UC dle právě řešené entity (na vstup jsou předány informace získané z integrační databáze):<br><ul><li><a href="#" data-page-title="202UC02: Synchronizovat adresy">202UC02: Synchronizovat adresy</a>,</li><li><a href="#" data-page-title="202UC03: Synchronizovat zákazníky">202UC03: Synchronizovat zákazníky</a>,</li><li><a href="#" data-page-title="202UC04: Synchronizovat druhy odpadu">202UC04: Synchronizovat druhy odpadu</a>,</li><li><a href="#" data-page-title="202UC05: Synchronizovat typy nádob">202UC05: Synchronizovat typy nádob</a>,</li><li><a href="#" data-page-title="202UC06: Synchronizovat frekvence vývozu">202UC06: Synchronizovat frekvence vývozu</a>,</li><li><a href="#" data-page-title="202UC07: Synchronizovat základní dny svozu">202UC07: Synchronizovat základní dny svozu</a>,</li><li><a href="#" data-page-title="202UC08: Synchronizovat objednávky">202UC08: Synchronizovat objednávky</a>,</li><li><a href="#" data-page-title="202UC09: Synchronizovat položky objednávek"></a>,</li><li><a href="#" data-page-title="202UC10: Synchronizovat revize položek objednávek"></a>,</li><li><a href="#" data-page-title="202UC11: Synchronizovat přiřazení nádob k položkám objednávek"></a>,</li><li><a href="#" data-page-title="202UC12: Synchronizovat přiřazení základních dní svozu k revizi položky objednávky">202UC12: Synchronizovat přiřazení základních dní svozu k revizi položky objednávky</a>.</li></ul></li><li>Systém aktualizuje čas poslední synchronizace dle aktuálně provedeného běhu synchronizace.</li></ol><p>Poznámka: Při synchronizaci může dojít k chybě na úrovni jednotlivých záznamů. V takovém případě je záznam zařazen do „fronty“, ve které čeká na opětovnou synchronizaci. Tato fronta by pak měla disponovat funkcí omezené synchronizace záznamů – tím je myšleno omezení počtu opakování synchronizace takového záznamu (erpRecordRetryPeriod, viz <a href="../../../konfiguracni-hodnoty/konfiguracni-88033346.html">Konfigurační parametry</a>). Pokud je tedy v rámci záznamu překročen maximální povolený počet opakování synchronizace, je tento záznam při synchronizaci dále ignorován. V takovém případě musí být provedena jeho ruční synchronizace. <em>(bude řešeno až v další fázi)</em></p><h1>Alternativní toky událostí</h1><p>–</p><h1>Výjimkové toky událostí</h1><h2>EF01: Chyba čtení dat</h2><h3>Vstupní podmínky</h3><ul><li>Při čtení dat z rozhraní došlo k chybě.</li></ul><h3>Tok událostí</h3><ol><li>Výjimkový tok událostí začíná krokem 1 základního toku událostí.</li><li>Systém provede logování informace o chybě čtení dat z databáze (datum a čas, typ entity, tvar dotazu, chybová zpráva).</li><li>Případ užití končí.</li></ol><h3>Výstupní podmínky</h3><ul><li>Nebyla provedena synchronizace, nedošlo ani k aktualizaci času poslední synchronizace. </li></ul><h1>Ukončení případu užití</h1><h2>Výstupní podmínky</h2><p>Byla provedena synchronizace, současně došlo k aktualizaci času poslední synchronizace. </p><h2>Výstupní data</h2><p>–</p><h1>Algoritmy</h1><h2>ALG01: Pořadí entit při synchronizaci</h2><p>Při synchronizaci je nutné dodržovat pořadí načítaných informací – záznamy některých entit musí být získány přednostně, protože mohou být následně odkazovány. Musí být tedy dodržena v tabulce uvedená sekvence.</p><table><tbody><tr><th>#</th><th>Entita</th><th>Odpovídající entita rozhraní</th><th>Závislosti</th><th colspan="1">Případ užití</th><th colspan="1">Poznámka</th></tr><tr><td>1</td><td><a href="../../../datove-modely/datovy-88033012.html">Adresa</a></td><td><p>BCED_Address</p></td><td>–</td><td colspan="1"><p><a href="#" data-page-title="202UC02: Synchronizovat adresy">202UC02: Synchronizovat adresy</a></p><p> </p></td><td colspan="1">–</td></tr><tr><td colspan="1"> </td><td colspan="1"><a href="../../../datove-modely/datovy-88033012.html">Druh odpadu</a></td><td colspan="1"><p>BCED_WasteType</p></td><td colspan="1">–</td><td colspan="1"><a href="#" data-page-title="202UC04: Synchronizovat druhy odpadu">202UC04: Synchronizovat druhy odpadu</a></td><td colspan="1">–</td></tr><tr><td colspan="1"> </td><td colspan="1"><a href="../../../datove-modely/datovy-88033012.html">Typ nádoby</a></td><td colspan="1"><p>BCED_ContainerType</p></td><td colspan="1">–</td><td colspan="1"><a href="#" data-page-title="202UC05: Synchronizovat typy nádob">202UC05: Synchronizovat typy nádob</a></td><td colspan="1">–</td></tr><tr><td colspan="1"> </td><td colspan="1"><a href="../../../datove-modely/datovy-88033012.html">Frekvence vývozu</a></td><td colspan="1"><p>BCED_CollectionFrequency</p></td><td colspan="1">–</td><td colspan="1"><a href="#" data-page-title="202UC06: Synchronizovat frekvence vývozu">202UC06: Synchronizovat frekvence vývozu</a></td><td colspan="1">Dále je odkazována entita <a href="https://confluence.radium.cz/pages/viewpage.action?pageId=78681044#Datov%C3%BDslovn%C3%ADk-Provozovna">Provozovna</a>, ta však není synchronizována v rámci tohoto UC.</td></tr><tr><td colspan="1"> </td><td colspan="1"><a href="../../../datove-modely/datovy-88033012.html">Základní dny svozu</a></td><td colspan="1"><p>BCED_CollectionDaysOfWeek</p></td><td colspan="1">–</td><td colspan="1"><a href="#" data-page-title="202UC07: Synchronizovat základní dny svozu">202UC07: Synchronizovat základní dny svozu</a></td><td colspan="1">Dále je odkazována entita <a href="https://confluence.radium.cz/pages/viewpage.action?pageId=78681044#Datov%C3%BDslovn%C3%ADk-Provozovna">Provozovna</a>, ta však není synchronizována v rámci tohoto UC.</td></tr><tr><td>2</td><td><a href="../../../datove-modely/datovy-88033012.html">Zákazník</a></td><td><p>BCED_Customer</p></td><td><a href="../../../datove-modely/datovy-88033012.html">Adresa</a></td><td colspan="1"><a href="#" data-page-title="202UC03: Synchronizovat zákazníky">202UC03: Synchronizovat zákazníky</a></td><td colspan="1">Dále je odkazována entita <a href="https://confluence.radium.cz/pages/viewpage.action?pageId=78681044#Datov%C3%BDslovn%C3%ADk-Provozovna">Provozovna</a>, ta však není synchronizována v rámci tohoto UC.</td></tr><tr><td>3</td><td><a href="../../../datove-modely/datovy-88033012.html">Objednávka</a></td><td><p>BCED_CustomerContract</p></td><td><a href="../../../datove-modely/datovy-88033012.html">Zákazník</a></td><td colspan="1"><a href="#" data-page-title="202UC08: Synchronizovat objednávky">202UC08: Synchronizovat objednávky</a></td><td colspan="1">Dále je odkazována entita <a href="https://confluence.radium.cz/pages/viewpage.action?pageId=78681044#Datov%C3%BDslovn%C3%ADk-Provozovna">Provozovna</a>, ta však není synchronizována v rámci tohoto UC.</td></tr><tr><td>4</td><td><a href="../../../datove-modely/datovy-88033012.html">Položka objednávky</a></td><td>–</td><td><a href="../../../datove-modely/datovy-88033012.html">Objednávka</a></td><td colspan="1"><a href="#" data-page-title="202UC09: Synchronizovat položky objednávek"></a></td><td colspan="1"><p>Entita byla vytvořena pro potřeby FLW Pasport, představuje pak obálku pro <a href="../../../datove-modely/datovy-88033012.html">Revize položky objednávky</a>. Obsažený odkaz na instanci této entity však slouží k optimalizaci výkonu při práci s daty, není tedy plněn přímo v rámci synchronizace <a href="../../../datove-modely/datovy-88033012.html">Položek objednávek</a>.</p></td></tr><tr><td colspan="1">5</td><td colspan="1"><a href="../../../datove-modely/datovy-88033012.html">Revize položky objednávky</a></td><td colspan="1"><p>BCED_ContractItem</p></td><td colspan="1"><a href="../../../datove-modely/datovy-88033012.html">Položka objednávky</a>, <a href="../../../datove-modely/datovy-88033012.html">Adresa</a>, <a href="../../../datove-modely/datovy-88033012.html">Typ nádoby</a>, <a href="../../../datove-modely/datovy-88033012.html">Druh odpadu</a>, <a href="../../../datove-modely/datovy-88033012.html">Frekvence vývozu</a>, <a href="../../../datove-modely/datovy-88033012.html">Základní dny svozu</a></td><td colspan="1"><a href="#" data-page-title="202UC10: Synchronizovat revize položek objednávek"></a></td><td colspan="1">–</td></tr><tr><td colspan="1">6</td><td colspan="1"><a href="../../../datove-modely/datovy-88033012.html">Přiřazení nádoby k položce objednávky</a></td><td colspan="1"><p>BCED_ContractItemContainer</p></td><td colspan="1"><a href="../../../datove-modely/datovy-88033012.html">Položka objednávky</a> (resp. <a href="../../../datove-modely/datovy-88033012.html">Revize položky objednávky</a> na úrovni synchronizace)</td><td colspan="1"><a href="#" data-page-title="202UC11: Synchronizovat přiřazení nádob k položkám objednávek"></a></td><td colspan="1">Dále je odkazována entita <a href="../../../datove-modely/datovy-88033012.html">Nádoba</a>, ta však není přímo synchronizována v rámci tohoto UC.</td></tr><tr><td colspan="1"> </td><td colspan="1"><a href="../../../datove-modely/datovy-88033012.html">Přiřazení základních dní svozu k revizi položky objednávky</a></td><td colspan="1">ContractItemDaysOfWeek</td><td colspan="1"><a href="../../../datove-modely/datovy-88033012.html">Základní dny svozu</a>, <a href="../../../datove-modely/datovy-88033012.html">Revize položky objednávky</a></td><td colspan="1"><a href="#" data-page-title="202UC12: Synchronizovat přiřazení základních dní svozu k revizi položky objednávky">202UC12: Synchronizovat přiřazení základních dní svozu k revizi položky objednávky</a></td><td colspan="1">–</td></tr></tbody></table><h1>Validace</h1><p>–</p><h1>Uživatelské rozhraní</h1><p>–</p><h1>Grafický návrh</h1><p>–</p><h1>Revize</h1><h2>18. 11. 2024: Tomáš Nadrchal</h2><table><tbody><tr><th>Odkaz</div></div></div></th><th>Stručný popis změny</div></div></div></th></tr><tr><td colspan="1"><a href="202uc01-108134796.html">Základní tok událostí</a></td><td colspan="1">Doplněn nový UC spouštěný v rámci synchronizace (naznačeno modře).</td></tr><tr><td colspan="1"><a href="202uc01-108134796.html">ALG01: Pořadí entit při synchronizaci</a></td><td colspan="1">Doplněn nový UC spouštěný v rámci synchronizace (naznačeno modře).</td></tr></tbody></table>
</div>
</body>
</html>
