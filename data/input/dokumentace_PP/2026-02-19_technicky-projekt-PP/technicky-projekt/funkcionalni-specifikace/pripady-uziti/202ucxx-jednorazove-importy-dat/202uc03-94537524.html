<!DOCTYPE html>
<html lang="cs">
<head>
  <meta charset="utf-8">
  <title>202UC03: Stáhnout soubor s výsledky validací a zpracování</title>
</head>
<body>
<div class="wiki-content">
<p></p><h1>Stručný popis, cíl</h1><p>Případ užití umožňuje uživateli stáhnout importní soubor doplněný o validaci a zpracování jednotlivých řádků.</p><p><em>Poznámka: V prvotní fázi projektu bude UC implementován ve zjednodušené podobě bez podpory pro importní šablony.</em></p><h1>Seznam aktérů</h1><table><tbody><tr><th>Aktér</th><th colspan="1">Poznámka</th></tr><tr><td colspan="1">Uživatel</td><td colspan="1">Jedná se o uživatele webové aplikace Pasport.</td></tr></tbody></table><p>Poznámka: Úplný přehled aktérů je zobrazen samostatně, viz <a href="#" data-page-title="Přehled aktérů"></a>.</p><h1>Spuštění případů užití</h1><p>Uživatel zadá požadavek na stažení souboru <a href="../../../datove-modely/datovy-88033012.html">Importní dávky</a></p><h2>Vstupní podmínky</h2><p>Ke spuštění případu užití jsou nutná následující oprávnění na typ entit (viz <a href="../../../uzivatelska-88033399.html">Uživatelská oprávnění a role</a>):</p><ul><li>Import dat z externích zdrojů (IMPORT_PP_EXTERNAL_RESOURCES).</li></ul><h2>Vstupní data</h2><ul><li>Povinná vstupní data:<br><ul><li>Identifikátor <a href="../../../datove-modely/datovy-88033012.html">Importní dávky</a>.</li></ul></li><li>Nepovinná vstupní data:<br><ul><li>Je validní: Filtrační parametr (výčet) určující, jaké položky mají být v souboru vráceny. Pokud nezadáno, nejsou položky omezovány dle hodnoty Je validní.</li><li>Stav zpracování: Filtrační parametr (výčet) určující, jaké položky mají být v souboru vráceny. Pokud nezadáno, nejsou položky omezovány dle hodnoty Stav zpracování.</li></ul></li></ul><h1>Základní tok událostí</h1><ol><li>Systém vyhledá <a href="../../../datove-modely/datovy-88033012.html">Položky importní dávky</a>, které současně splňují podmínky (EF01):<br><ol><li>Importní dávka = Importní dávka předaná na vstupu</li><li>Je validní = hodnota odpovídající nastavení vstupního parametru (filtru) Je validní.</li><li>Stav zpracování = hodnota odpovídající nastavení vstupního parametru (filtru) Stav zpracování.</li></ol></li><li>Systém z takto nalezených <a href="../../../datove-modely/datovy-88033012.html">Položek importní dávky</a> (hodnota atribut Obsah) připraví soubor ke stažení ve struktuře odpovídající konkrétní <a href="../../../datove-modely/datovy-88033012.html">Šabloně importu</a> pro danou importní dávku. Viz <a href="202uc01-93592944.html">ALG01: Formát a struktura importního souboru</a> včetně řádku záhlaví. Tento soubor bude rozšířen o nové sloupce a hodnoty:<br><ul><li>Je_validní: hodnota atributu Je validní <a href="../../../datove-modely/datovy-88033012.html">Položky importní dávky</a></li><li>Validační_chyba: hodnota atributu Validační chyba <a href="../../../datove-modely/datovy-88033012.html">Položky importní dávky</a></li><li>Stav_zpracování: hodnota atributu Stav zpracování <a href="../../../datove-modely/datovy-88033012.html">Položky importní dávky</a></li><li>Chyba_zpracování: hodnota atributu Chyba zpracování <a href="../../../datove-modely/datovy-88033012.html">Položky importní dávky</a></li></ul></li><li>Systém souboru pojmenuje podle hodnoty atributu Název souboru příslušné <a href="../../../datove-modely/datovy-88033012.html">Importní dávky</a> + postfix "_výsledek".</li><li>Systém takto připravený soubor vrátí uživateli ke stažení.</li></ol><p>Poznámka: Soubor je možné stáhnout i dříve než proběhne UC <a href="#" data-page-title="202UC02: Zpracovat položky importní dávky"></a>.</p><h1>Alternativní toky události</h1><p>Nejsou.</p><h1>Výjimkové toky událostí</h1><h2>EF01: Importní dávka nebyla nalezena</h2><h3>Vstupní podmínky</h3><p>Na vstupu předaná <a href="../../../datove-modely/datovy-88033012.html">Importní dávka</a> neexistuje.</p><h3>Tok událostí</h3><ol><li>Systém předá na výstupu UC chybové hlášení s uvedenými parametry (viz <a href="../../../systemova-88033342.html">Systémová hlášení</a>):<br><ul><li>chybové hlášení: MSG_ERR_ITEM_NOT_FOUND</li></ul></li><li>Konec toku událostí.</li></ol><h3>Výstupní podmínky</h3><p>Zpracování položek importní dávky nebylo zahájeno.</p><h1>Ukončení případu užití</h1><h2>Výstupní podmínky</h2><p>Uživateli byl poskytutý ke stažení soubor s výsledky kontrol a zpracování.</p><h2>Výstupní data</h2><table><tbody><tr><th colspan="1">Výsledek UC</th><th>Výstupní parametr</div></th><th>Datový typ</div></th><th colspan="1">Povinnost</div></th><th>Popis</div></th></tr><tr><td>Úspěšné dokončení</td><td colspan="1"><p>Soubor</p></td><td colspan="1">Binární data</td><td colspan="1">Ano</td><td colspan="1"> </td></tr><tr><td colspan="1">Chyba</td><td colspan="1">Chybové hlášení.</td><td colspan="1">Řetězec</td><td colspan="1">Ano</td><td colspan="1">Jedná se o popis chyby (viz jednotlivé EF), kvůli které nemohl UC úspěšně dokončen.</td></tr></tbody></table><h1>Algoritmy</h1><p>–</p><h1>Validace</h1><p>–</p><h1>Revize</h1><h2>29. 5. 2020: Jméno Příjmení</h2><table><tbody><tr><th>Odkaz</th><th>Stručný popis změny</th></tr></tbody></table>
</div>
</body>
</html>
