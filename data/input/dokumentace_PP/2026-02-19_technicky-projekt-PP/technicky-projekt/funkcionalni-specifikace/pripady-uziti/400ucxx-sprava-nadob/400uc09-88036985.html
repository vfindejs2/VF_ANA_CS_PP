<!DOCTYPE html>
<html lang="cs">
<head>
  <meta charset="utf-8">
  <title>400UC09: Zobrazit formulář fotografie nádoby</title>
</head>
<body>
<div class="wiki-content">
<p></p><h1>Stručný popis, cíl</h1><p>Cílem případu užití je zobrazení formuláře fotografie nádoby s možností specifikace hodnot jednotlivých atributů této entity. Nastavené hodnoty jsou pak předány na výstupu případu užití.</p><h1>Seznam aktérů</h1><table><tbody><tr><th>Aktér</th><th colspan="1">Poznámka</th></tr><tr><td colspan="1">Uživatel</td><td colspan="1">–</td></tr></tbody></table><p>Poznámka: Úplný přehled aktérů je zobrazen samostatně, viz <a href="#" data-page-title="Přehled aktérů"></a>.</p><h1>Spuštění případů užití</h1><p>Uživatel zadá požadavek na zobrazení formuláře fotografie nádoby, a to jedním z uvedených způsobů:</p><ul><li>Uživatel zadá požadavek na založení fotografie nádoby (viz <a href="#" data-page-title="400UC07: Zobrazit detail nádoby">400UC07: Zobrazit detail nádoby</a>).</li><li>Uživatel zadá požadavek na editaci fotografie nádoby (viz <a href="#" data-page-title="400UC07: Zobrazit detail nádoby">400UC07: Zobrazit detail nádoby</a>).</li></ul><h2>Vstupní podmínky</h2><p>Ke spuštění případu užití jsou nutná následující oprávnění na typ entit (viz <a href="../../../uzivatelska-88033399.html">Uživatelská oprávnění a role</a>):</p><ul><li>Nádoby - modifikace.</li></ul><h2>Vstupní data</h2><ul><li>Nadpis formuláře – prostý text.</li><li>Nahrát fotografii – informace, zda je v rámci formuláře umožněno nahrát soubor.</li><li>Nastavit výchozí – informace, zda je v rámci formuláře umožněno nastavit, že se jedná o výchozí fotografii.</li><li>Entita <a href="../../../datove-modely/datovy-88033012.html">Fotografie nádoby</a> – instance této entity (nepovinné).</li><li>Výchozí fotografie – informace, zda je předaná <a href="../../../datove-modely/datovy-88033012.html">Fotografie nádoby</a> nastavena jako výchozí (nepovinné).</li></ul><h1>Základní tok událostí</h1><ol><li>Systém zobrazí formulář fotografie nádoby (viz <a href="400uc09-88036985.html">Uživatelské rozhraní</a>).<br><ol><li>Pokud je na vstupu získána instance entity <a href="../../../datove-modely/datovy-88033012.html">Fotografie nádoby</a>, dojde k vyplnění formuláře.</li><li>Jinak je formulář zobrazen ve výchozím stavu.</li></ol></li><li>Uživatel provede nastavení hodnot jednotlivých atributů.</li><li>Uživatel potvrdí nastavené hodnoty – stiskne tlačítko pro uložení provedených změn (komponenta 9).</li><li>Systém provede validaci nastavených hodnot (viz <a href="400uc09-88036985.html">VAL01: Kontrola zadaných hodnot</a>).</li><li>Systém na výstupu předá data nastavená v rámci formuláře.</li></ol><h1>Alternativní toky události</h1><h2>AF01: Nahrát obrázek </h2><h3>Vstupní podmínky</h3><p>–</p><h3>Tok událostí</h3><ol><li>Alternativní tok událostí začíná krokem 2 základního toku událostí.</li><li>Pokud uživatel stiskl ovládací prvek pro nahrání fotografie (nepředal tedy přímo zvolený soubor přetažením; komponenta 6):<br><ol><li>Systém zobrazí formulář pro výběr souboru – spustí <a href="#" data-page-title="101UC08: Zobrazit dialog pro výběr souboru"></a>, na vstup jsou předány následující informace:<br><ol><li>Multiselect: FALSE.</li></ol></li><li>Pokud uživatel zruší výběr souboru:<br><ol><li>Systém zavře formulář pro výběr souboru.</li><li>Přechod na krok 2 základního toku událostí.</li></ol></li><li>Uživatel označí soubor a potvrdí jeho výběr.</li><li>Systém načte soubor získaný na výstupu formuláře pro výběr souboru (viz <a href="#" data-page-title="101UC08: Zobrazit dialog pro výběr souboru"></a>).</li><li>Systém zavře formulář pro výběr souboru.</li></ol></li><li>Systém provede validaci souboru získaného na výstupu formuláře pro výběr souboru (viz <a href="400uc09-88036985.html">VAL02: Kontrola nahraného obrázku</a>).<br><ul><li>Poznámka: Pokud validace neproběhnou úspěšně, alternativní tok událostí končí – přechod na krok 2 základního toku událostí (viz odpovídající alternativní toky).</li></ul></li><li>Systém dle získaného souboru vytvoří instanci entity <a href="../../../datove-modely/datovy-88033012.html">Fotografie</a> – spustí <a href="#" data-page-title="300UC07: Založit fotografii"></a>, na vstup jsou předány následující informace:<br><ul><li>Obrázek: získaný soubor.</li><li>Náhled obrázku: vygenerovaný náhled získaného souboru (vygenerován v rámci volaného UC).</li></ul></li><li>Systém dle vytvořené <a href="../../../datove-modely/datovy-88033012.html">Fotografie</a> nastaví hodnoty atributů entity <a href="../../../datove-modely/datovy-88033012.html">Fotografie nádoby</a>:<br><ol><li>Název: název souboru (uvedena je i koncovka souboru) v rámci vytvořené <a href="../../../datove-modely/datovy-88033012.html">Fotografie</a> (atribut Obrázek).<br></li><li>Fotografie: vytvořená <a href="../../../datove-modely/datovy-88033012.html">Fotografie</a>.</li></ol></li><li>Systém aktualizuje data zobrazená ve formuláři – zobrazí název souboru v rámci komponenty 6.</li></ol><h3>Výstupní podmínky</h3><ul><li>Byla získána <a href="../../../datove-modely/datovy-88033012.html">Fotografii</a> splňující zadaná kritéria, která byla přiřazena k odpovídající <a href="../../../datove-modely/datovy-88033012.html">Fotografii nádoby</a>.</li></ul><h2>AF02: Název souboru není validní</h2><h3>Vstupní podmínky</h3><ul><li>Délka názvu získaného souboru přesahuje povolenou délku (rozsah atributu Název entity <a href="../../../datove-modely/datovy-88033012.html">Fotografii nádoby</a>, viz <a href="#" data-page-title="Datový slovník">Datový slovník</a>).</li></ul><h3>Tok událostí</h3><ol><li>Alternativní tok událostí začíná krokem 3 alternativního toku událostí <a href="400uc09-88036985.html">AF01: Nahrát obrázek</a>.</li><li>Systém zobrazí systémové hlášení – spustí <a href="../101ucxx-spolecne-prvky-uzivatelskeho-rozhrani/101uc05-88034337.html">101UC05: Zobrazit systémové hlášení</a>, na vstup jsou předány následující informace:<br><ul><li>Kód systémového hlášení: MSG_ERR_MAXIMUM_FILE_NAME_LENGTH_EXCEEDED, viz <a href="../../../systemova-88033342.html">Systémová hlášení</a>.</li></ul></li><li>Uživatel potvrdí systémové hlášení.</li><li>Systém zavře systémové hlášení.</li><li>Přechod na krok 2 základního toku událostí.</li></ol><h3>Výstupní podmínky</h3><ul><li>Získaný soubor nebyl přiřazen k odpovídající <a href="../../../datove-modely/datovy-88033012.html">Fotografii</a> (potažmo <a href="../../../datove-modely/datovy-88033012.html">Fotografii nádoby</a>).</li></ul><h2>AF03: Formát souboru není validní</h2><h3>Vstupní podmínky</h3><ul><li>Formát získaného souboru není v jednom z uvedených formátů (rozsah atributu Obrázek entity <a href="../../../datove-modely/datovy-88033012.html">Fotografie</a>, viz <a href="#" data-page-title="Datový slovník">Datový slovník</a>).</li></ul><h3>Tok událostí</h3><ol><li>Alternativní tok událostí začíná krokem 3 alternativního toku událostí <a href="400uc09-88036985.html">AF01: Nahrát obrázek</a>.</li><li>Systém zobrazí systémové hlášení – spustí <a href="../101ucxx-spolecne-prvky-uzivatelskeho-rozhrani/101uc05-88034337.html">101UC05: Zobrazit systémové hlášení</a>, na vstup jsou předány následující informace:<br><ul><li>Kód systémového hlášení: MSG_ERR_FILE_TYPE_NOT_ALLOWED, viz <a href="../../../systemova-88033342.html">Systémová hlášení</a>.<br></li></ul></li><li>Uživatel potvrdí systémové hlášení.</li><li>Systém zavře systémové hlášení.</li><li>Přechod na krok 2 základního toku událostí.</li></ol><h3>Výstupní podmínky</h3><ul><li>Získaný soubor nebyl přiřazen k odpovídající <a href="../../../datove-modely/datovy-88033012.html">Fotografii</a> (potažmo <a href="../../../datove-modely/datovy-88033012.html">Fotografii nádoby</a>).</li></ul><h2>AF04: Maximální velikost souboru je překročena </h2><h3>Vstupní podmínky</h3><ul><li>Velikost získaného souboru přesahuje povolenou hodnotu (maxImageSize, viz <a href="#" data-page-title="Konfigurační parametry"></a>).</li></ul><h3>Tok událostí</h3><ol><li>Alternativní tok událostí začíná krokem 3 alternativního toku událostí <a href="400uc09-88036985.html">AF01: Nahrát obrázek</a>.</li><li>Systém zobrazí systémové hlášení – spustí <a href="../101ucxx-spolecne-prvky-uzivatelskeho-rozhrani/101uc05-88034337.html">101UC05: Zobrazit systémové hlášení</a>, na vstup jsou předány následující informace:<br><ul><li>Kód systémového hlášení: MSG_ERR_MAXIMUM_FILE_SIZE_EXCEEDED, viz <a href="../../../systemova-88033342.html">Systémová hlášení</a>.</li></ul></li><li>Uživatel potvrdí systémové hlášení.</li><li>Systém zavře systémové hlášení.</li><li>Přechod na krok 2 základního toku událostí.</li></ol><h3>Výstupní podmínky</h3><ul><li>Získaný soubor nebyl přiřazen k odpovídající <a href="../../../datove-modely/datovy-88033012.html">Fotografii</a> (potažmo <a href="../../../datove-modely/datovy-88033012.html">Fotografii nádoby</a>).</li></ul><h1>Výjimkové toky událostí</h1><h2>EF01: Zrušení provedených změn</h2><h3>Vstupní podmínky</h3><ul><li>Uživatel zruší provedené změny – stiskne tlačítko pro zrušení provedených změn (komponenta 2, 8).</li></ul><h3>Tok událostí</h3><ol><li>Výjimkový tok událostí začíná krokem 3 základního toku událostí.</li><li>Případ užití končí.</li></ol><h3>Výstupní podmínky</h3><ul><li>Na výstupu nebyly předány žádné informace.</li></ul><h1>Ukončení případu užití</h1><h2>Výstupní podmínky</h2><p>Ve formuláři nastavené hodnoty jsou validní (viz <a href="400uc09-88036985.html">VAL01: Kontrola zadaných hodnot</a>).</p><h2>Výstupní data</h2><ul><li>Entita <a href="../../../datove-modely/datovy-88033012.html">Fotografie nádoby</a> – hodnoty atributů této entity, které byly nastaveny v rámci formuláře.</li><li>Výchozí – informace, zda je <a href="../../../datove-modely/datovy-88033012.html">Fotografie nádoby</a> v rámci formuláře nastavena jako výchozí (nepovinné).</li></ul><h1>Algoritmy</h1><p>–</p><h1>Validace</h1><h2>VAL01: Kontrola zadaných hodnot</h2><p>Formulář jako takový zajišťuje základní validaci zadaných údajů. Ta je prováděna ve 2 krocích:</p><ol><li>Zadání hodnoty – jakmile uživatel změní hodnotu v rámci ovládacího prvku, je provedena validace této hodnoty. Pokud vložená hodnota nesplňuje požadovaná kritéria, je zobrazeno chybové hlášení, a to přímo ve formuláři spolu s ovládacím prvkem.</li><li>Potvrzení provedených změn – jakmile uživatel potvrdí provedené změny, je provedena validace všech ovládacích prvků formuláře. Postup je pak obdobný jako v kroku 1.</li></ol><p>Validační kritéria jsou pak uvedena společně s popisem jednotlivých ovládacích prvků (viz <a href="400uc09-88036985.html">Uživatelské rozhraní</a>).</p><h2>VAL02: Kontrola nahraného obrázku</h2><p>Systémový dialog pro výběr souboru (viz <a href="#" data-page-title="101UC08: Zobrazit dialog pro výběr souboru"></a>) neumožňuje snadné omezení toho, jaké soubory mohou být vybrány. Proto je nutné provést validaci zvolených souborů.</p><ul><li>Název souboru – délka názvu souboru nepřesahuje povolenou délku (rozsah atributu Název entity <a href="../../../datove-modely/datovy-88033012.html">Fotografie nádoby</a>, viz <a href="#" data-page-title="Datový slovník">Datový slovník</a>).</li><li>Formát souboru – soubor je v jednom z uvedených formátů (rozsah atributu Obrázek entity <a href="../../../datove-modely/datovy-88033012.html">Fotografie</a>, viz <a href="#" data-page-title="Datový slovník">Datový slovník</a>).</li><li>Velikost souboru – velikost souboru nepřesahuje povolenou hodnotu (maxImageSize, viz <a href="#" data-page-title="Konfigurační parametry"></a>).</li></ul><h1>Uživatelské rozhraní</h1><p>Formulář se dle předaných vstupních parametrů může nacházet ve 2 stavech:</p><ul><li>Založení fotografie – je umožněn výběr obrázku a nastavení jeho popisu.</li><li>Editace fotografie – jsou zobrazeny informace o konkrétním obrázku (název, datum vytvoření), možná je však změna pouze u samotného popisu.</li></ul><p>Možnost nastavení příznaku o výchozí <a href="../../../datove-modely/datovy-88033012.html">Fotografii nádoby</a> je pak také specifikováno na úrovni vstupních parametrů.</p><h2>Drátový diagram</h2><p><img src="400uc09-zobrazit-formular-fotografie-nadoby-88036985_images/image2020-7-29 10-23-10.png" data-attachment="true"></p><h2>Přehled UI komponent</h2><table><tbody><tr><th>Callout</th><th>Komponenta</th><th colspan="1">Nadpis</th><th>Typ komponenty</th><th>Příklad hodnoty</th><th colspan="1">Hodnota</th><th colspan="1">Výchozí hodnota</th><th colspan="1">Formát</th><th colspan="1">Bublinková nápověda</th><th colspan="1">Zpřístupněná</th><th colspan="1">Viditelná</th><th>Chování</th><th colspan="1">Validace</th><th colspan="1">Poznámka</th></tr><tr><td colspan="1">1</td><td colspan="1">Nadpis formuláře</td><td colspan="1">–</td><td colspan="1">Label</td><td colspan="1">Přidat fotografii nádoby</td><td colspan="1">Získána na vstupu UC, parametr Nadpis formuláře.</td><td colspan="1">–</td><td colspan="1">–</td><td colspan="1">–</td><td colspan="1">–</td><td colspan="1">Vždy</td><td colspan="1">–</td><td colspan="1">–</td><td colspan="1">–</td></tr><tr><td colspan="1">2</td><td colspan="1">Zavření okna</td><td colspan="1">–</td><td colspan="1"><p>Button</p><ul><li>V rámci ovládacího prvku je zobrazena ikona: ra-cross.</li></ul></td><td colspan="1">–</td><td colspan="1">–</td><td colspan="1">–</td><td colspan="1">–</td><td colspan="1">–</td><td colspan="1">Vždy</td><td colspan="1">Vždy</td><td colspan="1">Spustí výjimkový tok <a href="400uc09-88036985.html">EF01: Zrušení provedených změn</a>.</td><td colspan="1">–</td><td colspan="1">–</td></tr><tr><td colspan="1">3</td><td colspan="1">Název fotografie</td><td colspan="1">Název</td><td colspan="1">Label</td><td colspan="1">1228-000541_nadoba.png</td><td colspan="1">Entita <a href="../../../datove-modely/datovy-88033012.html">Fotografie nádoby</a>.</td><td colspan="1">–</td><td colspan="1"><Název></td><td colspan="1">–</td><td colspan="1">–</td><td colspan="1">Pokud je na vstupu UC v rámci parametru Nahrát obrázek předána hodnota FALSE.</td><td colspan="1">–</td><td colspan="1">–</td><td colspan="1">–</td></tr><tr><td colspan="1">4</td><td colspan="1">Datum vytvoření fotografie</td><td colspan="1">Datum vytvoření</td><td colspan="1">Label</td><td colspan="1">2. 7. 2020, 15:45</td><td colspan="1">Entita <a href="../../../datove-modely/datovy-88033012.html">Fotografie nádoby</a>.</td><td colspan="1">–</td><td colspan="1"><p><Datum vytvoření></p><p>Zobrazená hodnota je v uvedeném formátu: <a href="../../ovladaci-prvky/pouzivane-88036959.html">Datum a čas</a>.</p></td><td colspan="1">–</td><td colspan="1">–</td><td colspan="1">Pokud je na vstupu UC v rámci parametru Nahrát obrázek předána hodnota FALSE.</td><td colspan="1">–</td><td colspan="1">–</td><td colspan="1">–</td></tr><tr><td colspan="1">5</td><td colspan="1">Popis fotografie</td><td colspan="1">Popis</td><td colspan="1">MultilinetextBox</td><td colspan="1">Fotografie nádoby</td><td colspan="1">Entita <a href="../../../datove-modely/datovy-88033012.html">Fotografie nádoby</a>.</td><td colspan="1">–</td><td colspan="1"><Popis></td><td colspan="1">–</td><td colspan="1">Vždy</td><td colspan="1">Vždy</td><td colspan="1">–</td><td colspan="1"><ul><li>Maximálně 255 znaků (chybové hlášení: Počet znaků nesmí být větší než 255).</li></ul></td><td colspan="1">–</td></tr><tr><td colspan="1">6</td><td colspan="1">Konkrétní obrázek</td><td colspan="1">Fotografie*</td><td colspan="1"><p>FileSelectControl</p><p>TODO: Jedná se o ovládací prvek použitý např. v rámci aplikace Online Dispečink (viz <a href="https://confluence.radium.cz/display/OD/POI#POI-Ukl%C3%A1d%C3%A1n%C3%ADp%C5%99%C3%ADloh">odkaz</a>). Popis komponenty bude dodán později.</p><p>Pokud není vybrán soubor, je uveden zástupný text doplněný ikonou: </p><ul><li>Text: Nahrát soubor</li></ul></td><td colspan="1">1228-000541_nadoba.png</td><td colspan="1">Soubor je nahráván až v rámci práce s formulářem.</td><td colspan="1">–</td><td colspan="1"><Název nahraného souboru></td><td colspan="1">–</td><td colspan="1">Vždy</td><td colspan="1">Pokud je na vstupu UC v rámci parametru Nahrát obrázek předána hodnota TRUE.</td><td colspan="1"><p>Po stisknutí ovládacího prvku dojde ke spuštění <a href="400uc09-88036985.html">AF01: Nahrát obrázek</a>.</p><p>Alternativní tok může být spuštěn i přetažením souboru na plochu ovládací prvku (Drag&Drop).</p></td><td colspan="1">–</td><td colspan="1"><p>Validace jsou prováděny v rámci volaného alternativního toku.</p><p>Po úspěšném ukončení volaného alternativního toku událostí dojde k vytvoření instance entity <a href="../../../datove-modely/datovy-88033012.html">Fotografie</a>. Ta je přiřazena k odpovídající <a href="../../../datove-modely/datovy-88033012.html">Fotografii nádoby</a>.</p></td></tr><tr><td colspan="1">7</td><td colspan="1">Nastavení fotografie jako výchozí</td><td colspan="1">Výchozí fotografie</td><td colspan="1">CheckBox</td><td colspan="1">TRUE</td><td colspan="1">Získána na vstupu UC, parametr Výchozí fotografie.</td><td colspan="1">FALSE</td><td colspan="1">–</td><td colspan="1">–</td><td colspan="1">Vždy</td><td colspan="1">Pokud je na vstupu UC v rámci parametru Nastavit výchozí předána hodnota TRUE.</td><td colspan="1">Hodnota je předávána jako výstupní parametr Výchozí.</td><td colspan="1">–</td><td colspan="1"><p>Pokud není hodnota získána na vstupu, je použita výchozí hodnota.</p><p>Na výstup je hodnota předávána pouze v případě, kdy je hodnotu možné nastavit (ovládací prvek je viditelný).</p></td></tr><tr><td colspan="1">8</td><td colspan="1">Zrušení provedených změn</td><td colspan="1">Zrušit</td><td colspan="1"><p>Button</p><ul><li>V rámci ovládacího prvku je zobrazena ikona: ra-cross.</li></ul></td><td colspan="1">–</td><td colspan="1">–</td><td colspan="1">–</td><td colspan="1">–</td><td colspan="1">–</td><td colspan="1">Vždy</td><td colspan="1">Vždy</td><td colspan="1">Spustí výjimkový tok <a href="400uc09-88036985.html">EF01: Zrušení provedených změn</a>.</td><td colspan="1">–</td><td colspan="1">–</td></tr><tr><td colspan="1">9</td><td colspan="1">Uložení provedených změn</td><td colspan="1">Uložit</td><td colspan="1"><p>Button</p><ul><li>V rámci ovládacího prvku je zobrazena ikona: ra-tick.</li></ul></td><td colspan="1">–</td><td colspan="1">–</td><td colspan="1">–</td><td colspan="1">–</td><td colspan="1">–</td><td colspan="1">Vždy</td><td colspan="1">Vždy</td><td colspan="1">Odpovídá kroku 3 základního toku událostí.</td><td colspan="1">–</td><td colspan="1">–</td></tr></tbody></table><h2>Uživatelská nastavení</h2><p>–</p><h2>Parametry URL</h2><p>–</p><h1>Grafický návrh</h1><p>TODO</p><h1>Revize</h1><h2>29. 7. 2020: Tomáš Nadrchal</h2><p>Změny provedené po konzultaci s vývojáři – možnost použít existující komponentu.</p><table><tbody><tr><th>Odkaz</th><th>Stručný popis změny</th></tr><tr><td colspan="1"><a href="400uc09-88036985.html">AF01: Nahrát obrázek</a> </td><td colspan="1">Doplněna možnost vložit soubor pomocí Drag&Drop (naznačeno modře).</td></tr><tr><td colspan="1"><a href="400uc09-88036985.html">Uživatelské rozhraní</a></td><td colspan="1">Aktualizován ovládací prvek použitý pro výběr souboru(naznačeno modře).</td></tr></tbody></table>
</div>
</body>
</html>
