<!DOCTYPE html>
<html lang="cs">
<head>
  <meta charset="utf-8">
  <title>400UC21: Nastavit poslední výsyp nádoby dle výsypu</title>
</head>
<body>
<div class="wiki-content">
<p></p><h1>Stručný popis, cíl</h1><p>Cílem případu užití je nalezení a přiřazení nejnovější události výsypu k odpovídající nádobě. Cílem této evidence je pak optimalizace výkonu při práci s nádobami.</p><p>Poznámka: Vyhodnocení probíhá dle získané <a href="../../../datove-modely/datovy-88033012.html">Události výsypu nádoby</a>, typicky tedy při zaležení či editaci záznamu této entity.</p><h1>Seznam aktérů</h1><table><tbody><tr><th>Aktér</th><th colspan="1">Poznámka</th></tr><tr><td colspan="1">Systém</td><td colspan="1">–</td></tr></tbody></table><p>Poznámka: Úplný přehled aktérů je zobrazen samostatně, viz <a href="#" data-page-title="Přehled aktérů"></a>.</p><h1>Spuštění případů užití</h1><p>Systém zadá požadavek na nastavení posledního výsypu nádoby dle výsypu, a to jedním z uvedených způsobů:</p><ul><li>Systém provede založení nové události výsypu nádoby (viz <a href="#" data-page-title="301UC07: Založit událost výsypu nádoby"></a>).</li><li>Systém provede editaci stávající události výsypu nádoby (viz <a href="#" data-page-title="301UC08: Upravit událost výsypu nádoby">301UC08: Upravit událost výsypu nádoby</a>).</li></ul><p>Poznámka: Spuštění typicky probíhá v návaznosti na synchronizaci výsypů či import z ruční čtečky (v rámci odpovídající transakce).</p><h2>Vstupní podmínky</h2><p>Ke spuštění případu užití jsou nutná následující oprávnění na typ entit (viz <a href="../../../uzivatelska-88033399.html">Uživatelská oprávnění a role</a>):</p><ul><li>Nádoby - modifikace.</li></ul><h2>Vstupní data</h2><table><tbody><tr><th>Vstupní parametr</div></th><th>Datový typ</div></th><th colspan="1">Povinnost</div></th><th>Popis</div></th><th colspan="1">Poznámka</div></th></tr><tr><td colspan="1">Událost výsypu nádoby</td><td colspan="1"><a href="../../../datove-modely/datovy-88033012.html">Událost výsypu nádoby</a></td><td colspan="1">Ano</td><td colspan="1">Událost výsypu nádoby, která má být vyhodnocena.</td><td colspan="1">–</td></tr><tr><td colspan="1">Zdroj změny</td><td colspan="1"><a href="../../../datove-modely/datovy-88033012.html">Zdroj změny</a></td><td colspan="1">Ano</td><td colspan="1">Zařízení, ve kterém bylo požadováno nastavení posledního výsypu nádoby.</td><td colspan="1">–</td></tr></tbody></table><h1>Základní tok událostí</h1><ol><li>Systém nalezne <a href="../../../datove-modely/datovy-88033012.html">Nádobu</a>, pro kterou byla provedena na vstupu získaná <a href="../../../datove-modely/datovy-88033012.html">Událost výsypu nádoby</a> (viz <a href="400uc21-112558657.html">ALG01: Získat nádobu</a>).<br><ul><li>Pokud není <a href="../../../datove-modely/datovy-88033012.html">Nádoba</a> nalezena, tok událostí končí (viz <a href="400uc21-112558657.html">AF01: Nádoba není k dispozici</a>).</li></ul></li><li>Systém nalezne pro získanou <a href="../../../datove-modely/datovy-88033012.html">Nádobu</a> odpovídající <a href="../../../datove-modely/datovy-88033012.html">Rozšíření nádoby</a> – hledá takové <a href="../../../datove-modely/datovy-88033012.html">Rozšíření nádoby</a>, které splňuje všechny dále uvedené podmínky zároveň:<br><ul><li>Hodnota atributu Nádoba odpovídá získané <a href="../../../datove-modely/datovy-88033012.html">Nádobě</a> (viz krok 1).</li></ul></li><li> Pokud není <a href="../../../datove-modely/datovy-88033012.html">Rozšíření nádoby</a> nalezeno – systém provede jeho založení (viz <a href="400uc21-112558657.html">ALG02: Založit rozšíření nádoby</a>).<ol><li>nahrazeno a zaneseno do <a href="../301ucxx-sprava-dat-nadoby/301uc01-88036162.html">301UC01: Založit nádobu</a></li></ol></li><li>Jinak <a href="../../../datove-modely/datovy-88033012.html">Rozšíření nádoby</a> nalezeno je – systém provede vyhodnocení nejnovější <a href="../../../datove-modely/datovy-88033012.html">Událost výsypu nádoby</a> (viz <a href="400uc21-112558657.html">ALG03: Vyhodnotit poslední výsyp nádoby</a>).</li></ol><h1>Alternativní toky událostí</h1><h2>AF01: Nádoba není k dispozici</h2><h3>Vstupní podmínky</h3><ul><li>Pro na vstupu získanou <a href="../../../datove-modely/datovy-88033012.html">Událost výsypu nádoby</a> (vstupní parametr Událost výsypu nádoby) nebyla získána odpovídající <a href="../../../datove-modely/datovy-88033012.html">Nádoba</a> (na výstupu <a href="400uc21-112558657.html">ALG01: Získat nádobu</a> nebyla získána <a href="../../../datove-modely/datovy-88033012.html">Nádoba</a>).</li></ul><h3>Tok událostí</h3><ol><li>Alternativní tok událostí začíná krokem 1 základního toku událostí.</li><li>Případ užití předčasně končí.</li></ol><p>Poznámka: Nenalezení <a href="../../../datove-modely/datovy-88033012.html">Nádoby</a> nepředstavuje chybový stav.</p><h3>Výstupní podmínky</h3><ul><li>Na vstupu získaná <a href="../../../datove-modely/datovy-88033012.html">Událost výsypu nádoby</a> nebyla přiřazena k <a href="../../../datove-modely/datovy-88033012.html">Nádobě</a>.</li></ul><h1>Výjimkové toky událostí</h1><p>–</p><h1>Ukončení případu užití</h1><h2>Výstupní podmínky</h2><p>Byla vyhodnocena na vstupu získaná <a href="../../../datove-modely/datovy-88033012.html">Událost výsypu nádoby</a>. Pokud se jednalo o poslední <a href="../../../datove-modely/datovy-88033012.html">Událost výsypu nádoby</a> některé z <a href="../../../datove-modely/datovy-88033012.html">Nádob</a>, došlo k jejich přiřazení.</p><h2>Výstupní data</h2><p>–</p><h1>Algoritmy</h1><h2>ALG01: Získat nádobu</h2><p>Získání <a href="../../../datove-modely/datovy-88033012.html">Nádoby</a>, která byla obsloužena v rámci <a href="../../../datove-modely/datovy-88033012.html">Události výsypu nádoby</a>, vyžaduje provedení několika kroků, které si nyní popíšeme. Tím prvním je získání samotného identifikátoru nádoby.</p><ul><li>Hodnota atributu <strong>Kód identifikátoru</strong> u na vstupu získané <a href="../../../datove-modely/datovy-88033012.html">Události výsypu nádoby</a> (vstupní parametr Událost výsypu nádoby).</li></ul><p>Pokud je získán požadovaný identifikátor, pokračujeme hledáním vazby <a href="../../../datove-modely/datovy-88033012.html">Přiřazení identifikátoru k nádobě</a> – ta musí splňovat všechny dále uvedené podmínky zároveň:</p><ul><li>Hodnota atributu <strong>Je aktivní</strong> je rovna <strong>TRUE</strong>.</li><li>Hodnota atributu <strong>Kód identifikátoru</strong> je rovna hodnotě atributu <strong>Kód identifikátoru</strong> u na vstupu získané <a href="../../../datove-modely/datovy-88033012.html">Události výsypu nádoby</a> (vstupní parametr Událost výsypu nádoby).</li><li>Hodnota atributu <strong>Platnost od</strong> je menší nebo rovna hodnotě atributu <strong>Čas</strong> u na vstupu získané <a href="../../../datove-modely/datovy-88033012.html">Události výsypu nádoby</a> (vstupní parametr Událost výsypu nádoby).</li><li>Hodnota atributu <strong>Platnost do</strong> je větší než nebo rovna hodnota atributu <strong>Čas</strong> u na vstupu získané <a href="../../../datove-modely/datovy-88033012.html">Události výsypu nádoby</a> (vstupní parametr Událost výsypu nádoby).<br></li></ul><p>Pokud je získáno požadované <a href="../../../datove-modely/datovy-88033012.html">Přiřazení identifikátoru k nádobě</a>, máme k dispozici také hledanou <a href="../../../datove-modely/datovy-88033012.html">Nádobu</a> – ta je předána na výstupu algoritmu.</p><ul><li>Hodnota atributu <strong>Nádoba</strong> u získaného <a href="../../../datove-modely/datovy-88033012.html">Přiřazení identifikátoru k nádobě</a>.</li></ul><p>V opačném případě, pokud nebyla splněna alespoň jedna z uvedených podmínek, je na výstupu algoritmu předáno <strong>NULL</strong>.</p><h2>ALG02: Založit rozšíření nádoby</h2><p><br></p><p>Pokud nebylo nalezeno <a href="../../../datove-modely/datovy-88033012.html">Rozšíření nádoby</a>, znamená to, že pro odpovídající <a href="../../../datove-modely/datovy-88033012.html">Nádobu</a> není evidována ani poslední <a href="../../../datove-modely/datovy-88033012.html">Událost výsypu nádoby</a>. Provedeme tedy jeho založení – systém spustí <a href="#" data-page-title="301UC10: Založit rozšíření nádoby"></a>, na vstup jsou předány následující informace:</p><ul><li>Zakládané rozšíření nádoby: předány jsou hodnoty nesystémových atributů entity <a href="../../../datove-modely/datovy-88033012.html">Rozšíření nádoby</a>:<br><ul><li>Nádoba: získaná <a href="../../../datove-modely/datovy-88033012.html">Nádoba</a> (viz <a href="400uc21-112558657.html">ALG01: Získat nádobu</a>).</li><li>Poslední událost výsypu: na vstupu získaná <a href="../../../datove-modely/datovy-88033012.html">Událost výsypu nádoby</a> (vstupní parametr Událost výsypu nádoby).</li><li>Datum a čas poslední události výsypu: hodnota atribut <strong>Čas</strong> na vstupu získané <a href="../../../datove-modely/datovy-88033012.html">Události výsypu nádoby</a> (vstupní parametr Událost výsypu nádoby).</li></ul></li><li>Zdroj změny: <a href="../../../datove-modely/datovy-88033012.html">Zdroj změny</a> získaný na vstupu (vstupní parametr Zdroj změny).</li></ul><p>Poznámka: Předpokladem je, že pokud pro <a href="../../../datove-modely/datovy-88033012.html">Nádobu</a> neexistuje <a href="../../../datove-modely/datovy-88033012.html">Rozšíření nádoby</a>, tak není k dispozici ani další <a href="../../../datove-modely/datovy-88033012.html">Událost výsypu nádoby</a>.</p><h2>ALG03: Vyhodnotit poslední výsyp nádoby</h2><p>Pokud bylo nalezeno <a href="../../../datove-modely/datovy-88033012.html">Rozšíření nádoby</a>, může již být k odpovídající <a href="../../../datove-modely/datovy-88033012.html">Nádobě</a> přiřazena také <a href="../../../datove-modely/datovy-88033012.html">Událost výsypu nádoby</a> – provedeme tedy kontrolu, zda je nalezené <a href="../../../datove-modely/datovy-88033012.html">Rozšíření nádoby</a> aktuální. Pokud jsou splněny všechny dále uvedené podmínky zároveň, je přiřazení aktuální a není nutné provádět žádné další akce.</p><ul><li>Hodnota atributu <strong>Poslední událost výsypu</strong> je k dispozici.</li><li>Hodnota atributu <strong>Datum a čas poslední události výsypu</strong> je větší než hodnota atributu <strong>Čas</strong> na vstupu získané <a href="../../../datove-modely/datovy-88033012.html">Události výsypu nádoby</a> (vstupní parametr Událost výsypu nádoby).</li></ul><p>V opačném případě zajistíme aktualizaci nalezeného <a href="../../../datove-modely/datovy-88033012.html">Rozšíření nádoby</a> – systém spustí <a href="#" data-page-title="301UC11: Upravit rozšíření nádoby"></a>, na vstup jsou předány následující informace:</p><ul><li>Editované rozšíření nádoby: získané <a href="../../../datove-modely/datovy-88033012.html">Rozšíření nádoby</a> (viz krok 2 základního toku událostí).</li><li>Změny v rozšíření nádoby: předány jsou hodnoty nesystémových atributů entity <a href="../../../datove-modely/datovy-88033012.html">Rozšíření nádoby</a>:<br><ul><li>Nádoba: hodnota atributu <strong>Nádoba</strong> získaného <a href="../../../datove-modely/datovy-88033012.html">Rozšíření nádoby</a> (viz krok 2 základního toku událostí).</li><li>Poslední událost výsypu: na vstupu získaná <a href="../../../datove-modely/datovy-88033012.html">Událost výsypu nádoby</a> (vstupní parametr Událost výsypu nádoby).</li><li>Datum a čas poslední události výsypu: hodnota atribut <strong>Čas</strong> na vstupu získané <a href="../../../datove-modely/datovy-88033012.html">Události výsypu nádoby</a> (vstupní parametr Událost výsypu nádoby).<br></li></ul></li><li>Zdroj změny: <a href="../../../datove-modely/datovy-88033012.html">Zdroj změny</a> získaný na vstupu (vstupní parametr Zdroj změny).<br></li></ul><p>Poznámka: Předpokladem je, že pokud pro <a href="../../../datove-modely/datovy-88033012.html">Nádobu</a> existuje <a href="../../../datove-modely/datovy-88033012.html">Rozšíření nádoby</a>, tak je odkazována nejnovější <a href="../../../datove-modely/datovy-88033012.html">Událost výsypu nádoby</a>.</p><h1>Validace</h1><p>Poznámka: Případné validace jsou prováděny v rámci volaných UC. </p><h1>Uživatelské rozhraní</h1><p>–</p><h1>Grafický návrh</h1><p>–</p><h1>Revize</h1><h2>6.2.2026: Vladislav Findejs</h2><table><tbody><tr><th>Odkaz</div></div></th><th>Stručný popis změny</div></div></th></tr><tr><td colspan="1"><p><a href="400uc21-112558657.html">Základní tok událostí</a></p></td><td colspan="1">Odebrání založení nádoby v <a href="../../../datove-modely/datovy-88033012.html">Rozšíření nádoby</a> naznačeno červeně).</td></tr></tbody></table><h2>19. 4. 2024: Tomáš Nadrchal</h2><table><tbody><tr><th>Odkaz</div></div></th><th>Stručný popis změny</div></div></th></tr><tr><td colspan="1"><a href="400uc21-112558657.html">ALG01: Získat nádobu</a></td><td colspan="1">Revize způsobu vyhodnocení platnosti (naznačeno modře).</td></tr></tbody></table>
</div>
</body>
</html>
