<!DOCTYPE html>
<html lang="cs">
<head>
  <meta charset="utf-8">
  <title>400UC15: Zobrazit mapu nádob pro externí zákazníky</title>
</head>
<body>
<div class="wiki-content">
<p></p><h1>Stručný popis, cíl</h1><p>Cílem případu užití je zobrazení mapy <a href="../../../datove-modely/datovy-88033012.html">Nádob</a> pro externí zákazníky (přesněji k nádobám přiřazených <a href="../../../datove-modely/datovy-88033012.html">Stanovišť</a>). Na základě uživatelských oprávnění systém uživateli zpřístupní volání dílčích funkčností.</p><p>Poznámka: <strong>V mapě zobrazujeme <a href="../../../datove-modely/datovy-88033012.html">Stanoviště</a>, která jsou k dnešnímu dni přiřazena k <a href="../../../datove-modely/datovy-88033012.html">Nádobám</a> specifikovaným na vstupu UC. Tomu odpovídá i dále uvedený popis, pracujeme se <a href="../../../datove-modely/datovy-88033012.html">Stanovišti</a>!</strong></p><h1>Seznam aktérů</h1><table><tbody><tr><th>Aktér</th><th colspan="1">Poznámka</th></tr><tr><td colspan="1">Uživatel</td><td colspan="1">–</td></tr></tbody></table><p>Poznámka: Úplný přehled aktérů je zobrazen samostatně, viz <a href="#" data-page-title="Přehled aktérů"></a>.</p><h1>Spuštění případů užití</h1><p>Uživatel zadá požadavek na zobrazení mapy nádob pro externí zákazníky, a to jedním z uvedených způsobů:</p><ul><li>Uživatel zobrazí mapu nádob v přehledu nádob pro externí zákazníky (viz <a href="400uc14-97652013.html">400UC14: Zobrazit přehled nádob pro externí zákazníky</a>).</li></ul><h2>Vstupní podmínky</h2><p>Ke spuštění případu užití jsou nutná následující oprávnění na typ entit (viz <a href="../../../uzivatelska-88033399.html">Uživatelská oprávnění a role</a>):</p><ul><li>Alespoň jedno z uvedených oprávnění: Nádoby - zobrazení, Nádoby - modifikace.</li><li>Alespoň jedno z uvedených oprávnění: Stanoviště - zobrazení, Stanoviště - modifikace.</li><li>Alespoň jedno z uvedených oprávnění: Objednávky - zobrazení, Objednávky - modifikace (vyhodnocení dostupných <a href="../../../datove-modely/datovy-88033012.html">Událostí výsypu nádoby</a>).</li><li>Aktivní mapa na obrazovce nádob</li><li>Počet nádob v přehledu je menší jak "containerCount" dle <a href="../../../konfiguracni-hodnoty/konfiguracni-88033346.html">Konfigurační parametry</a><ul><li>jinak AF2</li></ul></li></ul><h2>Vstupní data</h2><table><tbody><tr><th>Vstupní parametr</div></th><th>Datový typ</div></th><th colspan="1">Povinnost</div></th><th>Popis</div></th><th colspan="1">Poznámka</div></th></tr><tr><td colspan="1">Specifikace zobrazených nádob</td><td colspan="1">–</td><td colspan="1">Ano</td><td colspan="1">Kritéria, podle kterých jsou načítány jednotlivé <a href="../../../datove-modely/datovy-88033012.html">Nádoby</a>.</td><td colspan="1">Jedná se o specifikaci jednotlivých kritérií, podle kterých jsou vyhodnocovány načítané <a href="../../../datove-modely/datovy-88033012.html">Nádoby</a>. Může to být určení konkrétní <a href="../../../datove-modely/datovy-88033012.html">Provozovny</a>, požadavek na pouze aktivní záznamy, aplikace filtru na evidenční číslo <a href="../../../datove-modely/datovy-88033012.html">Nádoby</a>, ale i specifikace, že nás zajímají pouze <a href="../../../datove-modely/datovy-88033012.html">Nádoby</a> s přiřazeným <a href="../../../datove-modely/datovy-88033012.html">Stanovištěm</a> na požadované adrese. Obvykle se pak jedná o informaci, kterou má k dispozici nadřazený UC, který mapu používá. Vzhledem k tomu, že není v rámci mapy použito stránkování, se může počet načtených záznamů výrazně lišit např. oproti „propojené“ tabulce. Pro mapu však není nutné načítat všechny informace o <a href="../../../datove-modely/datovy-88033012.html">Nádobě</a> (respektive přiřazeném <a href="../../../datove-modely/datovy-88033012.html">Stanovišti</a>), ve většině případů si vystačíme s identifikátorem a polohou. Z toho důvodu by nebylo rozumné načítat data společně v nadřazeném UC – pro mapu a tabulku zároveň a ve stejném rozsahu (dalším rozměrem je množství dat, se kterým musíme u <a href="../../../datove-modely/datovy-88033012.html">Nádob</a> počítat). Doplňující informace o <a href="../../../datove-modely/datovy-88033012.html">Nádobě</a> či přiřazeném <a href="../../../datove-modely/datovy-88033012.html">Stanovišti</a> pak můžeme získat až ve chvíli, kdy budou opravdu potřeba (např. zobrazení kontextové nápovědy).</td></tr></tbody></table><h1>Základní tok událostí</h1><ol><li>Systém zobrazí mapu nádob (viz <a href="400uc15-97652014.html">Uživatelské rozhraní</a>).<br><ol><li>pokud není hlavní mapa aktivovaná, tak k načítání údajů do mapy <strong>nedochází </strong></li></ol></li><li>Systém načte takové <a href="../../../datove-modely/datovy-88033012.html">Nádoby</a>, které splňují všechny dále uvedené podmínky zároveň:<br><ul><li><a href="../../../datove-modely/datovy-88033012.html">Nádoba</a> odpovídá na vstupu získané specifikaci (vstupní parametr Specifikace zobrazených nádob).</li></ul></li><li>Systém detekuje, že počet nádob z zobrazení je menší jak ContainerCount (nadefinován v <a href="#" data-page-title="Konfigurační parametry">Konfigurační parametry</a>).</li><li>Pro všechny nalezené <a href="../../../datove-modely/datovy-88033012.html">Nádoby</a>:<br><ol><li>Systém nalezne takové <a href="../../../datove-modely/datovy-88033012.html">Přiřazení nádoby ke stanovišti</a>, které splňuje všechny dále uvedené podmínky zároveň (mělo by být nalezeno maximálně jedno <a href="../../../datove-modely/datovy-88033012.html">Přiřazení nádoby ke stanovišti</a>):<br><ul><li><p>Atribut Je aktivní nabývá hodnoty TRUE.</p></li><li><p>Hodnota atributu Nádoba se odkazuje na právě zkoumanou <a href="../../../datove-modely/datovy-88033012.html">Nádobu</a>.</p></li><li>Hodnota atributu Datum přistavení je menší nebo rovno aktuálnímu datu a času.</li><li>Hodnota atributu Datum stažení je větší než aktuální datum a čas (pokud není hodnota k dispozici, není podmínka vyhodnocována).</li></ul></li><li>Pokud je nalezeno <a href="../../../datove-modely/datovy-88033012.html">Přiřazení nádoby ke stanovišti</a>, systém vyhodnotí obsažené <a href="../../../datove-modely/datovy-88033012.html">Stanoviště</a> (atribut Stanoviště):<br><ol><li>Pokud není právě zkoumané <a href="../../../datove-modely/datovy-88033012.html">Stanoviště</a> zatím vykresleno v mapě:<br><ol><li>Pokud je hodnota atributu Souřadnice k dispozici:<br><ol><li>Systém vykreslí právě zkoumané <a href="../../../datove-modely/datovy-88033012.html">Stanoviště</a> v mapě.</li></ol></li></ol></li></ol></li><li>Jinak: <strong>přechod na krok 3</strong> (<a href="../../../datove-modely/datovy-88033012.html">Stanoviště</a> není k dispozici).</li></ol></li><li>Systém zpřístupní dostupné funkčnosti.</li></ol><p>Poznámka:</p><ul><li>Každé <a href="../../../datove-modely/datovy-88033012.html">Stanoviště</a> je v mapě vykresleno maximálně jednou. </li><li><a href="../../../datove-modely/datovy-88033012.html">Stanoviště</a> jsou načítána pouze v nutném rozsahu (identifikátor a souřadnice). Tomu odpovídají i informace dostupné na výstupu UC.</li><li>Aktuálně nejsou načítaná <a href="../../../datove-modely/datovy-88033012.html">Stanoviště</a> omezena právě zobrazeným výřezem mapy.</li></ul><h1>Alternativní toky událostí</h1><h3>AF1: Aktivace panelu mapy až po načtení nádob</h3><ol><li>Uživatel nemá aktivní hlavní mapu</li><li>Proběhne <a href="400uc06-88036373.html">400UC06: Zobrazit přehled nádob</a></li><li>Uživatel aktivuje mapy<br><ol><li>systém pokračuje od bodu 3 <a href="400uc11-93593024.html">Základní tok událostí</a></li></ol></li></ol><p> </p><h3>AF2: Načtení údajů do mapy u vyššího počtu nádob v přehledu</h3><p> </p><ol><li>Systém zobrazí mapu nádob (viz <a href="400uc11-93593024.html">Uživatelské rozhraní</a>).</li><li>Systém načte takové <a href="../../../datove-modely/datovy-88033012.html">Nádoby</a>, které splňují všechny dále uvedené podmínky zároveň:<br><br><ul><li><a href="../../../datove-modely/datovy-88033012.html">Nádoba</a> odpovídá na vstupu získané specifikaci (vstupní parametr Specifikace zobrazených nádob).</li></ul></li><li>Systém detekuje, že počet nádob z zobrazení je větší nebo rovno jak ContainerCount (nadefinován v <a href="#" data-page-title="Konfigurační parametry">Konfigurační parametry</a>).</li><li>V mapě se zobrazí dlaždice s informací, že uživatel musí dát pokyn k načtení údajů do mapy.</li><li>Uživatel potvrdí načtení.</li><li>Pro všechny nalezené <a href="../../../datove-modely/datovy-88033012.html">Nádoby</a>:<br><ol><li>Systém nalezne takové <a href="../../../datove-modely/datovy-88033012.html">Přiřazení nádoby ke stanovišti</a>, které splňuje všechny dále uvedené podmínky zároveň (mělo by být nalezeno maximálně jedno <a href="../../../datove-modely/datovy-88033012.html">Přiřazení nádoby ke stanovišti</a>):<br><ul><li><p>Atribut Je aktivní nabývá hodnoty TRUE.</p></li><li><p>Hodnota atributu Nádoba se odkazuje na právě zkoumanou <a href="../../../datove-modely/datovy-88033012.html">Nádobu</a>.</p></li><li>Hodnota atributu Datum přistavení je menší nebo rovno aktuálnímu datu a času.</li><li>Hodnota atributu Datum stažení je větší než nebo rovna aktuální datum a čas (pokud není hodnota k dispozici, není podmínka vyhodnocována).</li></ul></li><li>Pokud je nalezeno <a href="../../../datove-modely/datovy-88033012.html">Přiřazení nádoby ke stanovišti</a>, systém vyhodnotí obsažené <a href="../../../datove-modely/datovy-88033012.html">Stanoviště</a> (atribut Stanoviště):<br><ol><li>Pokud je hodnota atributu Souřadnice k dispozici:<br><ol><li>Systém vykreslí právě zkoumané <a href="../../../datove-modely/datovy-88033012.html">Stanoviště</a> v mapě.</li></ol></li><li>Jinak: <strong>přechod na krok 3</strong> (<a href="../../../datove-modely/datovy-88033012.html">Stanoviště</a> není možné vykreslit v mapě).</li></ol></li><li>Jinak: <strong>přechod na krok 3</strong> (<a href="../../../datove-modely/datovy-88033012.html">Stanoviště</a> není k dispozici).</li></ol></li><li>Systém zpřístupní dostupné funkčnosti.</li></ol><h1>Výjimkové toky událostí</h1><p>–</p><h1>Ukončení případu užití</h1><h2>Výstupní podmínky</h2><p>Uživateli byla zobrazena mapa <a href="../../../datove-modely/datovy-88033012.html">Nádob</a> (respektive přiřazených <a href="../../../datove-modely/datovy-88033012.html">Stanovišť</a>), ve které dostupné funkce odpovídají jeho uživatelským oprávněním.</p><h2>Výstupní data</h2><p>–</p><h1>Algoritmy</h1><p>–</p><h1>Validace</h1><p>–</p><h1>Uživatelské rozhraní</h1><p>Použitá mapa je založena na obecné mapě (viz <a href="https://confluence.radium.cz/display/FLWWPAS/Mapa">Mapa</a>), tomu odpovídá i její chování (k dispozici je např. pouze základní nastavení mapy – mapový podklad a jeho barevnost).</p><p>V rámci mapy jsou načtena <a href="../../../datove-modely/datovy-88033012.html">Stanoviště</a>, která odpovídají na vstupu získané specifikaci <a href="../../../datove-modely/datovy-88033012.html">Nádob</a> (viz <a href="400uc15-97652014.html">Základní tok událostí</a>). Zvýrazněna jsou pak právě označená <a href="../../../datove-modely/datovy-88033012.html">Stanoviště</a>. Vykreslena jsou následovně:</p><ul><li>Zobrazení stanoviště: ikona ra-location.</li><li>Barva označeného stanoviště: defaultColor, viz <a href="../../../konfiguracni-hodnoty/pouzite-88033348.html">Použité barvy</a>.</li><li>Barva stanoviště: mapDefaultSiteColor, viz <a href="../../../konfiguracni-hodnoty/pouzite-88033348.html">Použité barvy</a>.</li><li>Pokud je na <a href="../../../datove-modely/datovy-88033012.html">Stanovišti</a> k dnešnímu dni přistavena více jak jedna <a href="../../../datove-modely/datovy-88033012.html">Nádoba</a> (vzhledem k na vstupu získané specifikaci <a href="../../../datove-modely/datovy-88033012.html">Nádob</a>), je k dispozici i počet těchto <a href="../../../datove-modely/datovy-88033012.html">Nádob</a> (viz <a href="400uc15-97652014.html">Nádoby na stanovišti</a>).</li></ul><h3>Shlukování</h3><p>Nastavení mapy se pak v některých ohledech liší od výchozího stavu (obecná mapa, viz <a href="https://confluence.radium.cz/display/FLWWPAS/Mapa">Mapa</a>). Konkrétně se jedná o možnost zobrazení shluků, která je povolena. Jejich specifikace je následující:</p><ul><li>Zobrazení shluku – grafická podoba je dána použitou komponentou.</li><li>Použití shluku – vyhodnocení, zda má být zobrazen shluk, je dáno použitou komponentou. Zobrazení shluku je potlačeno od úrovně přiblížení mapy sitesClusterMapZoomLevelExternalCustomers, viz <a href="../../../konfiguracni-hodnoty/konfiguracni-88033346.html">Konfigurační parametry</a>.</li><li>Kliknutí na shluk – dojde k přiblížení mapy a jejímu vycentrování na <a href="../../../datove-modely/datovy-88033012.html">Stanoviště</a> obsažená ve shluku.<br><ul><li>Funkce Spiderfy není povolena.</li><li>Pro shluk není k dispozici <a href="400uc15-97652014.html">Detail stanoviště v mapě</a>.</li></ul></li></ul><p>Dále je pak uveden náhled mapy v případě, kdy jsou pro vykreslení <a href="../../../datove-modely/datovy-88033012.html">Stanovišť</a> použity shluky.</p><p><img src="400uc15-zobrazit-mapu-nadob-pro-externi-zakazniky-97652014_images/image2021-8-23 12-14-14.png" data-attachment="true"></p><h4>Knihovna H3geo</h4><p>Při spuštění <a href="400uc11-93593024.html">AF2: Načtení údajů do mapy u vyššího počtu nádob v přehledu</a> s počtem nádob > 150000 tak dojde ke změně knihovny pro shlukování (H3geo)</p><p><img src="400uc15-zobrazit-mapu-nadob-pro-externi-zakazniky-97652014_images/image2026-2-8 18-16-5.png" data-attachment="true"></p><p>K vykreslení mapy dochází především při impulsu z nadřízeného UC – došlo ke změně specifikace načítaných <a href="../../../datove-modely/datovy-88033012.html">Nádob</a>, podle kterých jsou vykreslována <a href="../../../datove-modely/datovy-88033012.html">Stanoviště</a>, případně se změnila množina dostupných <a href="../../../datove-modely/datovy-88033012.html">Nádob</a> (vytvoření, editace, odebrání).</p><p>Poznámka: Vzhledem k tomu, že není při načítání <a href="../../../datove-modely/datovy-88033012.html">Stanovišť</a> vyhodnocován právě zobrazený výřez mapy, není nutné opětovně načítat data např. při jejím přiblížení.</p><p>Vykreslení mapy probíhá následovně:</p><ol><li>Systém zruší vykreslení právě zobrazených <a href="../../../datove-modely/datovy-88033012.html">Stanovišť</a> v mapě.</li><li>Systém vykreslí <a href="../../../datove-modely/datovy-88033012.html">Stanoviště</a>, která odpovídají na vstupu získané specifikaci <a href="../../../datove-modely/datovy-88033012.html">Nádob</a> (viz <a href="400uc15-97652014.html">Základní tok událostí</a>), použita je Barva stanoviště.</li><li>Systém vycentruje mapu tak, aby byla vidět všechna zobrazená <a href="../../../datove-modely/datovy-88033012.html">Stanoviště</a> (může dojít i k přiblížení mapy, dostupná měřítka při této akci jsou 50 m a více).</li></ol><p>Poznámka: Pro vykreslená <a href="../../../datove-modely/datovy-88033012.html">Stanoviště</a> je k dispozici bublinková nápověda. Její struktura je uvedena samostatně (viz <a href="400uc15-97652014.html">Detail stanoviště v mapě</a>). K zobrazení dochází po najetí myší na konkrétní <a href="../../../datove-modely/datovy-88033012.html">Stanoviště</a>, a to po uplynutí určité prodlevy (tooltipDisplayDelay, viz <a href="../../../konfiguracni-hodnoty/konfiguracni-88033346.html">Konfigurační parametry</a>). Zobrazení těchto informací je potlačeno od úrovně přiblížení mapy sitesClusterMapZoomLevelExternalCustomers, viz <a href="../../../konfiguracni-hodnoty/konfiguracni-88033346.html">Konfigurační parametry</a>.</p><h2>Drátový diagram</h2><p><img src="400uc15-zobrazit-mapu-nadob-pro-externi-zakazniky-97652014_images/image2022-2-7 11-28-40.png" data-attachment="true"></p><h2>Přehled UI komponent</h2><table><tbody><tr><th>Callout</div></div></th><th>Prvek</div></div></th><th colspan="1">Popis</div></div></th><th>Poznámka</div></div></th></tr><tr><td colspan="1">1</td><td colspan="1">Nástrojová lišta</td><td colspan="1">Aktuálně je použita pouze výchozí nástrojová lišta (viz <a href="https://confluence.radium.cz/display/FLWWPAS/Mapa">Mapa</a>).</td><td colspan="1">Další nastavení mapy zatím nejsou implementována.</td></tr><tr><td colspan="1">2</td><td colspan="1">Neoznačené stanoviště</td><td colspan="1">Znázornění polohy <a href="../../../datove-modely/datovy-88033012.html">Stanoviště</a> v případě, kdy není označeno.</td><td colspan="1"><p>V rámci zobrazeného <a href="../../../datove-modely/datovy-88033012.html">Stanoviště</a> je k dispozici i počet aktuálně přiřazených <a href="../../../datove-modely/datovy-88033012.html">Nádob</a> (vzhledem k na vstupu získané specifikaci dostupných <a href="../../../datove-modely/datovy-88033012.html">Nádob</a>). Hodnota je pak zobrazena i v případě, kdy konkrétnímu <a href="../../../datove-modely/datovy-88033012.html">Stanovišti</a> odpovídá právě jedna <a href="../../../datove-modely/datovy-88033012.html">Nádoba</a>.</p></td></tr><tr><td colspan="1">3</td><td colspan="1">Označené stanoviště</td><td colspan="1">Znázornění polohy <a href="../../../datove-modely/datovy-88033012.html">Stanoviště</a> v případě, kdy je označeno.</td><td colspan="1"><p>V rámci zobrazeného <a href="../../../datove-modely/datovy-88033012.html">Stanoviště</a> je k dispozici i počet aktuálně přiřazených <a href="../../../datove-modely/datovy-88033012.html">Nádob</a> (vzhledem k na vstupu získané specifikaci dostupných <a href="../../../datove-modely/datovy-88033012.html">Nádob</a>). Hodnota je pak zobrazena i v případě, kdy konkrétnímu <a href="../../../datove-modely/datovy-88033012.html">Stanovišti</a> odpovídá právě jedna <a href="../../../datove-modely/datovy-88033012.html">Nádoba</a>.</p></td></tr></tbody></table><h2>Chování</h2><h3>Označení stanoviště</h3><p>V rámci mapy není možné provést označení <a href="../../../datove-modely/datovy-88033012.html">Stanoviště</a> (ani odpovídající <a href="../../../datove-modely/datovy-88033012.html">Nádoby</a>).</p><h3>Nádoby na stanovišti</h3><p>K jednomu <a href="../../../datove-modely/datovy-88033012.html">Stanovišti</a> může být v jeden čas přiřazeno i několik <a href="../../../datove-modely/datovy-88033012.html">Nádob</a>. V rámci kontextové nabídky <a href="../../../datove-modely/datovy-88033012.html">Stanoviště</a> (viz <a href="400uc15-97652014.html">Detail stanoviště v mapě</a>) výčet takových <a href="../../../datove-modely/datovy-88033012.html">Nádob</a> zobrazujeme. Přiřazené <a href="../../../datove-modely/datovy-88033012.html">Nádoby</a> je pak možné získat pomocí vazby <a href="../../../datove-modely/datovy-88033012.html">Přiřazení nádoby ke stanovišti</a>. V první řadě tedy nalezneme taková <a href="../../../datove-modely/datovy-88033012.html">Přiřazení nádoby ke stanovišti</a>, která splňují všechny dále uvedené podmínky zároveň:</p><ul><li><p>Atribut Je aktivní nabývá hodnoty TRUE.</p></li><li><p>Hodnota atributu Stanoviště se odkazuje na právě zkoumané <a href="../../../datove-modely/datovy-88033012.html">Stanoviště</a>.</p></li><li>Hodnota atributu Datum přistavení je menší nebo rovno aktuálnímu datu a času.</li><li>Hodnota atributu Datum stažení je větší než aktuální datum a čas (pokud není hodnota k dispozici, není podmínka vyhodnocována).</li></ul><p>Nalezená <a href="../../../datove-modely/datovy-88033012.html">Přiřazení nádoby ke stanovišti</a> obsahují odkaz na požadované <a href="../../../datove-modely/datovy-88033012.html">Nádoby</a> (atribut Nádoba). Získané nádoby jsou pak dále filtrovány následovně:</p><ul><li><a href="../../../datove-modely/datovy-88033012.html">Nádoba</a> odpovídá na vstupu získané specifikaci (vstupní parametr Specifikace zobrazených nádob).</li></ul><p>Poznámka: <a href="../../../datove-modely/datovy-88033012.html">Nádoby</a> jsou předány abecedně seřazeny dle hodnoty atributu Evidenční číslo, a to vzestupně.</p><h3>Detail stanoviště v mapě</h3><p>Detail <a href="../../../datove-modely/datovy-88033012.html">Stanoviště</a> v mapě je zobrazován ve formě kontextové nabídky, tomu odpovídá také samotné chování (viz <a href="../101ucxx-spolecne-prvky-uzivatelskeho-rozhrani/101uc15-114459546.html">101UC15: Zobrazit kontextovou nápovědu</a>). jako vstupní hodnota je předána konkrétní instance <a href="../../../datove-modely/datovy-88033012.html">Stanoviště</a>. </p><p>Poznámka: Uvedená informace je zobrazována až od určité úrovně přiblížení mapy (sitesClusterMapZoomLevelExternalCustomers, viz <a href="../../../konfiguracni-hodnoty/konfiguracni-88033346.html">Konfigurační parametry</a>).</p><h4>Drátový diagram</h4><p><img src="400uc15-zobrazit-mapu-nadob-pro-externi-zakazniky-97652014_images/image2021-8-23 14-18-23.png" data-attachment="true"></p><h4>Přehled UI komponent</h4><table><tbody><tr><th>Callout</div></div></th><th>Komponenta</div></div></th><th colspan="1">Nadpis</div></div></th><th>Typ komponenty</div></div></th><th>Příklad hodnoty</div></div></th><th colspan="1">Hodnota</div></div></th><th colspan="1">Výchozí hodnota</div></div></th><th colspan="1">Formát</div></div></th><th colspan="1">Bublinková nápověda</div></div></th><th colspan="1">Zpřístupněná</div></div></th><th colspan="1">Viditelná</div></div></th><th>Chování</div></div></th><th colspan="1">Validace</div></div></th><th colspan="1">Poznámka</div></div></th></tr><tr><td colspan="1">1</td><td colspan="1">Adresa stanoviště</td><td colspan="1">Adresa</td><td colspan="1">Label</td><td colspan="1">Železničního pluku 118/A, 530 03 Pardubice</td><td colspan="1">Entita <a href="../../../datove-modely/datovy-88033012.html">Stanoviště</a>.</td><td colspan="1">–</td><td colspan="1"><p><Adresa></p><p>Zobrazená hodnota je v uvedeném formátu: <a href="../../ovladaci-prvky/pouzivane-88036959.html">Úplná adresa</a>.</p></td><td colspan="1">–</td><td colspan="1">–</td><td colspan="1">Vždy</td><td colspan="1">–</td><td colspan="1">–</td><td colspan="1">–</td></tr><tr><td colspan="1">2</td><td colspan="1">Nádoby na stanovišti</td><td colspan="1"><p>Nádoby (<Počet nádob>)</p><ul><li>Hodnota Počet nádob je získána výpočtem dle množství odpovídajících <a href="../../../datove-modely/datovy-88033012.html">Nádob</a> (viz <a href="400uc15-97652014.html">Nádoby na stanovišti</a>).</li></ul></td><td colspan="1">Label</td><td colspan="1">1128-000262 (SKO, 240 l), Petr Rychlý | výsyp: 25. 6. 2021, 6:44</td><td colspan="1"><p>Entita <a href="../../../datove-modely/datovy-88033012.html">Nádoba</a>.</p><p><a href="400uc11-93593024.html">Nádoby na stanovišti</a> </p></td><td colspan="1">–</td><td colspan="1"><p><a href="400uc15-97652014.html">Formát nádoby na stanovišti</a></p><p>Každá z dostupných <a href="../../../datove-modely/datovy-88033012.html">Nádob</a> je zobrazena na samostatném řádku.</p><p>Maximální počet <a href="../../../datove-modely/datovy-88033012.html">Nádob</a> zobrazených v nabídce je omezen. Pokud dojde k jeho překročení, je zobrazen zástupný znak „…“ a zbývající <a href="../../../datove-modely/datovy-88033012.html">Nádoby</a> nejsou v nabídce zobrazeny (viz drátový diagram).</p><ul><li>Maximální počet nádob: sitesMapTooltipMaxContainerCount (viz <a href="../../../konfiguracni-hodnoty/konfiguracni-88033346.html">Konfigurační parametry</a>).</li></ul><p>Uvedené chování nemá vliv na počet <a href="../../../datove-modely/datovy-88033012.html">Nádob</a> zobrazený v nadpisu položky.</p></td><td colspan="1">–</td><td colspan="1">–</td><td colspan="1">Vždy</td><td colspan="1">–</td><td colspan="1">–</td><td colspan="1">Zobrazené <a href="../../../datove-modely/datovy-88033012.html">Nádoby</a> na <a href="../../../datove-modely/datovy-88033012.html">Stanovišti</a> odpovídají specifikaci získané na vstupu UC.</td></tr></tbody></table><h4>Formát nádoby na stanovišti</h4><p>Formát, ve kterém jsou jednotlivé <a href="../../../datove-modely/datovy-88033012.html">Nádoby</a> zobrazeny, se může lišit dle několika aspektů. Výchozí formát hodnoty je pak následující: <strong><Evidenční číslo> (<Skupina odpadu>, <Objem nádoby>), <Poplatník> | výsyp: <Poslední výsyp></strong>. Jednotlivé položky jsou popsány následně.</p><table><tbody><tr><th>Komponenta</div></th><th>Popis</div></th><th>Hodnota</div></th><th colspan="1">Formát</div></th><th colspan="1">Poznámka</div></th></tr><tr><td colspan="1">Evidenční číslo</td><td colspan="1">Evidenční číslo odpovídající <a href="../../../datove-modely/datovy-88033012.html">Nádoby</a>.</td><td colspan="1">Entita <a href="../../../datove-modely/datovy-88033012.html">Nádoba</a>.</td><td colspan="1"><Evidenční číslo></td><td colspan="1">–</td></tr><tr><td colspan="1">Skupina odpadu</td><td colspan="1">Skupina odpadu odpovídající <a href="../../../datove-modely/datovy-88033012.html">Nádoby</a>.</td><td colspan="1">Entita <a href="../../../datove-modely/datovy-88033012.html">Skupina odpadu</a> – atribut Skupina odpadu entity <a href="../../../datove-modely/datovy-88033012.html">Nádoba</a>.</td><td colspan="1"><p><Zkrácený název></p><p>Pokud není <a href="../../../datove-modely/datovy-88033012.html">Skupina odpadu</a> k dispozici, není zobrazena žádná hodnota.</p></td><td colspan="1"><p>Pokud není k dispozici hodnota ani pro jedenu z dále uvedených položek, není zobrazena ani závorka obklopující tyto položky (viz výchozí formát):</p><ul><li>Skupina odpadu,</li><li>Objem nádoby.</li></ul></td></tr><tr><td colspan="1">Objem nádoby</td><td colspan="1">Objem odpovídající <a href="../../../datove-modely/datovy-88033012.html">Nádoby</a> spolu s množstevní jednotkou.</td><td colspan="1">Entita <a href="../../../datove-modely/datovy-88033012.html">Vzor nádoby</a> – atribut Vzor nádoby entity <a href="../../../datove-modely/datovy-88033012.html">Nádoba</a>.</td><td colspan="1"><p><Objem nádoby> <Množstevní jednotka objemu nádoby.Značka></p><p>Pokud není <a href="../../../datove-modely/datovy-88033012.html">Vzor nádoby</a> k dispozici, není zobrazena žádná hodnota.</p></td><td colspan="1"><p>Pokud není k dispozici hodnota ani pro jedenu z dále uvedených položek, není zobrazena ani závorka obklopující tyto položky (viz výchozí formát):</p><ul><li>Skupina odpadu,</li><li>Objem nádoby.</li></ul></td></tr><tr><td colspan="1">Poplatník</td><td colspan="1">Poplatník přiřazený k dopovídající <a href="../../../datove-modely/datovy-88033012.html">Nádobě</a> k dnešnímu dni.</td><td colspan="1"><p>Entita <a href="../../../datove-modely/datovy-88033012.html">Přiřazení poplatníka k nádobě</a>.</p><p><a href="400uc15-97652014.html">Získání přiřazení poplatníka k nádobě</a></p></td><td colspan="1"><p><Název poplatníka></p><p>Pokud není <a href="../../../datove-modely/datovy-88033012.html">Přiřazení poplatníka k nádobě</a> k dispozici, není zobrazena žádná hodnota.</p></td><td colspan="1">Pokud není hodnota k dispozici, není zobrazena ani čárka obsažená před touto položkou (viz výchozí formát).</td></tr><tr><td colspan="1">Poslední výsyp</td><td colspan="1">Datum a čas posledního výsypu odpovídající <a href="../../../datove-modely/datovy-88033012.html">Nádoby</a>.</td><td colspan="1"><p>Entita <a href="../../../datove-modely/datovy-88033012.html">Událost výsypu nádoby</a>.</p><p><a href="400uc15-97652014.html">Získání nejnovější události výsypu nádoby</a></p></td><td colspan="1"><p><Čas></p><p>Zobrazená hodnota je v uvedeném formátu: <a href="../../ovladaci-prvky/pouzivane-88036959.html">Datum a čas</a>.</p><p>Pokud není <a href="../../../datove-modely/datovy-88033012.html">Událost výsypu nádoby</a>  k dispozici, není zobrazena žádná hodnota.</p></td><td colspan="1">–</td></tr></tbody></table><h4>Získání přiřazení poplatníka k nádobě</h4><p>V rámci kontextové nabídky jsou mj. k dispozici i základní informace o poplatníkovi, který je aktuálně přiřazen k odpovídající <a href="../../../datove-modely/datovy-88033012.html">Nádobě</a>. Konkrétního poplatníka je pak možné získat pomocí vazby <a href="../../../datove-modely/datovy-88033012.html">Přiřazení poplatníka k nádobě</a>. V první řadě tedy nalezneme takové <a href="../../../datove-modely/datovy-88033012.html">Přiřazení poplatníka k nádobě</a> , které splňuje všechny dále uvedené podmínky zároveň (měl by být nalezen maximálně jeden záznam):</p><ul><li><p>Atribut Je aktivní nabývá hodnoty TRUE.</p></li><li><p>Hodnota atributu Nádoba se odkazuje na právě zkoumanou <a href="../../../datove-modely/datovy-88033012.html">Nádobu</a>.</p></li><li>Hodnota atributu Platnost od je menší nebo rovno aktuálnímu datu a času.</li><li>Hodnota atributu Platnost do je větší než aktuální datum a čas (pokud není hodnota k dispozici, není podmínka vyhodnocována).</li></ul><p>Pokud je <a href="../../../datove-modely/datovy-88033012.html">Přiřazení poplatníka k nádobě</a> nalezeno, máme k dispozici i požadovaného poplatníka. V opačném případě není poplatník k dispozici.</p><h4>Získání nejnovější události výsypu nádoby</h4><p>V rámci kontextové nabídky jsou pro konkrétní <a href="../../../datove-modely/datovy-88033012.html">Nádobu</a> zobrazovány mj. informace o posledním výsypu nádoby. Hledáme pak takovou <a href="../../../datove-modely/datovy-88033012.html">Událost výsypu nádoby</a>, která odpovídá právě zkoumané <a href="../../../datove-modely/datovy-88033012.html">Nádobě</a> a která byla zároveň provedena pro konkrétního externího zákazníka (resp. odpovídajícího uživatele) jako poslední. Postup je následující:</p><ol><li>Systém načte poslední <a href="../../../datove-modely/datovy-88033012.html">Událost výsypu nádoby</a> pro externí zákazníky – spustí <a href="400uc20-98238503.html">400UC20: Získat poslední výsyp nádoby pro externí zákazníky</a>, na vstup jsou předány následující informace:<br><ul><li>Nádoba: právě zkoumaná <a href="../../../datove-modely/datovy-88033012.html">Nádoba</a>.</li></ul></li></ol><p>Pokud není nalezena žádná <a href="../../../datove-modely/datovy-88033012.html">Událost výsypu nádoby</a>, není předána žádná hodnota.</p><h2>Uživatelská nastavení</h2><p>V rámci obrazovky je použito <a href="#" data-page-title="Uživatelská nastavení"></a>. Prvky, u kterých je ukládáno uživatelské nastavení, jsou uvedeny ve formě tabulky. Jejich výchozí hodnota pak odpovídá popisu uživatelského rozhraní.</p><table><tbody><tr><th>Funkční celek</th><th>Ukládaná hodnota</th><th>Poznámka</th></tr><tr><td colspan="1">Mapa</td><td colspan="1">Viz <a href="../../persistence-stavu-ui/uzivatelska-88033406.html">Uživatelská nastavení mapy</a> (bez další specifikace).</td><td colspan="1">–</td></tr></tbody></table><h2>Parametry URL</h2><p>–</p><h1>Grafický návrh</h1><p><img src="400uc15-zobrazit-mapu-nadob-pro-externi-zakazniky-97652014_images/image2021-8-23 11-58-6.png" data-attachment="true"></p><p> </p><h3>Grafický návrh k AF2</h3><p> </p><table><tbody><tr><th>Varianta A - vynucení načtení</div></th></tr><tr><td><img src="400uc15-zobrazit-mapu-nadob-pro-externi-zakazniky-97652014_images/image2026-2-10+13%3A37%3A28.png"></td></tr><tr><td colspan="1"><p>Uživateli se zobrazí v tabulce více jak 10.000 nádob.</p><p>Mapa se zobrazí jasná informace, že k načtení údajů nádob do mapy je nutné stisknout tlačítko.</p><p>Výhodou je, že "nutíme" uživatele, aby <strong>uživatel pracoval s konzistentními daty na straně tabulky a mapy</strong>.</p><p>Po každé změně filtrování a počtu nádob na 10.000 se mapa zobrazí ve stavu k aktualizaci.</p><p><strong>Text "Aktualizovat" bude červeným písmem.</strong></p></td></tr></tbody></table><h1>Revize</h1><h2>8.2.2026: Vladislav Findejs</h2><table><tbody><tr><th>Odkaz</th><th>Stručný popis změny</th></tr><tr><td colspan="1"><a href="400uc11-93593024.html">Základní tok událostí</a></td><td colspan="1">Revize způsobu vyhodnocení platnosti (naznačeno červeně).</td></tr><tr><td colspan="1"><p><a href="400uc11-93593024.html">Vstupní podmínky</a></p></td><td colspan="1">Načítání údajů do mapy jen při aktivní mapě.</td></tr><tr><td colspan="1"><p><a href="400uc11-93593024.html">AF1: Aktivace panelu mapy až po načtení nádob</a></p></td><td colspan="1">Aktivace mapy po načtení nádob do tabulky.</td></tr><tr><td colspan="1"><p><a href="400uc11-93593024.html">AF2: Načtení údajů do mapy u vyššího počtu nádob v přehledu</a></p></td><td colspan="1">Změna knihovny pro shlukování</td></tr></tbody></table><h2>19. 4. 2024: Tomáš Nadrchal</h2><table><tbody><tr><th>Odkaz</div></th><th>Stručný popis změny</div></th></tr><tr><td colspan="1"><a href="400uc15-97652014.html">Základní tok událostí</a></td><td colspan="1">Revize způsobu vyhodnocení platnosti (naznačeno modře).</td></tr><tr><td colspan="1"><a href="400uc15-97652014.html">Nádoby na stanovišti</a></td><td colspan="1">Revize způsobu vyhodnocení platnosti (naznačeno modře).</td></tr><tr><td colspan="1"><a href="400uc15-97652014.html">Získání přiřazení poplatníka k nádobě</a></td><td colspan="1">Revize způsobu vyhodnocení platnosti (naznačeno modře).</td></tr></tbody></table><h2>3. 3. 2023: Tomáš Nadrchal</h2><table><tbody><tr><th>Odkaz</div></th><th>Stručný popis změny</div></th></tr><tr><td colspan="1"><a href="400uc15-97652014.html">Detail stanoviště v mapě</a></td><td colspan="1">Revize zobrazení kontextové nápovědy (naznačeno modře).</td></tr></tbody></table><h2>7. 2. 2022: Tomáš Nadrchal</h2><table><tbody><tr><th>Odkaz</th><th>Stručný popis změny</th></tr><tr><td colspan="1"><a href="400uc15-97652014.html">Přehled UI komponent</a></td><td colspan="1">Revize zobrazení počtu nádob na stanovišti (naznačeno modře), viz změnové požadavky <strong>č. 57</strong> (viz <a href="https://confluence.radium.cz/pages/viewpage.action?pageId=89066925">Rozvojové požadavky</a>).</td></tr></tbody></table>
</div>
</body>
</html>
