<!DOCTYPE html>
<html lang="cs">
<head>
  <meta charset="utf-8">
  <title>400UC25: Omezit dostupné výsypy nádob</title>
</head>
<body>
<div class="wiki-content">
<p>TODO: Vyhodnocení dle skupiny odpadu – aktualizovat dle implementace.</p><p></p><h1>Stručný popis, cíl</h1><p>Cílem případu užití je omezení dostupných výsypů pro konkrétního uživatele. Pracujeme pak se 2 typy uživatelů…</p><ul><li><strong>Běžný uživatel</strong> – uživatel vytvořený pro interního zaměstnance společnosti, který pracuje s aplikací.</li><li><strong>Externí zákazník</strong> – uživatel vytvořený pro zajištění přístupu do aplikace 3. stranám (např. zástupce obce).</li></ul><h1>Seznam aktérů</h1><table><tbody><tr><th>Aktér</th><th colspan="1">Poznámka</th></tr><tr><td colspan="1">Uživatel</td><td colspan="1">–</td></tr></tbody></table><p>Poznámka: Úplný přehled aktérů je zobrazen samostatně, viz <a href="#" data-page-title="Přehled aktérů"></a>.</p><h1>Spuštění případů užití</h1><p>Uživatel zadá požadavek na vyhodnocení dostupnosti výsypů nádoby, a to jedním z uvedených způsobů:</p><ul><li>Uživatel zadá požadavek vyžadující poskytnutí výsypů nádob pro externí zákazníky (viz <a href="#" data-page-title="400UC19: Získat výsypy nádoby pro externí zákazníky">400UC19: Získat výsypy nádoby pro externí zákazníky</a>).</li><li>Uživatel zadá požadavek na export tiskové sestavy s výsypy nádob pro externí zákazníky (viz <a href="#" data-page-title="404UC04: Vytisknout sestavu Výsypy nádob za zvolené období pro externí zákazníky">404UC04: Vytisknout sestavu Výsypy nádob za zvolené období pro externí zákazníky</a>).</li><li>Uživatel zadá požadavek na zobrazení posledního výsypu nádoby (viz <a href="#" data-page-title="400UC20: Získat poslední výsyp nádoby pro externí zákazníky">400UC20: Získat poslední výsyp nádoby pro externí zákazníky</a>).</li></ul><h2>Vstupní podmínky</h2><p>Ke spuštění případu užití jsou nutná následující oprávnění na typ entit (viz <a href="../../../uzivatelska-88033399.html">Uživatelská oprávnění a role</a>):</p><ul><li>Alespoň jedno z uvedených oprávnění: Nádoby - zobrazení, Nádoby - modifikace.</li></ul><h2>Vstupní data</h2><p>Poznámka: Pro vyhodnocení dostupnosti výsypuů nádoby je postačující znalost právě přihlášeného <a href="../../../datove-modely/datovy-88033012.html">Uživatele</a> (ten spouští tento UC).</p><h1>Základní tok událostí</h1><ol><li>Systém vyhodnotí, zda je právě přihlášený <a href="../../../datove-modely/datovy-88033012.html">Uživatel</a> externím zákazníkem → je nalezen alespoň jeden záznam entity <a href="../../../datove-modely/datovy-88033012.html">Nastavení externího zákazníka</a> splňující všechny dále uvedené podmínky zároveň:<br><ul><li>Hodnota atributu <strong>Uživatel</strong> odpovídá právě přihlášenému <a href="../../../datove-modely/datovy-88033012.html">Uživateli</a>.</li></ul></li><li>Pokud je právě přihlášený <a href="../../../datove-modely/datovy-88033012.html">Uživatel</a> externím zákazníkem, je provedeno vyhodnocení dostupných <a href="../../../datove-modely/datovy-88033012.html">Událostí výsypů nádob</a>:<ol><li>Systém nastaví hodnotu výstupního parametru <strong>Výsledný dotaz</strong> dle získaného <a href="../../../datove-modely/datovy-88033012.html">Nastavení externího zákazníka</a> (viz <a href="400uc25-121341290.html">ALG01: Omezení dostupných výsypů</a>).</li><li>Pokud je v rámci získaného <a href="../../../datove-modely/datovy-88033012.html">Nastavení externího zákazníka</a> (viz krok <strong>1</strong>) k dispozici hodnota atributu <strong>Dostupné události výsypů</strong>:<br><ul><li>Hodnota výstupního parametru <strong>Výsledný dotaz</strong> je nastavena dle získaného <a href="../../../datove-modely/datovy-88033012.html">Nastavení externího zákazníka</a> (viz <a href="400uc25-121341290.html">ALG01: Omezení dostupných výsypů</a>).</li></ul></li><li>Jinak hodnota tohoto atributu k dispozici není – takový <a href="../../../datove-modely/datovy-88033012.html">Uživatel</a> není z pohledu dostupných <a href="../../../datove-modely/datovy-88033012.html">Událostí výsypů nádob</a> omezen.<br><ul><li>Hodnota výstupního parametru <strong>Výsledný dotaz</strong> není nastavena (předáno NULL).<br></li></ul></li></ol></li><li>Jinak právě přihlášený <a href="../../../datove-modely/datovy-88033012.html">Uživatel</a> externím zákazníkem není – takový <a href="../../../datove-modely/datovy-88033012.html">Uživatel</a> není z pohledu dostupných <a href="../../../datove-modely/datovy-88033012.html">Událostí výsypů nádob</a> omezen.<br><ul><li>Hodnota výstupního parametru <strong>Výsledný dotaz</strong> není nastavena (předáno NULL).</li></ul></li></ol><h1>Alternativní toky událostí</h1><p>–</p><h1>Výjimkové toky událostí</h1><p>–</p><h1>Ukončení případu užití</h1><h2>Výstupní podmínky</h2><p>Byl předán výsledný dotaz omezující množinu dostupných <a href="../../../datove-modely/datovy-88033012.html">Událostí výsypů nádob</a>, které má konkrétní uživatel k dispozici.</p><h2>Výstupní data</h2><table><tbody><tr><th>Výstupní parametr</div></th><th>Datový typ</div></th><th colspan="1">Povinnost</div></th><th>Popis</div></th><th colspan="1">Poznámka</div></th></tr><tr><td colspan="1">Výsledný dotaz</td><td colspan="1">–</td><td colspan="1">Ne</td><td colspan="1">Dotaz omezující množinu dostupných <a href="../../../datove-modely/datovy-88033012.html">Událostí výsypů nádob</a> pro konkrétního uživatele.</td><td colspan="1">Dle výsledného dotazu mohou být filtrována související data.</td></tr></tbody></table><h1>Algoritmy</h1><h2>ALG01: Omezení dostupných výsypů</h2><p>Uživateli dostupné <a href="../../../datove-modely/datovy-88033012.html">Události výsypů nádob</a> mohou být dále omezeny <a href="../../../datove-modely/datovy-88033012.html">Nastavením externího zákazníka</a>.</p><ul><li>Jedná se pak o dodatečné filtrování uživateli dostupných záznamů.</li><li>Výsledný dotaz tedy pouze omezuje jinak získanou množinu výsypů.</li></ul><p>Potřebné informace pro filtrování jsou obsaženy v definované struktuře na úrovni získaného <a href="../../../datove-modely/datovy-88033012.html">Nastavení externího zákazníka</a>… </p><ul><li>Obecně nastavené časové období pro omezení všech výsypů – atribut <strong>Dostupné události výsypů</strong> (viz <a href="../../../datove-modely/datovy-88033012.html">Struktura pro dostupné výsypy</a>).</li><li>Časové období nastavené na úrovni specifikace dostupných nádob – atribut <strong>Dostupná přiřazení nádob k položkám objednávek</strong> (viz <a href="../../../datove-modely/datovy-88033012.html">Struktura pro dostupná přiřazení nádob k položkám objednávek</a>).</li></ul><p>Dostupné <a href="../../../datove-modely/datovy-88033012.html">Události výsypů nádob</a> mohou být tedy omezeny různými způsoby…</p><ul><li>Dle vlastních parametrů – typicky se jedná o datum a čas realizace výsypu.</li><li>Na základě dodatečně získaných informací – aktuálně dle <a href="../../../datove-modely/datovy-88033012.html">Skupiny odpadu</a>.</li></ul><p>Samotné vyhodnocení dostupných <a href="../../../datove-modely/datovy-88033012.html">Události výsypů nádob</a> pak probíhá následovně…</p><ol><li>Pokud je k dispozici hodnota atributu <strong>Dostupné události výsypů</strong> získaného <a href="../../../datove-modely/datovy-88033012.html">Nastavení externího zákazníka</a>:<br><ol><li>Systém vyhodnotí dostupnost <a href="../../../datove-modely/datovy-88033012.html">Události výsypu nádoby</a> dle tohoto kritéria (viz <a href="../../../datove-modely/datovy-88033012.html">Struktura pro dostupné výsypy</a>).<br><ul><li>Hodnota atributu <strong>Čas</strong> je větší nebo rovna hodnotě atributu <strong>Dostupné výsypy od</strong> dostupné v rámci <a href="../../../datove-modely/datovy-88033012.html">Struktury pro dostupné výsypy</a>.<br><ul><li><em>Pokud není hodnota atributu <strong>Dostupné výsypy od</strong> k dispozici, není podmínka vyhodnocována.</em><br></li></ul></li><li>Hodnota atributu <strong>Čas</strong> je menší než hodnota atributu <strong>Dostupné výsypy do</strong> dostupná v rámci <a href="../../../datove-modely/datovy-88033012.html">Struktury pro dostupné výsypy</a>.<br><ul><li><em>Pokud není hodnota atributu <strong>Dostupné výsypy do</strong> k dispozici, není podmínka vyhodnocována.</em><br></li></ul></li></ul></li></ol></li><li>Pokud je k dispozici hodnota atributu <strong>Dostupná přiřazení nádob k položkám objednávek</strong> získaného <a href="../../../datove-modely/datovy-88033012.html">Nastavení externího zákazníka</a>:<br><ol><li>Systém získá taková kritéria (viz <a href="../../../datove-modely/datovy-88033012.html">Struktura pro dostupná přiřazení nádob k položkám objednávek</a>), která splňují všechny dále uvedené podmínky současně:<br><ul><li>Jedná se o kritérium v části <strong>filterColumns</strong> (u ostatních kritérií není funkčnost podporována).</li><li>Dané kritérium obsahuje v parametru <strong>name</strong> dále uvedenou hodnotu: <strong>garbageGroupId</strong> (jiné kritérium není podporováno).</li><li>Dané kritérium obsahuje hodnotu v alespoň jednom z uvedených parametrů: <strong>validFrom</strong>, <strong>validTo</strong>.</li></ul></li><li>Pokud je získáno alespoň jedno kritérium (viz krok <strong>2.a</strong>):<ol><li>Pro všechna získaná kritéria (viz krok <strong>2.a</strong>):<ol><li>Systém vyhodnotí dostupnost <a href="../../../datove-modely/datovy-88033012.html">Události výsypu nádoby</a> dle tohoto kritéria (viz <a href="../../../datove-modely/datovy-88033012.html">Struktura pro dostupná přiřazení nádob k položkám objednávek</a>).<br><ul><li>Hodnota atributu <strong>Skupina odpadu v době výsypu</strong> odpovídá dále uvedeným atributům právě zkoumaného kritéria: <strong>value</strong>, <strong>operation</strong>.<br><ul><li><em>Vyhodnocujeme, zda výsyp spadá pod danou skupinu odpadu – pokud ano, probíhá jeho další vyhodnocení.</em></li><li><em>Pokud výsyp pod danou skupinu odpadu nespadá, není jeho dostupnost omezena v rámci této iterace tohoto kroku.</em></li></ul></li><li>Hodnota atributu <strong>Čas</strong> je větší nebo rovna hodnotě atributu <strong>validFrom</strong> dostupné v rámci právě zkoumaného kritéria.<br><ul><li><em>Pokud není hodnota atributu <strong>validFrom</strong> k dispozici, není podmínka vyhodnocována.</em><br></li></ul></li><li>Hodnota atributu <strong>Čas</strong> je menší než hodnota atributu <strong>validTo</strong> dostupné v rámci právě zkoumaného kritéria.<br><ul><li><em>Pokud není hodnota atributu <strong>validTo</strong> k dispozici, není podmínka vyhodnocována.</em></li></ul></li></ul></li></ol></li></ol></li></ol></li></ol><p><strong>Poznámka</strong>: Mohou nastat situace, kdy jsou výsypy omezovány dle všech uvedených kroků. Stejně tak ale mohou nastat případy, kdy nejsou výsypy omezeny žádným z nich. To se odvíjí od nastavení externího zákazníka.</p><ul><li>První krok omezuje všechny dostupné výsypy. Pokud tedy výsyp nesplňuje podmínku z prvního kroku, není třeba vyhodnocovat kritéria řešená v následných krocích.</li><li>V druhém kroku nás pak zajímají pouze výsypy nádob s odpadem dané skupiny – tedy v případě, že jsou nádoby dané skupiny odpadu časově omezeny.</li></ul><p><strong>Stručný popis</strong>: Vyhodnocení probíhá v několika krocích – pokud pak výsyp nemá být dostupný dle některého z nich, nemusí být prováděno vyhodnocení v krocích dalších, které následují.</p><ul><li>Výsypy mohou být omezeny dle pevně daného období (viz <a href="../../../datove-modely/datovy-88033012.html">Struktura pro dostupné výsypy</a>). Toto omezení je platné pro všechny výsypy bez výjimky. Vyhodnocení provádíme jako první.</li><li>Dále mohou být výsypy omezeny dodatečnou specifikací období. Tou jsou omezovány jak dostupné nádoby, tak jejich výsypy (viz <a href="../../../datove-modely/datovy-88033012.html">Struktura pro dostupná přiřazení nádob k položkám objednávek</a>).<br><ul><li>Znamená to, že můžeme např. od následujícího roku zpřístupnit nádoby na plast. Současně ale nechceme, aby externí zákazník viděl letošní výsypy těchto nádob (nebo výsypy ještě starší).</li><li>Při vyhodnocení výsypů tedy bereme v potaz také odpovídající nádobu – pokud je dostupnost nádoby omezena obdobím, vyhodnocujeme dostupnost také u jejich výsypů.</li><li>Pokud se tedy jedná o nádobu na plast z našeho příkladu, externí uživatel uvidí danou nádobu až od prvního dne příštího roku. Stejně tak výsypy této nádoby, historické k dispozici nebudou.</li></ul></li></ul><p>Dostupné jsou tedy takové <a href="../../../datove-modely/datovy-88033012.html">Události výsypů nádob</a>, které splňují všechny dále uvedené podmínky zároveň…</p><ul><li>Hodnota atributu <strong>Čas</strong> je větší nebo rovna hodnotě atributu <strong>Dostupné výsypy od</strong> dostupné v rámci <a href="../../../datove-modely/datovy-88033012.html">Struktury pro dostupné výsypy</a>.<br><ul><li><em>Pokud není hodnota atributu <strong>Dostupné výsypy od</strong> k dispozici, není podmínka vyhodnocována.</em></li></ul></li><li>Hodnota atributu <strong>Čas</strong> je menší než hodnota atributu <strong>Dostupné výsypy do</strong> dostupná v rámci <a href="../../../datove-modely/datovy-88033012.html">Struktury pro dostupné výsypy</a>.<br><ul><li><em>Pokud není hodnota atributu <strong>Dostupné výsypy do</strong> k dispozici, není podmínka vyhodnocována.</em></li></ul></li></ul><p>Poznámka: Pokud je zadána pouze jedna z uvedených hodnot, jsou výsypy omezeny pouze z jedné strany.</p><h1>Validace</h1><p>–</p><h1>Uživatelské rozhraní</h1><p>–</p><h1>Grafický návrh</h1><p>–</p><h1>Revize</h1><h2>26. 10. 2025: Tomáš Nadrchal</h2><table><tbody><tr><th>Odkaz</div></div></div></div></th><th>Stručný popis změny</div></div></div></div></th></tr><tr><td colspan="1"><a href="400uc25-121341290.html">Základní tok událostí</a></td><td colspan="1">Přenesení logiky na úroveň dílčího algoritmu (naznačeno modře).</td></tr><tr><td colspan="1"><a href="400uc25-121341290.html">ALG01: Omezení dostupných výsypů</a></td><td colspan="1">Doplněno omezení výsypů dle zadaného období (naznačeno modře).</td></tr></tbody></table>
</div>
</body>
</html>
