<!DOCTYPE html>
<html lang="cs">
<head>
  <meta charset="utf-8">
  <title>Nefunkcionální specifikace</title>
</head>
<body>
<div class="wiki-content">
<p><br></p><p>Účelem dokumentu je popis požadavků, které kladou omezení na design a provedení (např. rychlost odezvy aplikace, designová omezení).</p><p>TODO: multicompany, branding, jazykové mutace, rychlost aplikace, <strong>logování</strong>…</p><h1>Multitenantní režim</h1><p>Systém FLWW2 může být (a dokonce i je) provozován v multitenantním režimu. To znamená, že jedno nasazení může využívat více zákazníků zároveň. Každý zákazník (tenant) má pak k dispozici své uživatele a svá data, s aplikací pracuje nezávisle od ostatních tenantů. To samé je požadováno i od aplikace Fleetware Pasport. Musí tedy být provedena určitá opatření, která si dále popíšeme.</p><p>Dále je třeba zmínit, že při komunikaci s API systému FLWW2 nejsou pro konkrétního uživatele vyhodnocována pouze uživatelská oprávnění. V potaz je bráno právě i přiřazení ke konkrétnímu tenantovi. Pro synchronizaci dat, ke které je použit systémový uživatel, je pak nutné zajistit, aby byl systémový uživatel vytvořen pro každého z tenantů. To bude zatím probíhat ručně na úrovni DB.</p><p>Poznámka: Multitenantní režim je pak možné na úrovní nasazení aplikace zapnout či vypnout (multitenancyAllowed, viz <a href="#" data-page-title="Konfigurační parametry"></a>).</p><h2>Přihlášení do aplikace</h2><p>Pokud je multitenantní režim spuštěn, je v rámci přihlašovací obrazovky zobrazeno pole pro zadání konkrétního tenanta. Dle vyplněné hodnoty jsou pak rozlišována dále uvedená opatření. Pokud uživatel hodnotu nevyplní, je využit výchozí tenant (defaultTenant, viz <a href="#" data-page-title="Konfigurační parametry"></a>). Pokud multitenantní režim spuštěn není, není možné tenanta ani zadat. V takovém případě je také využit výchozí tenant.</p><p>Poznámka: V případě, kdy je přihlášení provedeno předáním informací o přihlášeném uživateli (token), musí být identifikace konkrétního tenanta získána dle odpovídajícího uživatele.</p><h2>Konfigurační parametry</h2><p>Pokračovat budeme konfiguračními parametry, které jsou rozlišovány dle 3 základních úrovní:</p><ol><li>Nasazení – konfigurační parametry společné pro všechny tenanty.</li><li>Tenant – konfigurační parametry, které se mohou lišit dle jednotlivých tenantů.</li><li>Uživatel – uživatelské nastavení, které je ukládáno pro jednotlivé uživatele.</li></ol><p>Dle uvedených úrovní je pak třeba přistupovat i k práci s konfiguračními parametry. Ty musí být uloženy v takové struktuře, aby bylo umožněna jejich škálovatelnost dle množství jednotlivých tenantů či uživatelů.</p><h2>Datová základna</h2><p>Dalším specifikem je datová základna. Zde musí být informace uloženy tak, aby bylo patrné, který uživatel má přístup ke kterým datům. Omezení na úrovni uživatelských oprávnění pak není dostatečné, data je nutné rozlišit na úrovni jednotlivých tenantů.</p><p>Od toho se odvíjí i práce s daty a přístup k nim. Pokud je například požadována jedinečnost záznamu v rámci tabulky, na pozadí musí být ošetřeno, že jedinečnost bude omezena pouze na úrovni konkrétního tenanta. Zajištěno musí být i korektní zobrazení dat na všech místech uživatelského rozhraní. Uživatel smí vidět pouze takové informace, na které má oprávnění a které jsou dostupné pro odpovídajícího tenanta. To je částečně zajištěno i tím, že jsou data s FLWW2 synchronizována přes systémového uživatele, který je vytvořen pro každého z tetantů.</p><p>Na úrovni datového modelu jsou pak uvedená opatření řešena přidáním atributu Tenant (viz <a href="#" data-page-title="Datový slovník">Datový slovník</a>). Jedná se o referenci na konkrétního tenanta, u které je hodnota nastavena systémem vždy při vytvoření nové instance některé z entit. V rámci popisu jednotlivých případů užití pak není uvedená akce dále zmiňována.</p><h1>Použité komponenty</h1><p>V rámci systému může být vyžadováno použití určitých komponent třetích stran (pokud není v rámci konkrétního případu užití uvedeno jinak). Konkrétní případy si nyní uvedeme.</p><ul><li>Tabulky – komponenta FlexGrid (<a href="https://www.grapecity.com/wijmo/flexgrid-javascript-data-grid">https://www.grapecity.com/wijmo/flexgrid-javascript-data-grid</a>).</li></ul><h1>Předávání systémových hlášení</h1><p>Při komunikaci mezi systémy mohou vznikat situace, kdy je třeba předat uživateli systémové hlášení. Obecně je pak požadováno, aby toto systémové hlášení bylo mezi systémy předáváno v určité struktuře…</p><ul><li>Dojde k rozšíření o lokalizovaný text systémového hlášení. Ten bude předán v návaznosti na požadovanou lokalizaci specifikovanou při volání odpovídající API metody.<br><ul><li>Při volání API metody aplikace Pasport tedy bude nutné zadat také požadovanou lokalizaci.</li><li>Pokud k tomu nedojde, nebo je předána neznámá hodnota, je použita výchozí lokalizace.</li><li>Při vzniku systémového hlášení je pak daný text předán v požadované lokalizaci.  </li><li>Podporovány pak budou dále uvedené lokalizace: <strong>en-US</strong> (výchozí), <strong>cs-CZ</strong>, <strong>sk-SK</strong>.</li></ul></li><li>Kompletní seznam systémových hlášení jak pak uveden v rámci samostatného dokumentu (viz <a href="#" data-page-title="Systémová hlášení">Systémová hlášení</a>).</li></ul><p>Poznámka: Uvedené požadavky je aktuálně nutné řešit především s ohledem na komunikaci s aplikací <strong>Picker</strong>.</p><ul><li>Mělo by se však jednat o obecné chování na úrovni celé aplikace.</li><li>V takovém případě je dále nutné komunikovat s dodavateli napojených systémů.</li><li>Obecně se jedná o integrace uvede zde: <a href="#" data-page-title="API používaná 3. stranami">API používaná 3. stranami</a>.</li></ul><h1>Revize</h1><h2>19. 5. 2025: Tomáš Nadrchal</h2><table><tbody><tr><th>Odkaz</th><th>Stručný popis změny</th></tr><tr><td colspan="1"><a href="nefunkcionalni-88034876.html">Předávání systémových hlášení</a></td><td colspan="1">Doplněn popis požadavků na předávání systémových hlášení (naznačeno modře).</td></tr></tbody></table><h2>1. 7. 2020: Tomáš Nadrchal</h2><table><tbody><tr><th>Odkaz</th><th>Stručný popis změny</th></tr><tr><td colspan="1"><a href="nefunkcionalni-88034876.html">Multitenantní režim</a></td><td colspan="1">Doplněna specifikace, jakým systém volá FLWW2 API (naznačeno modře).</td></tr></tbody></table>
</div>
</body>
</html>
